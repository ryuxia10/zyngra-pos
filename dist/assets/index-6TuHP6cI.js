var JT=Object.defineProperty;var ZT=(t,e,n)=>e in t?JT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ge=(t,e,n)=>ZT(t,typeof e!="symbol"?e+"":e,n);function eC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function F4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var V4={exports:{}},O0={},B4={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=Symbol.for("react.element"),tC=Symbol.for("react.portal"),nC=Symbol.for("react.fragment"),rC=Symbol.for("react.strict_mode"),iC=Symbol.for("react.profiler"),sC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),Zx=Symbol.iterator;function hC(t){return t===null||typeof t!="object"?null:(t=Zx&&t[Zx]||t["@@iterator"],typeof t=="function"?t:null)}var U4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z4=Object.assign,q4={};function Hh(t,e,n){this.props=t,this.context=e,this.refs=q4,this.updater=n||U4}Hh.prototype.isReactComponent={};Hh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H4(){}H4.prototype=Hh.prototype;function lb(t,e,n){this.props=t,this.context=e,this.refs=q4,this.updater=n||U4}var cb=lb.prototype=new H4;cb.constructor=lb;z4(cb,Hh.prototype);cb.isPureReactComponent=!0;var e_=Array.isArray,W4=Object.prototype.hasOwnProperty,ub={current:null},$4={key:!0,ref:!0,__self:!0,__source:!0};function K4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)W4.call(e,r)&&!$4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xp,type:t,key:s,ref:o,props:i,_owner:ub.current}}function dC(t,e){return{$$typeof:xp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hb(t){return typeof t=="object"&&t!==null&&t.$$typeof===xp}function fC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t_=/\/+/g;function X1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fC(""+t.key):e.toString(36)}function im(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xp:case tC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+X1(o,0):r,e_(i)?(n="",t!=null&&(n=t.replace(t_,"$&/")+"/"),im(i,e,n,"",function(c){return c})):i!=null&&(hb(i)&&(i=dC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(t_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",e_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+X1(s,a);o+=im(s,e,n,l,i)}else if(l=hC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+X1(s,a++),o+=im(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gg(t,e,n){if(t==null)return t;var r=[],i=0;return im(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bi={current:null},sm={transition:null},gC={ReactCurrentDispatcher:bi,ReactCurrentBatchConfig:sm,ReactCurrentOwner:ub};function G4(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:gg,forEach:function(t,e,n){gg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gg(t,function(){e++}),e},toArray:function(t){return gg(t,function(e){return e})||[]},only:function(t){if(!hb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dt.Component=Hh;Dt.Fragment=nC;Dt.Profiler=iC;Dt.PureComponent=lb;Dt.StrictMode=rC;Dt.Suspense=lC;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;Dt.act=G4;Dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=z4({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ub.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)W4.call(e,l)&&!$4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:xp,type:t.type,key:i,ref:s,props:r,_owner:o}};Dt.createContext=function(t){return t={$$typeof:oC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sC,_context:t},t.Consumer=t};Dt.createElement=K4;Dt.createFactory=function(t){var e=K4.bind(null,t);return e.type=t,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(t){return{$$typeof:aC,render:t}};Dt.isValidElement=hb;Dt.lazy=function(t){return{$$typeof:uC,_payload:{_status:-1,_result:t},_init:pC}};Dt.memo=function(t,e){return{$$typeof:cC,type:t,compare:e===void 0?null:e}};Dt.startTransition=function(t){var e=sm.transition;sm.transition={};try{t()}finally{sm.transition=e}};Dt.unstable_act=G4;Dt.useCallback=function(t,e){return bi.current.useCallback(t,e)};Dt.useContext=function(t){return bi.current.useContext(t)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(t){return bi.current.useDeferredValue(t)};Dt.useEffect=function(t,e){return bi.current.useEffect(t,e)};Dt.useId=function(){return bi.current.useId()};Dt.useImperativeHandle=function(t,e,n){return bi.current.useImperativeHandle(t,e,n)};Dt.useInsertionEffect=function(t,e){return bi.current.useInsertionEffect(t,e)};Dt.useLayoutEffect=function(t,e){return bi.current.useLayoutEffect(t,e)};Dt.useMemo=function(t,e){return bi.current.useMemo(t,e)};Dt.useReducer=function(t,e,n){return bi.current.useReducer(t,e,n)};Dt.useRef=function(t){return bi.current.useRef(t)};Dt.useState=function(t){return bi.current.useState(t)};Dt.useSyncExternalStore=function(t,e,n){return bi.current.useSyncExternalStore(t,e,n)};Dt.useTransition=function(){return bi.current.useTransition()};Dt.version="18.3.1";B4.exports=Dt;var le=B4.exports;const ps=bp(le),mC=eC({__proto__:null,default:ps},[le]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=le,vC=Symbol.for("react.element"),bC=Symbol.for("react.fragment"),xC=Object.prototype.hasOwnProperty,_C=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wC={key:!0,ref:!0,__self:!0,__source:!0};function Y4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xC.call(e,r)&&!wC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vC,type:t,key:s,ref:o,props:i,_owner:_C.current}}O0.Fragment=bC;O0.jsx=Y4;O0.jsxs=Y4;V4.exports=O0;var N=V4.exports,dv={},Q4={exports:{}},Zi={},X4={exports:{}},J4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,H){var ne=O.length;O.push(H);e:for(;0<ne;){var ae=ne-1>>>1,F=O[ae];if(0<i(F,H))O[ae]=H,O[ne]=F,ne=ae;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],ne=O.pop();if(ne!==H){O[0]=ne;e:for(var ae=0,F=O.length,Y=F>>>1;ae<Y;){var Z=2*(ae+1)-1,Q=O[Z],re=Z+1,ce=O[re];if(0>i(Q,ne))re<F&&0>i(ce,Q)?(O[ae]=ce,O[re]=ne,ae=re):(O[ae]=Q,O[Z]=ne,ae=Z);else if(re<F&&0>i(ce,ne))O[ae]=ce,O[re]=ne,ae=re;else break e}}return H}function i(O,H){var ne=O.sortIndex-H.sortIndex;return ne!==0?ne:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,f=!1,y=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(O){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=O)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function R(O){if(b=!1,k(O),!y)if(n(l)!==null)y=!0,U(M);else{var H=n(c);H!==null&&W(R,H.startTime-O)}}function M(O,H){y=!1,b&&(b=!1,v(S),S=-1),f=!0;var ne=p;try{for(k(H),h=n(l);h!==null&&(!(h.expirationTime>H)||O&&!x());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var F=ae(h.expirationTime<=H);H=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(l)&&r(l),k(H)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var Z=n(c);Z!==null&&W(R,Z.startTime-H),Y=!1}return Y}finally{h=null,p=ne,f=!1}}var z=!1,I=null,S=-1,L=5,D=-1;function x(){return!(t.unstable_now()-D<L)}function w(){if(I!==null){var O=t.unstable_now();D=O;var H=!0;try{H=I(!0,O)}finally{H?P():(z=!1,I=null)}}else z=!1}var P;if(typeof _=="function")P=function(){_(w)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=w,P=function(){q.postMessage(null)}}else P=function(){A(w,0)};function U(O){I=O,z||(z=!0,P())}function W(O,H){S=A(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,U(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var ne=p;p=H;try{return O()}finally{p=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ne=p;p=O;try{return H()}finally{p=ne}},t.unstable_scheduleCallback=function(O,H,ne){var ae=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,O){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ne+F,O={id:u++,callback:H,priorityLevel:O,startTime:ne,expirationTime:F,sortIndex:-1},ne>ae?(O.sortIndex=ne,e(c,O),n(l)===null&&O===n(c)&&(b?(v(S),S=-1):b=!0,W(R,ne-ae))):(O.sortIndex=F,e(l,O),y||f||(y=!0,U(M))),O},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(O){var H=p;return function(){var ne=p;p=H;try{return O.apply(this,arguments)}finally{p=ne}}}})(J4);X4.exports=J4;var SC=X4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC=le,Ji=SC;function He(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z4=new Set,Tf={};function lu(t,e){Ah(t,e),Ah(t+"Capture",e)}function Ah(t,e){for(Tf[t]=e,t=0;t<e.length;t++)Z4.add(e[t])}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fv=Object.prototype.hasOwnProperty,AC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n_={},r_={};function EC(t){return fv.call(r_,t)?!0:fv.call(n_,t)?!1:AC.test(t)?r_[t]=!0:(n_[t]=!0,!1)}function IC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NC(t,e,n,r){if(e===null||typeof e>"u"||IC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jr[t]=new xi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jr[e]=new xi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jr[t]=new xi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jr[t]=new xi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jr[t]=new xi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jr[t]=new xi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jr[t]=new xi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jr[t]=new xi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jr[t]=new xi(t,5,!1,t.toLowerCase(),null,!1,!1)});var db=/[\-:]([a-z])/g;function fb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(db,fb);jr[e]=new xi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(db,fb);jr[e]=new xi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(db,fb);jr[e]=new xi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jr[t]=new xi(t,1,!1,t.toLowerCase(),null,!1,!1)});jr.xlinkHref=new xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jr[t]=new xi(t,1,!1,t.toLowerCase(),null,!0,!0)});function pb(t,e,n,r){var i=jr.hasOwnProperty(e)?jr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NC(e,n,i,r)&&(n=null),r||i===null?EC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sa=kC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mg=Symbol.for("react.element"),eh=Symbol.for("react.portal"),th=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),pv=Symbol.for("react.profiler"),e3=Symbol.for("react.provider"),t3=Symbol.for("react.context"),mb=Symbol.for("react.forward_ref"),gv=Symbol.for("react.suspense"),mv=Symbol.for("react.suspense_list"),yb=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),n3=Symbol.for("react.offscreen"),i_=Symbol.iterator;function vd(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var On=Object.assign,J1;function jd(t){if(J1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);J1=e&&e[1]||""}return`
`+J1+t}var Z1=!1;function ey(t,e){if(!t||Z1)return"";Z1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Z1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jd(t):""}function PC(t){switch(t.tag){case 5:return jd(t.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return t=ey(t.type,!1),t;case 11:return t=ey(t.type.render,!1),t;case 1:return t=ey(t.type,!0),t;default:return""}}function yv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case th:return"Fragment";case eh:return"Portal";case pv:return"Profiler";case gb:return"StrictMode";case gv:return"Suspense";case mv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t3:return(t.displayName||"Context")+".Consumer";case e3:return(t._context.displayName||"Context")+".Provider";case mb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yb:return e=t.displayName||null,e!==null?e:yv(t.type)||"Memo";case al:e=t._payload,t=t._init;try{return yv(t(e))}catch{}}return null}function TC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yv(e);case 8:return e===gb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r3(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CC(t){var e=r3(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yg(t){t._valueTracker||(t._valueTracker=CC(t))}function i3(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r3(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vv(t,e){var n=e.checked;return On({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s3(t,e){e=e.checked,e!=null&&pb(t,"checked",e,!1)}function bv(t,e){s3(t,e);var n=Bl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xv(t,e.type,n):e.hasOwnProperty("defaultValue")&&xv(t,e.type,Bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xv(t,e,n){(e!=="number"||Rm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fd=Array.isArray;function ph(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _v(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(He(91));return On({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(He(92));if(Fd(n)){if(1<n.length)throw Error(He(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bl(n)}}function o3(t,e){var n=Bl(e.value),r=Bl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function l_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a3(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vg,l3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vg=vg||document.createElement("div"),vg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LC=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(t){LC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ef[e]=ef[t]})});function c3(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ef.hasOwnProperty(t)&&ef[t]?(""+e).trim():e+"px"}function u3(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=c3(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var RC=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sv(t,e){if(e){if(RC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(He(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(He(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(He(61))}if(e.style!=null&&typeof e.style!="object")throw Error(He(62))}}function kv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Av=null;function vb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ev=null,gh=null,mh=null;function c_(t){if(t=Sp(t)){if(typeof Ev!="function")throw Error(He(280));var e=t.stateNode;e&&(e=U0(e),Ev(t.stateNode,t.type,e))}}function h3(t){gh?mh?mh.push(t):mh=[t]:gh=t}function d3(){if(gh){var t=gh,e=mh;if(mh=gh=null,c_(t),e)for(t=0;t<e.length;t++)c_(e[t])}}function f3(t,e){return t(e)}function p3(){}var ty=!1;function g3(t,e,n){if(ty)return t(e,n);ty=!0;try{return f3(t,e,n)}finally{ty=!1,(gh!==null||mh!==null)&&(p3(),d3())}}function Lf(t,e){var n=t.stateNode;if(n===null)return null;var r=U0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(He(231,e,typeof n));return n}var Iv=!1;if(ga)try{var bd={};Object.defineProperty(bd,"passive",{get:function(){Iv=!0}}),window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{Iv=!1}function DC(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var tf=!1,Dm=null,Mm=!1,Nv=null,MC={onError:function(t){tf=!0,Dm=t}};function OC(t,e,n,r,i,s,o,a,l){tf=!1,Dm=null,DC.apply(MC,arguments)}function jC(t,e,n,r,i,s,o,a,l){if(OC.apply(this,arguments),tf){if(tf){var c=Dm;tf=!1,Dm=null}else throw Error(He(198));Mm||(Mm=!0,Nv=c)}}function cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u_(t){if(cu(t)!==t)throw Error(He(188))}function FC(t){var e=t.alternate;if(!e){if(e=cu(t),e===null)throw Error(He(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u_(i),t;if(s===r)return u_(i),e;s=s.sibling}throw Error(He(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(He(189))}}if(n.alternate!==r)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?t:e}function y3(t){return t=FC(t),t!==null?v3(t):null}function v3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v3(t);if(e!==null)return e;t=t.sibling}return null}var b3=Ji.unstable_scheduleCallback,h_=Ji.unstable_cancelCallback,VC=Ji.unstable_shouldYield,BC=Ji.unstable_requestPaint,Qn=Ji.unstable_now,UC=Ji.unstable_getCurrentPriorityLevel,bb=Ji.unstable_ImmediatePriority,x3=Ji.unstable_UserBlockingPriority,Om=Ji.unstable_NormalPriority,zC=Ji.unstable_LowPriority,_3=Ji.unstable_IdlePriority,j0=null,vo=null;function qC(t){if(vo&&typeof vo.onCommitFiberRoot=="function")try{vo.onCommitFiberRoot(j0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:$C,HC=Math.log,WC=Math.LN2;function $C(t){return t>>>=0,t===0?32:31-(HC(t)/WC|0)|0}var bg=64,xg=4194304;function Vd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Vd(a):(s&=o,s!==0&&(r=Vd(s)))}else o=n&~i,o!==0?r=Vd(o):s!==0&&(r=Vd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vs(e),i=1<<n,r|=t[n],e&=~i;return r}function KC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=KC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Pv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w3(){var t=bg;return bg<<=1,!(bg&4194240)&&(bg=64),t}function ny(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _p(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=n}function YC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var sn=0;function S3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k3,_b,A3,E3,I3,Tv=!1,_g=[],El=null,Il=null,Nl=null,Rf=new Map,Df=new Map,cl=[],QC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d_(t,e){switch(t){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Rf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(e.pointerId)}}function xd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sp(e),e!==null&&_b(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XC(t,e,n,r,i){switch(e){case"focusin":return El=xd(El,t,e,n,r,i),!0;case"dragenter":return Il=xd(Il,t,e,n,r,i),!0;case"mouseover":return Nl=xd(Nl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rf.set(s,xd(Rf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Df.set(s,xd(Df.get(s)||null,t,e,n,r,i)),!0}return!1}function N3(t){var e=Dc(t.target);if(e!==null){var n=cu(e);if(n!==null){if(e=n.tag,e===13){if(e=m3(n),e!==null){t.blockedOn=e,I3(t.priority,function(){A3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function om(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Av=r,n.target.dispatchEvent(r),Av=null}else return e=Sp(n),e!==null&&_b(e),t.blockedOn=n,!1;e.shift()}return!0}function f_(t,e,n){om(t)&&n.delete(e)}function JC(){Tv=!1,El!==null&&om(El)&&(El=null),Il!==null&&om(Il)&&(Il=null),Nl!==null&&om(Nl)&&(Nl=null),Rf.forEach(f_),Df.forEach(f_)}function _d(t,e){t.blockedOn===e&&(t.blockedOn=null,Tv||(Tv=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,JC)))}function Mf(t){function e(i){return _d(i,t)}if(0<_g.length){_d(_g[0],t);for(var n=1;n<_g.length;n++){var r=_g[n];r.blockedOn===t&&(r.blockedOn=null)}}for(El!==null&&_d(El,t),Il!==null&&_d(Il,t),Nl!==null&&_d(Nl,t),Rf.forEach(e),Df.forEach(e),n=0;n<cl.length;n++)r=cl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cl.length&&(n=cl[0],n.blockedOn===null);)N3(n),n.blockedOn===null&&cl.shift()}var yh=Sa.ReactCurrentBatchConfig,Fm=!0;function ZC(t,e,n,r){var i=sn,s=yh.transition;yh.transition=null;try{sn=1,wb(t,e,n,r)}finally{sn=i,yh.transition=s}}function e6(t,e,n,r){var i=sn,s=yh.transition;yh.transition=null;try{sn=4,wb(t,e,n,r)}finally{sn=i,yh.transition=s}}function wb(t,e,n,r){if(Fm){var i=Cv(t,e,n,r);if(i===null)dy(t,e,r,Vm,n),d_(t,r);else if(XC(i,t,e,n,r))r.stopPropagation();else if(d_(t,r),e&4&&-1<QC.indexOf(t)){for(;i!==null;){var s=Sp(i);if(s!==null&&k3(s),s=Cv(t,e,n,r),s===null&&dy(t,e,r,Vm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dy(t,e,r,null,n)}}var Vm=null;function Cv(t,e,n,r){if(Vm=null,t=vb(r),t=Dc(t),t!==null)if(e=cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vm=t,null}function P3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case bb:return 1;case x3:return 4;case Om:case zC:return 16;case _3:return 536870912;default:return 16}default:return 16}}var ml=null,Sb=null,am=null;function T3(){if(am)return am;var t,e=Sb,n=e.length,r,i="value"in ml?ml.value:ml.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return am=i.slice(t,1<r?1-r:void 0)}function lm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wg(){return!0}function p_(){return!1}function es(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wg:p_,this.isPropagationStopped=p_,this}return On(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wg)},persist:function(){},isPersistent:wg}),e}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kb=es(Wh),wp=On({},Wh,{view:0,detail:0}),t6=es(wp),ry,iy,wd,F0=On({},wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ab,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wd&&(wd&&t.type==="mousemove"?(ry=t.screenX-wd.screenX,iy=t.screenY-wd.screenY):iy=ry=0,wd=t),ry)},movementY:function(t){return"movementY"in t?t.movementY:iy}}),g_=es(F0),n6=On({},F0,{dataTransfer:0}),r6=es(n6),i6=On({},wp,{relatedTarget:0}),sy=es(i6),s6=On({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),o6=es(s6),a6=On({},Wh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l6=es(a6),c6=On({},Wh,{data:0}),m_=es(c6),u6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d6[t])?!!e[t]:!1}function Ab(){return f6}var p6=On({},wp,{key:function(t){if(t.key){var e=u6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?h6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ab,charCode:function(t){return t.type==="keypress"?lm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),g6=es(p6),m6=On({},F0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y_=es(m6),y6=On({},wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ab}),v6=es(y6),b6=On({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),x6=es(b6),_6=On({},F0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w6=es(_6),S6=[9,13,27,32],Eb=ga&&"CompositionEvent"in window,nf=null;ga&&"documentMode"in document&&(nf=document.documentMode);var k6=ga&&"TextEvent"in window&&!nf,C3=ga&&(!Eb||nf&&8<nf&&11>=nf),v_=" ",b_=!1;function L3(t,e){switch(t){case"keyup":return S6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nh=!1;function A6(t,e){switch(t){case"compositionend":return R3(e);case"keypress":return e.which!==32?null:(b_=!0,v_);case"textInput":return t=e.data,t===v_&&b_?null:t;default:return null}}function E6(t,e){if(nh)return t==="compositionend"||!Eb&&L3(t,e)?(t=T3(),am=Sb=ml=null,nh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C3&&e.locale!=="ko"?null:e.data;default:return null}}var I6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!I6[t.type]:e==="textarea"}function D3(t,e,n,r){h3(r),e=Bm(e,"onChange"),0<e.length&&(n=new kb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rf=null,Of=null;function N6(t){W3(t,0)}function V0(t){var e=sh(t);if(i3(e))return t}function P6(t,e){if(t==="change")return e}var M3=!1;if(ga){var oy;if(ga){var ay="oninput"in document;if(!ay){var __=document.createElement("div");__.setAttribute("oninput","return;"),ay=typeof __.oninput=="function"}oy=ay}else oy=!1;M3=oy&&(!document.documentMode||9<document.documentMode)}function w_(){rf&&(rf.detachEvent("onpropertychange",O3),Of=rf=null)}function O3(t){if(t.propertyName==="value"&&V0(Of)){var e=[];D3(e,Of,t,vb(t)),g3(N6,e)}}function T6(t,e,n){t==="focusin"?(w_(),rf=e,Of=n,rf.attachEvent("onpropertychange",O3)):t==="focusout"&&w_()}function C6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V0(Of)}function L6(t,e){if(t==="click")return V0(e)}function R6(t,e){if(t==="input"||t==="change")return V0(e)}function D6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qs=typeof Object.is=="function"?Object.is:D6;function jf(t,e){if(qs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fv.call(e,i)||!qs(t[i],e[i]))return!1}return!0}function S_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function k_(t,e){var n=S_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S_(n)}}function j3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function F3(){for(var t=window,e=Rm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rm(t.document)}return e}function Ib(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M6(t){var e=F3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j3(n.ownerDocument.documentElement,n)){if(r!==null&&Ib(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=k_(n,s);var o=k_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O6=ga&&"documentMode"in document&&11>=document.documentMode,rh=null,Lv=null,sf=null,Rv=!1;function A_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rv||rh==null||rh!==Rm(r)||(r=rh,"selectionStart"in r&&Ib(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sf&&jf(sf,r)||(sf=r,r=Bm(Lv,"onSelect"),0<r.length&&(e=new kb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rh)))}function Sg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ih={animationend:Sg("Animation","AnimationEnd"),animationiteration:Sg("Animation","AnimationIteration"),animationstart:Sg("Animation","AnimationStart"),transitionend:Sg("Transition","TransitionEnd")},ly={},V3={};ga&&(V3=document.createElement("div").style,"AnimationEvent"in window||(delete ih.animationend.animation,delete ih.animationiteration.animation,delete ih.animationstart.animation),"TransitionEvent"in window||delete ih.transitionend.transition);function B0(t){if(ly[t])return ly[t];if(!ih[t])return t;var e=ih[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V3)return ly[t]=e[n];return t}var B3=B0("animationend"),U3=B0("animationiteration"),z3=B0("animationstart"),q3=B0("transitionend"),H3=new Map,E_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(t,e){H3.set(t,e),lu(e,[t])}for(var cy=0;cy<E_.length;cy++){var uy=E_[cy],j6=uy.toLowerCase(),F6=uy[0].toUpperCase()+uy.slice(1);Ql(j6,"on"+F6)}Ql(B3,"onAnimationEnd");Ql(U3,"onAnimationIteration");Ql(z3,"onAnimationStart");Ql("dblclick","onDoubleClick");Ql("focusin","onFocus");Ql("focusout","onBlur");Ql(q3,"onTransitionEnd");Ah("onMouseEnter",["mouseout","mouseover"]);Ah("onMouseLeave",["mouseout","mouseover"]);Ah("onPointerEnter",["pointerout","pointerover"]);Ah("onPointerLeave",["pointerout","pointerover"]);lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bd));function I_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jC(r,e,void 0,t),t.currentTarget=null}function W3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;I_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;I_(i,a,c),s=l}}}if(Mm)throw t=Nv,Mm=!1,Nv=null,t}function xn(t,e){var n=e[Fv];n===void 0&&(n=e[Fv]=new Set);var r=t+"__bubble";n.has(r)||($3(e,t,2,!1),n.add(r))}function hy(t,e,n){var r=0;e&&(r|=4),$3(n,t,r,e)}var kg="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[kg]){t[kg]=!0,Z4.forEach(function(n){n!=="selectionchange"&&(V6.has(n)||hy(n,!1,t),hy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kg]||(e[kg]=!0,hy("selectionchange",!1,e))}}function $3(t,e,n,r){switch(P3(e)){case 1:var i=ZC;break;case 4:i=e6;break;default:i=wb}n=i.bind(null,e,n,t),i=void 0,!Iv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function dy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}g3(function(){var c=s,u=vb(n),h=[];e:{var p=H3.get(t);if(p!==void 0){var f=kb,y=t;switch(t){case"keypress":if(lm(n)===0)break e;case"keydown":case"keyup":f=g6;break;case"focusin":y="focus",f=sy;break;case"focusout":y="blur",f=sy;break;case"beforeblur":case"afterblur":f=sy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=g_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=r6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=v6;break;case B3:case U3:case z3:f=o6;break;case q3:f=x6;break;case"scroll":f=t6;break;case"wheel":f=w6;break;case"copy":case"cut":case"paste":f=l6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=y_}var b=(e&4)!==0,A=!b&&t==="scroll",v=b?p!==null?p+"Capture":null:p;b=[];for(var _=c,k;_!==null;){k=_;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,v!==null&&(R=Lf(_,v),R!=null&&b.push(Vf(_,R,k)))),A)break;_=_.return}0<b.length&&(p=new f(p,y,null,n,u),h.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==Av&&(y=n.relatedTarget||n.fromElement)&&(Dc(y)||y[ma]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(y=n.relatedTarget||n.toElement,f=c,y=y?Dc(y):null,y!==null&&(A=cu(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=c),f!==y)){if(b=g_,R="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(b=y_,R="onPointerLeave",v="onPointerEnter",_="pointer"),A=f==null?p:sh(f),k=y==null?p:sh(y),p=new b(R,_+"leave",f,n,u),p.target=A,p.relatedTarget=k,R=null,Dc(u)===c&&(b=new b(v,_+"enter",y,n,u),b.target=k,b.relatedTarget=A,R=b),A=R,f&&y)t:{for(b=f,v=y,_=0,k=b;k;k=qu(k))_++;for(k=0,R=v;R;R=qu(R))k++;for(;0<_-k;)b=qu(b),_--;for(;0<k-_;)v=qu(v),k--;for(;_--;){if(b===v||v!==null&&b===v.alternate)break t;b=qu(b),v=qu(v)}b=null}else b=null;f!==null&&N_(h,p,f,b,!1),y!==null&&A!==null&&N_(h,A,y,b,!0)}}e:{if(p=c?sh(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var M=P6;else if(x_(p))if(M3)M=R6;else{M=C6;var z=T6}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=L6);if(M&&(M=M(t,c))){D3(h,M,n,u);break e}z&&z(t,p,c),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&xv(p,"number",p.value)}switch(z=c?sh(c):window,t){case"focusin":(x_(z)||z.contentEditable==="true")&&(rh=z,Lv=c,sf=null);break;case"focusout":sf=Lv=rh=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,A_(h,n,u);break;case"selectionchange":if(O6)break;case"keydown":case"keyup":A_(h,n,u)}var I;if(Eb)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else nh?L3(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(C3&&n.locale!=="ko"&&(nh||S!=="onCompositionStart"?S==="onCompositionEnd"&&nh&&(I=T3()):(ml=u,Sb="value"in ml?ml.value:ml.textContent,nh=!0)),z=Bm(c,S),0<z.length&&(S=new m_(S,t,null,n,u),h.push({event:S,listeners:z}),I?S.data=I:(I=R3(n),I!==null&&(S.data=I)))),(I=k6?A6(t,n):E6(t,n))&&(c=Bm(c,"onBeforeInput"),0<c.length&&(u=new m_("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=I))}W3(h,e)})}function Vf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lf(t,n),s!=null&&r.unshift(Vf(t,s,i)),s=Lf(t,e),s!=null&&r.push(Vf(t,s,i))),t=t.return}return r}function qu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function N_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Lf(n,s),l!=null&&o.unshift(Vf(n,l,a))):i||(l=Lf(n,s),l!=null&&o.push(Vf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var B6=/\r\n?/g,U6=/\u0000|\uFFFD/g;function P_(t){return(typeof t=="string"?t:""+t).replace(B6,`
`).replace(U6,"")}function Ag(t,e,n){if(e=P_(e),P_(t)!==e&&n)throw Error(He(425))}function Um(){}var Dv=null,Mv=null;function Ov(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jv=typeof setTimeout=="function"?setTimeout:void 0,z6=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,q6=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(t){return T_.resolve(null).then(t).catch(H6)}:jv;function H6(t){setTimeout(function(){throw t})}function fy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Mf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mf(e)}function Pl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $h=Math.random().toString(36).slice(2),po="__reactFiber$"+$h,Bf="__reactProps$"+$h,ma="__reactContainer$"+$h,Fv="__reactEvents$"+$h,W6="__reactListeners$"+$h,$6="__reactHandles$"+$h;function Dc(t){var e=t[po];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ma]||n[po]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C_(t);t!==null;){if(n=t[po])return n;t=C_(t)}return e}t=n,n=t.parentNode}return null}function Sp(t){return t=t[po]||t[ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(He(33))}function U0(t){return t[Bf]||null}var Vv=[],oh=-1;function Xl(t){return{current:t}}function wn(t){0>oh||(t.current=Vv[oh],Vv[oh]=null,oh--)}function yn(t,e){oh++,Vv[oh]=t.current,t.current=e}var Ul={},ii=Xl(Ul),Ri=Xl(!1),Gc=Ul;function Eh(t,e){var n=t.type.contextTypes;if(!n)return Ul;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Di(t){return t=t.childContextTypes,t!=null}function zm(){wn(Ri),wn(ii)}function L_(t,e,n){if(ii.current!==Ul)throw Error(He(168));yn(ii,e),yn(Ri,n)}function K3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(He(108,TC(t)||"Unknown",i));return On({},n,r)}function qm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ul,Gc=ii.current,yn(ii,t),yn(Ri,Ri.current),!0}function R_(t,e,n){var r=t.stateNode;if(!r)throw Error(He(169));n?(t=K3(t,e,Gc),r.__reactInternalMemoizedMergedChildContext=t,wn(Ri),wn(ii),yn(ii,t)):wn(Ri),yn(Ri,n)}var ra=null,z0=!1,py=!1;function G3(t){ra===null?ra=[t]:ra.push(t)}function K6(t){z0=!0,G3(t)}function Jl(){if(!py&&ra!==null){py=!0;var t=0,e=sn;try{var n=ra;for(sn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ra=null,z0=!1}catch(i){throw ra!==null&&(ra=ra.slice(t+1)),b3(bb,Jl),i}finally{sn=e,py=!1}}return null}var ah=[],lh=0,Hm=null,Wm=0,hs=[],ds=0,Yc=null,sa=1,oa="";function Nc(t,e){ah[lh++]=Wm,ah[lh++]=Hm,Hm=t,Wm=e}function Y3(t,e,n){hs[ds++]=sa,hs[ds++]=oa,hs[ds++]=Yc,Yc=t;var r=sa;t=oa;var i=32-Vs(r)-1;r&=~(1<<i),n+=1;var s=32-Vs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,sa=1<<32-Vs(e)+i|n<<i|r,oa=s+t}else sa=1<<s|n<<i|r,oa=t}function Nb(t){t.return!==null&&(Nc(t,1),Y3(t,1,0))}function Pb(t){for(;t===Hm;)Hm=ah[--lh],ah[lh]=null,Wm=ah[--lh],ah[lh]=null;for(;t===Yc;)Yc=hs[--ds],hs[ds]=null,oa=hs[--ds],hs[ds]=null,sa=hs[--ds],hs[ds]=null}var Qi=null,Ki=null,In=!1,Os=null;function Q3(t,e){var n=fs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qi=t,Ki=Pl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qi=t,Ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yc!==null?{id:sa,overflow:oa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qi=t,Ki=null,!0):!1;default:return!1}}function Bv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uv(t){if(In){var e=Ki;if(e){var n=e;if(!D_(t,e)){if(Bv(t))throw Error(He(418));e=Pl(n.nextSibling);var r=Qi;e&&D_(t,e)?Q3(r,n):(t.flags=t.flags&-4097|2,In=!1,Qi=t)}}else{if(Bv(t))throw Error(He(418));t.flags=t.flags&-4097|2,In=!1,Qi=t}}}function M_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qi=t}function Eg(t){if(t!==Qi)return!1;if(!In)return M_(t),In=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ov(t.type,t.memoizedProps)),e&&(e=Ki)){if(Bv(t))throw X3(),Error(He(418));for(;e;)Q3(t,e),e=Pl(e.nextSibling)}if(M_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(He(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ki=Pl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ki=null}}else Ki=Qi?Pl(t.stateNode.nextSibling):null;return!0}function X3(){for(var t=Ki;t;)t=Pl(t.nextSibling)}function Ih(){Ki=Qi=null,In=!1}function Tb(t){Os===null?Os=[t]:Os.push(t)}var G6=Sa.ReactCurrentBatchConfig;function Sd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var r=n.stateNode}if(!r)throw Error(He(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,t))}return t}function Ig(t,e){throw t=Object.prototype.toString.call(e),Error(He(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function O_(t){var e=t._init;return e(t._payload)}function J3(t){function e(v,_){if(t){var k=v.deletions;k===null?(v.deletions=[_],v.flags|=16):k.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Rl(v,_),v.index=0,v.sibling=null,v}function s(v,_,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<_?(v.flags|=2,_):k):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,k,R){return _===null||_.tag!==6?(_=_y(k,v.mode,R),_.return=v,_):(_=i(_,k),_.return=v,_)}function l(v,_,k,R){var M=k.type;return M===th?u(v,_,k.props.children,R,k.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===al&&O_(M)===_.type)?(R=i(_,k.props),R.ref=Sd(v,_,k),R.return=v,R):(R=gm(k.type,k.key,k.props,null,v.mode,R),R.ref=Sd(v,_,k),R.return=v,R)}function c(v,_,k,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=wy(k,v.mode,R),_.return=v,_):(_=i(_,k.children||[]),_.return=v,_)}function u(v,_,k,R,M){return _===null||_.tag!==7?(_=Bc(k,v.mode,R,M),_.return=v,_):(_=i(_,k),_.return=v,_)}function h(v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_y(""+_,v.mode,k),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case mg:return k=gm(_.type,_.key,_.props,null,v.mode,k),k.ref=Sd(v,null,_),k.return=v,k;case eh:return _=wy(_,v.mode,k),_.return=v,_;case al:var R=_._init;return h(v,R(_._payload),k)}if(Fd(_)||vd(_))return _=Bc(_,v.mode,k,null),_.return=v,_;Ig(v,_)}return null}function p(v,_,k,R){var M=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:a(v,_,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case mg:return k.key===M?l(v,_,k,R):null;case eh:return k.key===M?c(v,_,k,R):null;case al:return M=k._init,p(v,_,M(k._payload),R)}if(Fd(k)||vd(k))return M!==null?null:u(v,_,k,R,null);Ig(v,k)}return null}function f(v,_,k,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(k)||null,a(_,v,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case mg:return v=v.get(R.key===null?k:R.key)||null,l(_,v,R,M);case eh:return v=v.get(R.key===null?k:R.key)||null,c(_,v,R,M);case al:var z=R._init;return f(v,_,k,z(R._payload),M)}if(Fd(R)||vd(R))return v=v.get(k)||null,u(_,v,R,M,null);Ig(_,R)}return null}function y(v,_,k,R){for(var M=null,z=null,I=_,S=_=0,L=null;I!==null&&S<k.length;S++){I.index>S?(L=I,I=null):L=I.sibling;var D=p(v,I,k[S],R);if(D===null){I===null&&(I=L);break}t&&I&&D.alternate===null&&e(v,I),_=s(D,_,S),z===null?M=D:z.sibling=D,z=D,I=L}if(S===k.length)return n(v,I),In&&Nc(v,S),M;if(I===null){for(;S<k.length;S++)I=h(v,k[S],R),I!==null&&(_=s(I,_,S),z===null?M=I:z.sibling=I,z=I);return In&&Nc(v,S),M}for(I=r(v,I);S<k.length;S++)L=f(I,v,S,k[S],R),L!==null&&(t&&L.alternate!==null&&I.delete(L.key===null?S:L.key),_=s(L,_,S),z===null?M=L:z.sibling=L,z=L);return t&&I.forEach(function(x){return e(v,x)}),In&&Nc(v,S),M}function b(v,_,k,R){var M=vd(k);if(typeof M!="function")throw Error(He(150));if(k=M.call(k),k==null)throw Error(He(151));for(var z=M=null,I=_,S=_=0,L=null,D=k.next();I!==null&&!D.done;S++,D=k.next()){I.index>S?(L=I,I=null):L=I.sibling;var x=p(v,I,D.value,R);if(x===null){I===null&&(I=L);break}t&&I&&x.alternate===null&&e(v,I),_=s(x,_,S),z===null?M=x:z.sibling=x,z=x,I=L}if(D.done)return n(v,I),In&&Nc(v,S),M;if(I===null){for(;!D.done;S++,D=k.next())D=h(v,D.value,R),D!==null&&(_=s(D,_,S),z===null?M=D:z.sibling=D,z=D);return In&&Nc(v,S),M}for(I=r(v,I);!D.done;S++,D=k.next())D=f(I,v,S,D.value,R),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?S:D.key),_=s(D,_,S),z===null?M=D:z.sibling=D,z=D);return t&&I.forEach(function(w){return e(v,w)}),In&&Nc(v,S),M}function A(v,_,k,R){if(typeof k=="object"&&k!==null&&k.type===th&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case mg:e:{for(var M=k.key,z=_;z!==null;){if(z.key===M){if(M=k.type,M===th){if(z.tag===7){n(v,z.sibling),_=i(z,k.props.children),_.return=v,v=_;break e}}else if(z.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===al&&O_(M)===z.type){n(v,z.sibling),_=i(z,k.props),_.ref=Sd(v,z,k),_.return=v,v=_;break e}n(v,z);break}else e(v,z);z=z.sibling}k.type===th?(_=Bc(k.props.children,v.mode,R,k.key),_.return=v,v=_):(R=gm(k.type,k.key,k.props,null,v.mode,R),R.ref=Sd(v,_,k),R.return=v,v=R)}return o(v);case eh:e:{for(z=k.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(v,_.sibling),_=i(_,k.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=wy(k,v.mode,R),_.return=v,v=_}return o(v);case al:return z=k._init,A(v,_,z(k._payload),R)}if(Fd(k))return y(v,_,k,R);if(vd(k))return b(v,_,k,R);Ig(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,k),_.return=v,v=_):(n(v,_),_=_y(k,v.mode,R),_.return=v,v=_),o(v)):n(v,_)}return A}var Nh=J3(!0),Z3=J3(!1),$m=Xl(null),Km=null,ch=null,Cb=null;function Lb(){Cb=ch=Km=null}function Rb(t){var e=$m.current;wn($m),t._currentValue=e}function zv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vh(t,e){Km=t,Cb=ch=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Li=!0),t.firstContext=null)}function ms(t){var e=t._currentValue;if(Cb!==t)if(t={context:t,memoizedValue:e,next:null},ch===null){if(Km===null)throw Error(He(308));ch=t,Km.dependencies={lanes:0,firstContext:t}}else ch=ch.next=t;return e}var Mc=null;function Db(t){Mc===null?Mc=[t]:Mc.push(t)}function eA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Db(e)):(n.next=i.next,i.next=n),e.interleaved=n,ya(t,r)}function ya(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ll=!1;function Mb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ya(t,n)}return i=r.interleaved,i===null?(e.next=e,Db(r)):(e.next=i.next,i.next=e),r.interleaved=e,ya(t,n)}function cm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xb(t,n)}}function j_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gm(t,e,n,r){var i=t.updateQueue;ll=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,f=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,b=a;switch(p=e,f=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(f,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,p=typeof y=="function"?y.call(f,h,p):y,p==null)break e;h=On({},h,p);break e;case 2:ll=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xc|=o,t.lanes=o,t.memoizedState=h}}function F_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(He(191,i));i.call(r)}}}var kp={},bo=Xl(kp),Uf=Xl(kp),zf=Xl(kp);function Oc(t){if(t===kp)throw Error(He(174));return t}function Ob(t,e){switch(yn(zf,e),yn(Uf,t),yn(bo,kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wv(e,t)}wn(bo),yn(bo,e)}function Ph(){wn(bo),wn(Uf),wn(zf)}function nA(t){Oc(zf.current);var e=Oc(bo.current),n=wv(e,t.type);e!==n&&(yn(Uf,t),yn(bo,n))}function jb(t){Uf.current===t&&(wn(bo),wn(Uf))}var Ln=Xl(0);function Ym(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gy=[];function Fb(){for(var t=0;t<gy.length;t++)gy[t]._workInProgressVersionPrimary=null;gy.length=0}var um=Sa.ReactCurrentDispatcher,my=Sa.ReactCurrentBatchConfig,Qc=0,Dn=null,dr=null,xr=null,Qm=!1,of=!1,qf=0,Y6=0;function Hr(){throw Error(He(321))}function Vb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qs(t[n],e[n]))return!1;return!0}function Bb(t,e,n,r,i,s){if(Qc=s,Dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,um.current=t===null||t.memoizedState===null?Z6:eL,t=n(r,i),of){s=0;do{if(of=!1,qf=0,25<=s)throw Error(He(301));s+=1,xr=dr=null,e.updateQueue=null,um.current=tL,t=n(r,i)}while(of)}if(um.current=Xm,e=dr!==null&&dr.next!==null,Qc=0,xr=dr=Dn=null,Qm=!1,e)throw Error(He(300));return t}function Ub(){var t=qf!==0;return qf=0,t}function ho(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Dn.memoizedState=xr=t:xr=xr.next=t,xr}function ys(){if(dr===null){var t=Dn.alternate;t=t!==null?t.memoizedState:null}else t=dr.next;var e=xr===null?Dn.memoizedState:xr.next;if(e!==null)xr=e,dr=t;else{if(t===null)throw Error(He(310));dr=t,t={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},xr===null?Dn.memoizedState=xr=t:xr=xr.next=t}return xr}function Hf(t,e){return typeof e=="function"?e(t):e}function yy(t){var e=ys(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=dr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Qc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Dn.lanes|=u,Xc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,qs(r,e.memoizedState)||(Li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Dn.lanes|=s,Xc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vy(t){var e=ys(),n=e.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);qs(s,e.memoizedState)||(Li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rA(){}function iA(t,e){var n=Dn,r=ys(),i=e(),s=!qs(r.memoizedState,i);if(s&&(r.memoizedState=i,Li=!0),r=r.queue,zb(aA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xr!==null&&xr.memoizedState.tag&1){if(n.flags|=2048,Wf(9,oA.bind(null,n,r,i,e),void 0,null),Sr===null)throw Error(He(349));Qc&30||sA(n,e,i)}return i}function sA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oA(t,e,n,r){e.value=n,e.getSnapshot=r,lA(e)&&cA(t)}function aA(t,e,n){return n(function(){lA(e)&&cA(t)})}function lA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qs(t,n)}catch{return!0}}function cA(t){var e=ya(t,1);e!==null&&Bs(e,t,1,-1)}function V_(t){var e=ho();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:t},e.queue=t,t=t.dispatch=J6.bind(null,Dn,t),[e.memoizedState,t]}function Wf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uA(){return ys().memoizedState}function hm(t,e,n,r){var i=ho();Dn.flags|=t,i.memoizedState=Wf(1|e,n,void 0,r===void 0?null:r)}function q0(t,e,n,r){var i=ys();r=r===void 0?null:r;var s=void 0;if(dr!==null){var o=dr.memoizedState;if(s=o.destroy,r!==null&&Vb(r,o.deps)){i.memoizedState=Wf(e,n,s,r);return}}Dn.flags|=t,i.memoizedState=Wf(1|e,n,s,r)}function B_(t,e){return hm(8390656,8,t,e)}function zb(t,e){return q0(2048,8,t,e)}function hA(t,e){return q0(4,2,t,e)}function dA(t,e){return q0(4,4,t,e)}function fA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pA(t,e,n){return n=n!=null?n.concat([t]):null,q0(4,4,fA.bind(null,e,t),n)}function qb(){}function gA(t,e){var n=ys();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mA(t,e){var n=ys();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yA(t,e,n){return Qc&21?(qs(n,e)||(n=w3(),Dn.lanes|=n,Xc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Li=!0),t.memoizedState=n)}function Q6(t,e){var n=sn;sn=n!==0&&4>n?n:4,t(!0);var r=my.transition;my.transition={};try{t(!1),e()}finally{sn=n,my.transition=r}}function vA(){return ys().memoizedState}function X6(t,e,n){var r=Ll(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bA(t))xA(e,n);else if(n=eA(t,e,n,r),n!==null){var i=vi();Bs(n,t,r,i),_A(n,e,r)}}function J6(t,e,n){var r=Ll(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bA(t))xA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,qs(a,o)){var l=e.interleaved;l===null?(i.next=i,Db(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=eA(t,e,i,r),n!==null&&(i=vi(),Bs(n,t,r,i),_A(n,e,r))}}function bA(t){var e=t.alternate;return t===Dn||e!==null&&e===Dn}function xA(t,e){of=Qm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _A(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xb(t,n)}}var Xm={readContext:ms,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},Z6={readContext:ms,useCallback:function(t,e){return ho().memoizedState=[t,e===void 0?null:e],t},useContext:ms,useEffect:B_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hm(4194308,4,fA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hm(4194308,4,t,e)},useInsertionEffect:function(t,e){return hm(4,2,t,e)},useMemo:function(t,e){var n=ho();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ho();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=X6.bind(null,Dn,t),[r.memoizedState,t]},useRef:function(t){var e=ho();return t={current:t},e.memoizedState=t},useState:V_,useDebugValue:qb,useDeferredValue:function(t){return ho().memoizedState=t},useTransition:function(){var t=V_(!1),e=t[0];return t=Q6.bind(null,t[1]),ho().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dn,i=ho();if(In){if(n===void 0)throw Error(He(407));n=n()}else{if(n=e(),Sr===null)throw Error(He(349));Qc&30||sA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,B_(aA.bind(null,r,s,t),[t]),r.flags|=2048,Wf(9,oA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ho(),e=Sr.identifierPrefix;if(In){var n=oa,r=sa;n=(r&~(1<<32-Vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Y6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eL={readContext:ms,useCallback:gA,useContext:ms,useEffect:zb,useImperativeHandle:pA,useInsertionEffect:hA,useLayoutEffect:dA,useMemo:mA,useReducer:yy,useRef:uA,useState:function(){return yy(Hf)},useDebugValue:qb,useDeferredValue:function(t){var e=ys();return yA(e,dr.memoizedState,t)},useTransition:function(){var t=yy(Hf)[0],e=ys().memoizedState;return[t,e]},useMutableSource:rA,useSyncExternalStore:iA,useId:vA,unstable_isNewReconciler:!1},tL={readContext:ms,useCallback:gA,useContext:ms,useEffect:zb,useImperativeHandle:pA,useInsertionEffect:hA,useLayoutEffect:dA,useMemo:mA,useReducer:vy,useRef:uA,useState:function(){return vy(Hf)},useDebugValue:qb,useDeferredValue:function(t){var e=ys();return dr===null?e.memoizedState=t:yA(e,dr.memoizedState,t)},useTransition:function(){var t=vy(Hf)[0],e=ys().memoizedState;return[t,e]},useMutableSource:rA,useSyncExternalStore:iA,useId:vA,unstable_isNewReconciler:!1};function Rs(t,e){if(t&&t.defaultProps){e=On({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:On({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var H0={isMounted:function(t){return(t=t._reactInternals)?cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vi(),i=Ll(t),s=fa(r,i);s.payload=e,n!=null&&(s.callback=n),e=Tl(t,s,i),e!==null&&(Bs(e,t,i,r),cm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vi(),i=Ll(t),s=fa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Tl(t,s,i),e!==null&&(Bs(e,t,i,r),cm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vi(),r=Ll(t),i=fa(n,r);i.tag=2,e!=null&&(i.callback=e),e=Tl(t,i,r),e!==null&&(Bs(e,t,r,n),cm(e,t,r))}};function U_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!jf(n,r)||!jf(i,s):!0}function wA(t,e,n){var r=!1,i=Ul,s=e.contextType;return typeof s=="object"&&s!==null?s=ms(s):(i=Di(e)?Gc:ii.current,r=e.contextTypes,s=(r=r!=null)?Eh(t,i):Ul),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=H0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function z_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&H0.enqueueReplaceState(e,e.state,null)}function Hv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Mb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ms(s):(s=Di(e)?Gc:ii.current,i.context=Eh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&H0.enqueueReplaceState(i,i.state,null),Gm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Th(t,e){try{var n="",r=e;do n+=PC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function by(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nL=typeof WeakMap=="function"?WeakMap:Map;function SA(t,e,n){n=fa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zm||(Zm=!0,t2=r),Wv(t,e)},n}function kA(t,e,n){n=fa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wv(t,e),typeof r!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function q_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=mL.bind(null,t,e,n),e.then(t,t))}function H_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fa(-1,1),e.tag=2,Tl(n,e,1))),n.lanes|=1),t)}var rL=Sa.ReactCurrentOwner,Li=!1;function gi(t,e,n,r){e.child=t===null?Z3(e,null,n,r):Nh(e,t.child,n,r)}function $_(t,e,n,r,i){n=n.render;var s=e.ref;return vh(e,i),r=Bb(t,e,n,r,s,i),n=Ub(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,va(t,e,i)):(In&&n&&Nb(e),e.flags|=1,gi(t,e,r,i),e.child)}function K_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AA(t,e,s,r,i)):(t=gm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jf,n(o,r)&&t.ref===e.ref)return va(t,e,i)}return e.flags|=1,t=Rl(s,r),t.ref=e.ref,t.return=e,e.child=t}function AA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jf(s,r)&&t.ref===e.ref)if(Li=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Li=!0);else return e.lanes=t.lanes,va(t,e,i)}return $v(t,e,n,r,i)}function EA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(hh,$i),$i|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yn(hh,$i),$i|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,yn(hh,$i),$i|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,yn(hh,$i),$i|=r;return gi(t,e,i,n),e.child}function IA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $v(t,e,n,r,i){var s=Di(n)?Gc:ii.current;return s=Eh(e,s),vh(e,i),n=Bb(t,e,n,r,s,i),r=Ub(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,va(t,e,i)):(In&&r&&Nb(e),e.flags|=1,gi(t,e,n,i),e.child)}function G_(t,e,n,r,i){if(Di(n)){var s=!0;qm(e)}else s=!1;if(vh(e,i),e.stateNode===null)dm(t,e),wA(e,n,r),Hv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ms(c):(c=Di(n)?Gc:ii.current,c=Eh(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&z_(e,o,r,c),ll=!1;var p=e.memoizedState;o.state=p,Gm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ri.current||ll?(typeof u=="function"&&(qv(e,n,u,r),l=e.memoizedState),(a=ll||U_(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rs(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ms(l):(l=Di(n)?Gc:ii.current,l=Eh(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&z_(e,o,r,l),ll=!1,p=e.memoizedState,o.state=p,Gm(e,r,o,i);var y=e.memoizedState;a!==h||p!==y||Ri.current||ll?(typeof f=="function"&&(qv(e,n,f,r),y=e.memoizedState),(c=ll||U_(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Kv(t,e,n,r,s,i)}function Kv(t,e,n,r,i,s){IA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&R_(e,n,!1),va(t,e,s);r=e.stateNode,rL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Nh(e,t.child,null,s),e.child=Nh(e,null,a,s)):gi(t,e,a,s),e.memoizedState=r.state,i&&R_(e,n,!0),e.child}function NA(t){var e=t.stateNode;e.pendingContext?L_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L_(t,e.context,!1),Ob(t,e.containerInfo)}function Y_(t,e,n,r,i){return Ih(),Tb(i),e.flags|=256,gi(t,e,n,r),e.child}var Gv={dehydrated:null,treeContext:null,retryLane:0};function Yv(t){return{baseLanes:t,cachePool:null,transitions:null}}function PA(t,e,n){var r=e.pendingProps,i=Ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yn(Ln,i&1),t===null)return Uv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=K0(o,r,0,null),t=Bc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yv(n),e.memoizedState=Gv,t):Hb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rl(a,s):(s=Bc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gv,r}return s=t.child,t=s.sibling,r=Rl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hb(t,e){return e=K0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ng(t,e,n,r){return r!==null&&Tb(r),Nh(e,t.child,null,n),t=Hb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=by(Error(He(422))),Ng(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=K0({mode:"visible",children:r.children},i,0,null),s=Bc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Nh(e,t.child,null,o),e.child.memoizedState=Yv(o),e.memoizedState=Gv,s);if(!(e.mode&1))return Ng(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(He(419)),r=by(s,r,void 0),Ng(t,e,o,r)}if(a=(o&t.childLanes)!==0,Li||a){if(r=Sr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ya(t,i),Bs(r,t,i,-1))}return Qb(),r=by(Error(He(421))),Ng(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ki=Pl(i.nextSibling),Qi=e,In=!0,Os=null,t!==null&&(hs[ds++]=sa,hs[ds++]=oa,hs[ds++]=Yc,sa=t.id,oa=t.overflow,Yc=e),e=Hb(e,r.children),e.flags|=4096,e)}function Q_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zv(t.return,e,n)}function xy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function TA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gi(t,e,r.children,n),r=Ln.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q_(t,n,e);else if(t.tag===19)Q_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yn(Ln,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ym(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ym(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xy(e,!0,n,null,s);break;case"together":xy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function va(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(He(153));if(e.child!==null){for(t=e.child,n=Rl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sL(t,e,n){switch(e.tag){case 3:NA(e),Ih();break;case 5:nA(e);break;case 1:Di(e.type)&&qm(e);break;case 4:Ob(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;yn($m,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yn(Ln,Ln.current&1),e.flags|=128,null):n&e.child.childLanes?PA(t,e,n):(yn(Ln,Ln.current&1),t=va(t,e,n),t!==null?t.sibling:null);yn(Ln,Ln.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yn(Ln,Ln.current),r)break;return null;case 22:case 23:return e.lanes=0,EA(t,e,n)}return va(t,e,n)}var CA,Qv,LA,RA;CA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qv=function(){};LA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oc(bo.current);var s=null;switch(n){case"input":i=vv(t,i),r=vv(t,r),s=[];break;case"select":i=On({},i,{value:void 0}),r=On({},r,{value:void 0}),s=[];break;case"textarea":i=_v(t,i),r=_v(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Um)}Sv(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};RA=function(t,e,n,r){n!==r&&(e.flags|=4)};function kd(t,e){if(!In)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oL(t,e,n){var r=e.pendingProps;switch(Pb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(e),null;case 1:return Di(e.type)&&zm(),Wr(e),null;case 3:return r=e.stateNode,Ph(),wn(Ri),wn(ii),Fb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Os!==null&&(i2(Os),Os=null))),Qv(t,e),Wr(e),null;case 5:jb(e);var i=Oc(zf.current);if(n=e.type,t!==null&&e.stateNode!=null)LA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(He(166));return Wr(e),null}if(t=Oc(bo.current),Eg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[po]=e,r[Bf]=s,t=(e.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(i=0;i<Bd.length;i++)xn(Bd[i],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":s_(r,s),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xn("invalid",r);break;case"textarea":a_(r,s),xn("invalid",r)}Sv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ag(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ag(r.textContent,a,t),i=["children",""+a]):Tf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xn("scroll",r)}switch(n){case"input":yg(r),o_(r,s,!0);break;case"textarea":yg(r),l_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Um)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a3(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[po]=e,t[Bf]=r,CA(t,e,!1,!1),e.stateNode=t;e:{switch(o=kv(n,r),n){case"dialog":xn("cancel",t),xn("close",t),i=r;break;case"iframe":case"object":case"embed":xn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bd.length;i++)xn(Bd[i],t);i=r;break;case"source":xn("error",t),i=r;break;case"img":case"image":case"link":xn("error",t),xn("load",t),i=r;break;case"details":xn("toggle",t),i=r;break;case"input":s_(t,r),i=vv(t,r),xn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=On({},r,{value:void 0}),xn("invalid",t);break;case"textarea":a_(t,r),i=_v(t,r),xn("invalid",t);break;default:i=r}Sv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?u3(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&l3(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cf(t,l):typeof l=="number"&&Cf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xn("scroll",t):l!=null&&pb(t,s,l,o))}switch(n){case"input":yg(t),o_(t,r,!1);break;case"textarea":yg(t),l_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ph(t,!!r.multiple,s,!1):r.defaultValue!=null&&ph(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Um)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wr(e),null;case 6:if(t&&e.stateNode!=null)RA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(He(166));if(n=Oc(zf.current),Oc(bo.current),Eg(e)){if(r=e.stateNode,n=e.memoizedProps,r[po]=e,(s=r.nodeValue!==n)&&(t=Qi,t!==null))switch(t.tag){case 3:Ag(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ag(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[po]=e,e.stateNode=r}return Wr(e),null;case 13:if(wn(Ln),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(In&&Ki!==null&&e.mode&1&&!(e.flags&128))X3(),Ih(),e.flags|=98560,s=!1;else if(s=Eg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(He(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(He(317));s[po]=e}else Ih(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wr(e),s=!1}else Os!==null&&(i2(Os),Os=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ln.current&1?pr===0&&(pr=3):Qb())),e.updateQueue!==null&&(e.flags|=4),Wr(e),null);case 4:return Ph(),Qv(t,e),t===null&&Ff(e.stateNode.containerInfo),Wr(e),null;case 10:return Rb(e.type._context),Wr(e),null;case 17:return Di(e.type)&&zm(),Wr(e),null;case 19:if(wn(Ln),s=e.memoizedState,s===null)return Wr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)kd(s,!1);else{if(pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ym(t),o!==null){for(e.flags|=128,kd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yn(Ln,Ln.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qn()>Ch&&(e.flags|=128,r=!0,kd(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ym(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!In)return Wr(e),null}else 2*Qn()-s.renderingStartTime>Ch&&n!==1073741824&&(e.flags|=128,r=!0,kd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qn(),e.sibling=null,n=Ln.current,yn(Ln,r?n&1|2:n&1),e):(Wr(e),null);case 22:case 23:return Yb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$i&1073741824&&(Wr(e),e.subtreeFlags&6&&(e.flags|=8192)):Wr(e),null;case 24:return null;case 25:return null}throw Error(He(156,e.tag))}function aL(t,e){switch(Pb(e),e.tag){case 1:return Di(e.type)&&zm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ph(),wn(Ri),wn(ii),Fb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jb(e),null;case 13:if(wn(Ln),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(He(340));Ih()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wn(Ln),null;case 4:return Ph(),null;case 10:return Rb(e.type._context),null;case 22:case 23:return Yb(),null;case 24:return null;default:return null}}var Pg=!1,ei=!1,lL=typeof WeakSet=="function"?WeakSet:Set,rt=null;function uh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qn(t,e,r)}else n.current=null}function Xv(t,e,n){try{n()}catch(r){qn(t,e,r)}}var X_=!1;function cL(t,e){if(Dv=Fm,t=F3(),Ib(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mv={focusedElem:t,selectionRange:n},Fm=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){e=rt;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,A=y.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:Rs(e.type,b),A);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(R){qn(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}return y=X_,X_=!1,y}function af(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xv(e,n,s)}i=i.next}while(i!==r)}}function W0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DA(t){var e=t.alternate;e!==null&&(t.alternate=null,DA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[po],delete e[Bf],delete e[Fv],delete e[W6],delete e[$6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MA(t){return t.tag===5||t.tag===3||t.tag===4}function J_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Um));else if(r!==4&&(t=t.child,t!==null))for(Zv(t,e,n),t=t.sibling;t!==null;)Zv(t,e,n),t=t.sibling}function e2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(e2(t,e,n),t=t.sibling;t!==null;)e2(t,e,n),t=t.sibling}var Tr=null,Ms=!1;function nl(t,e,n){for(n=n.child;n!==null;)OA(t,e,n),n=n.sibling}function OA(t,e,n){if(vo&&typeof vo.onCommitFiberUnmount=="function")try{vo.onCommitFiberUnmount(j0,n)}catch{}switch(n.tag){case 5:ei||uh(n,e);case 6:var r=Tr,i=Ms;Tr=null,nl(t,e,n),Tr=r,Ms=i,Tr!==null&&(Ms?(t=Tr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tr.removeChild(n.stateNode));break;case 18:Tr!==null&&(Ms?(t=Tr,n=n.stateNode,t.nodeType===8?fy(t.parentNode,n):t.nodeType===1&&fy(t,n),Mf(t)):fy(Tr,n.stateNode));break;case 4:r=Tr,i=Ms,Tr=n.stateNode.containerInfo,Ms=!0,nl(t,e,n),Tr=r,Ms=i;break;case 0:case 11:case 14:case 15:if(!ei&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xv(n,e,o),i=i.next}while(i!==r)}nl(t,e,n);break;case 1:if(!ei&&(uh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qn(n,e,a)}nl(t,e,n);break;case 21:nl(t,e,n);break;case 22:n.mode&1?(ei=(r=ei)||n.memoizedState!==null,nl(t,e,n),ei=r):nl(t,e,n);break;default:nl(t,e,n)}}function Z_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lL),e.forEach(function(r){var i=vL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ts(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tr=a.stateNode,Ms=!1;break e;case 3:Tr=a.stateNode.containerInfo,Ms=!0;break e;case 4:Tr=a.stateNode.containerInfo,Ms=!0;break e}a=a.return}if(Tr===null)throw Error(He(160));OA(s,o,i),Tr=null,Ms=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){qn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jA(e,t),e=e.sibling}function jA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ts(e,t),lo(t),r&4){try{af(3,t,t.return),W0(3,t)}catch(b){qn(t,t.return,b)}try{af(5,t,t.return)}catch(b){qn(t,t.return,b)}}break;case 1:Ts(e,t),lo(t),r&512&&n!==null&&uh(n,n.return);break;case 5:if(Ts(e,t),lo(t),r&512&&n!==null&&uh(n,n.return),t.flags&32){var i=t.stateNode;try{Cf(i,"")}catch(b){qn(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&s3(i,s),kv(a,o);var c=kv(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?u3(i,h):u==="dangerouslySetInnerHTML"?l3(i,h):u==="children"?Cf(i,h):pb(i,u,h,c)}switch(a){case"input":bv(i,s);break;case"textarea":o3(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ph(i,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?ph(i,!!s.multiple,s.defaultValue,!0):ph(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bf]=s}catch(b){qn(t,t.return,b)}}break;case 6:if(Ts(e,t),lo(t),r&4){if(t.stateNode===null)throw Error(He(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){qn(t,t.return,b)}}break;case 3:if(Ts(e,t),lo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mf(e.containerInfo)}catch(b){qn(t,t.return,b)}break;case 4:Ts(e,t),lo(t);break;case 13:Ts(e,t),lo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Kb=Qn())),r&4&&Z_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ei=(c=ei)||u,Ts(e,t),ei=c):Ts(e,t),lo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(rt=t,u=t.child;u!==null;){for(h=rt=u;rt!==null;){switch(p=rt,f=p.child,p.tag){case 0:case 11:case 14:case 15:af(4,p,p.return);break;case 1:uh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){qn(r,n,b)}}break;case 5:uh(p,p.return);break;case 22:if(p.memoizedState!==null){tw(h);continue}}f!==null?(f.return=p,rt=f):tw(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=c3("display",o))}catch(b){qn(t,t.return,b)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(b){qn(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ts(e,t),lo(t),r&4&&Z_(t);break;case 21:break;default:Ts(e,t),lo(t)}}function lo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MA(n)){var r=n;break e}n=n.return}throw Error(He(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cf(i,""),r.flags&=-33);var s=J_(t);e2(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=J_(t);Zv(t,a,o);break;default:throw Error(He(161))}}catch(l){qn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uL(t,e,n){rt=t,FA(t)}function FA(t,e,n){for(var r=(t.mode&1)!==0;rt!==null;){var i=rt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Pg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ei;a=Pg;var c=ei;if(Pg=o,(ei=l)&&!c)for(rt=i;rt!==null;)o=rt,l=o.child,o.tag===22&&o.memoizedState!==null?nw(i):l!==null?(l.return=o,rt=l):nw(i);for(;s!==null;)rt=s,FA(s),s=s.sibling;rt=i,Pg=a,ei=c}ew(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,rt=s):ew(t)}}function ew(t){for(;rt!==null;){var e=rt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||W0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Mf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}ei||e.flags&512&&Jv(e)}catch(p){qn(e,e.return,p)}}if(e===t){rt=null;break}if(n=e.sibling,n!==null){n.return=e.return,rt=n;break}rt=e.return}}function tw(t){for(;rt!==null;){var e=rt;if(e===t){rt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,rt=n;break}rt=e.return}}function nw(t){for(;rt!==null;){var e=rt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{W0(4,e)}catch(l){qn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qn(e,i,l)}}var s=e.return;try{Jv(e)}catch(l){qn(e,s,l)}break;case 5:var o=e.return;try{Jv(e)}catch(l){qn(e,o,l)}}}catch(l){qn(e,e.return,l)}if(e===t){rt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,rt=a;break}rt=e.return}}var hL=Math.ceil,Jm=Sa.ReactCurrentDispatcher,Wb=Sa.ReactCurrentOwner,gs=Sa.ReactCurrentBatchConfig,Ht=0,Sr=null,ar=null,Mr=0,$i=0,hh=Xl(0),pr=0,$f=null,Xc=0,$0=0,$b=0,lf=null,Ti=null,Kb=0,Ch=1/0,ta=null,Zm=!1,t2=null,Cl=null,Tg=!1,yl=null,e0=0,cf=0,n2=null,fm=-1,pm=0;function vi(){return Ht&6?Qn():fm!==-1?fm:fm=Qn()}function Ll(t){return t.mode&1?Ht&2&&Mr!==0?Mr&-Mr:G6.transition!==null?(pm===0&&(pm=w3()),pm):(t=sn,t!==0||(t=window.event,t=t===void 0?16:P3(t.type)),t):1}function Bs(t,e,n,r){if(50<cf)throw cf=0,n2=null,Error(He(185));_p(t,n,r),(!(Ht&2)||t!==Sr)&&(t===Sr&&(!(Ht&2)&&($0|=n),pr===4&&ul(t,Mr)),Mi(t,r),n===1&&Ht===0&&!(e.mode&1)&&(Ch=Qn()+500,z0&&Jl()))}function Mi(t,e){var n=t.callbackNode;GC(t,e);var r=jm(t,t===Sr?Mr:0);if(r===0)n!==null&&h_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&h_(n),e===1)t.tag===0?K6(rw.bind(null,t)):G3(rw.bind(null,t)),q6(function(){!(Ht&6)&&Jl()}),n=null;else{switch(S3(r)){case 1:n=bb;break;case 4:n=x3;break;case 16:n=Om;break;case 536870912:n=_3;break;default:n=Om}n=$A(n,VA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VA(t,e){if(fm=-1,pm=0,Ht&6)throw Error(He(327));var n=t.callbackNode;if(bh()&&t.callbackNode!==n)return null;var r=jm(t,t===Sr?Mr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=t0(t,r);else{e=r;var i=Ht;Ht|=2;var s=UA();(Sr!==t||Mr!==e)&&(ta=null,Ch=Qn()+500,Vc(t,e));do try{pL();break}catch(a){BA(t,a)}while(!0);Lb(),Jm.current=s,Ht=i,ar!==null?e=0:(Sr=null,Mr=0,e=pr)}if(e!==0){if(e===2&&(i=Pv(t),i!==0&&(r=i,e=r2(t,i))),e===1)throw n=$f,Vc(t,0),ul(t,r),Mi(t,Qn()),n;if(e===6)ul(t,r);else{if(i=t.current.alternate,!(r&30)&&!dL(i)&&(e=t0(t,r),e===2&&(s=Pv(t),s!==0&&(r=s,e=r2(t,s))),e===1))throw n=$f,Vc(t,0),ul(t,r),Mi(t,Qn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(He(345));case 2:Pc(t,Ti,ta);break;case 3:if(ul(t,r),(r&130023424)===r&&(e=Kb+500-Qn(),10<e)){if(jm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jv(Pc.bind(null,t,Ti,ta),e);break}Pc(t,Ti,ta);break;case 4:if(ul(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hL(r/1960))-r,10<r){t.timeoutHandle=jv(Pc.bind(null,t,Ti,ta),r);break}Pc(t,Ti,ta);break;case 5:Pc(t,Ti,ta);break;default:throw Error(He(329))}}}return Mi(t,Qn()),t.callbackNode===n?VA.bind(null,t):null}function r2(t,e){var n=lf;return t.current.memoizedState.isDehydrated&&(Vc(t,e).flags|=256),t=t0(t,e),t!==2&&(e=Ti,Ti=n,e!==null&&i2(e)),t}function i2(t){Ti===null?Ti=t:Ti.push.apply(Ti,t)}function dL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ul(t,e){for(e&=~$b,e&=~$0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vs(e),r=1<<n;t[n]=-1,e&=~r}}function rw(t){if(Ht&6)throw Error(He(327));bh();var e=jm(t,0);if(!(e&1))return Mi(t,Qn()),null;var n=t0(t,e);if(t.tag!==0&&n===2){var r=Pv(t);r!==0&&(e=r,n=r2(t,r))}if(n===1)throw n=$f,Vc(t,0),ul(t,e),Mi(t,Qn()),n;if(n===6)throw Error(He(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pc(t,Ti,ta),Mi(t,Qn()),null}function Gb(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(Ch=Qn()+500,z0&&Jl())}}function Jc(t){yl!==null&&yl.tag===0&&!(Ht&6)&&bh();var e=Ht;Ht|=1;var n=gs.transition,r=sn;try{if(gs.transition=null,sn=1,t)return t()}finally{sn=r,gs.transition=n,Ht=e,!(Ht&6)&&Jl()}}function Yb(){$i=hh.current,wn(hh)}function Vc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,z6(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(Pb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zm();break;case 3:Ph(),wn(Ri),wn(ii),Fb();break;case 5:jb(r);break;case 4:Ph();break;case 13:wn(Ln);break;case 19:wn(Ln);break;case 10:Rb(r.type._context);break;case 22:case 23:Yb()}n=n.return}if(Sr=t,ar=t=Rl(t.current,null),Mr=$i=e,pr=0,$f=null,$b=$0=Xc=0,Ti=lf=null,Mc!==null){for(e=0;e<Mc.length;e++)if(n=Mc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mc=null}return t}function BA(t,e){do{var n=ar;try{if(Lb(),um.current=Xm,Qm){for(var r=Dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qm=!1}if(Qc=0,xr=dr=Dn=null,of=!1,qf=0,Wb.current=null,n===null||n.return===null){pr=1,$f=e,ar=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Mr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=H_(o);if(f!==null){f.flags&=-257,W_(f,o,a,s,e),f.mode&1&&q_(s,c,e),e=f,l=c;var y=e.updateQueue;if(y===null){var b=new Set;b.add(l),e.updateQueue=b}else y.add(l);break e}else{if(!(e&1)){q_(s,c,e),Qb();break e}l=Error(He(426))}}else if(In&&a.mode&1){var A=H_(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),W_(A,o,a,s,e),Tb(Th(l,a));break e}}s=l=Th(l,a),pr!==4&&(pr=2),lf===null?lf=[s]:lf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=SA(s,l,e);j_(s,v);break e;case 1:a=l;var _=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Cl===null||!Cl.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=kA(s,a,e);j_(s,R);break e}}s=s.return}while(s!==null)}qA(n)}catch(M){e=M,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function UA(){var t=Jm.current;return Jm.current=Xm,t===null?Xm:t}function Qb(){(pr===0||pr===3||pr===2)&&(pr=4),Sr===null||!(Xc&268435455)&&!($0&268435455)||ul(Sr,Mr)}function t0(t,e){var n=Ht;Ht|=2;var r=UA();(Sr!==t||Mr!==e)&&(ta=null,Vc(t,e));do try{fL();break}catch(i){BA(t,i)}while(!0);if(Lb(),Ht=n,Jm.current=r,ar!==null)throw Error(He(261));return Sr=null,Mr=0,pr}function fL(){for(;ar!==null;)zA(ar)}function pL(){for(;ar!==null&&!VC();)zA(ar)}function zA(t){var e=WA(t.alternate,t,$i);t.memoizedProps=t.pendingProps,e===null?qA(t):ar=e,Wb.current=null}function qA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aL(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pr=6,ar=null;return}}else if(n=oL(n,e,$i),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);pr===0&&(pr=5)}function Pc(t,e,n){var r=sn,i=gs.transition;try{gs.transition=null,sn=1,gL(t,e,n,r)}finally{gs.transition=i,sn=r}return null}function gL(t,e,n,r){do bh();while(yl!==null);if(Ht&6)throw Error(He(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(He(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YC(t,s),t===Sr&&(ar=Sr=null,Mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tg||(Tg=!0,$A(Om,function(){return bh(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gs.transition,gs.transition=null;var o=sn;sn=1;var a=Ht;Ht|=4,Wb.current=null,cL(t,n),jA(n,t),M6(Mv),Fm=!!Dv,Mv=Dv=null,t.current=n,uL(n),BC(),Ht=a,sn=o,gs.transition=s}else t.current=n;if(Tg&&(Tg=!1,yl=t,e0=i),s=t.pendingLanes,s===0&&(Cl=null),qC(n.stateNode),Mi(t,Qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zm)throw Zm=!1,t=t2,t2=null,t;return e0&1&&t.tag!==0&&bh(),s=t.pendingLanes,s&1?t===n2?cf++:(cf=0,n2=t):cf=0,Jl(),null}function bh(){if(yl!==null){var t=S3(e0),e=gs.transition,n=sn;try{if(gs.transition=null,sn=16>t?16:t,yl===null)var r=!1;else{if(t=yl,yl=null,e0=0,Ht&6)throw Error(He(331));var i=Ht;for(Ht|=4,rt=t.current;rt!==null;){var s=rt,o=s.child;if(rt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(rt=c;rt!==null;){var u=rt;switch(u.tag){case 0:case 11:case 15:af(8,u,s)}var h=u.child;if(h!==null)h.return=u,rt=h;else for(;rt!==null;){u=rt;var p=u.sibling,f=u.return;if(DA(u),u===c){rt=null;break}if(p!==null){p.return=f,rt=p;break}rt=f}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var A=b.sibling;b.sibling=null,b=A}while(b!==null)}}rt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,rt=o;else e:for(;rt!==null;){if(s=rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:af(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,rt=v;break e}rt=s.return}}var _=t.current;for(rt=_;rt!==null;){o=rt;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,rt=k;else e:for(o=_;rt!==null;){if(a=rt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:W0(9,a)}}catch(M){qn(a,a.return,M)}if(a===o){rt=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,rt=R;break e}rt=a.return}}if(Ht=i,Jl(),vo&&typeof vo.onPostCommitFiberRoot=="function")try{vo.onPostCommitFiberRoot(j0,t)}catch{}r=!0}return r}finally{sn=n,gs.transition=e}}return!1}function iw(t,e,n){e=Th(n,e),e=SA(t,e,1),t=Tl(t,e,1),e=vi(),t!==null&&(_p(t,1,e),Mi(t,e))}function qn(t,e,n){if(t.tag===3)iw(t,t,n);else for(;e!==null;){if(e.tag===3){iw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cl===null||!Cl.has(r))){t=Th(n,t),t=kA(e,t,1),e=Tl(e,t,1),t=vi(),e!==null&&(_p(e,1,t),Mi(e,t));break}}e=e.return}}function mL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vi(),t.pingedLanes|=t.suspendedLanes&n,Sr===t&&(Mr&n)===n&&(pr===4||pr===3&&(Mr&130023424)===Mr&&500>Qn()-Kb?Vc(t,0):$b|=n),Mi(t,e)}function HA(t,e){e===0&&(t.mode&1?(e=xg,xg<<=1,!(xg&130023424)&&(xg=4194304)):e=1);var n=vi();t=ya(t,e),t!==null&&(_p(t,e,n),Mi(t,n))}function yL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HA(t,n)}function vL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(He(314))}r!==null&&r.delete(e),HA(t,n)}var WA;WA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ri.current)Li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Li=!1,sL(t,e,n);Li=!!(t.flags&131072)}else Li=!1,In&&e.flags&1048576&&Y3(e,Wm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dm(t,e),t=e.pendingProps;var i=Eh(e,ii.current);vh(e,n),i=Bb(null,e,r,t,i,n);var s=Ub();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Di(r)?(s=!0,qm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mb(e),i.updater=H0,e.stateNode=i,i._reactInternals=e,Hv(e,r,t,n),e=Kv(null,e,r,!0,s,n)):(e.tag=0,In&&s&&Nb(e),gi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xL(r),t=Rs(r,t),i){case 0:e=$v(null,e,r,t,n);break e;case 1:e=G_(null,e,r,t,n);break e;case 11:e=$_(null,e,r,t,n);break e;case 14:e=K_(null,e,r,Rs(r.type,t),n);break e}throw Error(He(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),$v(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),G_(t,e,r,i,n);case 3:e:{if(NA(e),t===null)throw Error(He(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tA(t,e),Gm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Th(Error(He(423)),e),e=Y_(t,e,r,n,i);break e}else if(r!==i){i=Th(Error(He(424)),e),e=Y_(t,e,r,n,i);break e}else for(Ki=Pl(e.stateNode.containerInfo.firstChild),Qi=e,In=!0,Os=null,n=Z3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ih(),r===i){e=va(t,e,n);break e}gi(t,e,r,n)}e=e.child}return e;case 5:return nA(e),t===null&&Uv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ov(r,i)?o=null:s!==null&&Ov(r,s)&&(e.flags|=32),IA(t,e),gi(t,e,o,n),e.child;case 6:return t===null&&Uv(e),null;case 13:return PA(t,e,n);case 4:return Ob(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Nh(e,null,r,n):gi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),$_(t,e,r,i,n);case 7:return gi(t,e,e.pendingProps,n),e.child;case 8:return gi(t,e,e.pendingProps.children,n),e.child;case 12:return gi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,yn($m,r._currentValue),r._currentValue=o,s!==null)if(qs(s.value,o)){if(s.children===i.children&&!Ri.current){e=va(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fa(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(He(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vh(e,n),i=ms(i),r=r(i),e.flags|=1,gi(t,e,r,n),e.child;case 14:return r=e.type,i=Rs(r,e.pendingProps),i=Rs(r.type,i),K_(t,e,r,i,n);case 15:return AA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rs(r,i),dm(t,e),e.tag=1,Di(r)?(t=!0,qm(e)):t=!1,vh(e,n),wA(e,r,i),Hv(e,r,i,n),Kv(null,e,r,!0,t,n);case 19:return TA(t,e,n);case 22:return EA(t,e,n)}throw Error(He(156,e.tag))};function $A(t,e){return b3(t,e)}function bL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,e,n,r){return new bL(t,e,n,r)}function Xb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xL(t){if(typeof t=="function")return Xb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mb)return 11;if(t===yb)return 14}return 2}function Rl(t,e){var n=t.alternate;return n===null?(n=fs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case th:return Bc(n.children,i,s,e);case gb:o=8,i|=8;break;case pv:return t=fs(12,n,e,i|2),t.elementType=pv,t.lanes=s,t;case gv:return t=fs(13,n,e,i),t.elementType=gv,t.lanes=s,t;case mv:return t=fs(19,n,e,i),t.elementType=mv,t.lanes=s,t;case n3:return K0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e3:o=10;break e;case t3:o=9;break e;case mb:o=11;break e;case yb:o=14;break e;case al:o=16,r=null;break e}throw Error(He(130,t==null?t:typeof t,""))}return e=fs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bc(t,e,n,r){return t=fs(7,t,r,e),t.lanes=n,t}function K0(t,e,n,r){return t=fs(22,t,r,e),t.elementType=n3,t.lanes=n,t.stateNode={isHidden:!1},t}function _y(t,e,n){return t=fs(6,t,null,e),t.lanes=n,t}function wy(t,e,n){return e=fs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _L(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ny(0),this.expirationTimes=ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ny(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jb(t,e,n,r,i,s,o,a,l){return t=new _L(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mb(s),t}function wL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KA(t){if(!t)return Ul;t=t._reactInternals;e:{if(cu(t)!==t||t.tag!==1)throw Error(He(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Di(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(He(171))}if(t.tag===1){var n=t.type;if(Di(n))return K3(t,n,e)}return e}function GA(t,e,n,r,i,s,o,a,l){return t=Jb(n,r,!0,t,i,s,o,a,l),t.context=KA(null),n=t.current,r=vi(),i=Ll(n),s=fa(r,i),s.callback=e??null,Tl(n,s,i),t.current.lanes=i,_p(t,i,r),Mi(t,r),t}function G0(t,e,n,r){var i=e.current,s=vi(),o=Ll(i);return n=KA(n),e.context===null?e.context=n:e.pendingContext=n,e=fa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tl(i,e,o),t!==null&&(Bs(t,i,o,s),cm(t,i,o)),o}function n0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zb(t,e){sw(t,e),(t=t.alternate)&&sw(t,e)}function SL(){return null}var YA=typeof reportError=="function"?reportError:function(t){console.error(t)};function e5(t){this._internalRoot=t}Y0.prototype.render=e5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(He(409));G0(t,e,null,null)};Y0.prototype.unmount=e5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jc(function(){G0(null,t,null,null)}),e[ma]=null}};function Y0(t){this._internalRoot=t}Y0.prototype.unstable_scheduleHydration=function(t){if(t){var e=E3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cl.length&&e!==0&&e<cl[n].priority;n++);cl.splice(n,0,t),n===0&&N3(t)}};function t5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function kL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=n0(o);s.call(c)}}var o=GA(e,r,t,0,null,!1,!1,"",ow);return t._reactRootContainer=o,t[ma]=o.current,Ff(t.nodeType===8?t.parentNode:t),Jc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=n0(l);a.call(c)}}var l=Jb(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=l,t[ma]=l.current,Ff(t.nodeType===8?t.parentNode:t),Jc(function(){G0(e,l,n,r)}),l}function X0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=n0(o);a.call(l)}}G0(e,o,t,i)}else o=kL(n,e,t,i,r);return n0(o)}k3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vd(e.pendingLanes);n!==0&&(xb(e,n|1),Mi(e,Qn()),!(Ht&6)&&(Ch=Qn()+500,Jl()))}break;case 13:Jc(function(){var r=ya(t,1);if(r!==null){var i=vi();Bs(r,t,1,i)}}),Zb(t,1)}};_b=function(t){if(t.tag===13){var e=ya(t,134217728);if(e!==null){var n=vi();Bs(e,t,134217728,n)}Zb(t,134217728)}};A3=function(t){if(t.tag===13){var e=Ll(t),n=ya(t,e);if(n!==null){var r=vi();Bs(n,t,e,r)}Zb(t,e)}};E3=function(){return sn};I3=function(t,e){var n=sn;try{return sn=t,e()}finally{sn=n}};Ev=function(t,e,n){switch(e){case"input":if(bv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=U0(r);if(!i)throw Error(He(90));i3(r),bv(r,i)}}}break;case"textarea":o3(t,n);break;case"select":e=n.value,e!=null&&ph(t,!!n.multiple,e,!1)}};f3=Gb;p3=Jc;var AL={usingClientEntryPoint:!1,Events:[Sp,sh,U0,h3,d3,Gb]},Ad={findFiberByHostInstance:Dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EL={bundleType:Ad.bundleType,version:Ad.version,rendererPackageName:Ad.rendererPackageName,rendererConfig:Ad.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y3(t),t===null?null:t.stateNode},findFiberByHostInstance:Ad.findFiberByHostInstance||SL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{j0=Cg.inject(EL),vo=Cg}catch{}}Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AL;Zi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t5(e))throw Error(He(200));return wL(t,e,null,n)};Zi.createRoot=function(t,e){if(!t5(t))throw Error(He(299));var n=!1,r="",i=YA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jb(t,1,!1,null,null,n,!1,r,i),t[ma]=e.current,Ff(t.nodeType===8?t.parentNode:t),new e5(e)};Zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(He(188)):(t=Object.keys(t).join(","),Error(He(268,t)));return t=y3(e),t=t===null?null:t.stateNode,t};Zi.flushSync=function(t){return Jc(t)};Zi.hydrate=function(t,e,n){if(!Q0(e))throw Error(He(200));return X0(null,t,e,!0,n)};Zi.hydrateRoot=function(t,e,n){if(!t5(t))throw Error(He(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=YA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GA(e,null,t,1,n??null,i,!1,s,o),t[ma]=e.current,Ff(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Y0(e)};Zi.render=function(t,e,n){if(!Q0(e))throw Error(He(200));return X0(null,t,e,!1,n)};Zi.unmountComponentAtNode=function(t){if(!Q0(t))throw Error(He(40));return t._reactRootContainer?(Jc(function(){X0(null,null,t,!1,function(){t._reactRootContainer=null,t[ma]=null})}),!0):!1};Zi.unstable_batchedUpdates=Gb;Zi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Q0(n))throw Error(He(200));if(t==null||t._reactInternals===void 0)throw Error(He(38));return X0(t,e,n,!1,r)};Zi.version="18.3.1-next-f1338f8080-20240426";function QA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QA)}catch(t){console.error(t)}}QA(),Q4.exports=Zi;var IL=Q4.exports,aw=IL;dv.createRoot=aw.createRoot,dv.hydrateRoot=aw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kf(){return Kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kf.apply(this,arguments)}var vl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vl||(vl={}));const lw="popstate";function NL(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return s2("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:r0(i)}return TL(e,n,null,t)}function Mn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function XA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PL(){return Math.random().toString(36).substr(2,8)}function cw(t,e){return{usr:t.state,key:t.key,idx:e}}function s2(t,e,n,r){return n===void 0&&(n=null),Kf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Kh(e):e,{state:n,key:e&&e.key||r||PL()})}function r0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function TL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=vl.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Kf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=vl.Pop;let A=u(),v=A==null?null:A-c;c=A,l&&l({action:a,location:b.location,delta:v})}function p(A,v){a=vl.Push;let _=s2(b.location,A,v);c=u()+1;let k=cw(_,c),R=b.createHref(_);try{o.pushState(k,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}s&&l&&l({action:a,location:b.location,delta:1})}function f(A,v){a=vl.Replace;let _=s2(b.location,A,v);c=u();let k=cw(_,c),R=b.createHref(_);o.replaceState(k,"",R),s&&l&&l({action:a,location:b.location,delta:0})}function y(A){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof A=="string"?A:r0(A);return _=_.replace(/ $/,"%20"),Mn(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let b={get action(){return a},get location(){return t(i,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lw,h),l=A,()=>{i.removeEventListener(lw,h),l=null}},createHref(A){return e(i,A)},createURL:y,encodeLocation(A){let v=y(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(A){return o.go(A)}};return b}var uw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uw||(uw={}));function CL(t,e,n){return n===void 0&&(n="/"),LL(t,e,n)}function LL(t,e,n,r){let i=typeof e=="string"?Kh(e):e,s=Lh(i.pathname||"/",n);if(s==null)return null;let o=JA(t);RL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=HL(s);a=zL(o[l],c)}return a}function JA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Mn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Dl([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Mn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),JA(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:BL(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ZA(s.path))i(s,o,l)}),e}function ZA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function RL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DL=/^:[\w-]+$/,ML=3,OL=2,jL=1,FL=10,VL=-2,hw=t=>t==="*";function BL(t,e){let n=t.split("/"),r=n.length;return n.some(hw)&&(r+=VL),e&&(r+=OL),n.filter(i=>!hw(i)).reduce((i,s)=>i+(DL.test(s)?ML:s===""?jL:FL),r)}function UL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zL(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=o2({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Dl([s,h.pathname]),pathnameBase:GL(Dl([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Dl([s,h.pathnameBase]))}return o}function o2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:p,isOptional:f}=u;if(p==="*"){let b=a[h]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const y=a[h];return f&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function qL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),XA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return XA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Lh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Kh(t):t;return{pathname:n?n.startsWith("/")?n:$L(n,e):e,search:YL(r),hash:QL(i)}}function $L(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function n5(t,e){let n=KL(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function r5(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Kh(t):(i=Kf({},t),Mn(!i.pathname||!i.pathname.includes("?"),Sy("?","pathname","search",i)),Mn(!i.pathname||!i.pathname.includes("#"),Sy("#","pathname","hash",i)),Mn(!i.search||!i.search.includes("#"),Sy("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=WL(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Dl=t=>t.join("/").replace(/\/\/+/g,"/"),GL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eE=["post","put","patch","delete"];new Set(eE);const JL=["get",...eE];new Set(JL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(this,arguments)}const J0=le.createContext(null),tE=le.createContext(null),ka=le.createContext(null),Z0=le.createContext(null),Aa=le.createContext({outlet:null,matches:[],isDataRoute:!1}),nE=le.createContext(null);function ZL(t,e){let{relative:n}=e===void 0?{}:e;Gh()||Mn(!1);let{basename:r,navigator:i}=le.useContext(ka),{hash:s,pathname:o,search:a}=e1(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Dl([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Gh(){return le.useContext(Z0)!=null}function uu(){return Gh()||Mn(!1),le.useContext(Z0).location}function rE(t){le.useContext(ka).static||le.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=le.useContext(Aa);return t?pR():eR()}function eR(){Gh()||Mn(!1);let t=le.useContext(J0),{basename:e,future:n,navigator:r}=le.useContext(ka),{matches:i}=le.useContext(Aa),{pathname:s}=uu(),o=JSON.stringify(n5(i,n.v7_relativeSplatPath)),a=le.useRef(!1);return rE(()=>{a.current=!0}),le.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=r5(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Dl([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}const tR=le.createContext(null);function nR(t){let e=le.useContext(Aa).outlet;return e&&le.createElement(tR.Provider,{value:t},e)}function e1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=le.useContext(ka),{matches:i}=le.useContext(Aa),{pathname:s}=uu(),o=JSON.stringify(n5(i,r.v7_relativeSplatPath));return le.useMemo(()=>r5(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function rR(t,e){return iR(t,e)}function iR(t,e,n,r){Gh()||Mn(!1);let{navigator:i}=le.useContext(ka),{matches:s}=le.useContext(Aa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=uu(),u;if(e){var h;let A=typeof e=="string"?Kh(e):e;l==="/"||(h=A.pathname)!=null&&h.startsWith(l)||Mn(!1),u=A}else u=c;let p=u.pathname||"/",f=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=CL(t,{pathname:f}),b=cR(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Dl([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Dl([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&b?le.createElement(Z0.Provider,{value:{location:Gf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:vl.Pop}},b):b}function sR(){let t=fR(),e=XL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),n?le.createElement("pre",{style:i},n):null,null)}const oR=le.createElement(sR,null);class aR extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?le.createElement(Aa.Provider,{value:this.props.routeContext},le.createElement(nE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lR(t){let{routeContext:e,match:n,children:r}=t,i=le.useContext(J0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),le.createElement(Aa.Provider,{value:e},r)}function cR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Mn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:f}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let f,y=!1,b=null,A=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||oR,l&&(c<0&&p===0?(gR("route-fallback"),y=!0,A=null):c===p&&(y=!0,A=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let k;return f?k=b:y?k=A:h.route.Component?k=le.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=u,le.createElement(lR,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?le.createElement(aR,{location:n.location,revalidation:n.revalidation,component:b,error:f,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var iE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iE||{}),sE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sE||{});function uR(t){let e=le.useContext(J0);return e||Mn(!1),e}function hR(t){let e=le.useContext(tE);return e||Mn(!1),e}function dR(t){let e=le.useContext(Aa);return e||Mn(!1),e}function oE(t){let e=dR(),n=e.matches[e.matches.length-1];return n.route.id||Mn(!1),n.route.id}function fR(){var t;let e=le.useContext(nE),n=hR(),r=oE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pR(){let{router:t}=uR(iE.UseNavigateStable),e=oE(sE.UseNavigateStable),n=le.useRef(!1);return rE(()=>{n.current=!0}),le.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Gf({fromRouteId:e},s)))},[t,e])}const dw={};function gR(t,e,n){dw[t]||(dw[t]=!0)}function mR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function a2(t){let{to:e,replace:n,state:r,relative:i}=t;Gh()||Mn(!1);let{future:s,static:o}=le.useContext(ka),{matches:a}=le.useContext(Aa),{pathname:l}=uu(),c=hu(),u=r5(e,n5(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return le.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function yR(t){return nR(t.context)}function Pr(t){Mn(!1)}function vR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=vl.Pop,navigator:s,static:o=!1,future:a}=t;Gh()&&Mn(!1);let l=e.replace(/^\/*/,"/"),c=le.useMemo(()=>({basename:l,navigator:s,static:o,future:Gf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Kh(r));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:y="default"}=r,b=le.useMemo(()=>{let A=Lh(u,l);return A==null?null:{location:{pathname:A,search:h,hash:p,state:f,key:y},navigationType:i}},[l,u,h,p,f,y,i]);return b==null?null:le.createElement(ka.Provider,{value:c},le.createElement(Z0.Provider,{children:n,value:b}))}function bR(t){let{children:e,location:n}=t;return rR(l2(e),n)}new Promise(()=>{});function l2(t,e){e===void 0&&(e=[]);let n=[];return le.Children.forEach(t,(r,i)=>{if(!le.isValidElement(r))return;let s=[...e,i];if(r.type===le.Fragment){n.push.apply(n,l2(r.props.children,s));return}r.type!==Pr&&Mn(!1),!r.props.index||!r.props.children||Mn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=l2(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i0(){return i0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i0.apply(this,arguments)}function aE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _R(t,e){return t.button===0&&(!e||e==="_self")&&!xR(t)}const wR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],kR="6";try{window.__reactRouterVersion=kR}catch{}const AR=le.createContext({isTransitioning:!1}),ER="startTransition",fw=mC[ER];function IR(t){let{basename:e,children:n,future:r,window:i}=t,s=le.useRef();s.current==null&&(s.current=NL({window:i,v5Compat:!0}));let o=s.current,[a,l]=le.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=le.useCallback(h=>{c&&fw?fw(()=>l(h)):l(h)},[l,c]);return le.useLayoutEffect(()=>o.listen(u),[o,u]),le.useEffect(()=>mR(r),[r]),le.createElement(vR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const NR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=le.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,p=aE(e,wR),{basename:f}=le.useContext(ka),y,b=!1;if(typeof c=="string"&&PR.test(c)&&(y=c,NR))try{let k=new URL(window.location.href),R=c.startsWith("//")?new URL(k.protocol+c):new URL(c),M=Lh(R.pathname,f);R.origin===k.origin&&M!=null?c=M+R.search+R.hash:b=!0}catch{}let A=ZL(c,{relative:i}),v=LR(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function _(k){r&&r(k),k.defaultPrevented||v(k)}return le.createElement("a",i0({},p,{href:y||A,onClick:b||s?r:_,ref:n,target:l}))}),pw=le.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=aE(e,SR),p=e1(l,{relative:h.relative}),f=uu(),y=le.useContext(tE),{navigator:b,basename:A}=le.useContext(ka),v=y!=null&&RR(p)&&c===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,k=f.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(k=k.toLowerCase(),R=R?R.toLowerCase():null,_=_.toLowerCase()),R&&A&&(R=Lh(R,A)||R);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let z=k===_||!o&&k.startsWith(_)&&k.charAt(M)==="/",I=R!=null&&(R===_||!o&&R.startsWith(_)&&R.charAt(_.length)==="/"),S={isActive:z,isPending:I,isTransitioning:v},L=z?r:void 0,D;typeof s=="function"?D=s(S):D=[s,z?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let x=typeof a=="function"?a(S):a;return le.createElement(TR,i0({},h,{"aria-current":L,className:D,ref:n,style:x,to:l,viewTransition:c}),typeof u=="function"?u(S):u)});var c2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c2||(c2={}));var gw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gw||(gw={}));function CR(t){let e=le.useContext(J0);return e||Mn(!1),e}function LR(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=hu(),c=uu(),u=e1(t,{relative:o});return le.useCallback(h=>{if(_R(h,n)){h.preventDefault();let p=r!==void 0?r:r0(c)===r0(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function RR(t,e){e===void 0&&(e={});let n=le.useContext(AR);n==null&&Mn(!1);let{basename:r}=CR(c2.useViewTransitionState),i=e1(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Lh(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Lh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return o2(i.pathname,o)!=null||o2(i.pathname,s)!=null}var mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},cE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(p=64)),r.push(n[u],n[h],n[p],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new MR;const p=s<<2|a>>4;if(r.push(p),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OR=function(t){const e=lE(t);return cE.encodeByteArray(e,!0)},s0=function(t){return OR(t).replace(/\./g,"")},uE=function(t){try{return cE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=()=>jR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof mw>"u")return;const t=mw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uE(t[1]);return e&&JSON.parse(e)},t1=()=>{try{return FR()||VR()||BR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hE=t=>{var e,n;return(n=(e=t1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dE=t=>{const e=hE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fE=()=>{var t;return(t=t1())===null||t===void 0?void 0:t.config},pE=t=>{var e;return(e=t1())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s0(JSON.stringify(n)),s0(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function qR(){var t;const e=(t=t1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){const t=si();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GR(){return!qR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class Po extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XR,Object.setPrototypeOf(this,Po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ap.prototype.create)}}class Ap{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Po(i,a,r)}}function JR(t,e){return t.replace(ZR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZR=/\{\$([^}]+)}/g;function e8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function o0(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(yw(s)&&yw(o)){if(!o0(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ud(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function zd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function t8(t,e){const n=new n8(t,e);return n.subscribe.bind(n)}class n8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r8(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ky),i.error===void 0&&(i.error=ky),i.complete===void 0&&(i.complete=ky);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ky(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){return t&&t._delegate?t._delegate:t}class zl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o8(e))try{this.getOrInitializeService({instanceIdentifier:Tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tc){return this.instances.has(e)}getOptions(e=Tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:s8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tc){return this.component?this.component.multipleInstances?e:Tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s8(t){return t===Tc?void 0:t}function o8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ut||(Ut={}));const l8={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},c8=Ut.INFO,u8={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},h8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=u8[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i5{constructor(e){this.name=e,this._logLevel=c8,this._logHandler=h8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...e),this._logHandler(this,Ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...e),this._logHandler(this,Ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...e),this._logHandler(this,Ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...e),this._logHandler(this,Ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...e),this._logHandler(this,Ut.ERROR,...e)}}const d8=(t,e)=>e.some(n=>t instanceof n);let vw,bw;function f8(){return vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p8(){return bw||(bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,u2=new WeakMap,yE=new WeakMap,Ay=new WeakMap,s5=new WeakMap;function g8(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ml(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mE.set(n,t)}).catch(()=>{}),s5.set(e,t),e}function m8(t){if(u2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});u2.set(t,e)}let h2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ml(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function y8(t){h2=t(h2)}function v8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ey(this),e,...n);return yE.set(r,e.sort?e.sort():[e]),Ml(r)}:p8().includes(t)?function(...e){return t.apply(Ey(this),e),Ml(mE.get(this))}:function(...e){return Ml(t.apply(Ey(this),e))}}function b8(t){return typeof t=="function"?v8(t):(t instanceof IDBTransaction&&m8(t),d8(t,f8())?new Proxy(t,h2):t)}function Ml(t){if(t instanceof IDBRequest)return g8(t);if(Ay.has(t))return Ay.get(t);const e=b8(t);return e!==t&&(Ay.set(t,e),s5.set(e,t)),e}const Ey=t=>s5.get(t);function x8(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ml(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ml(o.result),l.oldVersion,l.newVersion,Ml(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const _8=["get","getKey","getAll","getAllKeys","count"],w8=["put","add","delete","clear"],Iy=new Map;function xw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Iy.get(e))return Iy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=w8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_8.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Iy.set(e,s),s}y8(t=>({...t,get:(e,n,r)=>xw(e,n)||t.get(e,n,r),has:(e,n)=>!!xw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d2="@firebase/app",_w="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new i5("@firebase/app"),A8="@firebase/app-compat",E8="@firebase/analytics-compat",I8="@firebase/analytics",N8="@firebase/app-check-compat",P8="@firebase/app-check",T8="@firebase/auth",C8="@firebase/auth-compat",L8="@firebase/database",R8="@firebase/data-connect",D8="@firebase/database-compat",M8="@firebase/functions",O8="@firebase/functions-compat",j8="@firebase/installations",F8="@firebase/installations-compat",V8="@firebase/messaging",B8="@firebase/messaging-compat",U8="@firebase/performance",z8="@firebase/performance-compat",q8="@firebase/remote-config",H8="@firebase/remote-config-compat",W8="@firebase/storage",$8="@firebase/storage-compat",K8="@firebase/firestore",G8="@firebase/vertexai-preview",Y8="@firebase/firestore-compat",Q8="firebase",X8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="[DEFAULT]",J8={[d2]:"fire-core",[A8]:"fire-core-compat",[I8]:"fire-analytics",[E8]:"fire-analytics-compat",[P8]:"fire-app-check",[N8]:"fire-app-check-compat",[T8]:"fire-auth",[C8]:"fire-auth-compat",[L8]:"fire-rtdb",[R8]:"fire-data-connect",[D8]:"fire-rtdb-compat",[M8]:"fire-fn",[O8]:"fire-fn-compat",[j8]:"fire-iid",[F8]:"fire-iid-compat",[V8]:"fire-fcm",[B8]:"fire-fcm-compat",[U8]:"fire-perf",[z8]:"fire-perf-compat",[q8]:"fire-rc",[H8]:"fire-rc-compat",[W8]:"fire-gcs",[$8]:"fire-gcs-compat",[K8]:"fire-fst",[Y8]:"fire-fst-compat",[G8]:"fire-vertex","fire-js":"fire-js",[Q8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map,Z8=new Map,p2=new Map;function ww(t,e){try{t.container.addComponent(e)}catch(n){ba.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zc(t){const e=t.name;if(p2.has(e))return ba.debug(`There were multiple attempts to register component ${e}.`),!1;p2.set(e,t);for(const n of a0.values())ww(n,t);for(const n of Z8.values())ww(n,t);return!0}function n1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function go(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ol=new Ap("app","Firebase",e7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=X8;function vE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:f2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ol.create("bad-app-name",{appName:String(i)});if(n||(n=fE()),!n)throw Ol.create("no-options");const s=a0.get(i);if(s){if(o0(n,s.options)&&o0(r,s.config))return s;throw Ol.create("duplicate-app",{appName:i})}const o=new a8(i);for(const l of p2.values())o.addComponent(l);const a=new t7(n,r,o);return a0.set(i,a),a}function o5(t=f2){const e=a0.get(t);if(!e&&t===f2&&fE())return vE();if(!e)throw Ol.create("no-app",{appName:t});return e}function xo(t,e,n){var r;let i=(r=J8[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ba.warn(a.join(" "));return}Zc(new zl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7="firebase-heartbeat-database",r7=1,Yf="firebase-heartbeat-store";let Ny=null;function bE(){return Ny||(Ny=x8(n7,r7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ol.create("idb-open",{originalErrorMessage:t.message})})),Ny}async function i7(t){try{const n=(await bE()).transaction(Yf),r=await n.objectStore(Yf).get(xE(t));return await n.done,r}catch(e){if(e instanceof Po)ba.warn(e.message);else{const n=Ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ba.warn(n.message)}}}async function Sw(t,e){try{const r=(await bE()).transaction(Yf,"readwrite");await r.objectStore(Yf).put(e,xE(t)),await r.done}catch(n){if(n instanceof Po)ba.warn(n.message);else{const r=Ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ba.warn(r.message)}}}function xE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=1024,o7=30*24*60*60*1e3;class a7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=o7}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ba.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kw(),{heartbeatsToSend:r,unsentEntries:i}=l7(this._heartbeatsCache.heartbeats),s=s0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ba.warn(n),""}}}function kw(){return new Date().toISOString().substring(0,10)}function l7(t,e=s7){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Aw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Aw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class c7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?QR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Aw(t){return s0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){Zc(new zl("platform-logger",e=>new S8(e),"PRIVATE")),Zc(new zl("heartbeat",e=>new a7(e),"PRIVATE")),xo(d2,_w,t),xo(d2,_w,"esm2017"),xo("fire-js","")}u7("");var h7="firebase",d7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xo(h7,d7,"app");function a5(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f7=_E,wE=new Ap("auth","Firebase",_E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new i5("@firebase/auth");function p7(t,...e){l0.logLevel<=Ut.WARN&&l0.warn(`Auth (${du}): ${t}`,...e)}function mm(t,...e){l0.logLevel<=Ut.ERROR&&l0.error(`Auth (${du}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t,...e){throw l5(t,...e)}function _o(t,...e){return l5(t,...e)}function SE(t,e,n){const r=Object.assign(Object.assign({},f7()),{[e]:n});return new Ap("auth","Firebase",r).create(e,{appName:t.name})}function pa(t){return SE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function l5(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wE.create(t,...e)}function xt(t,e,...n){if(!t)throw l5(e,...n)}function aa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mm(e),new Error(e)}function xa(t,e){t||aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function g7(){return Ew()==="http:"||Ew()==="https:"}function Ew(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g7()||WR()||"connection"in navigator)?navigator.onLine:!0}function y7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){this.shortDelay=e,this.longDelay=n,xa(n>e,"Short delay should be less than long delay!"),this.isMobile=zR()||$R()}get(){return m7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){xa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=new Ip(3e4,6e4);function Zl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ec(t,e,n,r,i={}){return AE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ep(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return HR()||(c.referrerPolicy="no-referrer"),kE.fetch()(EE(t,t.config.apiHost,n,a),c)})}async function AE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},v7),e);try{const i=new _7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Lg(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lg(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Lg(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Lg(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw SE(t,u,c);Hs(t,u)}}catch(i){if(i instanceof Po)throw i;Hs(t,"network-request-failed",{message:String(i)})}}async function Np(t,e,n,r,i={}){const s=await ec(t,e,n,r,i);return"mfaPendingCredential"in s&&Hs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?c5(t.config,i):`${t.config.apiScheme}://${i}`}function x7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_o(this.auth,"network-request-failed")),b7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_o(t,e,r);return i.customData._tokenResponse=n,i}function Iw(t){return t!==void 0&&t.enterprise!==void 0}class w7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function S7(t,e){return ec(t,"GET","/v2/recaptchaConfig",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e){return ec(t,"POST","/v1/accounts:delete",e)}async function IE(t,e){return ec(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A7(t,e=!1){const n=tr(t),r=await n.getIdToken(e),i=u5(r);xt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:uf(Py(i.auth_time)),issuedAtTime:uf(Py(i.iat)),expirationTime:uf(Py(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Py(t){return Number(t)*1e3}function u5(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mm("JWT malformed, contained fewer than 3 sections"),null;try{const i=uE(n);return i?JSON.parse(i):(mm("Failed to decode base64 JWT payload"),null)}catch(i){return mm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Nw(t){const e=u5(t);return xt(e,"internal-error"),xt(typeof e.exp<"u","internal-error"),xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Po&&E7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uf(this.lastLoginAt),this.creationTime=uf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Qf(t,IE(n,{idToken:r}));xt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NE(s.providerUserInfo):[],a=P7(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new m2(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function N7(t){const e=tr(t);await c0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NE(t){return t.map(e=>{var{providerId:n}=e,r=a5(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(t,e){const n=await AE(t,{},async()=>{const r=Ep({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function C7(t,e){return ec(t,"POST","/v2/accounts:revokeToken",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt(typeof e.idToken<"u","internal-error"),xt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xt(e.length!==0,"internal-error");const n=Nw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await T7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xh;return r&&(xt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(xt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(xt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xh,this.toJSON())}_performRefresh(){return aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e){xt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class la{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=a5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new m2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qf(this,this.stsTokenManager.getToken(this.auth,e));return xt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A7(this,e)}reload(){return N7(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new la(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await c0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(go(this.auth.app))return Promise.reject(pa(this.auth));const e=await this.getIdToken();return await Qf(this,k7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:k,emailVerified:R,isAnonymous:M,providerData:z,stsTokenManager:I}=n;xt(k&&I,e,"internal-error");const S=xh.fromJSON(this.name,I);xt(typeof k=="string",e,"internal-error"),rl(h,e.name),rl(p,e.name),xt(typeof R=="boolean",e,"internal-error"),xt(typeof M=="boolean",e,"internal-error"),rl(f,e.name),rl(y,e.name),rl(b,e.name),rl(A,e.name),rl(v,e.name),rl(_,e.name);const L=new la({uid:k,auth:e,email:p,emailVerified:R,displayName:h,isAnonymous:M,photoURL:y,phoneNumber:f,tenantId:b,stsTokenManager:S,createdAt:v,lastLoginAt:_});return z&&Array.isArray(z)&&(L.providerData=z.map(D=>Object.assign({},D))),A&&(L._redirectEventId=A),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new xh;i.updateFromServerResponse(n);const s=new la({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await c0(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];xt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?NE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xh;a.updateFromIdToken(r);const l=new la({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new m2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=new Map;function ca(t){xa(t instanceof Function,"Expected a class definition");let e=Pw.get(t);return e?(xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}PE.type="NONE";const Tw=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e,n){return`firebase:${t}:${e}:${n}`}class _h{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ym(this.userKey,i.apiKey,s),this.fullPersistenceKey=ym("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?la._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _h(ca(Tw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ca(Tw);const o=ym(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=la._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _h(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new _h(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ME(e))return"Blackberry";if(OE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||LE(e))&&!e.includes("edge/"))return"Chrome";if(DE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TE(t=si()){return/firefox\//i.test(t)}function CE(t=si()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LE(t=si()){return/crios\//i.test(t)}function RE(t=si()){return/iemobile/i.test(t)}function DE(t=si()){return/android/i.test(t)}function ME(t=si()){return/blackberry/i.test(t)}function OE(t=si()){return/webos/i.test(t)}function h5(t=si()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L7(t=si()){var e;return h5(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R7(){return KR()&&document.documentMode===10}function jE(t=si()){return h5(t)||DE(t)||OE(t)||ME(t)||/windows phone/i.test(t)||RE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e=[]){let n;switch(t){case"Browser":n=Cw(si());break;case"Worker":n=`${Cw(si())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${du}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(t,e={}){return ec(t,"GET","/v2/passwordPolicy",Zl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=6;class j7{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:O7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lw(this),this.idTokenSubscription=new Lw(this),this.beforeStateQueue=new D7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ca(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _h.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await IE(this,{idToken:e}),r=await la._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(go(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await c0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(go(this.app))return Promise.reject(pa(this));const n=e?tr(e):null;return n&&xt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return go(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return go(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M7(this),n=new j7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ap("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await C7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ca(e)||this._popupRedirectResolver;xt(n,this,"argument-error"),this.redirectPersistenceManager=await _h.create(this,[ca(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&p7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fu(t){return tr(t)}class Lw{constructor(e){this.auth=e,this.observer=null,this.addObserver=t8(n=>this.observer=n)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V7(t){r1=t}function VE(t){return r1.loadJS(t)}function B7(){return r1.recaptchaEnterpriseScript}function U7(){return r1.gapiScript}function z7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q7="recaptcha-enterprise",H7="NO_RECAPTCHA";class W7{constructor(e){this.type=q7,this.auth=fu(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{S7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new w7(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Iw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(H7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Iw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=B7();l.length!==0&&(l+=a),VE(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Rw(t,e,n,r=!1){const i=new W7(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function y2(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Rw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t,e){const n=n1(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(o0(s,e??{}))return i;Hs(i,"already-initialized")}return n.initialize({options:e})}function K7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ca);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function G7(t,e,n){const r=fu(t);xt(r._canInitEmulator,r,"emulator-config-failed"),xt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=BE(e),{host:o,port:a}=Y7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Q7()}function BE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y7(t){const e=BE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Dw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Dw(o)}}}function Dw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,n){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function X7(t,e){return ec(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7(t,e){return Np(t,"POST","/v1/accounts:signInWithPassword",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){return Np(t,"POST","/v1/accounts:signInWithEmailLink",Zl(t,e))}async function eD(t,e){return Np(t,"POST","/v1/accounts:signInWithEmailLink",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends d5{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y2(e,n,"signInWithPassword",J7);case"emailLink":return Z7(e,{email:this._email,oobCode:this._password});default:Hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y2(e,r,"signUpPassword",X7);case"emailLink":return eD(e,{idToken:n,email:this._email,oobCode:this._password});default:Hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(t,e){return Np(t,"POST","/v1/accounts:signInWithIdp",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="http://localhost";class eu extends d5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=a5(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new eu(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wh(e,n)}buildRequest(){const e={requestUri:tD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ep(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rD(t){const e=Ud(zd(t)).link,n=e?Ud(zd(e)).deep_link_id:null,r=Ud(zd(t)).deep_link_id;return(r?Ud(zd(r)).link:null)||r||n||e||t}class f5{constructor(e){var n,r,i,s,o,a;const l=Ud(zd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=nD((i=l.mode)!==null&&i!==void 0?i:null);xt(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=rD(e);try{return new f5(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.providerId=Yh.PROVIDER_ID}static credential(e,n){return Xf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=f5.parseLink(n);return xt(r,"argument-error"),Xf._fromEmailAndCode(e,r.code,r.tenantId)}}Yh.PROVIDER_ID="password";Yh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends UE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Pp{constructor(){super("facebook.com")}static credential(e){return eu._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hl.credential(e.oauthAccessToken)}catch{return null}}}hl.FACEBOOK_SIGN_IN_METHOD="facebook.com";hl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Pp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eu._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dl.credential(n,r)}catch{return null}}}dl.GOOGLE_SIGN_IN_METHOD="google.com";dl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Pp{constructor(){super("github.com")}static credential(e){return eu._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fl.credential(e.oauthAccessToken)}catch{return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com";fl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Pp{constructor(){super("twitter.com")}static credential(e,n){return eu._fromParams({providerId:pl.PROVIDER_ID,signInMethod:pl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pl.credentialFromTaggedObject(e)}static credentialFromError(e){return pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pl.credential(n,r)}catch{return null}}}pl.TWITTER_SIGN_IN_METHOD="twitter.com";pl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return Np(t,"POST","/v1/accounts:signUp",Zl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await la._fromIdTokenResponse(e,r,i),o=Mw(r);return new tu({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Mw(r);return new tu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Mw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends Po{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,u0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new u0(e,n,r,i)}}function zE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?u0._fromErrorAndOperation(t,s,e,r):s})}async function sD(t,e,n=!1){const r=await Qf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e,n=!1){const{auth:r}=t;if(go(r.app))return Promise.reject(pa(r));const i="reauthenticate";try{const s=await Qf(t,zE(r,i,e,t),n);xt(s.idToken,r,"internal-error");const o=u5(s.idToken);xt(o,r,"internal-error");const{sub:a}=o;return xt(t.uid===a,r,"user-mismatch"),tu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t,e,n=!1){if(go(t.app))return Promise.reject(pa(t));const r="signIn",i=await zE(t,r,e),s=await tu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function aD(t,e){return qE(fu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t){const e=fu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lD(t,e,n){if(go(t.app))return Promise.reject(pa(t));const r=fu(t),o=await y2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&HE(t),l}),a=await tu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cD(t,e,n){return go(t.app)?Promise.reject(pa(t)):aD(tr(t),Yh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&HE(t),r})}function uD(t,e,n,r){return tr(t).onIdTokenChanged(e,n,r)}function hD(t,e,n){return tr(t).beforeAuthStateChanged(e,n)}function dD(t,e,n,r){return tr(t).onAuthStateChanged(e,n,r)}function fD(t){return tr(t).signOut()}const h0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(h0,"1"),this.storage.removeItem(h0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1e3,gD=10;class $E extends WE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);R7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const mD=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends WE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KE.type="SESSION";const GE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new i1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await yD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=p5("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(){return window}function bD(t){wo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof wo().WorkerGlobalScope<"u"&&typeof wo().importScripts=="function"}async function xD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _D(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wD(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",SD=1,d0="firebaseLocalStorage",XE="fbase_key";class Tp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function s1(t,e){return t.transaction([d0],e?"readwrite":"readonly").objectStore(d0)}function kD(){const t=indexedDB.deleteDatabase(QE);return new Tp(t).toPromise()}function v2(){const t=indexedDB.open(QE,SD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(d0,{keyPath:XE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(d0)?e(r):(r.close(),await kD(),e(await v2()))})})}async function Ow(t,e,n){const r=s1(t,!0).put({[XE]:e,value:n});return new Tp(r).toPromise()}async function AD(t,e){const n=s1(t,!1).get(e),r=await new Tp(n).toPromise();return r===void 0?null:r.value}function jw(t,e){const n=s1(t,!0).delete(e);return new Tp(n).toPromise()}const ED=800,ID=3;class JE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ID)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=i1._getInstance(wD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xD(),!this.activeServiceWorker)return;this.sender=new vD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_D()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v2();return await Ow(e,h0,"1"),await jw(e,h0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ow(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=s1(i,!1).getAll();return new Tp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JE.type="LOCAL";const ND=JE;new Ip(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t,e){return e?ca(e):(xt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends d5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TD(t){return qE(t.auth,new g5(t),t.bypassAuthState)}function CD(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),oD(n,new g5(t),t.bypassAuthState)}async function LD(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),sD(n,new g5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return LD;case"reauthViaPopup":case"reauthViaRedirect":return CD;default:Hs(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new Ip(2e3,1e4);class dh extends ZE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,dh.currentPopupAction&&dh.currentPopupAction.cancel(),dh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=p5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_o(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_o(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_o(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RD.get())};e()}}dh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="pendingRedirect",vm=new Map;class MD extends ZE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vm.get(this.auth._key());if(!e){try{const r=await OD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vm.set(this.auth._key(),e)}return this.bypassAuthState||vm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OD(t,e){const n=VD(e),r=FD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function jD(t,e){vm.set(t._key(),e)}function FD(t){return ca(t._redirectPersistence)}function VD(t){return ym(DD,t.config.apiKey,t.name)}async function BD(t,e,n=!1){if(go(t.app))return Promise.reject(pa(t));const r=fu(t),i=PD(r,e),o=await new MD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=10*60*1e3;class zD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_o(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fw(e))}saveEventToCache(e){this.cachedEventUids.add(Fw(e)),this.lastProcessedEventTime=Date.now()}}function Fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e={}){return ec(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$D=/^https?/;async function KD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HD(t);for(const n of e)try{if(GD(n))return}catch{}Hs(t,"unauthorized-domain")}function GD(t){const e=g2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$D.test(n))return!1;if(WD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Ip(3e4,6e4);function Vw(){const t=wo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QD(t){return new Promise((e,n)=>{var r,i,s;function o(){Vw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vw(),n(_o(t,"network-request-failed"))},timeout:YD.get()})}if(!((i=(r=wo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wo().gapi)===null||s===void 0)&&s.load)o();else{const a=z7("iframefcb");return wo()[a]=()=>{gapi.load?o():n(_o(t,"network-request-failed"))},VE(`${U7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bm=null,e})}let bm=null;function XD(t){return bm=bm||QD(t),bm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Ip(5e3,15e3),ZD="__/auth/iframe",eM="emulator/auth/iframe",tM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rM(t){const e=t.config;xt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?c5(e,eM):`https://${t.config.authDomain}/${ZD}`,r={apiKey:e.apiKey,appName:t.name,v:du},i=nM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ep(r).slice(1)}`}async function iM(t){const e=await XD(t),n=wo().gapi;return xt(n,t,"internal-error"),e.open({where:document.body,url:rM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_o(t,"network-request-failed"),a=wo().setTimeout(()=>{s(o)},JD.get());function l(){wo().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oM=500,aM=600,lM="_blank",cM="http://localhost";class Bw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uM(t,e,n,r=oM,i=aM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},sM),{width:r.toString(),height:i.toString(),top:s,left:o}),c=si().toLowerCase();n&&(a=LE(c)?lM:n),TE(c)&&(e=e||cM,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[f,y])=>`${p}${f}=${y},`,"");if(L7(c)&&a!=="_self")return hM(e||"",a),new Bw(null);const h=window.open(e||"",a,u);xt(h,t,"popup-blocked");try{h.focus()}catch{}return new Bw(h)}function hM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="__/auth/handler",fM="emulator/auth/handler",pM=encodeURIComponent("fac");async function Uw(t,e,n,r,i,s){xt(t.config.authDomain,t,"auth-domain-config-required"),xt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:du,eventId:i};if(e instanceof UE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",e8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Pp){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${pM}=${encodeURIComponent(l)}`:"";return`${gM(t)}?${Ep(a).slice(1)}${c}`}function gM({config:t}){return t.emulator?c5(t,fM):`https://${t.authDomain}/${dM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GE,this._completeRedirectFn=BD,this._overrideRedirectResult=jD}async _openPopup(e,n,r,i){var s;xa((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Uw(e,n,r,g2(),i);return uM(e,o,p5())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Uw(e,n,r,g2(),i);return bD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xa(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iM(e),r=new zD(e);return n.register("authEvent",i=>(xt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ty,{type:Ty},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ty];o!==void 0&&n(!!o),Hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jE()||CE()||h5()}}const yM=mM;var zw="@firebase/auth",qw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xM(t){Zc(new zl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;xt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FE(t)},c=new F7(r,i,s,l);return K7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zc(new zl("auth-internal",e=>{const n=fu(e.getProvider("auth").getImmediate());return(r=>new vM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xo(zw,qw,bM(t)),xo(zw,qw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=5*60,wM=pE("authIdTokenMaxAge")||_M;let Hw=null;const SM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wM)return;const i=n==null?void 0:n.token;Hw!==i&&(Hw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kM(t=o5()){const e=n1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$7(t,{popupRedirectResolver:yM,persistence:[ND,mD,GE]}),r=pE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=SM(s.toString());hD(n,o,()=>o(n.currentUser)),uD(n,a=>o(a))}}const i=hE("auth");return i&&G7(n,`http://${i}`),n}function AM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}V7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=_o("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",AM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xM("Browser");var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uc,tI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function L(){}L.prototype=S.prototype,I.D=S.prototype,I.prototype=new L,I.prototype.constructor=I,I.C=function(D,x,w){for(var P=Array(arguments.length-2),j=2;j<arguments.length;j++)P[j-2]=arguments[j];return S.prototype[x].apply(D,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,S,L){L||(L=0);var D=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)D[x]=S.charCodeAt(L++)|S.charCodeAt(L++)<<8|S.charCodeAt(L++)<<16|S.charCodeAt(L++)<<24;else for(x=0;16>x;++x)D[x]=S[L++]|S[L++]<<8|S[L++]<<16|S[L++]<<24;S=I.g[0],L=I.g[1],x=I.g[2];var w=I.g[3],P=S+(w^L&(x^w))+D[0]+3614090360&4294967295;S=L+(P<<7&4294967295|P>>>25),P=w+(x^S&(L^x))+D[1]+3905402710&4294967295,w=S+(P<<12&4294967295|P>>>20),P=x+(L^w&(S^L))+D[2]+606105819&4294967295,x=w+(P<<17&4294967295|P>>>15),P=L+(S^x&(w^S))+D[3]+3250441966&4294967295,L=x+(P<<22&4294967295|P>>>10),P=S+(w^L&(x^w))+D[4]+4118548399&4294967295,S=L+(P<<7&4294967295|P>>>25),P=w+(x^S&(L^x))+D[5]+1200080426&4294967295,w=S+(P<<12&4294967295|P>>>20),P=x+(L^w&(S^L))+D[6]+2821735955&4294967295,x=w+(P<<17&4294967295|P>>>15),P=L+(S^x&(w^S))+D[7]+4249261313&4294967295,L=x+(P<<22&4294967295|P>>>10),P=S+(w^L&(x^w))+D[8]+1770035416&4294967295,S=L+(P<<7&4294967295|P>>>25),P=w+(x^S&(L^x))+D[9]+2336552879&4294967295,w=S+(P<<12&4294967295|P>>>20),P=x+(L^w&(S^L))+D[10]+4294925233&4294967295,x=w+(P<<17&4294967295|P>>>15),P=L+(S^x&(w^S))+D[11]+2304563134&4294967295,L=x+(P<<22&4294967295|P>>>10),P=S+(w^L&(x^w))+D[12]+1804603682&4294967295,S=L+(P<<7&4294967295|P>>>25),P=w+(x^S&(L^x))+D[13]+4254626195&4294967295,w=S+(P<<12&4294967295|P>>>20),P=x+(L^w&(S^L))+D[14]+2792965006&4294967295,x=w+(P<<17&4294967295|P>>>15),P=L+(S^x&(w^S))+D[15]+1236535329&4294967295,L=x+(P<<22&4294967295|P>>>10),P=S+(x^w&(L^x))+D[1]+4129170786&4294967295,S=L+(P<<5&4294967295|P>>>27),P=w+(L^x&(S^L))+D[6]+3225465664&4294967295,w=S+(P<<9&4294967295|P>>>23),P=x+(S^L&(w^S))+D[11]+643717713&4294967295,x=w+(P<<14&4294967295|P>>>18),P=L+(w^S&(x^w))+D[0]+3921069994&4294967295,L=x+(P<<20&4294967295|P>>>12),P=S+(x^w&(L^x))+D[5]+3593408605&4294967295,S=L+(P<<5&4294967295|P>>>27),P=w+(L^x&(S^L))+D[10]+38016083&4294967295,w=S+(P<<9&4294967295|P>>>23),P=x+(S^L&(w^S))+D[15]+3634488961&4294967295,x=w+(P<<14&4294967295|P>>>18),P=L+(w^S&(x^w))+D[4]+3889429448&4294967295,L=x+(P<<20&4294967295|P>>>12),P=S+(x^w&(L^x))+D[9]+568446438&4294967295,S=L+(P<<5&4294967295|P>>>27),P=w+(L^x&(S^L))+D[14]+3275163606&4294967295,w=S+(P<<9&4294967295|P>>>23),P=x+(S^L&(w^S))+D[3]+4107603335&4294967295,x=w+(P<<14&4294967295|P>>>18),P=L+(w^S&(x^w))+D[8]+1163531501&4294967295,L=x+(P<<20&4294967295|P>>>12),P=S+(x^w&(L^x))+D[13]+2850285829&4294967295,S=L+(P<<5&4294967295|P>>>27),P=w+(L^x&(S^L))+D[2]+4243563512&4294967295,w=S+(P<<9&4294967295|P>>>23),P=x+(S^L&(w^S))+D[7]+1735328473&4294967295,x=w+(P<<14&4294967295|P>>>18),P=L+(w^S&(x^w))+D[12]+2368359562&4294967295,L=x+(P<<20&4294967295|P>>>12),P=S+(L^x^w)+D[5]+4294588738&4294967295,S=L+(P<<4&4294967295|P>>>28),P=w+(S^L^x)+D[8]+2272392833&4294967295,w=S+(P<<11&4294967295|P>>>21),P=x+(w^S^L)+D[11]+1839030562&4294967295,x=w+(P<<16&4294967295|P>>>16),P=L+(x^w^S)+D[14]+4259657740&4294967295,L=x+(P<<23&4294967295|P>>>9),P=S+(L^x^w)+D[1]+2763975236&4294967295,S=L+(P<<4&4294967295|P>>>28),P=w+(S^L^x)+D[4]+1272893353&4294967295,w=S+(P<<11&4294967295|P>>>21),P=x+(w^S^L)+D[7]+4139469664&4294967295,x=w+(P<<16&4294967295|P>>>16),P=L+(x^w^S)+D[10]+3200236656&4294967295,L=x+(P<<23&4294967295|P>>>9),P=S+(L^x^w)+D[13]+681279174&4294967295,S=L+(P<<4&4294967295|P>>>28),P=w+(S^L^x)+D[0]+3936430074&4294967295,w=S+(P<<11&4294967295|P>>>21),P=x+(w^S^L)+D[3]+3572445317&4294967295,x=w+(P<<16&4294967295|P>>>16),P=L+(x^w^S)+D[6]+76029189&4294967295,L=x+(P<<23&4294967295|P>>>9),P=S+(L^x^w)+D[9]+3654602809&4294967295,S=L+(P<<4&4294967295|P>>>28),P=w+(S^L^x)+D[12]+3873151461&4294967295,w=S+(P<<11&4294967295|P>>>21),P=x+(w^S^L)+D[15]+530742520&4294967295,x=w+(P<<16&4294967295|P>>>16),P=L+(x^w^S)+D[2]+3299628645&4294967295,L=x+(P<<23&4294967295|P>>>9),P=S+(x^(L|~w))+D[0]+4096336452&4294967295,S=L+(P<<6&4294967295|P>>>26),P=w+(L^(S|~x))+D[7]+1126891415&4294967295,w=S+(P<<10&4294967295|P>>>22),P=x+(S^(w|~L))+D[14]+2878612391&4294967295,x=w+(P<<15&4294967295|P>>>17),P=L+(w^(x|~S))+D[5]+4237533241&4294967295,L=x+(P<<21&4294967295|P>>>11),P=S+(x^(L|~w))+D[12]+1700485571&4294967295,S=L+(P<<6&4294967295|P>>>26),P=w+(L^(S|~x))+D[3]+2399980690&4294967295,w=S+(P<<10&4294967295|P>>>22),P=x+(S^(w|~L))+D[10]+4293915773&4294967295,x=w+(P<<15&4294967295|P>>>17),P=L+(w^(x|~S))+D[1]+2240044497&4294967295,L=x+(P<<21&4294967295|P>>>11),P=S+(x^(L|~w))+D[8]+1873313359&4294967295,S=L+(P<<6&4294967295|P>>>26),P=w+(L^(S|~x))+D[15]+4264355552&4294967295,w=S+(P<<10&4294967295|P>>>22),P=x+(S^(w|~L))+D[6]+2734768916&4294967295,x=w+(P<<15&4294967295|P>>>17),P=L+(w^(x|~S))+D[13]+1309151649&4294967295,L=x+(P<<21&4294967295|P>>>11),P=S+(x^(L|~w))+D[4]+4149444226&4294967295,S=L+(P<<6&4294967295|P>>>26),P=w+(L^(S|~x))+D[11]+3174756917&4294967295,w=S+(P<<10&4294967295|P>>>22),P=x+(S^(w|~L))+D[2]+718787259&4294967295,x=w+(P<<15&4294967295|P>>>17),P=L+(w^(x|~S))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(x+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+w&4294967295}r.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var L=S-this.blockSize,D=this.B,x=this.h,w=0;w<S;){if(x==0)for(;w<=L;)i(this,I,w),w+=this.blockSize;if(typeof I=="string"){for(;w<S;)if(D[x++]=I.charCodeAt(w++),x==this.blockSize){i(this,D),x=0;break}}else for(;w<S;)if(D[x++]=I[w++],x==this.blockSize){i(this,D),x=0;break}}this.h=x,this.o+=S},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var L=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=L&255,L/=256;for(this.u(I),I=Array(16),S=L=0;4>S;++S)for(var D=0;32>D;D+=8)I[L++]=this.g[S]>>>D&255;return I};function s(I,S){var L=a;return Object.prototype.hasOwnProperty.call(L,I)?L[I]:L[I]=S(I)}function o(I,S){this.h=S;for(var L=[],D=!0,x=I.length-1;0<=x;x--){var w=I[x]|0;D&&w==S||(L[x]=w,D=!1)}this.g=L}var a={};function l(I){return-128<=I&&128>I?s(I,function(S){return new o([S|0],0>S?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return A(c(-I));for(var S=[],L=1,D=0;I>=L;D++)S[D]=I/L|0,L*=4294967296;return new o(S,0)}function u(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return A(u(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=c(Math.pow(S,8)),D=h,x=0;x<I.length;x+=8){var w=Math.min(8,I.length-x),P=parseInt(I.substring(x,x+w),S);8>w?(w=c(Math.pow(S,w)),D=D.j(w).add(c(P))):(D=D.j(L),D=D.add(c(P)))}return D}var h=l(0),p=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-A(this).m();for(var I=0,S=1,L=0;L<this.g.length;L++){var D=this.i(L);I+=(0<=D?D:4294967296+D)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(b(this))return"-"+A(this).toString(I);for(var S=c(Math.pow(I,6)),L=this,D="";;){var x=R(L,S).g;L=v(L,x.j(S));var w=((0<L.g.length?L.g[0]:L.h)>>>0).toString(I);if(L=x,y(L))return w+D;for(;6>w.length;)w="0"+w;D=w+D}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function b(I){return I.h==-1}t.l=function(I){return I=v(this,I),b(I)?-1:y(I)?0:1};function A(I){for(var S=I.g.length,L=[],D=0;D<S;D++)L[D]=~I.g[D];return new o(L,~I.h).add(p)}t.abs=function(){return b(this)?A(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),L=[],D=0,x=0;x<=S;x++){var w=D+(this.i(x)&65535)+(I.i(x)&65535),P=(w>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);D=P>>>16,w&=65535,P&=65535,L[x]=P<<16|w}return new o(L,L[L.length-1]&-2147483648?-1:0)};function v(I,S){return I.add(A(S))}t.j=function(I){if(y(this)||y(I))return h;if(b(this))return b(I)?A(this).j(A(I)):A(A(this).j(I));if(b(I))return A(this.j(A(I)));if(0>this.l(f)&&0>I.l(f))return c(this.m()*I.m());for(var S=this.g.length+I.g.length,L=[],D=0;D<2*S;D++)L[D]=0;for(D=0;D<this.g.length;D++)for(var x=0;x<I.g.length;x++){var w=this.i(D)>>>16,P=this.i(D)&65535,j=I.i(x)>>>16,q=I.i(x)&65535;L[2*D+2*x]+=P*q,_(L,2*D+2*x),L[2*D+2*x+1]+=w*q,_(L,2*D+2*x+1),L[2*D+2*x+1]+=P*j,_(L,2*D+2*x+1),L[2*D+2*x+2]+=w*j,_(L,2*D+2*x+2)}for(D=0;D<S;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=S;D<2*S;D++)L[D]=0;return new o(L,0)};function _(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function k(I,S){this.g=I,this.h=S}function R(I,S){if(y(S))throw Error("division by zero");if(y(I))return new k(h,h);if(b(I))return S=R(A(I),S),new k(A(S.g),A(S.h));if(b(S))return S=R(I,A(S)),new k(A(S.g),S.h);if(30<I.g.length){if(b(I)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var L=p,D=S;0>=D.l(I);)L=M(L),D=M(D);var x=z(L,1),w=z(D,1);for(D=z(D,2),L=z(L,2);!y(D);){var P=w.add(D);0>=P.l(I)&&(x=x.add(L),w=P),D=z(D,1),L=z(L,1)}return S=v(I,x.j(S)),new k(x,S)}for(x=h;0<=I.l(S);){for(L=Math.max(1,Math.floor(I.m()/S.m())),D=Math.ceil(Math.log(L)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),w=c(L),P=w.j(S);b(P)||0<P.l(I);)L-=D,w=c(L),P=w.j(S);y(w)&&(w=p),x=x.add(w),I=v(I,P)}return new k(x,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),L=[],D=0;D<S;D++)L[D]=this.i(D)&I.i(D);return new o(L,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),L=[],D=0;D<S;D++)L[D]=this.i(D)|I.i(D);return new o(L,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),L=[],D=0;D<S;D++)L[D]=this.i(D)^I.i(D);return new o(L,this.h^I.h)};function M(I){for(var S=I.g.length+1,L=[],D=0;D<S;D++)L[D]=I.i(D)<<1|I.i(D-1)>>>31;return new o(L,I.h)}function z(I,S){var L=S>>5;S%=32;for(var D=I.g.length-L,x=[],w=0;w<D;w++)x[w]=0<S?I.i(w+L)>>>S|I.i(w+L+1)<<32-S:I.i(w+L);return new o(x,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Uc=o}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nI,qd,rI,xm,b2,iI,sI,oI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,C,B){return g==Array.prototype||g==Object.prototype||(g[C]=B.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rg=="object"&&Rg];for(var C=0;C<g.length;++C){var B=g[C];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(g,C){if(C)e:{var B=r;g=g.split(".");for(var ee=0;ee<g.length-1;ee++){var me=g[ee];if(!(me in B))break e;B=B[me]}g=g[g.length-1],ee=B[g],C=C(ee),C!=ee&&C!=null&&e(B,g,{configurable:!0,writable:!0,value:C})}}function s(g,C){g instanceof String&&(g+="");var B=0,ee=!1,me={next:function(){if(!ee&&B<g.length){var ke=B++;return{value:C(ke,g[ke]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(g){return g||function(){return s(this,function(C,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(g){var C=typeof g;return C=C!="object"?C:g?Array.isArray(g)?"array":C:"null",C=="array"||C=="object"&&typeof g.length=="number"}function c(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function u(g,C,B){return g.call.apply(g.bind,arguments)}function h(g,C,B){if(!g)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,ee),g.apply(C,me)}}return function(){return g.apply(C,arguments)}}function p(g,C,B){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function f(g,C){var B=Array.prototype.slice.call(arguments,1);return function(){var ee=B.slice();return ee.push.apply(ee,arguments),g.apply(this,ee)}}function y(g,C){function B(){}B.prototype=C.prototype,g.aa=C.prototype,g.prototype=new B,g.prototype.constructor=g,g.Qb=function(ee,me,ke){for(var ze=Array(arguments.length-2),St=2;St<arguments.length;St++)ze[St-2]=arguments[St];return C.prototype[me].apply(ee,ze)}}function b(g){const C=g.length;if(0<C){const B=Array(C);for(let ee=0;ee<C;ee++)B[ee]=g[ee];return B}return[]}function A(g,C){for(let B=1;B<arguments.length;B++){const ee=arguments[B];if(l(ee)){const me=g.length||0,ke=ee.length||0;g.length=me+ke;for(let ze=0;ze<ke;ze++)g[me+ze]=ee[ze]}else g.push(ee)}}class v{constructor(C,B){this.i=C,this.j=B,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function _(g){return/^[\s\xa0]*$/.test(g)}function k(){var g=a.navigator;return g&&(g=g.userAgent)?g:""}function R(g){return R[" "](g),g}R[" "]=function(){};var M=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(g,C,B){for(const ee in g)C.call(B,g[ee],ee,g)}function I(g,C){for(const B in g)C.call(void 0,g[B],B,g)}function S(g){const C={};for(const B in g)C[B]=g[B];return C}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(g,C){let B,ee;for(let me=1;me<arguments.length;me++){ee=arguments[me];for(B in ee)g[B]=ee[B];for(let ke=0;ke<L.length;ke++)B=L[ke],Object.prototype.hasOwnProperty.call(ee,B)&&(g[B]=ee[B])}}function x(g){var C=1;g=g.split(":");const B=[];for(;0<C&&g.length;)B.push(g.shift()),C--;return g.length&&B.push(g.join(":")),B}function w(g){a.setTimeout(()=>{throw g},0)}function P(){var g=H;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class j{constructor(){this.h=this.g=null}add(C,B){const ee=q.get();ee.set(C,B),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var q=new v(()=>new U,g=>g.reset());class U{constructor(){this.next=this.g=this.h=null}set(C,B){this.h=C,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let W,O=!1,H=new j,ne=()=>{const g=a.Promise.resolve(void 0);W=()=>{g.then(ae)}};var ae=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(B){w(B)}var C=q;C.j(g),100>C.h&&(C.h++,g.next=C.g,C.g=g)}O=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const B=()=>{};a.addEventListener("test",B,C),a.removeEventListener("test",B,C)}catch{}return g}();function Q(g,C){if(Y.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var B=this.type=g.type,ee=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget){if(M){e:{try{R(C.nodeName);var me=!0;break e}catch{}me=!1}me||(C=null)}}else B=="mouseover"?C=g.fromElement:B=="mouseout"&&(C=g.toElement);this.relatedTarget=C,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:re[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Q.aa.h.call(this)}}y(Q,Y);var re={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),pe=0;function he(g,C,B,ee,me){this.listener=g,this.proxy=null,this.src=C,this.type=B,this.capture=!!ee,this.ha=me,this.key=++pe,this.da=this.fa=!1}function _e(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function xe(g){this.src=g,this.g={},this.h=0}xe.prototype.add=function(g,C,B,ee,me){var ke=g.toString();g=this.g[ke],g||(g=this.g[ke]=[],this.h++);var ze=je(g,C,ee,me);return-1<ze?(C=g[ze],B||(C.fa=!1)):(C=new he(C,this.src,ke,!!ee,me),C.fa=B,g.push(C)),C};function De(g,C){var B=C.type;if(B in g.g){var ee=g.g[B],me=Array.prototype.indexOf.call(ee,C,void 0),ke;(ke=0<=me)&&Array.prototype.splice.call(ee,me,1),ke&&(_e(C),g.g[B].length==0&&(delete g.g[B],g.h--))}}function je(g,C,B,ee){for(var me=0;me<g.length;++me){var ke=g[me];if(!ke.da&&ke.listener==C&&ke.capture==!!B&&ke.ha==ee)return me}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Ae={};function $(g,C,B,ee,me){if(Array.isArray(C)){for(var ke=0;ke<C.length;ke++)$(g,C[ke],B,ee,me);return null}return B=$e(B),g&&g[ce]?g.K(C,B,c(ee)?!!ee.capture:!1,me):Te(g,C,B,!1,ee,me)}function Te(g,C,B,ee,me,ke){if(!C)throw Error("Invalid event type");var ze=c(me)?!!me.capture:!!me,St=Ze(g);if(St||(g[We]=St=new xe(g)),B=St.add(C,B,ee,ze,ke),B.proxy)return B;if(ee=Pe(),B.proxy=ee,ee.src=g,ee.listener=B,g.addEventListener)Z||(me=ze),me===void 0&&(me=!1),g.addEventListener(C.toString(),ee,me);else if(g.attachEvent)g.attachEvent(Ve(C.toString()),ee);else if(g.addListener&&g.removeListener)g.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Pe(){function g(B){return C.call(g.src,g.listener,B)}const C=Be;return g}function be(g,C,B,ee,me){if(Array.isArray(C))for(var ke=0;ke<C.length;ke++)be(g,C[ke],B,ee,me);else ee=c(ee)?!!ee.capture:!!ee,B=$e(B),g&&g[ce]?(g=g.i,C=String(C).toString(),C in g.g&&(ke=g.g[C],B=je(ke,B,ee,me),-1<B&&(_e(ke[B]),Array.prototype.splice.call(ke,B,1),ke.length==0&&(delete g.g[C],g.h--)))):g&&(g=Ze(g))&&(C=g.g[C.toString()],g=-1,C&&(g=je(C,B,ee,me)),(B=-1<g?C[g]:null)&&Ee(B))}function Ee(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[ce])De(C.i,g);else{var B=g.type,ee=g.proxy;C.removeEventListener?C.removeEventListener(B,ee,g.capture):C.detachEvent?C.detachEvent(Ve(B),ee):C.addListener&&C.removeListener&&C.removeListener(ee),(B=Ze(C))?(De(B,g),B.h==0&&(B.src=null,C[We]=null)):_e(g)}}}function Ve(g){return g in Ae?Ae[g]:Ae[g]="on"+g}function Be(g,C){if(g.da)g=!0;else{C=new Q(C,this);var B=g.listener,ee=g.ha||g.src;g.fa&&Ee(g),g=B.call(ee,C)}return g}function Ze(g){return g=g[We],g instanceof xe?g:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(g){return typeof g=="function"?g:(g[ot]||(g[ot]=function(C){return g.handleEvent(C)}),g[ot])}function it(){F.call(this),this.i=new xe(this),this.M=this,this.F=null}y(it,F),it.prototype[ce]=!0,it.prototype.removeEventListener=function(g,C,B,ee){be(this,g,C,B,ee)};function lt(g,C){var B,ee=g.F;if(ee)for(B=[];ee;ee=ee.F)B.push(ee);if(g=g.M,ee=C.type||C,typeof C=="string")C=new Y(C,g);else if(C instanceof Y)C.target=C.target||g;else{var me=C;C=new Y(ee,g),D(C,me)}if(me=!0,B)for(var ke=B.length-1;0<=ke;ke--){var ze=C.g=B[ke];me=Nt(ze,ee,!0,C)&&me}if(ze=C.g=g,me=Nt(ze,ee,!0,C)&&me,me=Nt(ze,ee,!1,C)&&me,B)for(ke=0;ke<B.length;ke++)ze=C.g=B[ke],me=Nt(ze,ee,!1,C)&&me}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var g=this.i,C;for(C in g.g){for(var B=g.g[C],ee=0;ee<B.length;ee++)_e(B[ee]);delete g.g[C],g.h--}}this.F=null},it.prototype.K=function(g,C,B,ee){return this.i.add(String(g),C,!1,B,ee)},it.prototype.L=function(g,C,B,ee){return this.i.add(String(g),C,!0,B,ee)};function Nt(g,C,B,ee){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();for(var me=!0,ke=0;ke<C.length;++ke){var ze=C[ke];if(ze&&!ze.da&&ze.capture==B){var St=ze.listener,Ot=ze.ha||ze.src;ze.fa&&De(g.i,ze),me=St.call(Ot,ee)!==!1&&me}}return me&&!ee.defaultPrevented}function ct(g,C,B){if(typeof g=="function")B&&(g=p(g,B));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:a.setTimeout(g,C||0)}function Pt(g){g.g=ct(()=>{g.g=null,g.i&&(g.i=!1,Pt(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class Xe extends F{constructor(C,B){super(),this.m=C,this.l=B,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function An(g){F.call(this),this.h=g,this.g={}}y(An,F);var Lt=[];function kr(g){z(g.g,function(C,B){this.g.hasOwnProperty(B)&&Ee(C)},g),g.g={}}An.prototype.N=function(){An.aa.N.call(this),kr(this)},An.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _t=a.JSON.stringify,gt=a.JSON.parse,ai=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function Mt(){}Mt.prototype.h=null;function ts(g){return g.h||(g.h=g.i())}function ln(){}var cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function li(){Y.call(this,"d")}y(li,Y);function Jt(){Y.call(this,"c")}y(Jt,Y);var ht={},Bt=null;function _i(){return Bt=Bt||new it}ht.La="serverreachability";function Fn(g){Y.call(this,ht.La,g)}y(Fn,Y);function Br(g){const C=_i();lt(C,new Fn(C))}ht.STAT_EVENT="statevent";function ji(g,C){Y.call(this,ht.STAT_EVENT,g),this.stat=C}y(ji,Y);function nt(g){const C=_i();lt(C,new ji(C,g))}ht.Ma="timingevent";function wi(g,C){Y.call(this,ht.Ma,g),this.size=C}y(wi,Y);function Ur(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},C)}function nr(){this.g=!0}nr.prototype.xa=function(){this.g=!1};function Wn(g,C,B,ee,me,ke){g.info(function(){if(g.g)if(ke)for(var ze="",St=ke.split("&"),Ot=0;Ot<St.length;Ot++){var kt=St[Ot].split("=");if(1<kt.length){var Qt=kt[0];kt=kt[1];var cn=Qt.split("_");ze=2<=cn.length&&cn[1]=="type"?ze+(Qt+"="+kt+"&"):ze+(Qt+"=redacted&")}}else ze=null;else ze=ke;return"XMLHTTP REQ ("+ee+") [attempt "+me+"]: "+C+`
`+B+`
`+ze})}function Vn(g,C,B,ee,me,ke,ze){g.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+me+"]: "+C+`
`+B+`
`+ke+" "+ze})}function rr(g,C,B,ee){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+bs(g,B)+(ee?" "+ee:"")})}function Ia(g,C){g.info(function(){return"TIMEOUT: "+C})}nr.prototype.info=function(){};function bs(g,C){if(!g.g)return C;if(!C)return null;try{var B=JSON.parse(C);if(B){for(g=0;g<B.length;g++)if(Array.isArray(B[g])){var ee=B[g];if(!(2>ee.length)){var me=ee[1];if(Array.isArray(me)&&!(1>me.length)){var ke=me[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(var ze=1;ze<me.length;ze++)me[ze]=""}}}}return _t(B)}catch{return C}}var zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function ui(){}y(ui,Mt),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},ci=new ui;function $n(g,C,B,ee){this.j=g,this.i=C,this.l=B,this.R=ee||1,this.U=new An(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}var Ys={},Qs={};function Xs(g,C,B){g.L=1,g.v=jo(hi(C)),g.m=B,g.P=!0,Lo(g,null)}function Lo(g,C){g.F=Date.now(),Na(g),g.A=hi(g.v);var B=g.A,ee=g.R;Array.isArray(ee)||(ee=[String(ee)]),vt(B.i,"t",ee),g.C=0,B=g.j.J,g.h=new Fi,g.g=K(g.j,B?C:null,!g.m),0<g.O&&(g.M=new Xe(p(g.Y,g,g.g),g.O)),C=g.U,B=g.g,ee=g.ca;var me="readystatechange";Array.isArray(me)||(me&&(Lt[0]=me.toString()),me=Lt);for(var ke=0;ke<me.length;ke++){var ze=$(B,me[ke],ee||C.handleEvent,!1,C.h||C);if(!ze)break;C.g[ze.key]=ze}C=g.H?S(g.H):{},g.m?(g.u||(g.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,C)):(g.u="GET",g.g.ea(g.A,g.u,null,C)),Br(),Wn(g.i,g.u,g.A,g.l,g.R,g.m)}$n.prototype.ca=function(g){g=g.target;const C=this.M;C&&ur(g)==3?C.j():this.Y(g)},$n.prototype.Y=function(g){try{if(g==this.g)e:{const cn=ur(this.g);var C=this.g.Ba();const Is=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||cn!=4||C==7||(C==8||0>=Is?Br(3):Br(2)),Js(this);var B=this.g.Z();this.X=B;t:if(Ro(this)){var ee=Nu(this.g);g="";var me=ee.length,ke=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xs(this),Zs(this);var ze="";break t}this.h.i=new a.TextDecoder}for(C=0;C<me;C++)this.h.h=!0,g+=this.h.i.decode(ee[C],{stream:!(ke&&C==me-1)});ee.length=0,this.h.g+=g,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=B==200,Vn(this.i,this.u,this.A,this.l,this.R,cn,B),this.o){if(this.T&&!this.K){t:{if(this.g){var St,Ot=this.g;if((St=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(St)){var kt=St;break t}}kt=null}if(B=kt)rr(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Do(this,B);else{this.o=!1,this.s=3,nt(12),xs(this),Zs(this);break e}}if(this.P){B=!0;let Er;for(;!this.J&&this.C<ze.length;)if(Er=bu(this,ze),Er==Qs){cn==4&&(this.s=4,nt(14),B=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Er==Ys){this.s=4,nt(15),rr(this.i,this.l,ze,"[Invalid Chunk]"),B=!1;break}else rr(this.i,this.l,Er,null),Do(this,Er);if(Ro(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||ze.length!=0||this.h.h||(this.s=1,nt(16),B=!1),this.o=this.o&&B,!B)rr(this.i,this.l,ze,"[Invalid Chunked Response]"),xs(this),Zs(this);else if(0<ze.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),za(Qt),Qt.M=!0,nt(11))}}else rr(this.i,this.l,ze,null),Do(this,ze);cn==4&&xs(this),this.o&&!this.J&&(cn==4?io(this.j,this):(this.o=!1,Na(this)))}else no(this.g),B==400&&0<ze.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),xs(this),Zs(this)}}}catch{}finally{}};function Ro(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function bu(g,C){var B=g.C,ee=C.indexOf(`
`,B);return ee==-1?Qs:(B=Number(C.substring(B,ee)),isNaN(B)?Ys:(ee+=1,ee+B>C.length?Qs:(C=C.slice(ee,ee+B),g.C=ee+B,C)))}$n.prototype.cancel=function(){this.J=!0,xs(this)};function Na(g){g.S=Date.now()+g.I,xu(g,g.I)}function xu(g,C){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ur(p(g.ba,g),C)}function Js(g){g.B&&(a.clearTimeout(g.B),g.B=null)}$n.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Ia(this.i,this.A),this.L!=2&&(Br(),nt(17)),xs(this),this.s=2,Zs(this)):xu(this,this.S-g)};function Zs(g){g.j.G==0||g.J||io(g.j,g)}function xs(g){Js(g);var C=g.M;C&&typeof C.ma=="function"&&C.ma(),g.M=null,kr(g.U),g.g&&(C=g.g,g.g=null,C.abort(),C.ma())}function Do(g,C){try{var B=g.j;if(B.G!=0&&(B.g==g||sc(B.h,g))){if(!g.K&&sc(B.h,g)&&B.G==3){try{var ee=B.Da.g.parse(C)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var me=ee;if(me[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<g.F)Es(B),Fa(B);else break e;zo(B),nt(18)}}else B.za=me[1],0<B.za-B.T&&37500>me[2]&&B.F&&B.v==0&&!B.C&&(B.C=Ur(p(B.Za,B),6e3));if(1>=Mo(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else qr(B,11)}else if((g.K||B.g==g)&&Es(B),!_(C))for(me=B.Da.g.parse(C),C=0;C<me.length;C++){let kt=me[C];if(B.T=kt[0],kt=kt[1],B.G==2)if(kt[0]=="c"){B.K=kt[1],B.ia=kt[2];const Qt=kt[3];Qt!=null&&(B.la=Qt,B.j.info("VER="+B.la));const cn=kt[4];cn!=null&&(B.Aa=cn,B.j.info("SVER="+B.Aa));const Is=kt[5];Is!=null&&typeof Is=="number"&&0<Is&&(ee=1.5*Is,B.L=ee,B.j.info("backChannelRequestTimeoutMs_="+ee)),ee=B;const Er=g.g;if(Er){const so=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(so){var ke=ee.h;ke.g||so.indexOf("spdy")==-1&&so.indexOf("quic")==-1&&so.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(vn(ke,ke.h),ke.h=null))}if(ee.D){const oo=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(ee.ya=oo,Zt(ee.I,ee.D,oo))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-g.F,B.j.info("Handshake RTT: "+B.R+"ms")),ee=B;var ze=g;if(ee.qa=E(ee,ee.J?ee.ia:null,ee.W),ze.K){oc(ee.h,ze);var St=ze,Ot=ee.L;Ot&&(St.I=Ot),St.B&&(Js(St),Na(St)),ee.g=ze}else Ua(ee);0<B.i.length&&Va(B)}else kt[0]!="stop"&&kt[0]!="close"||qr(B,7);else B.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?qr(B,7):As(B):kt[0]!="noop"&&B.l&&B.l.ta(kt),B.v=0)}}Br(4)}catch{}}var ed=class{constructor(g,C){this.g=g,this.map=C}};function ic(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _u(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Mo(g){return g.h?1:g.g?g.g.size:0}function sc(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function vn(g,C){g.g?g.g.add(C):g.h=C}function oc(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}ic.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ac(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const B of g.g.values())C=C.concat(B.D);return C}return b(g.i)}function wu(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(l(g)){for(var C=[],B=g.length,ee=0;ee<B;ee++)C.push(g[ee]);return C}C=[],B=0;for(ee in g)C[B++]=g[ee];return C}function lc(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(l(g)||typeof g=="string"){var C=[];g=g.length;for(var B=0;B<g;B++)C.push(B);return C}C=[],B=0;for(const ee in g)C[B++]=ee;return C}}}function Su(g,C){if(g.forEach&&typeof g.forEach=="function")g.forEach(C,void 0);else if(l(g)||typeof g=="string")Array.prototype.forEach.call(g,C,void 0);else for(var B=lc(g),ee=wu(g),me=ee.length,ke=0;ke<me;ke++)C.call(void 0,ee[ke],B&&B[ke],g)}var ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(g,C){if(g){g=g.split("&");for(var B=0;B<g.length;B++){var ee=g[B].indexOf("="),me=null;if(0<=ee){var ke=g[B].substring(0,ee);me=g[B].substring(ee+1)}else ke=g[B];C(ke,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Bn(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Bn){this.h=g.h,Oo(this,g.j),this.o=g.o,this.g=g.g,Ta(this,g.s),this.l=g.l;var C=g.i,B=new eo;B.i=C.i,C.g&&(B.g=new Map(C.g),B.h=C.h),cc(this,B),this.m=g.m}else g&&(C=String(g).match(ki))?(this.h=!1,Oo(this,C[1]||"",!0),this.o=Fo(C[2]||""),this.g=Fo(C[3]||"",!0),Ta(this,C[4]),this.l=Fo(C[5]||"",!0),cc(this,C[6]||"",!0),this.m=Fo(C[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}Bn.prototype.toString=function(){var g=[],C=this.j;C&&g.push(_s(C,ku,!0),":");var B=this.g;return(B||C=="file")&&(g.push("//"),(C=this.o)&&g.push(_s(C,ku,!0),"@"),g.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&g.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&g.push("/"),g.push(_s(B,B.charAt(0)=="/"?ws:nd,!0))),(B=this.i.toString())&&g.push("?",B),(B=this.m)&&g.push("#",_s(B,La)),g.join("")};function hi(g){return new Bn(g)}function Oo(g,C,B){g.j=B?Fo(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Ta(g,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);g.s=C}else g.s=null}function cc(g,C,B){C instanceof eo?(g.i=C,rd(g.i,g.h)):(B||(C=_s(C,Ca)),g.i=new eo(C,g.h))}function Zt(g,C,B){g.i.set(C,B)}function jo(g){return Zt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Fo(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function _s(g,C,B){return typeof g=="string"?(g=encodeURI(g).replace(C,td),B&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function td(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ku=/[#\/\?@]/g,nd=/[#\?:]/g,ws=/[#\?]/g,Ca=/[#\?@]/g,La=/#/g;function eo(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function bn(g){g.g||(g.g=new Map,g.h=0,g.i&&Pa(g.i,function(C,B){g.add(decodeURIComponent(C.replace(/\+/g," ")),B)}))}t=eo.prototype,t.add=function(g,C){bn(this),this.i=null,g=to(this,g);var B=this.g.get(g);return B||this.g.set(g,B=[]),B.push(C),this.h+=1,this};function Au(g,C){bn(g),C=to(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function uc(g,C){return bn(g),C=to(g,C),g.g.has(C)}t.forEach=function(g,C){bn(this),this.g.forEach(function(B,ee){B.forEach(function(me){g.call(C,me,ee,this)},this)},this)},t.na=function(){bn(this);const g=Array.from(this.g.values()),C=Array.from(this.g.keys()),B=[];for(let ee=0;ee<C.length;ee++){const me=g[ee];for(let ke=0;ke<me.length;ke++)B.push(C[ee])}return B},t.V=function(g){bn(this);let C=[];if(typeof g=="string")uc(this,g)&&(C=C.concat(this.g.get(to(this,g))));else{g=Array.from(this.g.values());for(let B=0;B<g.length;B++)C=C.concat(g[B])}return C},t.set=function(g,C){return bn(this),this.i=null,g=to(this,g),uc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=this.V(g),0<g.length?String(g[0]):C):C};function vt(g,C,B){Au(g,C),0<B.length&&(g.i=null,g.g.set(to(g,C),b(B)),g.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(var B=0;B<C.length;B++){var ee=C[B];const ke=encodeURIComponent(String(ee)),ze=this.V(ee);for(ee=0;ee<ze.length;ee++){var me=ke;ze[ee]!==""&&(me+="="+encodeURIComponent(String(ze[ee]))),g.push(me)}}return this.i=g.join("&")};function to(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function rd(g,C){C&&!g.j&&(bn(g),g.i=null,g.g.forEach(function(B,ee){var me=ee.toLowerCase();ee!=me&&(Au(this,ee),vt(this,me,B))},g)),g.j=C}function ns(g,C){const B=new nr;if(a.Image){const ee=new Image;ee.onload=f(Vi,B,"TestLoadImage: loaded",!0,C,ee),ee.onerror=f(Vi,B,"TestLoadImage: error",!1,C,ee),ee.onabort=f(Vi,B,"TestLoadImage: abort",!1,C,ee),ee.ontimeout=f(Vi,B,"TestLoadImage: timeout",!1,C,ee),a.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=g}else C(!1)}function Eu(g,C){const B=new nr,ee=new AbortController,me=setTimeout(()=>{ee.abort(),Vi(B,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:ee.signal}).then(ke=>{clearTimeout(me),ke.ok?Vi(B,"TestPingServer: ok",!0,C):Vi(B,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(me),Vi(B,"TestPingServer: error",!1,C)})}function Vi(g,C,B,ee,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),ee(B)}catch{}}function Ra(){this.g=new ai}function hc(g,C,B){const ee=B||"";try{Su(g,function(me,ke){let ze=me;c(me)&&(ze=_t(me)),C.push(ee+ke+"="+encodeURIComponent(ze))})}catch(me){throw C.push(ee+"type="+encodeURIComponent("_badmap")),me}}function Da(g){this.l=g.Ub||null,this.j=g.eb||!1}y(Da,Mt),Da.prototype.g=function(){return new Ma(this.l,this.j)},Da.prototype.i=function(g){return function(){return g}}({});function Ma(g,C){it.call(this),this.D=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ma,it),t=Ma.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=C,this.readyState=1,Bi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(C.body=g),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iu(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iu(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?Ss(this):Bi(this),this.readyState==3&&Iu(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Ss(this))},t.Qa=function(g){this.g&&(this.response=g,Ss(this))},t.ga=function(){this.g&&Ss(this)};function Ss(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Bi(g)}t.setRequestHeader=function(g,C){this.u.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var B=C.next();!B.done;)B=B.value,g.push(B[0]+": "+B[1]),B=C.next();return g.join(`\r
`)};function Bi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ks(g){let C="";return z(g,function(B,ee){C+=ee,C+=":",C+=B,C+=`\r
`}),C}function dc(g,C,B){e:{for(ee in B){var ee=!1;break e}ee=!0}ee||(B=ks(B),typeof g=="string"?B!=null&&encodeURIComponent(String(B)):Zt(g,C,B))}function Yt(g){it.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Yt,it);var fc=/^https?$/i,Oa=["POST","PUT"];t=Yt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,C,B,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?ts(this.o):ts(ci),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(ke){pc(this,ke);return}if(g=B||"",B=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var me in ee)B.set(me,ee[me]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const ke of ee.keys())B.set(ke,ee.get(ke));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(B.keys()).find(ke=>ke.toLowerCase()=="content-type"),me=a.FormData&&g instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Oa,C,void 0))||ee||me||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,ze]of B)this.g.setRequestHeader(ke,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(g),this.u=!1}catch(ke){pc(this,ke)}};function pc(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.m=5,gc(g),Vo(g)}function gc(g){g.A||(g.A=!0,lt(g,"complete"),lt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,lt(this,"complete"),lt(this,"abort"),Vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vo(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mc(this):this.bb())},t.bb=function(){mc(this)};function mc(g){if(g.h&&typeof o<"u"&&(!g.v[1]||ur(g)!=4||g.Z()!=2)){if(g.u&&ur(g)==4)ct(g.Ea,0,g);else if(lt(g,"readystatechange"),ur(g)==4){g.h=!1;try{const ze=g.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var B;if(!(B=C)){var ee;if(ee=ze===0){var me=String(g.D).match(ki)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),ee=!fc.test(me?me.toLowerCase():"")}B=ee}if(B)lt(g,"complete"),lt(g,"success");else{g.m=6;try{var ke=2<ur(g)?g.g.statusText:""}catch{ke=""}g.l=ke+" ["+g.Z()+"]",gc(g)}}finally{Vo(g)}}}}function Vo(g,C){if(g.g){Ui(g);const B=g.g,ee=g.v[0]?()=>{}:null;g.g=null,g.v=null,C||lt(g,"ready");try{B.onreadystatechange=ee}catch{}}}function Ui(g){g.I&&(a.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function ur(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),gt(C)}};function Nu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function no(g){const C={};g=(g.g&&2<=ur(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<g.length;ee++){if(_(g[ee]))continue;var B=x(g[ee]);const me=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const ke=C[me]||[];C[me]=ke,ke.push(B)}I(C,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(g,C,B){return B&&B.internalChannelParams&&B.internalChannelParams[g]||C}function ja(g){this.Aa=0,this.i=[],this.j=new nr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ar("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ar("baseRetryDelayMs",5e3,g),this.cb=Ar("retryDelaySeedMs",1e4,g),this.Wa=Ar("forwardChannelMaxRetries",2,g),this.wa=Ar("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ic(g&&g.concurrentRequestLimit),this.Da=new Ra,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ja.prototype,t.la=8,t.G=1,t.connect=function(g,C,B,ee){nt(0),this.W=g,this.H=C||{},B&&ee!==void 0&&(this.H.OSID=B,this.H.OAID=ee),this.F=this.X,this.I=E(this,null,this.W),Va(this)};function As(g){if(Bo(g),g.G==3){var C=g.U++,B=hi(g.I);if(Zt(B,"SID",g.K),Zt(B,"RID",C),Zt(B,"TYPE","terminate"),ro(g,B),C=new $n(g,g.j,C),C.L=2,C.v=jo(hi(B)),B=!1,a.navigator&&a.navigator.sendBeacon)try{B=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!B&&a.Image&&(new Image().src=C.v,B=!0),B||(C.g=K(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Na(C)}Ha(g)}function Fa(g){g.g&&(za(g),g.g.cancel(),g.g=null)}function Bo(g){Fa(g),g.u&&(a.clearTimeout(g.u),g.u=null),Es(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&a.clearTimeout(g.s),g.s=null)}function Va(g){if(!_u(g.h)&&!g.s){g.s=!0;var C=g.Ga;W||ne(),O||(W(),O=!0),H.add(C,g),g.B=0}}function yc(g,C){return Mo(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=C.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ur(p(g.Ga,g,C),qa(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const me=new $n(this,this.j,g);let ke=this.o;if(this.S&&(ke?(ke=S(ke),D(ke,this.S)):ke=this.S),this.m!==null||this.O||(me.H=ke,ke=null),this.P)e:{for(var C=0,B=0;B<this.i.length;B++){t:{var ee=this.i[B];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(C+=ee,4096<C){C=B;break e}if(C===4096||B===this.i.length-1){C=B+1;break e}}C=1e3}else C=1e3;C=Uo(this,me,C),B=hi(this.I),Zt(B,"RID",g),Zt(B,"CVER",22),this.D&&Zt(B,"X-HTTP-Session-Id",this.D),ro(this,B),ke&&(this.O?C="headers="+encodeURIComponent(String(ks(ke)))+"&"+C:this.m&&dc(B,this.m,ke)),vn(this.h,me),this.Ua&&Zt(B,"TYPE","init"),this.P?(Zt(B,"$req",C),Zt(B,"SID","null"),me.T=!0,Xs(me,B,null)):Xs(me,B,C),this.G=2}}else this.G==3&&(g?Ba(this,g):this.i.length==0||_u(this.h)||Ba(this))};function Ba(g,C){var B;C?B=C.l:B=g.U++;const ee=hi(g.I);Zt(ee,"SID",g.K),Zt(ee,"RID",B),Zt(ee,"AID",g.T),ro(g,ee),g.m&&g.o&&dc(ee,g.m,g.o),B=new $n(g,g.j,B,g.B+1),g.m===null&&(B.H=g.o),C&&(g.i=C.D.concat(g.i)),C=Uo(g,B,1e3),B.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),vn(g.h,B),Xs(B,ee,C)}function ro(g,C){g.H&&z(g.H,function(B,ee){Zt(C,ee,B)}),g.l&&Su({},function(B,ee){Zt(C,ee,B)})}function Uo(g,C,B){B=Math.min(g.i.length,B);var ee=g.l?p(g.l.Na,g.l,g):null;e:{var me=g.i;let ke=-1;for(;;){const ze=["count="+B];ke==-1?0<B?(ke=me[0].g,ze.push("ofs="+ke)):ke=0:ze.push("ofs="+ke);let St=!0;for(let Ot=0;Ot<B;Ot++){let kt=me[Ot].g;const Qt=me[Ot].map;if(kt-=ke,0>kt)ke=Math.max(0,me[Ot].g-100),St=!1;else try{hc(Qt,ze,"req"+kt+"_")}catch{ee&&ee(Qt)}}if(St){ee=ze.join("&");break e}}}return g=g.i.splice(0,B),C.D=g,ee}function Ua(g){if(!g.g&&!g.u){g.Y=1;var C=g.Fa;W||ne(),O||(W(),O=!0),H.add(C,g),g.v=0}}function zo(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ur(p(g.Fa,g),qa(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ur(p(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Fa(this),Pu(this))};function za(g){g.A!=null&&(a.clearTimeout(g.A),g.A=null)}function Pu(g){g.g=new $n(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var C=hi(g.qa);Zt(C,"RID","rpc"),Zt(C,"SID",g.K),Zt(C,"AID",g.T),Zt(C,"CI",g.F?"0":"1"),!g.F&&g.ja&&Zt(C,"TO",g.ja),Zt(C,"TYPE","xmlhttp"),ro(g,C),g.m&&g.o&&dc(C,g.m,g.o),g.L&&(g.g.I=g.L);var B=g.g;g=g.ia,B.L=1,B.v=jo(hi(C)),B.m=null,B.P=!0,Lo(B,g)}t.Za=function(){this.C!=null&&(this.C=null,Fa(this),zo(this),nt(19))};function Es(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function io(g,C){var B=null;if(g.g==C){Es(g),za(g),g.g=null;var ee=2}else if(sc(g.h,C))B=C.D,oc(g.h,C),ee=1;else return;if(g.G!=0){if(C.o)if(ee==1){B=C.m?C.m.length:0,C=Date.now()-C.F;var me=g.B;ee=_i(),lt(ee,new wi(ee,B)),Va(g)}else Ua(g);else if(me=C.s,me==3||me==0&&0<C.X||!(ee==1&&yc(g,C)||ee==2&&zo(g)))switch(B&&0<B.length&&(C=g.h,C.i=C.i.concat(B)),me){case 1:qr(g,5);break;case 4:qr(g,10);break;case 3:qr(g,6);break;default:qr(g,2)}}}function qa(g,C){let B=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(B*=2),B*C}function qr(g,C){if(g.j.info("Error code "+C),C==2){var B=p(g.fb,g),ee=g.Xa;const me=!ee;ee=new Bn(ee||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oo(ee,"https"),jo(ee),me?ns(ee.toString(),B):Eu(ee.toString(),B)}else nt(2);g.G=0,g.l&&g.l.sa(C),Ha(g),Bo(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ha(g){if(g.G=0,g.ka=[],g.l){const C=ac(g.h);(C.length!=0||g.i.length!=0)&&(A(g.ka,C),A(g.ka,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.ra()}}function E(g,C,B){var ee=B instanceof Bn?hi(B):new Bn(B);if(ee.g!="")C&&(ee.g=C+"."+ee.g),Ta(ee,ee.s);else{var me=a.location;ee=me.protocol,C=C?C+"."+me.hostname:me.hostname,me=+me.port;var ke=new Bn(null);ee&&Oo(ke,ee),C&&(ke.g=C),me&&Ta(ke,me),B&&(ke.l=B),ee=ke}return B=g.D,C=g.ya,B&&C&&Zt(ee,B,C),Zt(ee,"VER",g.la),ro(g,ee),ee}function K(g,C,B){if(C&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Ca&&!g.pa?new Yt(new Da({eb:B})):new Yt(g.pa),C.Ha(g.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oe(){}t=oe.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ue(){}ue.prototype.g=function(g,C){return new ye(g,C)};function ye(g,C){it.call(this),this.g=new ja(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(g?g["X-WebChannel-Client-Profile"]=C.va:g={"X-WebChannel-Client-Profile":C.va}),this.g.S=g,(g=C&&C.Sb)&&!_(g)&&(this.g.m=g),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!_(C)&&(this.g.D=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new Qe(this)}y(ye,it),ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ye.prototype.close=function(){As(this.g)},ye.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var B={};B.__data__=g,g=B}else this.u&&(B={},B.__data__=_t(g),g=B);C.i.push(new ed(C.Ya++,g)),C.G==3&&Va(C)},ye.prototype.N=function(){this.g.l=null,delete this.j,As(this.g),delete this.g,ye.aa.N.call(this)};function Ne(g){li.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const B in C){g=B;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}y(Ne,li);function Ue(){Jt.call(this),this.status=1}y(Ue,Jt);function Qe(g){this.g=g}y(Qe,oe),Qe.prototype.ua=function(){lt(this.g,"a")},Qe.prototype.ta=function(g){lt(this.g,new Ne(g))},Qe.prototype.sa=function(g){lt(this.g,new Ue)},Qe.prototype.ra=function(){lt(this.g,"b")},ue.prototype.createWebChannel=ue.prototype.g,ye.prototype.send=ye.prototype.o,ye.prototype.open=ye.prototype.m,ye.prototype.close=ye.prototype.close,oI=function(){return new ue},sI=function(){return _i()},iI=ht,b2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,xm=zr,Si.COMPLETE="complete",rI=Si,ln.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",it.prototype.listen=it.prototype.K,qd=ln,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,nI=Yt}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});const $w="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new i5("@firebase/firestore");function Ed(){return nu.logLevel}function at(t,...e){if(nu.logLevel<=Ut.DEBUG){const n=e.map(m5);nu.debug(`Firestore (${Qh}): ${t}`,...n)}}function _a(t,...e){if(nu.logLevel<=Ut.ERROR){const n=e.map(m5);nu.error(`Firestore (${Qh}): ${t}`,...n)}}function Rh(t,...e){if(nu.logLevel<=Ut.WARN){const n=e.map(m5);nu.warn(`Firestore (${Qh}): ${t}`,...n)}}function m5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t="Unexpected state"){const e=`FIRESTORE (${Qh}) INTERNAL ASSERTION FAILED: `+t;throw _a(e),new Error(e)}function Wt(t,e){t||pt()}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Po{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jr.UNAUTHENTICATED))}shutdown(){}}class IM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NM{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Wt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new So;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new So,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new So)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt(typeof r.accessToken=="string"),new aI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string"),new Jr(e)}}class PM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new PM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Wt(this.o===void 0);const r=s=>{s.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Wt(typeof n.token=="string"),this.R=n.token,new CM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function $t(t,e){return t<e?-1:t>e?1:0}function Dh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new kn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new kn(0,0))}static max(){return new bt(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r){n===void 0?n=0:n>e.length&&pt(),r===void 0?r=e.length-n:r>e.length-n&&pt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dn extends Jf{construct(e,n,r){return new dn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dn(n)}static emptyPath(){return new dn([])}}const DM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Jf{construct(e,n,r){return new Rr(e,n,r)}static isValidIdentifier(e){return DM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new et(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new et(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(n)}static emptyPath(){return new Rr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(dn.fromString(e))}static fromName(e){return new ut(dn.fromString(e).popFirst(5))}static empty(){return new ut(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new dn(e.slice()))}}function MM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new kn(n+1,0):new kn(n,r));return new ql(i,ut.empty(),e)}function OM(t){return new ql(t.readTime,t.key,-1)}class ql{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ql(bt.min(),ut.empty(),-1)}static max(){return new ql(bt.max(),ut.empty(),-1)}}function jM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==FM)throw t;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof qe?n:qe.resolve(n)}catch(n){return qe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):qe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):qe.reject(n)}static resolve(e){return new qe((n,r)=>{n(e)})}static reject(e){return new qe((n,r)=>{r(e)})}static waitFor(e){return new qe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=qe.resolve(!1);for(const r of e)n=n.next(i=>i?qe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new qe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new qe((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function BM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}y5.oe=-1;function Rp(t){return t==null}function f0(t){return t===0&&1/t==-1/0}function UM(t){return typeof t=="number"&&Number.isInteger(t)&&!f0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.comparator=e,this.root=n||Cr.EMPTY}insert(e,n){return new jn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dg(this.root,e,this.comparator,!0)}}class Dg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Cr.RED,this.left=i??Cr.EMPTY,this.right=s??Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Cr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gw(this.data.getIterator())}getIteratorFrom(e){return new Gw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Or(this.comparator);return n.data=e,n}}class Gw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new Or(Rr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uI("Invalid base64 string: "+s):s}}(e);return new Fr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const zM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(t){if(Wt(!!t),typeof t=="string"){let e=0;const n=zM.exec(t);if(Wt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(t.seconds),nanos:Yn(t.nanos)}}function Yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ru(t){return typeof t=="string"?Fr.fromBase64String(t):Fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function b5(t){const e=t.mapValue.fields.__previous_value__;return v5(e)?b5(e):e}function Zf(t){const e=Hl(t.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ep{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ep("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ep&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg={mapValue:{}};function iu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v5(t)?4:WM(t)?9007199254740991:HM(t)?10:11:pt()}function Io(t,e){if(t===e)return!0;const n=iu(t);if(n!==iu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zf(t).isEqual(Zf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hl(i.timestampValue),a=Hl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ru(i.bytesValue).isEqual(ru(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Yn(i.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(i.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Yn(i.integerValue)===Yn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Yn(i.doubleValue),a=Yn(s.doubleValue);return o===a?f0(o)===f0(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Dh(t.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kw(o)!==Kw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Io(o[l],a[l])))return!1;return!0}(t,e);default:return pt()}}function tp(t,e){return(t.values||[]).find(n=>Io(n,e))!==void 0}function Mh(t,e){if(t===e)return 0;const n=iu(t),r=iu(e);if(n!==r)return $t(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Yn(s.integerValue||s.doubleValue),l=Yn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yw(t.timestampValue,e.timestampValue);case 4:return Yw(Zf(t),Zf(e));case 5:return $t(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ru(s),l=ru(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=$t(a[c],l[c]);if(u!==0)return u}return $t(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$t(Yn(s.latitude),Yn(o.latitude));return a!==0?a:$t(Yn(s.longitude),Yn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},p=o.fields||{},f=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,b=$t(((c=f==null?void 0:f.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:Qw(f,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Mg.mapValue&&o===Mg.mapValue)return 0;if(s===Mg.mapValue)return 1;if(o===Mg.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=$t(l[h],u[h]);if(p!==0)return p;const f=Mh(a[l[h]],c[u[h]]);if(f!==0)return f}return $t(l.length,u.length)}(t.mapValue,e.mapValue);default:throw pt()}}function Yw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const n=Hl(t),r=Hl(e),i=$t(n.seconds,r.seconds);return i!==0?i:$t(n.nanos,r.nanos)}function Qw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Mh(n[i],r[i]);if(s)return s}return $t(n.length,r.length)}function Oh(t){return x2(t)}function x2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ru(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=x2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${x2(n.fields[o])}`;return i+"}"}(t.mapValue):pt()}function Xw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _2(t){return!!t&&"integerValue"in t}function x5(t){return!!t&&"arrayValue"in t}function Jw(t){return!!t&&"nullValue"in t}function Zw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _m(t){return!!t&&"mapValue"in t}function HM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function hf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.value=e}static empty(){return new mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_m(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hf(n)}setAll(e){let n=Rr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=hf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_m(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_m(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mi(hf(this.value))}}function hI(t){const e=[];return pu(t.fields,(n,r)=>{const i=new Rr([n]);if(_m(r)){const s=hI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _r(e,0,bt.min(),bt.min(),bt.min(),mi.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,bt.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,bt.min(),bt.min(),mi.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,bt.min(),bt.min(),mi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.position=e,this.inclusive=n}}function eS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=Mh(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Io(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n="asc"){this.field=e,this.dir=n}}function $M(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{}class lr extends dI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GM(e,n,r):n==="array-contains"?new XM(e,r):n==="in"?new JM(e,r):n==="not-in"?new ZM(e,r):n==="array-contains-any"?new eO(e,r):new lr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YM(e,r):new QM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mh(n,this.value)):n!==null&&iu(this.value)===iu(n)&&this.matchesComparison(Mh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends dI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ws(e,n)}matches(e){return fI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fI(t){return t.op==="and"}function pI(t){return KM(t)&&fI(t)}function KM(t){for(const e of t.filters)if(e instanceof Ws)return!1;return!0}function w2(t){if(t instanceof lr)return t.field.canonicalString()+t.op.toString()+Oh(t.value);if(pI(t))return t.filters.map(e=>w2(e)).join(",");{const e=t.filters.map(n=>w2(n)).join(",");return`${t.op}(${e})`}}function gI(t,e){return t instanceof lr?function(r,i){return i instanceof lr&&r.op===i.op&&r.field.isEqual(i.field)&&Io(r.value,i.value)}(t,e):t instanceof Ws?function(r,i){return i instanceof Ws&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gI(o,i.filters[a]),!0):!1}(t,e):void pt()}function mI(t){return t instanceof lr?function(n){return`${n.field.canonicalString()} ${n.op} ${Oh(n.value)}`}(t):t instanceof Ws?function(n){return n.op.toString()+" {"+n.getFilters().map(mI).join(" ,")+"}"}(t):"Filter"}class GM extends lr{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class YM extends lr{constructor(e,n){super(e,"in",n),this.keys=yI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QM extends lr{constructor(e,n){super(e,"not-in",n),this.keys=yI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class XM extends lr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return x5(n)&&tp(n.arrayValue,this.value)}}class JM extends lr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tp(this.value.arrayValue,n)}}class ZM extends lr{constructor(e,n){super(e,"not-in",n)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tp(this.value.arrayValue,n)}}class eO extends lr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!x5(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function nS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new tO(t,e,n,r,i,s,o)}function _5(t){const e=wt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>w2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oh(r)).join(",")),e.ue=n}return e.ue}function w5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$M(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tS(t.startAt,e.startAt)&&tS(t.endAt,e.endAt)}function S2(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nO(t,e,n,r,i,s,o,a){return new Dp(t,e,n,r,i,s,o,a)}function S5(t){return new Dp(t)}function rS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vI(t){return t.collectionGroup!==null}function df(t){const e=wt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Or(Rr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new g0(s,r))}),n.has(Rr.keyField().canonicalString())||e.ce.push(new g0(Rr.keyField(),r))}return e.ce}function ko(t){const e=wt(t);return e.le||(e.le=rO(e,df(t))),e.le}function rO(t,e){if(t.limitType==="F")return nS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new g0(i.field,s)});const n=t.endAt?new p0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new p0(t.startAt.position,t.startAt.inclusive):null;return nS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function k2(t,e){const n=t.filters.concat([e]);return new Dp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function m0(t,e,n){return new Dp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function o1(t,e){return w5(ko(t),ko(e))&&t.limitType===e.limitType}function bI(t){return`${_5(ko(t))}|lt:${t.limitType}`}function Yu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mI(i)).join(", ")}]`),Rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oh(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oh(i)).join(",")),`Target(${r})`}(ko(t))}; limitType=${t.limitType})`}function a1(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of df(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=eS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,df(r),i)||r.endAt&&!function(o,a,l){const c=eS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,df(r),i))}(t,e)}function iO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xI(t){return(e,n)=>{let r=!1;for(const i of df(t)){const s=sO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sO(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Mh(l,c):pt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new jn(ut.comparator);function wa(){return oO}const _I=new jn(ut.comparator);function Hd(...t){let e=_I;for(const n of t)e=e.insert(n.key,n);return e}function wI(t){let e=_I;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jc(){return ff()}function SI(){return ff()}function ff(){return new Xh(t=>t.toString(),(t,e)=>t.isEqual(e))}const aO=new jn(ut.comparator),lO=new Or(ut.comparator);function Ft(...t){let e=lO;for(const n of t)e=e.add(n);return e}const cO=new Or($t);function uO(){return cO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f0(e)?"-0":e}}function kI(t){return{integerValue:""+t}}function AI(t,e){return UM(e)?kI(e):k5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this._=void 0}}function hO(t,e,n){return t instanceof np?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&v5(s)&&(s=b5(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rp?II(t,e):t instanceof ip?NI(t,e):function(i,s){const o=EI(i,s),a=iS(o)+iS(i.Pe);return _2(o)&&_2(i.Pe)?kI(a):k5(i.serializer,a)}(t,e)}function dO(t,e,n){return t instanceof rp?II(t,e):t instanceof ip?NI(t,e):n}function EI(t,e){return t instanceof sp?function(r){return _2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class np extends l1{}class rp extends l1{constructor(e){super(),this.elements=e}}function II(t,e){const n=PI(e);for(const r of t.elements)n.some(i=>Io(i,r))||n.push(r);return{arrayValue:{values:n}}}class ip extends l1{constructor(e){super(),this.elements=e}}function NI(t,e){let n=PI(e);for(const r of t.elements)n=n.filter(i=>!Io(i,r));return{arrayValue:{values:n}}}class sp extends l1{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iS(t){return Yn(t.integerValue||t.doubleValue)}function PI(t){return x5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.field=e,this.transform=n}}function fO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rp&&i instanceof rp||r instanceof ip&&i instanceof ip?Dh(r.elements,i.elements,Io):r instanceof sp&&i instanceof sp?Io(r.Pe,i.Pe):r instanceof np&&i instanceof np}(t.transform,e.transform)}class pO{constructor(e,n){this.version=e,this.transformResults=n}}class Dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class c1{}function CI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new u1(t.key,Dr.none()):new Mp(t.key,t.data,Dr.none());{const n=t.data,r=mi.empty();let i=new Or(Rr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new tc(t.key,r,new Gi(i.toArray()),Dr.none())}}function gO(t,e,n){t instanceof Mp?function(i,s,o){const a=i.value.clone(),l=oS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tc?function(i,s,o){if(!wm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=oS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(LI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pf(t,e,n,r){return t instanceof Mp?function(s,o,a,l){if(!wm(s.precondition,o))return a;const c=s.value.clone(),u=aS(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof tc?function(s,o,a,l){if(!wm(s.precondition,o))return a;const c=aS(s.fieldTransforms,l,o),u=o.data;return u.setAll(LI(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return wm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=EI(r.transform,i||null);s!=null&&(n===null&&(n=mi.empty()),n.set(r.field,s))}return n||null}function sS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dh(r,i,(s,o)=>fO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mp extends c1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tc extends c1{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function oS(t,e,n){const r=new Map;Wt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dO(o,a,n[i]))}return r}function aS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hO(s,o,e))}return r}class u1 extends c1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends c1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=CI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Dh(this.mutations,e.mutations,(n,r)=>sS(n,r))&&Dh(this.baseMutations,e.baseMutations,(n,r)=>sS(n,r))}}class A5{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Wt(e.mutations.length===r.length);let i=function(){return aO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new A5(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or,zt;function DI(t){switch(t){default:return pt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function MI(t){if(t===void 0)return _a("GRPC error has no .code"),Le.UNKNOWN;switch(t){case or.OK:return Le.OK;case or.CANCELLED:return Le.CANCELLED;case or.UNKNOWN:return Le.UNKNOWN;case or.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case or.INTERNAL:return Le.INTERNAL;case or.UNAVAILABLE:return Le.UNAVAILABLE;case or.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case or.NOT_FOUND:return Le.NOT_FOUND;case or.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case or.ABORTED:return Le.ABORTED;case or.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case or.DATA_LOSS:return Le.DATA_LOSS;default:return pt()}}(zt=or||(or={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new Uc([4294967295,4294967295],0);function lS(t){const e=xO().encode(t),n=new tI;return n.update(e),new Uint8Array(n.digest())}function cS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uc([n,r],0),new Uc([i,s],0)]}class E5{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wd(`Invalid padding: ${n}`);if(r<0)throw new Wd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Uc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Uc.fromNumber(r)));return i.compare(_O)===1&&(i=new Uc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=lS(e),[r,i]=cS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new E5(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=lS(e),[r,i]=cS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Op.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new h1(bt.min(),i,new jn($t),wa(),Ft())}}class Op{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Op(r,n,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class OI{constructor(e,n){this.targetId=e,this.me=n}}class jI{constructor(e,n,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uS{constructor(){this.fe=0,this.ge=dS(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ft(),n=Ft(),r=Ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Op(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wO{constructor(e){this.Le=e,this.Be=new Map,this.ke=wa(),this.qe=hS(),this.Qe=new jn($t)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(S2(s))if(r===0){const o=new ut(s.path);this.Ue(n,o,_r.newNoDocument(o,bt.min()))}else Wt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ru(r).toUint8Array()}catch(l){if(l instanceof uI)return Rh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new E5(o,i,s)}catch(l){return Rh(l instanceof Wd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&S2(a.target)){const l=new ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,_r.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new h1(e,n,this.Qe,this.ke,r);return this.ke=wa(),this.qe=hS(),this.Qe=new jn($t),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Or($t),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||at("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hS(){return new jn(ut.comparator)}function dS(){return new jn(ut.comparator)}const SO={asc:"ASCENDING",desc:"DESCENDING"},kO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO={and:"AND",or:"OR"};class EO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function A2(t,e){return t.useProto3Json||Rp(e)?e:{value:e}}function y0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IO(t,e){return y0(t,e.toTimestamp())}function Xi(t){return Wt(!!t),bt.fromTimestamp(function(n){const r=Hl(n);return new kn(r.seconds,r.nanos)}(t))}function I5(t,e){return E2(t,e).canonicalString()}function E2(t,e){const n=function(i){return new dn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VI(t){const e=dn.fromString(t);return Wt(WI(e)),e}function v0(t,e){return I5(t.databaseId,e.path)}function gf(t,e){const n=VI(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(UI(n))}function BI(t,e){return I5(t.databaseId,e)}function NO(t){const e=VI(t);return e.length===4?dn.emptyPath():UI(e)}function I2(t){return new dn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UI(t){return Wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fS(t,e,n){return{name:v0(t,e),fields:n.value.mapValue.fields}}function PO(t,e){return"found"in e?function(r,i){Wt(!!i.found),i.found.name,i.found.updateTime;const s=gf(r,i.found.name),o=Xi(i.found.updateTime),a=i.found.createTime?Xi(i.found.createTime):bt.min(),l=new mi({mapValue:{fields:i.found.fields}});return _r.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Wt(!!i.missing),Wt(!!i.readTime);const s=gf(r,i.missing),o=Xi(i.readTime);return _r.newNoDocument(s,o)}(t,e):pt()}function TO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Wt(u===void 0||typeof u=="string"),Fr.fromBase64String(u||"")):(Wt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Fr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Le.UNKNOWN:MI(c.code);return new et(u,c.message||"")}(o);n=new jI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gf(t,r.document.name),s=Xi(r.document.updateTime),o=r.document.createTime?Xi(r.document.createTime):bt.min(),a=new mi({mapValue:{fields:r.document.fields}}),l=_r.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Sm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gf(t,r.document),s=r.readTime?Xi(r.readTime):bt.min(),o=_r.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gf(t,r.document),s=r.removedTargetIds||[];n=new Sm([],s,i,null)}else{if(!("filter"in e))return pt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bO(i,s),a=r.targetId;n=new OI(a,o)}}return n}function zI(t,e){let n;if(e instanceof Mp)n={update:fS(t,e.key,e.value)};else if(e instanceof u1)n={delete:v0(t,e.key)};else if(e instanceof tc)n={update:fS(t,e.key,e.data),updateMask:VO(e.fieldMask)};else{if(!(e instanceof RI))return pt();n={verify:v0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof np)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ip)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:IO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pt()}(t,e.precondition)),n}function CO(t,e){return t&&t.length>0?(Wt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Xi(i.updateTime):Xi(s);return o.isEqual(bt.min())&&(o=Xi(s)),new pO(o,i.transformResults||[])}(n,e))):[]}function LO(t,e){return{documents:[BI(t,e.path)]}}function RO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BI(t,i);const s=function(c){if(c.length!==0)return HI(Ws.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Qu(p.field),direction:OO(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=A2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function DO(t){let e=NO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Wt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const p=qI(h);return p instanceof Ws&&pI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new g0(Xu(y.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Rp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,f=h.values||[];return new p0(f,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,f=h.values||[];return new p0(f,p)}(n.endAt)),nO(e,i,o,s,a,"F",l,c)}function MO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xu(n.unaryFilter.field);return lr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xu(n.unaryFilter.field);return lr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Xu(n.unaryFilter.field);return lr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xu(n.unaryFilter.field);return lr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(t):t.fieldFilter!==void 0?function(n){return lr.create(Xu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ws.create(n.compositeFilter.filters.map(r=>qI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt()}}(n.compositeFilter.op))}(t):pt()}function OO(t){return SO[t]}function jO(t){return kO[t]}function FO(t){return AO[t]}function Qu(t){return{fieldPath:t.canonicalString()}}function Xu(t){return Rr.fromServerFormat(t.fieldPath)}function HI(t){return t instanceof lr?function(n){if(n.op==="=="){if(Zw(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NAN"}};if(Jw(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zw(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NAN"}};if(Jw(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(n.field),op:jO(n.op),value:n.value}}}(t):t instanceof Ws?function(n){const r=n.getFilters().map(i=>HI(i));return r.length===1?r[0]:{compositeFilter:{op:FO(n.op),filters:r}}}(t):pt()}function VO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n,r,i,s=bt.min(),o=bt.min(),a=Fr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.ct=e}}function UO(t){const e=DO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?m0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.un=new qO}addToCollectionParentIndex(e,n){return this.un.add(n),qe.resolve()}getCollectionParents(e,n){return qe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return qe.resolve()}deleteFieldIndex(e,n){return qe.resolve()}deleteAllFieldIndexes(e){return qe.resolve()}createTargetIndexes(e,n){return qe.resolve()}getDocumentsMatchingTarget(e,n){return qe.resolve(null)}getIndexType(e,n){return qe.resolve(0)}getFieldIndexes(e,n){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,n){return qe.resolve(ql.min())}getMinOffsetFromCollectionGroup(e,n){return qe.resolve(ql.min())}updateCollectionGroup(e,n,r){return qe.resolve()}updateIndexEntries(e,n){return qe.resolve()}}class qO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Or(dn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Or(dn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jh(0)}static kn(){return new jh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.changes=new Xh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?qe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pf(r.mutation,i,Gi.empty(),kn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ft()){const i=jc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=wa();const o=ff(),a=function(){return ff()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof tc)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),pf(u.mutation,c,u.mutation.getFieldMask(),kn.now())):o.set(c.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new WO(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ff();let i=new jn((o,a)=>o-a),s=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Gi.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Ft()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=SI();u.forEach(p=>{if(!s.has(p)){const f=CI(n.get(p),r.get(p));f!==null&&h.set(p,f),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):qe.resolve(jc());let a=-1,l=s;return o.next(c=>qe.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?qe.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ft())).next(u=>({batchId:a,changes:wI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Hd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hd();return this.indexManager.getCollectionParents(e,s).next(a=>qe.forEach(a,l=>{const c=function(h,p){return new Dp(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,_r.newInvalidDocument(u)))});let a=Hd();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&pf(u.mutation,c,Gi.empty(),kn.now()),a1(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return qe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xi(i.createTime)}}(n)),qe.resolve()}getNamedQuery(e,n){return qe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:UO(i.bundledQuery),readTime:Xi(i.readTime)}}(n)),qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.overlays=new jn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return qe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jc();return qe.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),qe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),qe.resolve()}getOverlaysForCollection(e,n,r){const i=jc(),s=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return qe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new jn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=jc(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=jc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return qe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vO(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ft(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(e){return qe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this.Tr=new Or(vr.Er),this.dr=new Or(vr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new vr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new vr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new dn([])),r=new vr(n,e),i=new vr(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new dn([])),r=new vr(n,e),i=new vr(n,e+1);let s=Ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||$t(e.wr,n.wr)}static Ar(e,n){return $t(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Or(vr.Er)}checkEmpty(e){return qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new vr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return qe.resolve(o)}lookupMutationBatch(e,n){return qe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vr(n,0),i=new vr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Or($t);return n.forEach(i=>{const s=new vr(i,0),o=new vr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),qe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new vr(new ut(s),0);let a=new Or($t);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),qe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Wt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return qe.forEach(n.mutations,i=>{const s=new vr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new vr(n,0),i=this.br.firstAfterOrEqual(r);return qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,qe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.Mr=e,this.docs=function(){return new jn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return qe.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=wa();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))}),qe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=wa();const o=n.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jM(OM(u),r)<=0||(i.has(u.key)||a1(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return qe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pt()}Or(e,n){return qe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JO(this)}getSize(e){return qe.resolve(this.size)}}class JO extends HO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),qe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.persistence=e,this.Nr=new Xh(n=>_5(n),w5),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new N5,this.targetCount=0,this.kr=jh.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),qe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new jh(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,qe.resolve()}updateTargetData(e,n){return this.Kn(n),qe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),qe.waitFor(s).next(()=>i)}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return qe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),qe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),qe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),qe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return qe.resolve(r)}containsKey(e,n){return qe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.qr={},this.overlays={},this.Qr=new y5(0),this.Kr=!1,this.Kr=!0,this.$r=new YO,this.referenceDelegate=e(this),this.Ur=new ZO(this),this.indexManager=new zO,this.remoteDocumentCache=function(i){return new XO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BO(n),this.Gr=new KO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new QO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){at("MemoryPersistence","Starting transaction:",e);const i=new tj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return qe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class tj extends VM{constructor(e){super(),this.currentSequenceNumber=e}}class P5{constructor(e){this.persistence=e,this.Jr=new N5,this.Yr=null}static Zr(e){return new P5(e)}get Xr(){if(this.Yr)return this.Yr;throw pt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),qe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),qe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),qe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return qe.or([()=>qe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ft(),i=Ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T5(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GR()?8:BM(si())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ed()<=Ut.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Yu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),qe.resolve()):(Ed()<=Ut.DEBUG&&at("QueryEngine","Query:",Yu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ed()<=Ut.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Yu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ko(n))):qe.resolve())}Yi(e,n){if(rS(n))return qe.resolve(null);let r=ko(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=m0(n,null,"F"),r=ko(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ft(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,m0(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return rS(n)||i.isEqual(bt.min())?qe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?qe.resolve(null):(Ed()<=Ut.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yu(n)),this.rs(e,o,n,MM(i,-1)).next(a=>a))})}ts(e,n){let r=new Or(xI(e));return n.forEach((i,s)=>{a1(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ed()<=Ut.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Yu(n)),this.Ji.getDocumentsMatchingQuery(e,n,ql.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new jn($t),this._s=new Xh(s=>_5(s),w5),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $O(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sj(t,e,n,r){return new ij(t,e,n,r)}async function $I(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ft();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function oj(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let f=qe.resolve();return p.forEach(y=>{f=f.next(()=>u.getEntry(l,y)).next(b=>{const A=c.docVersions.get(y);Wt(A!==null),b.version.compareTo(A)<0&&(h.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ft();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KI(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function aj(t,e){const n=wt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,h)));let f=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(b,A,v){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,f,u)&&a.push(n.Ur.updateTargetData(s,f))});let l=wa(),c=Ft();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(lj(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(bt.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function lj(t,e,n){let r=Ft(),i=Ft();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=wa();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(bt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):at("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function cj(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uj(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,qe.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new bl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function N2(t,e,n){const r=wt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Lp(o))throw o;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function pS(t,e,n){const r=wt(t);let i=bt.min(),s=Ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=wt(l),p=h._s.get(u);return p!==void 0?qe.resolve(h.os.get(p)):h.Ur.getTargetData(c,u)}(r,o,ko(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:bt.min(),n?s:Ft())).next(a=>(hj(r,iO(e),a),{documents:a,Ts:s})))}function hj(t,e,n){let r=t.us.get(e)||bt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class gS{constructor(){this.activeTargetIds=uO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dj{constructor(){this.so=new gS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og=null;function Cy(){return Og===null?Og=function(){return 268435456+Math.round(2147483648*Math.random())}():Og++,"0x"+Og.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="WebChannelConnection";class mj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Cy(),l=this.xo(n,r.toUriEncodedString());at("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(at("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Rh("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=pj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Cy();return new Promise((o,a)=>{const l=new nI;l.setWithCredentials(!0),l.listenOnce(rI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xm.NO_ERROR:const u=l.getResponseJson();at($r,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case xm.TIMEOUT:at($r,`RPC '${e}' ${s} timed out`),a(new et(Le.DEADLINE_EXCEEDED,"Request time out"));break;case xm.HTTP_ERROR:const h=l.getStatus();if(at($r,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const f=p==null?void 0:p.error;if(f&&f.status&&f.message){const y=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(v)>=0?v:Le.UNKNOWN}(f.status);a(new et(y,f.message))}else a(new et(Le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new et(Le.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{at($r,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);at($r,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Cy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oI(),a=sI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");at($r,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let p=!1,f=!1;const y=new gj({Io:A=>{f?at($r,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(at($r,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),at($r,`RPC '${e}' stream ${i} sending:`,A),h.send(A))},To:()=>h.close()}),b=(A,v,_)=>{A.listen(v,k=>{try{_(k)}catch(R){setTimeout(()=>{throw R},0)}})};return b(h,qd.EventType.OPEN,()=>{f||(at($r,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),b(h,qd.EventType.CLOSE,()=>{f||(f=!0,at($r,`RPC '${e}' stream ${i} transport closed`),y.So())}),b(h,qd.EventType.ERROR,A=>{f||(f=!0,Rh($r,`RPC '${e}' stream ${i} transport errored:`,A),y.So(new et(Le.UNAVAILABLE,"The operation could not be completed")))}),b(h,qd.EventType.MESSAGE,A=>{var v;if(!f){const _=A.data[0];Wt(!!_);const k=_,R=k.error||((v=k[0])===null||v===void 0?void 0:v.error);if(R){at($r,`RPC '${e}' stream ${i} received error:`,R);const M=R.status;let z=function(L){const D=or[L];if(D!==void 0)return MI(D)}(M),I=R.message;z===void 0&&(z=Le.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),f=!0,y.So(new et(z,I)),h.close()}else at($r,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),b(a,iI.STAT_EVENT,A=>{A.stat===b2.PROXY?at($r,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===b2.NOPROXY&&at($r,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Ly(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){return new EO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new C5(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(_a(n.toString()),_a("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new et(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yj extends GI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=TO(this.serializer,e),r=function(s){if(!("targetChange"in s))return bt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?bt.min():o.readTime?Xi(o.readTime):bt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=I2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=S2(l)?{documents:LO(s,l)}:{query:RO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FI(s,o.resumeToken);const c=A2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(bt.min())>0){a.readTime=y0(s,o.snapshotVersion.toTimestamp());const c=A2(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=MO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=I2(this.serializer),n.removeTarget=e,this.a_(n)}}class vj extends GI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=CO(e.writeResults,e.commitTime),r=Xi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=I2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new et(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,E2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Le.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,E2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new et(Le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_a(n),this.D_=!1):at("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{gu(this)&&(at("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=wt(l);c.L_.add(4),await jp(c),c.q_.set("Unknown"),c.L_.delete(4),await f1(c)}(this))})}),this.q_=new xj(r,i)}}async function f1(t){if(gu(t))for(const e of t.B_)await e(!0)}async function jp(t){for(const e of t.B_)await e(!1)}function YI(t,e){const n=wt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),M5(n)?D5(n):Jh(n).r_()&&R5(n,e))}function L5(t,e){const n=wt(t),r=Jh(n);n.N_.delete(e),r.r_()&&QI(n,e),n.N_.size===0&&(r.r_()?r.o_():gu(n)&&n.q_.set("Unknown"))}function R5(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jh(t).A_(e)}function QI(t,e){t.Q_.xe(e),Jh(t).R_(e)}function D5(t){t.Q_=new wO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Jh(t).start(),t.q_.v_()}function M5(t){return gu(t)&&!Jh(t).n_()&&t.N_.size>0}function gu(t){return wt(t).L_.size===0}function XI(t){t.Q_=void 0}async function wj(t){t.q_.set("Online")}async function Sj(t){t.N_.forEach((e,n)=>{R5(t,e)})}async function kj(t,e){XI(t),M5(t)?(t.q_.M_(e),D5(t)):t.q_.set("Unknown")}async function Aj(t,e,n){if(t.q_.set("Online"),e instanceof jI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await b0(t,r)}else if(e instanceof Sm?t.Q_.Ke(e):e instanceof OI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(bt.min()))try{const r=await KI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(Fr.EMPTY_BYTE_STRING,u.snapshotVersion)),QI(s,l);const h=new bl(u.target,l,c,u.sequenceNumber);R5(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){at("RemoteStore","Failed to raise snapshot:",r),await b0(t,r)}}async function b0(t,e,n){if(!Lp(e))throw e;t.L_.add(1),await jp(t),t.q_.set("Offline"),n||(n=()=>KI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{at("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await f1(t)})}function JI(t,e){return e().catch(n=>b0(t,n,e))}async function p1(t){const e=wt(t),n=Wl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ej(e);)try{const i=await cj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Ij(e,i)}catch(i){await b0(e,i)}ZI(e)&&eN(e)}function Ej(t){return gu(t)&&t.O_.length<10}function Ij(t,e){t.O_.push(e);const n=Wl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZI(t){return gu(t)&&!Wl(t).n_()&&t.O_.length>0}function eN(t){Wl(t).start()}async function Nj(t){Wl(t).p_()}async function Pj(t){const e=Wl(t);for(const n of t.O_)e.m_(n.mutations)}async function Tj(t,e,n){const r=t.O_.shift(),i=A5.from(r,e,n);await JI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await p1(t)}async function Cj(t,e){e&&Wl(t).V_&&await async function(r,i){if(function(o){return DI(o)&&o!==Le.ABORTED}(i.code)){const s=r.O_.shift();Wl(r).s_(),await JI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await p1(r)}}(t,e),ZI(t)&&eN(t)}async function yS(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const r=gu(n);n.L_.add(3),await jp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await f1(n)}async function Lj(t,e){const n=wt(t);e?(n.L_.delete(2),await f1(n)):e||(n.L_.add(2),await jp(n),n.q_.set("Unknown"))}function Jh(t){return t.K_||(t.K_=function(n,r,i){const s=wt(n);return s.w_(),new yj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:wj.bind(null,t),Ro:Sj.bind(null,t),mo:kj.bind(null,t),d_:Aj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),M5(t)?D5(t):t.q_.set("Unknown")):(await t.K_.stop(),XI(t))})),t.K_}function Wl(t){return t.U_||(t.U_=function(n,r,i){const s=wt(n);return s.w_(),new vj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Nj.bind(null,t),mo:Cj.bind(null,t),f_:Pj.bind(null,t),g_:Tj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await p1(t)):(await t.U_.stop(),t.O_.length>0&&(at("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new O5(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j5(t,e){if(_a("AsyncQueue",`${e}: ${t}`),Lp(t))return new et(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Hd(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new Sh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.W_=new jn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fh{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fh(e,n,Sh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&o1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Dj{constructor(){this.queries=bS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=wt(n),s=i.queries;i.queries=bS(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new et(Le.ABORTED,"Firestore shutting down"))}}function bS(){return new Xh(t=>bI(t),o1)}async function tN(t,e){const n=wt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Rj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=j5(o,`Initialization of query '${Yu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&F5(n)}async function nN(t,e){const n=wt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Mj(t,e){const n=wt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&F5(n)}function Oj(t,e,n){const r=wt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function F5(t){t.Y_.forEach(e=>{e.next()})}var P2,xS;(xS=P2||(P2={})).ea="default",xS.Cache="cache";class rN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==P2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.key=e}}class sN{constructor(e){this.key=e}}class jj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ft(),this.mutatedKeys=Ft(),this.Aa=xI(e),this.Ra=new Sh(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new vS,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const p=i.get(u),f=a1(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),b=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let A=!1;p&&f?p.data.isEqual(f.data)?y!==b&&(r.track({type:3,doc:f}),A=!0):this.ga(p,f)||(r.track({type:2,doc:f}),A=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(a=!0)):!p&&f?(r.track({type:0,doc:f}),A=!0):p&&!f&&(r.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(f?(o=o.add(f),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(f,y){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return b(f)-b(y)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Fh(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ft(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ft();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Fj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Vj{constructor(e){this.key=e,this.va=!1}}class Bj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xh(a=>bI(a),o1),this.Ma=new Map,this.xa=new Set,this.Oa=new jn(ut.comparator),this.Na=new Map,this.La=new N5,this.Ba={},this.ka=new Map,this.qa=jh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Uj(t,e,n=!0){const r=hN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await oN(r,e,n,!0),i}async function zj(t,e){const n=hN(t);await oN(n,e,!0,!1)}async function oN(t,e,n,r){const i=await uj(t.localStore,ko(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await qj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&YI(t.remoteStore,i),a}async function qj(t,e,n,r,i){t.Ka=(h,p,f)=>async function(b,A,v,_){let k=A.view.ma(v);k.ns&&(k=await pS(b.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,k)));const R=_&&_.targetChanges.get(A.targetId),M=_&&_.targetMismatches.get(A.targetId)!=null,z=A.view.applyChanges(k,b.isPrimaryClient,R,M);return wS(b,A.targetId,z.wa),z.snapshot}(t,h,p,f);const s=await pS(t.localStore,e,!0),o=new jj(e,s.Ts),a=o.ma(s.documents),l=Op.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);wS(t,n,c.wa);const u=new Fj(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Hj(t,e,n){const r=wt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!o1(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await N2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&L5(r.remoteStore,i.targetId),T2(r,i.targetId)}).catch(Cp)):(T2(r,i.targetId),await N2(r.localStore,i.targetId,!0))}async function Wj(t,e){const n=wt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),L5(n.remoteStore,r.targetId))}async function $j(t,e,n){const r=Zj(t);try{const i=await function(o,a){const l=wt(o),c=kn.now(),u=a.reduce((f,y)=>f.add(y.key),Ft());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=wa(),b=Ft();return l.cs.getEntries(f,u).next(A=>{y=A,y.forEach((v,_)=>{_.isValidDocument()||(b=b.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,y)).next(A=>{h=A;const v=[];for(const _ of a){const k=mO(_,h.get(_.key).overlayedDocument);k!=null&&v.push(new tc(_.key,k,hI(k.value.mapValue),Dr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,v,a)}).next(A=>{p=A;const v=A.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(f,A.batchId,v)})}).then(()=>({batchId:p.batchId,changes:wI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new jn($t)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Fp(r,i.changes),await p1(r.remoteStore)}catch(i){const s=j5(i,"Failed to persist write");n.reject(s)}}async function aN(t,e){const n=wt(t);try{const r=await aj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Wt(o.va):i.removedDocuments.size>0&&(Wt(o.va),o.va=!1))}),await Fp(n,r,e)}catch(r){await Cp(r)}}function _S(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=wt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&F5(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Kj(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new jn(ut.comparator);o=o.insert(s,_r.newNoDocument(s,bt.min()));const a=Ft().add(s),l=new h1(bt.min(),new Map,new jn($t),o,a);await aN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),V5(r)}else await N2(r.localStore,e,!1).then(()=>T2(r,e,n)).catch(Cp)}async function Gj(t,e){const n=wt(t),r=e.batch.batchId;try{const i=await oj(n.localStore,e);cN(n,r,null),lN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fp(n,i)}catch(i){await Cp(i)}}async function Yj(t,e,n){const r=wt(t);try{const i=await function(o,a){const l=wt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Wt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);cN(r,e,n),lN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fp(r,i)}catch(i){await Cp(i)}}function lN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cN(t,e,n){const r=wt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function T2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||uN(t,r)})}function uN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(L5(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),V5(t))}function wS(t,e,n){for(const r of n)r instanceof iN?(t.La.addReference(r.key,e),Qj(t,r)):r instanceof sN?(at("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||uN(t,r.key)):pt()}function Qj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(at("SyncEngine","New document in limbo: "+n),t.xa.add(r),V5(t))}function V5(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(dn.fromString(e)),r=t.qa.next();t.Na.set(r,new Vj(n)),t.Oa=t.Oa.insert(n,r),YI(t.remoteStore,new bl(ko(S5(n.path)),r,"TargetPurposeLimboResolution",y5.oe))}}async function Fp(t,e,n){const r=wt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=T5.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=wt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>qe.forEach(c,p=>qe.forEach(p.$i,f=>u.persistence.referenceDelegate.addReference(h,p.targetId,f)).next(()=>qe.forEach(p.Ui,f=>u.persistence.referenceDelegate.removeReference(h,p.targetId,f)))))}catch(h){if(!Lp(h))throw h;at("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const f=u.os.get(p),y=f.snapshotVersion,b=f.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(p,b)}}}(r.localStore,s))}async function Xj(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const r=await $I(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new et(Le.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fp(n,r.hs)}}function Jj(t,e){const n=wt(t),r=n.Na.get(e);if(r&&r.va)return Ft().add(r.key);{let i=Ft();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function hN(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.Ca.d_=Mj.bind(null,e.eventManager),e.Ca.$a=Oj.bind(null,e.eventManager),e}function Zj(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yj.bind(null,e),e}class x0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=d1(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sj(this.persistence,new rj,e.initialUser,this.serializer)}Ga(e){return new ej(P5.Zr,this.serializer)}Wa(e){return new dj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}x0.provider={build:()=>new x0};class C2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,this.syncEngine),await Lj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Dj}()}createDatastore(e){const n=d1(e.databaseInfo.databaseId),r=function(s){return new mj(s)}(e.databaseInfo);return function(s,o,a,l){return new bj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new _j(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_S(this.syncEngine,n,0),function(){return mS.D()?new mS:new fj}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new Bj(i,s,o,a,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=wt(i);at("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await jp(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}C2.provider={build:()=>new C2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_a("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new et(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=wt(i),a={documents:s.map(h=>v0(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,dn.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=PO(o.serializer,h);c.set(p.key.toString(),p)});const u=[];return s.forEach(h=>{const p=c.get(h.toString());Wt(!!p),u.push(p)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new u1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ut.fromPath(r);this.mutations.push(new RI(i,this.precondition(i)))}),await async function(r,i){const s=wt(r),o={writes:i.map(a=>zI(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,dn.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pt();n=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new et(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(bt.min())?Dr.exists(!1):Dr.updateTime(n):Dr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(bt.min()))throw new et(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(n)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new C5(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new e9(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Rp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!DI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=lI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{at("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(at("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=j5(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ry(t,e){t.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $I(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function SS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r9(t);at("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yS(e.remoteStore,i)),t._onlineComponents=e}async function r9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ry(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Rh("Error using user provided cache. Falling back to memory cache: "+n),await Ry(t,new x0)}}else at("FirestoreClient","Using default OfflineComponentProvider"),await Ry(t,new x0);return t._offlineComponents}async function B5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),await SS(t,t._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),await SS(t,new C2))),t._onlineComponents}function i9(t){return B5(t).then(e=>e.syncEngine)}function s9(t){return B5(t).then(e=>e.datastore)}async function fN(t){const e=await B5(t),n=e.eventManager;return n.onListen=Uj.bind(null,e.syncEngine),n.onUnlisten=Hj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wj.bind(null,e.syncEngine),n}function o9(t,e,n={}){const r=new So;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new dN({next:p=>{u.Za(),o.enqueueAndForget(()=>nN(s,h));const f=p.docs.has(a);!f&&p.fromCache?c.reject(new et(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&l&&l.source==="server"?c.reject(new et(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new rN(S5(a.path),u,{includeMetadataChanges:!0,_a:!0});return tN(s,h)}(await fN(t),t.asyncQueue,e,n,r)),r.promise}function a9(t,e,n={}){const r=new So;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new dN({next:p=>{u.Za(),o.enqueueAndForget(()=>nN(s,h)),p.fromCache&&l.source==="server"?c.reject(new et(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new rN(a,u,{includeMetadataChanges:!0,_a:!0});return tN(s,h)}(await fN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t,e,n){if(!n)throw new et(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l9(t,e,n,r){if(e===!0&&r===!0)throw new et(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AS(t){if(!ut.isDocumentKey(t))throw new et(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ES(t){if(ut.isDocumentKey(t))throw new et(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function g1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pt()}function vs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g1(t);throw new et(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function c9(t,e){if(e<=0)throw new et(Le.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class m1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new EM;switch(r.type){case"firstParty":return new TM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kS.get(n);r&&(at("ComponentProvider","Removing Datastore"),kS.delete(n),r.terminate())}(this),Promise.resolve()}}function u9(t,e,n,r={}){var i;const s=(t=vs(t,m1))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Rh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Jr.MOCK_USER;else{a=gE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new et(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Jr(c)}t._authCredentials=new IM(new aI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class ri{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}}class jl extends mu{constructor(e,n,r){super(e,n,S5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new ut(e))}withConverter(e){return new jl(this.firestore,e,this._path)}}function It(t,e,...n){if(t=tr(t),gN("collection","path",e),t instanceof m1){const r=dn.fromString(e,...n);return ES(r),new jl(t,null,r)}{if(!(t instanceof ri||t instanceof jl))throw new et(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dn.fromString(e,...n));return ES(r),new jl(t.firestore,null,r)}}function Ct(t,e,...n){if(t=tr(t),arguments.length===1&&(e=lI.newId()),gN("doc","path",e),t instanceof m1){const r=dn.fromString(e,...n);return AS(r),new ri(t,null,new ut(r))}{if(!(t instanceof ri||t instanceof jl))throw new et(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dn.fromString(e,...n));return AS(r),new ri(t.firestore,t instanceof jl?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new C5(this,"async_queue_retry"),this.Vu=()=>{const r=Ly();r&&at("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ly();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ly();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new So;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lp(e))throw e;at("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _a("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=O5.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class nc extends m1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new NS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NS(e),this._firestoreClient=void 0,await e}}}function h9(t,e){const n=typeof t=="object"?t:o5(),r=typeof t=="string"?t:"(default)",i=n1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=dE("firestore");s&&u9(i,...s)}return i}function y1(t){if(t._terminated)throw new et(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d9(t),t._firestoreClient}function d9(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new qM(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,pN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n9(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Fr.fromBase64String(e))}catch(n){throw new et(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new su(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=/^__.*__$/;class p9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mp(e,this.data,n,this.fieldTransforms)}}class mN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class q5{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new q5(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yN(this.Cu)&&f9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class g9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||d1(e)}Qu(e,n,r,i=!1){return new q5({Cu:e,methodName:n,qu:r,path:Rr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Up(t){const e=t._freezeSettings(),n=d1(t._databaseId);return new g9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function H5(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);K5("Data must be an object, but it was:",o,r);const a=xN(r,o);let l,c;if(s.merge)l=new Gi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const p=L2(e,h,n);if(!o.contains(p))throw new et(Le.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);wN(u,p)||u.push(p)}l=new Gi(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new p9(new mi(a),l,c)}class v1 extends Bp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof v1}}class W5 extends Bp{_toFieldTransform(e){return new TI(e.path,new np)}isEqual(e){return e instanceof W5}}class $5 extends Bp{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new sp(e.serializer,AI(e.serializer,this.$u));return new TI(e.path,n)}isEqual(e){return e instanceof $5&&this.$u===e.$u}}function vN(t,e,n,r){const i=t.Qu(1,e,n);K5("Data must be an object, but it was:",i,r);const s=[],o=mi.empty();pu(r,(l,c)=>{const u=G5(e,l,n);c=tr(c);const h=i.Nu(u);if(c instanceof v1)s.push(u);else{const p=zp(c,h);p!=null&&(s.push(u),o.set(u,p))}});const a=new Gi(s);return new mN(o,a,i.fieldTransforms)}function bN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[L2(e,r,n)],l=[i];if(s.length%2!=0)throw new et(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(L2(e,s[p])),l.push(s[p+1]);const c=[],u=mi.empty();for(let p=a.length-1;p>=0;--p)if(!wN(c,a[p])){const f=a[p];let y=l[p];y=tr(y);const b=o.Nu(f);if(y instanceof v1)c.push(f);else{const A=zp(y,b);A!=null&&(c.push(f),u.set(f,A))}}const h=new Gi(c);return new mN(u,h,o.fieldTransforms)}function m9(t,e,n,r=!1){return zp(n,t.Qu(r?4:3,e))}function zp(t,e){if(_N(t=tr(t)))return K5("Unsupported field value:",e,t),xN(t,e);if(t instanceof Bp)return function(r,i){if(!yN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=zp(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=kn.fromDate(r);return{timestampValue:y0(i.serializer,s)}}if(r instanceof kn){const s=new kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:y0(i.serializer,s)}}if(r instanceof U5)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof su)return{bytesValue:FI(i.serializer,r._byteString)};if(r instanceof ri){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:I5(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof z5)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return k5(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${g1(r)}`)}(t,e)}function xN(t,e){const n={};return cI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(t,(r,i)=>{const s=zp(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function _N(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kn||t instanceof U5||t instanceof su||t instanceof ri||t instanceof Bp||t instanceof z5)}function K5(t,e,n){if(!_N(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=g1(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function L2(t,e,n){if((e=tr(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return G5(t,e);throw _0("Field path arguments must be of type string or ",t,!1,void 0,n)}const y9=new RegExp("[~\\*/\\[\\]]");function G5(t,e,n){if(e.search(y9)>=0)throw _0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vp(...e.split("."))._internalPath}catch{throw _0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _0(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new et(Le.INVALID_ARGUMENT,a+t+l)}function wN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Y5("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v9 extends w0{data(){return super.data()}}function Y5(t,e){return typeof e=="string"?G5(t,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q5{}class SN extends Q5{}function Pn(t,e,...n){let r=[];e instanceof Q5&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof X5).length,a=s.filter(l=>l instanceof b1).length;if(o>1||o>0&&a>0)throw new et(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class b1 extends SN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new b1(e,n,r)}_apply(e){const n=this._parse(e);return AN(e._query,n),new mu(e.firestore,e.converter,k2(e._query,n))}_parse(e){const n=Up(e.firestore);return function(s,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new et(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){TS(h,u);const f=[];for(const y of h)f.push(PS(l,s,y));p={arrayValue:{values:f}}}else p=PS(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||TS(h,u),p=m9(a,o,h,u==="in"||u==="not-in");return lr.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xt(t,e,n){const r=e,i=Y5("where",t);return b1._create(i,r,n)}class X5 extends Q5{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new X5(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ws.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)AN(o,l),o=k2(o,l)}(e._query,n),new mu(e.firestore,e.converter,k2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J5 extends SN{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new J5(e,n,r)}_apply(e){return new mu(e.firestore,e.converter,m0(e._query,this._limit,this._limitType))}}function kN(t){return c9("limit",t),J5._create("limit",t,"F")}function PS(t,e,n){if(typeof(n=tr(n))=="string"){if(n==="")throw new et(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vI(e)&&n.indexOf("/")!==-1)throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dn.fromString(n));if(!ut.isDocumentKey(r))throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xw(t,new ut(r))}if(n instanceof ri)return Xw(t,n._key);throw new et(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${g1(n)}.`)}function TS(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new et(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EN{convertValue(e,n="none"){switch(iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ru(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Yn(o.doubleValue));return new z5(s)}convertGeoPoint(e){return new U5(Yn(e.latitude),Yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=b5(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zf(e));default:return null}}convertTimestamp(e){const n=Hl(e);return new kn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dn.fromString(e);Wt(WI(r));const i=new ep(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||_a(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class x9 extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ex extends w0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Y5("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class km extends ex{data(e={}){return super.data(e)}}class _9{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new km(this._firestore,this._userDataWriter,r.key,r,new fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new km(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new km(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:w9(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function w9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t){t=vs(t,ri);const e=vs(t.firestore,nc);return o9(y1(e),t._key).then(n=>S9(e,t,n))}class tx extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,n)}}function Tn(t){t=vs(t,mu);const e=vs(t.firestore,nc),n=y1(e),r=new tx(e);return b9(t._query),a9(n,t._query).then(i=>new _9(e,r,t,i))}function br(t,e,n){t=vs(t,ri);const r=vs(t.firestore,nc),i=Z5(t.converter,e,n);return x1(r,[H5(Up(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dr.none())])}function Am(t,e,n,...r){t=vs(t,ri);const i=vs(t.firestore,nc),s=Up(i);let o;return o=typeof(e=tr(e))=="string"||e instanceof Vp?bN(s,"updateDoc",t._key,e,n,r):vN(s,"updateDoc",t._key,e),x1(i,[o.toMutation(t._key,Dr.exists(!0))])}function R2(t){return x1(vs(t.firestore,nc),[new u1(t._key,Dr.none())])}function yi(t,e){const n=vs(t.firestore,nc),r=Ct(t),i=Z5(t.converter,e);return x1(n,[H5(Up(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}function x1(t,e){return function(r,i){const s=new So;return r.asyncQueue.enqueueAndForget(async()=>$j(await i9(r),i,s)),s.promise}(y1(t),e)}function S9(t,e,n){const r=n.docs.get(e._key),i=new tx(t);return new ex(t,i,e._key,r,new fh(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={maxAttempts:5};function Id(t,e){if((t=tr(t)).firestore!==e)throw new et(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Up(n)}get(n){const r=Id(n,this._firestore),i=new x9(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return pt();const o=s[0];if(o.isFoundDocument())return new w0(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new w0(this._firestore,i,r._key,null,r.converter);throw pt()})}set(n,r,i){const s=Id(n,this._firestore),o=Z5(s.converter,r,i),a=H5(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Id(n,this._firestore);let a;return a=typeof(r=tr(r))=="string"||r instanceof Vp?bN(this._dataReader,"Transaction.update",o._key,r,i,s):vN(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Id(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Id(e,this._firestore),r=new tx(this._firestore);return super.get(e).then(i=>new ex(this._firestore,r,n._key,i._document,new fh(!1,!1),n.converter))}}function Vh(t,e,n){t=vs(t,nc);const r=Object.assign(Object.assign({},k9),n);return function(s){if(s.maxAttempts<1)throw new et(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new So;return s.asyncQueue.enqueueAndForget(async()=>{const c=await s9(s);new t9(s.asyncQueue,c,a,o,l).au()}),l.promise}(y1(t),i=>e(new A9(t,i)),r)}function fn(){return new W5("serverTimestamp")}function Dy(t){return new $5("increment",t)}(function(e,n=!0){(function(i){Qh=i})(du),Zc(new zl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nc(new NM(r.getProvider("auth-internal")),new LM(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new et(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xo($w,"4.7.3",e),xo($w,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firebasestorage.googleapis.com",E9="storageBucket",I9=2*60*1e3,N9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Po{constructor(e,n,r=0){super(My(e),`Firebase Storage: ${n} (${My(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,To.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return My(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var No;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(No||(No={}));function My(t){return"storage/"+t}function P9(){const t="An unknown error occurred, please check the error payload for server response.";return new To(No.UNKNOWN,t)}function T9(){return new To(No.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C9(){return new To(No.CANCELED,"User canceled the upload/download.")}function L9(t){return new To(No.INVALID_URL,"Invalid URL '"+t+"'.")}function R9(t){return new To(No.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CS(t){return new To(No.INVALID_ARGUMENT,t)}function NN(){return new To(No.APP_DELETED,"The Firebase app was deleted.")}function D9(t){return new To(No.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=js.makeFromUrl(e,n)}catch{return new js(e,"")}if(r.path==="")return r;throw R9(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},b=n===IN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",v=new RegExp(`^https?://${b}/${i}/${A}`,"i"),k=[{regex:a,indices:l,postModify:s},{regex:f,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<k.length;R++){const M=k[R],z=M.regex.exec(e);if(z){const I=z[M.indices.bucket];let S=z[M.indices.path];S||(S=""),r=new js(I,S),M.postModify(r);break}}if(r==null)throw L9(e);return r}}class M9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...A){c||(c=!0,e.apply(null,A))}function h(A){i=setTimeout(()=>{i=null,t(f,l())},A)}function p(){s&&clearTimeout(s)}function f(A,...v){if(c){p();return}if(A){p(),u.call(null,A,...v);return}if(l()||o){p(),u.call(null,A,...v);return}r<64&&(r*=2);let k;a===1?(a=2,k=0):k=(r+Math.random())*1e3,h(k)}let y=!1;function b(A){y||(y=!0,p(),!c&&(i!==null?(A||(a=2),clearTimeout(i),h(0)):A||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function j9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t){return t!==void 0}function LS(t,e,n,r){if(r<e)throw CS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw CS(`Invalid value for '${t}'. Expected ${n} or less.`)}function V9(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var S0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(S0||(S0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n,r,i,s,o,a,l,c,u,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,y)=>{this.resolve_=f,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new jg(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===S0.NO_ERROR,l=s.getStatus();if(!a||B9(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===S0.ABORT;r(!1,new jg(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new jg(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());F9(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=P9();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?NN():C9();o(l)}else{const l=T9();o(l)}};this.canceled_?n(!1,new jg(!1,null,!0)):this.backoffId_=O9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&j9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function z9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function q9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function H9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function W9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $9(t,e,n,r,i,s,o=!0){const a=V9(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return H9(c,e),z9(c,n),q9(c,s),W9(c,r),new U9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function G9(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this._service=e,n instanceof js?this._location=n:this._location=js.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new k0(e,n)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G9(this._location.path)}get storage(){return this._service}get parent(){const e=K9(this._location.path);if(e===null)return null;const n=new js(this._location.bucket,e);return new k0(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw D9(e)}}function RS(t,e){const n=e==null?void 0:e[E9];return n==null?null:js.makeFromBucketSpec(n,t)}function Y9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:gE(i,t.app.options.projectId))}class Q9{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=IN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I9,this._maxUploadRetryTime=N9,this._requests=new Set,i!=null?this._bucket=js.makeFromBucketSpec(i,this._host):this._bucket=RS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=js.makeFromBucketSpec(this._url,e):this._bucket=RS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new k0(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new M9(NN());{const o=$9(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const DS="@firebase/storage",MS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="storage";function X9(t=o5(),e){t=tr(t);const r=n1(t,PN).getImmediate({identifier:e}),i=dE("storage");return i&&J9(r,...i),r}function J9(t,e,n,r={}){Y9(t,e,n,r)}function Z9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Q9(n,r,i,e,du)}function eF(){Zc(new zl(PN,Z9,"PUBLIC").setMultipleInstances(!0)),xo(DS,MS,""),xo(DS,MS,"esm2017")}eF();const tF={apiKey:"AIzaSyCC28mOLtS9k7PLU2cGmLxCsOLrb8ZnjpE",authDomain:"zyngra-pos.firebaseapp.com",projectId:"zyngra-pos",storageBucket:"zyngra-pos.firebasestorage.app",messagingSenderId:"306997877540",appId:"1:306997877540:web:cbb14b56d7478e0b03f1b1",measurementId:"G-H5DNJTQV4J"},nx=vE(tF),Hu=kM(nx),Ke=h9(nx);X9(nx);var TN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Zd,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",p="quarter",f="year",y="date",b="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var q=["th","st","nd","rd"],U=j%100;return"["+j+(q[(U-20)%10]||q[U]||q[0])+"]"}},k=function(j,q,U){var W=String(j);return!W||W.length>=q?j:""+Array(q+1-W.length).join(U)+j},R={s:k,z:function(j){var q=-j.utcOffset(),U=Math.abs(q),W=Math.floor(U/60),O=U%60;return(q<=0?"+":"-")+k(W,2,"0")+":"+k(O,2,"0")},m:function j(q,U){if(q.date()<U.date())return-j(U,q);var W=12*(U.year()-q.year())+(U.month()-q.month()),O=q.clone().add(W,h),H=U-O<0,ne=q.clone().add(W+(H?-1:1),h);return+(-(W+(U-O)/(H?O-ne:ne-O))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:h,y:f,w:u,d:c,D:y,h:l,m:a,s:o,ms:s,Q:p}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},M="en",z={};z[M]=_;var I="$isDayjsObject",S=function(j){return j instanceof w||!(!j||!j[I])},L=function j(q,U,W){var O;if(!q)return M;if(typeof q=="string"){var H=q.toLowerCase();z[H]&&(O=H),U&&(z[H]=U,O=H);var ne=q.split("-");if(!O&&ne.length>1)return j(ne[0])}else{var ae=q.name;z[ae]=q,O=ae}return!W&&O&&(M=O),O||!W&&M},D=function(j,q){if(S(j))return j.clone();var U=typeof q=="object"?q:{};return U.date=j,U.args=arguments,new w(U)},x=R;x.l=L,x.i=S,x.w=function(j,q){return D(j,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var w=function(){function j(U){this.$L=L(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[I]=!0}var q=j.prototype;return q.parse=function(U){this.$d=function(W){var O=W.date,H=W.utc;if(O===null)return new Date(NaN);if(x.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var ne=O.match(A);if(ne){var ae=ne[2]-1||0,F=(ne[7]||"0").substring(0,3);return H?new Date(Date.UTC(ne[1],ae,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,F)):new Date(ne[1],ae,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,F)}}return new Date(O)}(U),this.init()},q.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},q.$utils=function(){return x},q.isValid=function(){return this.$d.toString()!==b},q.isSame=function(U,W){var O=D(U);return this.startOf(W)<=O&&O<=this.endOf(W)},q.isAfter=function(U,W){return D(U)<this.startOf(W)},q.isBefore=function(U,W){return this.endOf(W)<D(U)},q.$g=function(U,W,O){return x.u(U)?this[W]:this.set(O,U)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(U,W){var O=this,H=!!x.u(W)||W,ne=x.p(U),ae=function(he,_e){var xe=x.w(O.$u?Date.UTC(O.$y,_e,he):new Date(O.$y,_e,he),O);return H?xe:xe.endOf(c)},F=function(he,_e){return x.w(O.toDate()[he].apply(O.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(_e)),O)},Y=this.$W,Z=this.$M,Q=this.$D,re="set"+(this.$u?"UTC":"");switch(ne){case f:return H?ae(1,0):ae(31,11);case h:return H?ae(1,Z):ae(0,Z+1);case u:var ce=this.$locale().weekStart||0,pe=(Y<ce?Y+7:Y)-ce;return ae(H?Q-pe:Q+(6-pe),Z);case c:case y:return F(re+"Hours",0);case l:return F(re+"Minutes",1);case a:return F(re+"Seconds",2);case o:return F(re+"Milliseconds",3);default:return this.clone()}},q.endOf=function(U){return this.startOf(U,!1)},q.$set=function(U,W){var O,H=x.p(U),ne="set"+(this.$u?"UTC":""),ae=(O={},O[c]=ne+"Date",O[y]=ne+"Date",O[h]=ne+"Month",O[f]=ne+"FullYear",O[l]=ne+"Hours",O[a]=ne+"Minutes",O[o]=ne+"Seconds",O[s]=ne+"Milliseconds",O)[H],F=H===c?this.$D+(W-this.$W):W;if(H===h||H===f){var Y=this.clone().set(y,1);Y.$d[ae](F),Y.init(),this.$d=Y.set(y,Math.min(this.$D,Y.daysInMonth())).$d}else ae&&this.$d[ae](F);return this.init(),this},q.set=function(U,W){return this.clone().$set(U,W)},q.get=function(U){return this[x.p(U)]()},q.add=function(U,W){var O,H=this;U=Number(U);var ne=x.p(W),ae=function(Z){var Q=D(H);return x.w(Q.date(Q.date()+Math.round(Z*U)),H)};if(ne===h)return this.set(h,this.$M+U);if(ne===f)return this.set(f,this.$y+U);if(ne===c)return ae(1);if(ne===u)return ae(7);var F=(O={},O[a]=r,O[l]=i,O[o]=n,O)[ne]||1,Y=this.$d.getTime()+U*F;return x.w(Y,this)},q.subtract=function(U,W){return this.add(-1*U,W)},q.format=function(U){var W=this,O=this.$locale();if(!this.isValid())return O.invalidDate||b;var H=U||"YYYY-MM-DDTHH:mm:ssZ",ne=x.z(this),ae=this.$H,F=this.$m,Y=this.$M,Z=O.weekdays,Q=O.months,re=O.meridiem,ce=function(_e,xe,De,je){return _e&&(_e[xe]||_e(W,H))||De[xe].slice(0,je)},pe=function(_e){return x.s(ae%12||12,_e,"0")},he=re||function(_e,xe,De){var je=_e<12?"AM":"PM";return De?je.toLowerCase():je};return H.replace(v,function(_e,xe){return xe||function(De){switch(De){case"YY":return String(W.$y).slice(-2);case"YYYY":return x.s(W.$y,4,"0");case"M":return Y+1;case"MM":return x.s(Y+1,2,"0");case"MMM":return ce(O.monthsShort,Y,Q,3);case"MMMM":return ce(Q,Y);case"D":return W.$D;case"DD":return x.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return ce(O.weekdaysMin,W.$W,Z,2);case"ddd":return ce(O.weekdaysShort,W.$W,Z,3);case"dddd":return Z[W.$W];case"H":return String(ae);case"HH":return x.s(ae,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return he(ae,F,!0);case"A":return he(ae,F,!1);case"m":return String(F);case"mm":return x.s(F,2,"0");case"s":return String(W.$s);case"ss":return x.s(W.$s,2,"0");case"SSS":return x.s(W.$ms,3,"0");case"Z":return ne}return null}(_e)||ne.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(U,W,O){var H,ne=this,ae=x.p(W),F=D(U),Y=(F.utcOffset()-this.utcOffset())*r,Z=this-F,Q=function(){return x.m(ne,F)};switch(ae){case f:H=Q()/12;break;case h:H=Q();break;case p:H=Q()/3;break;case u:H=(Z-Y)/6048e5;break;case c:H=(Z-Y)/864e5;break;case l:H=Z/i;break;case a:H=Z/r;break;case o:H=Z/n;break;default:H=Z}return O?H:x.a(H)},q.daysInMonth=function(){return this.endOf(h).$D},q.$locale=function(){return z[this.$L]},q.locale=function(U,W){if(!U)return this.$L;var O=this.clone(),H=L(U,W,!0);return H&&(O.$L=H),O},q.clone=function(){return x.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},j}(),P=w.prototype;return D.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",y]].forEach(function(j){P[j[1]]=function(q){return this.$g(q,j[0],j[1])}}),D.extend=function(j,q){return j.$i||(j(q,w,D),j.$i=!0),D},D.locale=L,D.isDayjs=S,D.unix=function(j){return D(1e3*j)},D.en=z[M],D.Ls=z,D.p={},D})})(TN);var nF=TN.exports;const mt=bp(nF),CN=le.createContext(null),Vr=()=>le.useContext(CN);function rF({children:t}){const[e,n]=le.useState(null),[r,i]=le.useState(null),[s,o]=le.useState(null),[a,l]=le.useState(!0);le.useEffect(()=>{const y=dD(Hu,async b=>{try{n(b),b?await c(b):(i(null),o(null))}finally{l(!1)}});return()=>y()},[]);const c=async y=>{const b=Ct(Ke,"users",y.uid),A=await op(b);let v;if(A.exists())v=A.data();else{const k=await yi(It(Ke,"orgs"),{name:"Zyngra POS Org",ownerUid:y.uid,createdAt:fn(),trialExpiresAt:kn.fromDate(mt().add(3,"day").toDate()),settings:{permissions:{cashierCanEditSales:!1,cashierCanDeleteSales:!1,cashierCanApplyDiscount:!1},theme:"dark"},themeUnlocks:[],missions:{salesCount:0,salesGrabCount:0,qrisCount:0,lastUpdated:fn()}});v={uid:y.uid,email:y.email||"",orgId:k.id,createdAt:fn()},await br(b,v,{merge:!0})}i(v);const _=await op(Ct(Ke,"orgs",v.orgId));_.exists()?o({id:_.id,..._.data()}):o(null)},u=async(y,b)=>{await cD(Hu,y,b)},h=async(y,b,A)=>{const _=(await lD(Hu,y,b)).user.uid,k=await yi(It(Ke,"orgs"),{name:A||"Zyngra POS Org",ownerUid:_,createdAt:fn(),trialExpiresAt:kn.fromDate(mt().add(3,"day").toDate()),settings:{permissions:{cashierCanEditSales:!1,cashierCanDeleteSales:!1,cashierCanApplyDiscount:!1},theme:"dark"},themeUnlocks:[],missions:{salesCount:0,salesGrabCount:0,qrisCount:0,lastUpdated:fn()}});await br(Ct(Ke,"users",_),{uid:_,email:y,orgId:k.id,createdAt:fn()},{merge:!0})},p=async()=>{localStorage.removeItem("sessionRole"),await fD(Hu)},f=async()=>{Hu.currentUser&&await c(Hu.currentUser)};return N.jsx(CN.Provider,{value:{user:e,userDoc:r,org:s,loading:a,signIn:u,signUp:h,signOut:p,refresh:f},children:t})}const iF={},OS=t=>{let e;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const f=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,f))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(iF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},sF=t=>t?OS(t):OS;var LN={exports:{}},RN={},DN={exports:{}},MN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh=le;function oF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aF=typeof Object.is=="function"?Object.is:oF,lF=Bh.useState,cF=Bh.useEffect,uF=Bh.useLayoutEffect,hF=Bh.useDebugValue;function dF(t,e){var n=e(),r=lF({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return uF(function(){i.value=n,i.getSnapshot=e,Oy(i)&&s({inst:i})},[t,n,e]),cF(function(){return Oy(i)&&s({inst:i}),t(function(){Oy(i)&&s({inst:i})})},[t]),hF(n),n}function Oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!aF(t,n)}catch{return!0}}function fF(t,e){return e()}var pF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fF:dF;MN.useSyncExternalStore=Bh.useSyncExternalStore!==void 0?Bh.useSyncExternalStore:pF;DN.exports=MN;var gF=DN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=le,mF=gF;function yF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vF=typeof Object.is=="function"?Object.is:yF,bF=mF.useSyncExternalStore,xF=_1.useRef,_F=_1.useEffect,wF=_1.useMemo,SF=_1.useDebugValue;RN.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=xF(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=wF(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var y=o.value;if(i(y,f))return h=y}return h=f}if(y=h,vF(u,f))return y;var b=r(f);return i!==void 0&&i(y,b)?(u=f,y):(u=f,h=b)}var c=!1,u,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=bF(t,s[0],s[1]);return _F(function(){o.hasValue=!0,o.value=a},[a]),SF(a),a};LN.exports=RN;var kF=LN.exports;const AF=bp(kF),ON={},{useDebugValue:EF}=ps,{useSyncExternalStoreWithSelector:IF}=AF;let jS=!1;const NF=t=>t;function PF(t,e=NF,n){(ON?"production":void 0)!=="production"&&n&&!jS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jS=!0);const r=IF(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return EF(r),r}const FS=t=>{(ON?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?sF(t):t,n=(r,i)=>PF(e,r,i);return Object.assign(n,e),n},jN=t=>t?FS(t):FS,mf=jN((t,e)=>({items:[],push:n=>{const r=crypto.randomUUID(),i={id:r,...n};t(s=>({items:[i,...s.items].slice(0,5)})),setTimeout(()=>{e().items.find(o=>o.id===r)&&e().remove(r)},3500)},remove:n=>t(r=>({items:r.items.filter(i=>i.id!==n)}))})),Oe={success:(t,e)=>mf.getState().push({type:"success",message:t,title:e}),info:(t,e)=>mf.getState().push({type:"info",message:t,title:e}),error:(t,e)=>mf.getState().push({type:"error",message:t,title:e})};function TF(){const{signIn:t,signUp:e}=Vr(),n=hu(),[r,i]=le.useState("in"),[s,o]=le.useState(""),[a,l]=le.useState(""),[c,u]=le.useState(""),h=async()=>{try{await t(s,a),Oe.success("Berhasil masuk"),n("/role")}catch{Oe.error("Email atau password salah")}},p=async()=>{try{await e(s,a,c),Oe.success("Akun dibuat, silakan pilih peran"),n("/role")}catch{Oe.error("Gagal membuat akun")}},f=y=>{y.preventDefault(),r==="in"?h():p()};return N.jsx("div",{className:"min-h-screen grid place-items-center p-4",children:N.jsxs("div",{className:"w-full max-w-md card p-6",children:[N.jsx("div",{className:"text-center text-xl font-bold mb-4",children:"Zyngra POS"}),N.jsxs("div",{className:"flex gap-2 mb-4",children:[N.jsx("button",{className:`flex-1 px-3 py-2 ${r==="in"?"bg-black/10":""}`,onClick:()=>i("in"),children:"Masuk"}),N.jsx("button",{className:`flex-1 px-3 py-2 ${r==="up"?"bg-black/10":""}`,onClick:()=>i("up"),children:"Daftar"})]}),N.jsx("form",{className:"grid gap-2",onSubmit:f,children:r==="in"?N.jsxs(N.Fragment,{children:[N.jsx("input",{placeholder:"Email",value:s,onChange:y=>o(y.target.value)}),N.jsx("input",{placeholder:"Password",type:"password",value:a,onChange:y=>l(y.target.value)}),N.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Masuk"})]}):N.jsxs(N.Fragment,{children:[N.jsx("input",{placeholder:"Nama Organisasi",value:c,onChange:y=>u(y.target.value)}),N.jsx("input",{placeholder:"Email",value:s,onChange:y=>o(y.target.value)}),N.jsx("input",{placeholder:"Password",type:"password",value:a,onChange:y=>l(y.target.value)}),N.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white",children:"Daftar"})]})})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function qp(t){return t+.5|0}const xl=(t,e,n)=>Math.max(Math.min(t,n),e);function $d(t){return xl(qp(t*2.55),0,255)}function Fl(t){return xl(qp(t*255),0,255)}function ia(t){return xl(qp(t/2.55)/100,0,1)}function VS(t){return xl(qp(t*100),0,100)}const us={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},D2=[..."0123456789ABCDEF"],CF=t=>D2[t&15],LF=t=>D2[(t&240)>>4]+D2[t&15],Fg=t=>(t&240)>>4===(t&15),RF=t=>Fg(t.r)&&Fg(t.g)&&Fg(t.b)&&Fg(t.a);function DF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&us[t[1]]*17,g:255&us[t[2]]*17,b:255&us[t[3]]*17,a:e===5?us[t[4]]*17:255}:(e===7||e===9)&&(n={r:us[t[1]]<<4|us[t[2]],g:us[t[3]]<<4|us[t[4]],b:us[t[5]]<<4|us[t[6]],a:e===9?us[t[7]]<<4|us[t[8]]:255})),n}const MF=(t,e)=>t<255?e(t):"";function OF(t){var e=RF(t)?CF:LF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+MF(t.a,e):void 0}const jF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FN(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function FF(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function VF(t,e,n){const r=FN(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function BF(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function rx(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=BF(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function ix(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Fl)}function sx(t,e,n){return ix(FN,t,e,n)}function UF(t,e,n){return ix(VF,t,e,n)}function zF(t,e,n){return ix(FF,t,e,n)}function VN(t){return(t%360+360)%360}function qF(t){const e=jF.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?$d(+e[5]):Fl(+e[5]));const i=VN(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=UF(i,s,o):e[1]==="hsv"?r=zF(i,s,o):r=sx(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function HF(t,e){var n=rx(t);n[0]=VN(n[0]+e),n=sx(n),t.r=n[0],t.g=n[1],t.b=n[2]}function WF(t){if(!t)return;const e=rx(t),n=e[0],r=VS(e[1]),i=VS(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${ia(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const BS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},US={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $F(){const t={},e=Object.keys(US),n=Object.keys(BS);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,BS[s]);s=parseInt(US[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Vg;function KF(t){Vg||(Vg=$F(),Vg.transparent=[0,0,0,0]);const e=Vg[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const GF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function YF(t){const e=GF.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?$d(o):xl(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?$d(r):xl(r,0,255)),i=255&(e[4]?$d(i):xl(i,0,255)),s=255&(e[6]?$d(s):xl(s,0,255)),{r,g:i,b:s,a:n}}}function QF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ia(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const jy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Wu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function XF(t,e,n){const r=Wu(ia(t.r)),i=Wu(ia(t.g)),s=Wu(ia(t.b));return{r:Fl(jy(r+n*(Wu(ia(e.r))-r))),g:Fl(jy(i+n*(Wu(ia(e.g))-i))),b:Fl(jy(s+n*(Wu(ia(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Bg(t,e,n){if(t){let r=rx(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=sx(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function BN(t,e){return t&&Object.assign(e||{},t)}function zS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Fl(t[3]))):(e=BN(t,{r:0,g:0,b:0,a:1}),e.a=Fl(e.a)),e}function JF(t){return t.charAt(0)==="r"?YF(t):qF(t)}class ap{constructor(e){if(e instanceof ap)return e;const n=typeof e;let r;n==="object"?r=zS(e):n==="string"&&(r=DF(e)||KF(e)||JF(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=BN(this._rgb);return e&&(e.a=ia(e.a)),e}set rgb(e){this._rgb=zS(e)}rgbString(){return this._valid?QF(this._rgb):void 0}hexString(){return this._valid?OF(this._rgb):void 0}hslString(){return this._valid?WF(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=XF(this._rgb,e._rgb,n)),this}clone(){return new ap(this.rgb)}alpha(e){return this._rgb.a=Fl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=qp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Bg(this._rgb,2,e),this}darken(e){return Bg(this._rgb,2,-e),this}saturate(e){return Bg(this._rgb,1,e),this}desaturate(e){return Bg(this._rgb,1,-e),this}rotate(e){return HF(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Qo(){}const ZF=(()=>{let t=0;return()=>t++})();function Rt(t){return t==null}function Nn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Vt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Hn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Wi(t,e){return Hn(t)?t:e}function Et(t,e){return typeof t>"u"?e:t}const eV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,UN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function mn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function nn(t,e,n,r){let i,s,o;if(Nn(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Vt(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function A0(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function E0(t){if(Nn(t))return t.map(E0);if(Vt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=E0(t[n[i]]);return e}return t}function zN(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function tV(t,e,n,r){if(!zN(t))return;const i=e[t],s=n[t];Vt(i)&&Vt(s)?lp(i,s,r):e[t]=E0(s)}function lp(t,e,n){const r=Nn(e)?e:[e],i=r.length;if(!Vt(t))return t;n=n||{};const s=n.merger||tV;let o;for(let a=0;a<i;++a){if(o=r[a],!Vt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function yf(t,e){return lp(t,e,{merger:nV})}function nV(t,e,n){if(!zN(t))return;const r=e[t],i=n[t];Vt(r)&&Vt(i)?yf(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=E0(i))}const qS={"":t=>t,x:t=>t.x,y:t=>t.y};function rV(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function iV(t){const e=rV(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function $l(t,e){return(qS[e]||(qS[e]=iV(e)))(t)}function ox(t){return t.charAt(0).toUpperCase()+t.slice(1)}const cp=t=>typeof t<"u",Kl=t=>typeof t=="function",HS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function sV(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Kt=Math.PI,Sn=2*Kt,oV=Sn+Kt,I0=Number.POSITIVE_INFINITY,aV=Kt/180,er=Kt/2,kc=Kt/4,WS=Kt*2/3,_l=Math.log10,Ao=Math.sign;function vf(t,e,n){return Math.abs(t-e)<n}function $S(t){const e=Math.round(t);t=vf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(_l(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function lV(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function cV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Uh(t){return!cV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function qN(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Fs(t){return t*(Kt/180)}function ax(t){return t*(180/Kt)}function KS(t){if(!Hn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function HN(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Kt&&(s+=Sn),{angle:s,distance:i}}function M2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hV(t,e){return(t-e+oV)%Sn-Kt}function Zr(t){return(t%Sn+Sn)%Sn}function up(t,e,n,r){const i=Zr(t),s=Zr(e),o=Zr(n),a=Zr(s-i),l=Zr(o-i),c=Zr(i-s),u=Zr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function wr(t,e,n){return Math.max(e,Math.min(n,t))}function dV(t){return wr(t,-32768,32767)}function ua(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function lx(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ha=(t,e,n,r)=>lx(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),fV=(t,e,n)=>lx(t,n,r=>t[r][e]>=n);function pV(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const WN=["push","pop","shift","splice","unshift"];function gV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),WN.forEach(n=>{const r="_onData"+ox(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function GS(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(WN.forEach(s=>{delete t[s]}),delete t._chartjs)}function $N(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const KN=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function GN(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,KN.call(window,()=>{r=!1,t.apply(e,n)}))}}function mV(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const cx=t=>t==="start"?"left":t==="end"?"right":"center",Xr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,yV=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function YN(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:f,maxDefined:y}=o.getUserBounds();if(f){if(i=Math.min(ha(l,u,h).lo,n?r:ha(e,u,o.getPixelForValue(h)).lo),c){const b=l.slice(0,i+1).reverse().findIndex(A=>!Rt(A[a.axis]));i-=Math.max(0,b)}i=wr(i,0,r-1)}if(y){let b=Math.max(ha(l,o.axis,p,!0).hi+1,n?0:ha(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const A=l.slice(b-1).findIndex(v=>!Rt(v[a.axis]));b+=Math.max(0,A)}s=wr(b,i,r)-i}else s=r-i}return{start:i,count:s}}function QN(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Ug=t=>t===0||t===1,YS=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Sn/n)),QS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Sn/n)+1,bf={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*er)+1,easeOutSine:t=>Math.sin(t*er),easeInOutSine:t=>-.5*(Math.cos(Kt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ug(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ug(t)?t:YS(t,.075,.3),easeOutElastic:t=>Ug(t)?t:QS(t,.075,.3),easeInOutElastic(t){return Ug(t)?t:t<.5?.5*YS(t*2,.1125,.45):.5+.5*QS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-bf.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?bf.easeInBounce(t*2)*.5:bf.easeOutBounce(t*2-1)*.5+.5};function ux(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function XS(t){return ux(t)?t:new ap(t)}function Fy(t){return ux(t)?t:new ap(t).saturate(.5).darken(.1).hexString()}const vV=["x","y","borderWidth","radius","tension"],bV=["color","borderColor","backgroundColor"];function xV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:bV},numbers:{type:"number",properties:vV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function _V(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const JS=new Map;function wV(t,e){e=e||{};const n=t+JSON.stringify(e);let r=JS.get(n);return r||(r=new Intl.NumberFormat(t,e),JS.set(n,r)),r}function Hp(t,e,n){return wV(e,n).format(t)}const XN={values(t){return Nn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=SV(t,n)}const o=_l(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Hp(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(_l(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?XN.numeric.call(this,t,e,n):""}};function SV(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var w1={formatters:XN};function kV(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:w1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ou=Object.create(null),O2=Object.create(null);function xf(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Vy(t,e,n){return typeof e=="string"?lp(xf(t,e),n):lp(xf(t,""),e)}class AV{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Fy(i.backgroundColor),this.hoverBorderColor=(r,i)=>Fy(i.borderColor),this.hoverColor=(r,i)=>Fy(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Vy(this,e,n)}get(e){return xf(this,e)}describe(e,n){return Vy(O2,e,n)}override(e,n){return Vy(ou,e,n)}route(e,n,r,i){const s=xf(this,e),o=xf(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Vt(l)?Object.assign({},c,l):Et(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Cn=new AV({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xV,_V,kV]);function EV(t){return!t||Rt(t.size)||Rt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function N0(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function IV(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,p;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Nn(h))o=N0(t,i,s,o,h);else if(Nn(h))for(c=0,u=h.length;c<u;c++)p=h[c],p!=null&&!Nn(p)&&(o=N0(t,i,s,o,p));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function Ac(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function ZS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function j2(t,e,n,r){JN(t,e,n,r,null)}function JN(t,e,n,r,i){let s,o,a,l,c,u,h,p;const f=e.pointStyle,y=e.rotation,b=e.radius;let A=(y||0)*aV;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(A),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,b,0,0,Sn):t.arc(n,r,b,0,Sn),t.closePath();break;case"triangle":u=i?i/2:b,t.moveTo(n+Math.sin(A)*u,r-Math.cos(A)*b),A+=WS,t.lineTo(n+Math.sin(A)*u,r-Math.cos(A)*b),A+=WS,t.lineTo(n+Math.sin(A)*u,r-Math.cos(A)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(A+kc)*l,h=Math.cos(A+kc)*(i?i/2-c:l),a=Math.sin(A+kc)*l,p=Math.sin(A+kc)*(i?i/2-c:l),t.arc(n-h,r-a,c,A-Kt,A-er),t.arc(n+p,r-o,c,A-er,A),t.arc(n+h,r+a,c,A,A+er),t.arc(n-p,r+o,c,A+er,A+Kt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*b,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}A+=kc;case"rectRot":h=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),t.moveTo(n-h,r-a),t.lineTo(n+p,r-o),t.lineTo(n+h,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":A+=kc;case"cross":h=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":h=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),A+=kc,h=Math.cos(A)*(i?i/2:b),o=Math.cos(A)*b,a=Math.sin(A)*b,p=Math.sin(A)*(i?i/2:b),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(A)*b,a=Math.sin(A)*b,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(A)*(i?i/2:b),r+Math.sin(A)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function da(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function S1(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function k1(t){t.restore()}function NV(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function PV(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function TV(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Rt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function CV(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function LV(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function au(t,e,n,r,i,s={}){const o=Nn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,TV(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&LV(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Rt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),CV(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function hp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Kt,Kt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Kt,er,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,er,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-er,!0),t.lineTo(n+o.topLeft,r)}const RV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function MV(t,e){const n=(""+t).match(RV);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const OV=t=>+t||0;function hx(t,e){const n={},r=Vt(e),i=r?Object.keys(e):e,s=Vt(t)?r?o=>Et(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=OV(s(o));return n}function ZN(t){return hx(t,{top:"y",right:"x",bottom:"y",left:"x"})}function zc(t){return hx(t,["topLeft","topRight","bottomLeft","bottomRight"])}function oi(t){const e=ZN(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function gr(t,e){t=t||{},e=e||Cn.font;let n=Et(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Et(t.style,e.style);r&&!(""+r).match(DV)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Et(t.family,e.family),lineHeight:MV(Et(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Et(t.weight,e.weight),string:""};return i.string=EV(i),i}function Kd(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function jV(t,e,n){const{min:r,max:i}=t,s=UN(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function rc(t,e){return Object.assign(Object.create(t),e)}function dx(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=rP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>dx([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return tP(a,l,()=>WV(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tk(a).includes(l)},ownKeys(a){return tk(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function zh(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:eP(t,r),setContext:s=>zh(t,s,n,r),override:s=>zh(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return tP(s,o,()=>VV(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function eP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Kl(n)?n:()=>n,isIndexable:Kl(r)?r:()=>r}}const FV=(t,e)=>t?t+ox(e):e,fx=(t,e)=>Vt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function tP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function VV(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Kl(a)&&o.isScriptable(e)&&(a=BV(e,a,t,n)),Nn(a)&&a.length&&(a=UV(e,a,t,o.isIndexable)),fx(e,a)&&(a=zh(a,i,s&&s[e],o)),a}function BV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),fx(t,l)&&(l=px(i._scopes,i,t,l)),l}function UV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Vt(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=px(c,i,t,u);e.push(zh(h,s,o&&o[t],a))}}return e}function nP(t,e,n){return Kl(t)?t(e,n):t}const zV=(t,e)=>t===!0?e:typeof t=="string"?$l(e,t):void 0;function qV(t,e,n,r,i){for(const s of e){const o=zV(n,s);if(o){t.add(o);const a=nP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function px(t,e,n,r){const i=e._rootScopes,s=nP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=ek(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=ek(a,o,s,l,r),l===null)?!1:dx(Array.from(a),[""],i,s,()=>HV(e,n,r))}function ek(t,e,n,r,i){for(;n;)n=qV(t,e,n,r,i);return n}function HV(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Nn(i)&&Vt(n)?n:i||{}}function WV(t,e,n,r){let i;for(const s of e)if(i=rP(FV(s,t),n),typeof i<"u")return fx(t,i)?px(n,r,t,i):i}function rP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function tk(t){let e=t._keys;return e||(e=t._keys=$V(t._scopes)),e}function $V(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function iP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse($l(u,s),c)};return o}const KV=Number.EPSILON||1e-14,qh=(t,e)=>e<t.length&&!t[e].skip&&t[e],sP=t=>t==="x"?"y":"x";function GV(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=M2(s,i),l=M2(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,p=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function YV(t,e,n){const r=t.length;let i,s,o,a,l,c=qh(t,0);for(let u=0;u<r-1;++u)if(l=c,c=qh(t,u+1),!(!l||!c)){if(vf(e[u],0,KV)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function QV(t,e,n="x"){const r=sP(n),i=t.length;let s,o,a,l=qh(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=qh(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=h+s*e[c])}}function XV(t,e="x"){const n=sP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=qh(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=qh(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Ao(i[o-1])!==Ao(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}YV(t,i,s),QV(t,s,e)}function zg(t,e,n){return Math.max(Math.min(t,n),e)}function JV(t,e){let n,r,i,s,o,a=da(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&da(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=zg(i.cp1x,e.left,e.right),i.cp1y=zg(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=zg(i.cp2x,e.left,e.right),i.cp2y=zg(i.cp2y,e.top,e.bottom)))}function ZV(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")XV(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=GV(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&JV(t,n)}function gx(){return typeof window<"u"&&typeof document<"u"}function mx(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function P0(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const A1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function eB(t,e){return A1(t).getPropertyValue(e)}const tB=["top","right","bottom","left"];function qc(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=tB[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const nB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function rB(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(nB(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Cc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=A1(n),s=i.boxSizing==="border-box",o=qc(i,"padding"),a=qc(i,"border","width"),{x:l,y:c,box:u}=rB(t,n),h=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:f,height:y}=e;return s&&(f-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function iB(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&mx(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=A1(s),l=qc(a,"border","width"),c=qc(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=P0(a.maxWidth,s,"clientWidth"),i=P0(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||I0,maxHeight:i||I0}}const qg=t=>Math.round(t*10)/10;function sB(t,e,n,r){const i=A1(t),s=qc(i,"margin"),o=P0(i.maxWidth,t,"clientWidth")||I0,a=P0(i.maxHeight,t,"clientHeight")||I0,l=iB(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=qc(i,"border","width"),f=qc(i,"padding");c-=f.width+p.width,u-=f.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=qg(Math.min(c,o,l.maxWidth)),u=qg(Math.min(u,a,l.maxHeight)),c&&!u&&(u=qg(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=qg(Math.floor(u*r))),{width:c,height:u}}function nk(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const oB=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};gx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function rk(t,e){const n=eB(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Lc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function aB(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function lB(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Lc(t,i,n),a=Lc(i,s,n),l=Lc(s,e,n),c=Lc(o,a,n),u=Lc(a,l,n);return Lc(c,u,n)}const cB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},uB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function kh(t,e,n){return t?cB(e,n):uB()}function oP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function aP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function lP(t){return t==="angle"?{between:up,compare:hV,normalize:Zr}:{between:ua,compare:(e,n)=>e-n,normalize:e=>e}}function ik({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function hB(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=lP(r),l=e.length;let{start:c,end:u,loop:h}=t,p,f;if(h){for(c+=l,u+=l,p=0,f=l;p<f&&o(a(e[c%l][r]),i,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function cP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=lP(r),{start:u,end:h,loop:p,style:f}=hB(t,e,n),y=[];let b=!1,A=null,v,_,k;const R=()=>l(i,k,v)&&a(i,k)!==0,M=()=>a(s,v)===0||l(s,k,v),z=()=>b||R(),I=()=>!b||M();for(let S=u,L=u;S<=h;++S)_=e[S%o],!_.skip&&(v=c(_[r]),v!==k&&(b=l(v,i,s),A===null&&z()&&(A=a(v,i)===0?S:L),A!==null&&I()&&(y.push(ik({start:A,end:S,loop:p,count:o,style:f})),A=null),L=S,k=v));return A!==null&&y.push(ik({start:A,end:h,loop:p,count:o,style:f})),y}function uP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=cP(r[i],t.points,e);s.length&&n.push(...s)}return n}function dB(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function fB(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function pB(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=dB(n,i,s,r);if(r===!0)return sk(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return sk(t,fB(n,o,l,c),n,e)}function sk(t,e,n,r){return!r||!r.setContext||!n?e:gB(t,e,n,r)}function gB(t,e,n,r){const i=t._chart.getContext(),s=ok(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,p=h;function f(y,b,A,v){const _=a?-1:1;if(y!==b){for(y+=l;n[y%l].skip;)y-=_;for(;n[b%l].skip;)b+=_;y%l!==b%l&&(c.push({start:y%l,end:b%l,loop:A,style:v}),u=v,h=b%l)}}for(const y of e){h=a?h:y.start;let b=n[h%l],A;for(p=h+1;p<=y.end;p++){const v=n[p%l];A=ok(r.setContext(rc(i,{type:"segment",p0:b,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),mB(A,u)&&f(h,p-1,y.loop,u),b=v,u=A}h<p-1&&f(h,p-1,y.loop,u)}return c}function ok(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mB(t,e){if(!e)return!1;const n=[],r=function(i,s){return ux(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Hg(t,e,n){return t.options.clip?t[n]:e[n]}function yB(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Hg(n,e,"left"),right:Hg(n,e,"right"),top:Hg(r,e,"top"),bottom:Hg(r,e,"bottom")}:e}function hP(t,e){const n=e._clip;if(n.disabled)return!1;const r=yB(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class vB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=KN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zo=new vB;const ak="transparent",bB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=XS(t||ak),i=r.valid&&XS(e||ak);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class xB{constructor(e,n,r,i){const s=n[r];i=Kd([e.to,i,s,e.from]);const o=Kd([e.from,s,i]);this._active=!0,this._fn=e.fn||bB[e.type||typeof o],this._easing=bf[e.easing]||bf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Kd([e.to,n,i,e.from]),this._from=Kd([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class dP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Vt(e))return;const n=Object.keys(Cn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Vt(s))return;const o={};for(const a of n)o[a]=s[a];(Nn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=wB(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&_B(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const p=r.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=h=new xB(p,e,c,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Zo.add(this._chart,r),!0}}function _B(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function wB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lk(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function SB(t,e,n){if(n===!1)return!1;const r=lk(t,n),i=lk(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function kB(t){let e,n,r,i;return Vt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function fP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function ck(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Hn(c)&&(s||e===0||Ao(e)===Ao(c))&&(e+=c)}return!u&&!r.all?0:e}function AB(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function By(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function EB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function IB(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function NB(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function uk(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function hk(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=EB(s,o,r),h=e.length;let p;for(let f=0;f<h;++f){const y=e[f],{[l]:b,[c]:A}=y,v=y._stacks||(y._stacks={});p=v[c]=NB(i,u,b),p[a]=A,p._top=uk(p,o,!0,r.type),p._bottom=uk(p,o,!1,r.type);const _=p._visualValues||(p._visualValues={});_[a]=A}}function Uy(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function PB(t,e){return rc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function TB(t,e,n){return rc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Nd(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const zy=t=>t==="reset"||t==="none",dk=(t,e)=>e?t:Object.assign({},t),CB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:fP(n,!0),values:null};class Us{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=By(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Nd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,p,f,y)=>h==="x"?p:h==="r"?y:f,s=n.xAxisID=Et(r.xAxisID,Uy(e,"x")),o=n.yAxisID=Et(r.yAxisID,Uy(e,"y")),a=n.rAxisID=Et(r.rAxisID,Uy(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&GS(this._data,this),e._stacked&&Nd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Vt(n)){const i=this._cachedMeta;this._data=AB(n,i)}else if(r!==n){if(r){GS(r,this);const i=this._cachedMeta;Nd(i),i._parsed=[]}n&&Object.isExtensible(n)&&gV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=By(n.vScale,n),n.stack!==r.stack&&(i=!0,Nd(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(hk(this,n._parsed),n._stacked=By(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Nn(i[e])?p=this.parseArrayData(r,i,e,n):Vt(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=p[u],l&&(f()&&(l=!1),c=h);r._sorted=l}o&&hk(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let p,f,y;for(p=0,f=i;p<f;++p)y=p+r,h[p]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return h}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,p,f;for(u=0,h=i;u<h;++u)p=u+r,f=n[p],c[u]={x:s.parse($l(f,a),p),y:o.parse($l(f,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:fP(i,!0),values:n._stacks[e.axis]._visualValues};return ck(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=ck(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=CB(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=IB(a);let p,f;function y(){f=i[p];const b=f[a.axis];return!Hn(f[e.axis])||u>b||h<b}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,f,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Hn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=kB(Et(this.options.clip,SB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=TB(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=PB(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&cp(r);if(a)return dk(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Cn.elements[e]),y=()=>this.getContext(r,i,n),b=c.resolveNamedOptions(p,f,y,h);return b.$shared&&(b.$shared=l,s[o]=Object.freeze(dk(b,l))),b}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(e,r,n))}const c=new dP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||zy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){zy(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!zy(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Nd(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ge(Us,"defaults",{}),Ge(Us,"datasetElementType",null),Ge(Us,"dataElementType",null);function LB(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=$N(r.sort((i,s)=>i-s))}return t._cache.$bar}function RB(t){const e=t.iScale,n=LB(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(cp(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function DB(t,e,n,r){const i=n.barThickness;let s,o;return Rt(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function MB(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function OB(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function pP(t,e,n,r){return Nn(t)?OB(t,e,n,r):e[n.axis]=n.parse(t,r),e}function fk(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,p;for(c=n,u=n+r;c<u;++c)p=e[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(pP(p,h,s,c));return l}function qy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function jB(t,e,n){return t!==0?Ao(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function FB(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function VB(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=FB(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[pk(u,o,a,l)]=!0,i=c)),s[pk(i,o,a,l)]=!0,t.borderSkipped=s}function pk(t,e,n,r){return r?(t=BB(t,e,n),t=gk(t,n,e)):t=gk(t,e,n),t}function BB(t,e,n){return t===e?n:t===n?e:t}function gk(t,e,n){return t==="start"?e:t==="end"?n:t}function UB(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class _f extends Us{parsePrimitiveData(e,n,r,i){return fk(e,n,r,i)}parseArrayData(e,n,r,i){return fk(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let p,f,y,b;for(p=r,f=r+i;p<f;++p)b=n[p],y={},y[s.axis]=s.parse($l(b,c),p),h.push(pP($l(b,u),y,o,p));return h}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=qy(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i);for(let f=n;f<n+r;f++){const y=this.getParsed(f),b=s||Rt(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),A=this._calculateBarIndexPixels(f,u),v=(y._stacks||{})[a.axis],_={horizontal:c,base:b.base,enableBorderRadius:!v||qy(y._custom)||o===v._top||o===v._bottom,x:c?b.head:A.center,y:c?A.center:b.head,height:c?A.size:Math.abs(b.size),width:c?Math.abs(b.size):A.size};p&&(_.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const k=_.options||e[f].options;VB(_,k,v,o),UB(_,k,u.ratio),this.updateElement(e[f],f,_,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(f=>f[r.axis]===l),p=h&&h[u.vScale.axis];if(Rt(p)||isNaN(p))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Et(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||RB(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=qy(c);let h=l[n.axis],p=0,f=r?this.applyStack(n,l,r):h,y,b;f!==h&&(p=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Ao(h)!==Ao(c.barEnd)&&(p=0),p+=h);const A=!Rt(s)&&!u?s:p;let v=n.getPixelForValue(A);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+f):y=v,b=y-v,Math.abs(b)<o){b=jB(b,n,a)*o,h===a&&(v-=b/2);const _=n.getPixelForDecimal(0),k=n.getPixelForDecimal(1),R=Math.min(_,k),M=Math.max(_,k);v=Math.max(Math.min(v,M),R),y=v+b,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const _=Ao(b)*n.getLineWidthForValue(a)/2;v+=_,b-=_}return{size:b,base:v,head:y,center:y+b/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Et(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?MB(e,n,i,u*c):DB(e,n,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(Et(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+f;a=h.start+h.chunk*y+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}Ge(_f,"id","bar"),Ge(_f,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ge(_f,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Em extends Us{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Et(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Et(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let p=n;p<n+r;p++){const f=e[p],y=!s&&this.getParsed(p),b={},A=b[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[u]),v=b[h]=s?a.getBasePixel():a.getPixelForValue(y[h]);b.skip=isNaN(A)||isNaN(v),c&&(b.options=l||this.resolveDataElementOptions(p,f.active?"active":i),s&&(b.options.radius=0)),this.updateElement(f,p,b,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Et(r&&r._custom,s),i}}Ge(Em,"id","bubble"),Ge(Em,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ge(Em,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function zB(t,e,n){let r=1,i=1,s=0,o=0;if(e<Sn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),f=(k,R,M)=>up(k,a,l,!0)?1:Math.max(R,R*n,M,M*n),y=(k,R,M)=>up(k,a,l,!0)?-1:Math.min(R,R*n,M,M*n),b=f(0,c,h),A=f(er,u,p),v=y(Kt,c,h),_=y(Kt+er,u,p);r=(b-v)/2,i=(A-_)/2,s=-(b+v)/2,o=-(A+_)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class wl extends Us{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Vt(r[e])){const{key:l="value"}=this._parsing;s=c=>+$l(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Fs(this.options.rotation-90)}_getCircumference(){return Fs(this.options.circumference)}_getRotationExtents(){let e=Sn,n=-Sn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(eV(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:y,offsetY:b}=zB(h,u,l),A=(r.width-o)/p,v=(r.height-o)/f,_=Math.max(Math.min(A,v)/2,0),k=UN(this.options.radius,_),R=Math.max(k*l,0),M=(k-R)/this._getVisibleDatasetWeightTotal();this.offsetX=y*k,this.offsetY=b*k,i.total=this.calculateTotal(),this.outerRadius=k-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Sn)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=s&&c.animateScale,f=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:b,includeOptions:A}=this._getSharedOptions(n,i);let v=this._getRotation(),_;for(_=0;_<n;++_)v+=this._circumference(_,s);for(_=n;_<n+r;++_){const k=this._circumference(_,s),R=e[_],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+k,circumference:k,outerRadius:y,innerRadius:f};A&&(M.options=b||this.resolveDataElementOptions(_,R.active?"active":i)),v+=k,this.updateElement(R,_,M,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Sn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Hp(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Et(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ge(wl,"id","doughnut"),Ge(wl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ge(wl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ge(wl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class wf extends Us{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=YN(n,i,o);this._drawStart=a,this._drawCount=l,QN(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),p=o.axis,f=a.axis,{spanGaps:y,segment:b}=this.options,A=Uh(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",_=n+r,k=e.length;let R=n>0&&this.getParsed(n-1);for(let M=0;M<k;++M){const z=e[M],I=v?z:{};if(M<n||M>=_){I.skip=!0;continue}const S=this.getParsed(M),L=Rt(S[f]),D=I[p]=o.getPixelForValue(S[p],M),x=I[f]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[f],M);I.skip=isNaN(D)||isNaN(x)||L,I.stop=M>0&&Math.abs(S[p]-R[p])>A,b&&(I.parsed=S,I.raw=c.data[M]),h&&(I.options=u||this.resolveDataElementOptions(M,z.active?"active":i)),v||this.updateElement(z,M,I,i),R=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ge(wf,"id","line"),Ge(wf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ge(wf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Sf extends Us{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Hp(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return iP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,p=c.getIndexAngle(0)-.5*Kt;let f=p,y;const b=360/this.countVisibleElements();for(y=0;y<n;++y)f+=this._computeAngle(y,i,b);for(y=n;y<n+r;y++){const A=e[y];let v=f,_=f+this._computeAngle(y,i,b),k=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;f=_,s&&(l.animateScale&&(k=0),l.animateRotate&&(v=_=p));const R={x:u,y:h,innerRadius:0,outerRadius:k,startAngle:v,endAngle:_,options:this.resolveDataElementOptions(y,A.active?"active":i)};this.updateElement(A,y,R,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Fs(this.resolveDataElementOptions(e,n).angle||r):0}}Ge(Sf,"id","polarArea"),Ge(Sf,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ge(Sf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class F2 extends wl{}Ge(F2,"id","pie"),Ge(F2,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Im extends Us{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return iP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,p=o?s.yCenter:u.y,f={x:h,y:p,angle:u.angle,skip:isNaN(h)||isNaN(p),options:c};this.updateElement(l,a,f,i)}}}Ge(Im,"id","radar"),Ge(Im,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ge(Im,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Nm extends Us{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=YN(n,r,i);if(this._drawStart=s,this._drawCount=o,QN(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),p=this.includeOptions(i,h),f=o.axis,y=a.axis,{spanGaps:b,segment:A}=this.options,v=Uh(b)?b:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none";let k=n>0&&this.getParsed(n-1);for(let R=n;R<n+r;++R){const M=e[R],z=this.getParsed(R),I=_?M:{},S=Rt(z[y]),L=I[f]=o.getPixelForValue(z[f],R),D=I[y]=s||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,z,l):z[y],R);I.skip=isNaN(L)||isNaN(D)||S,I.stop=R>0&&Math.abs(z[f]-k[f])>v,A&&(I.parsed=z,I.raw=c.data[R]),p&&(I.options=h||this.resolveDataElementOptions(R,M.active?"active":i)),_||this.updateElement(M,R,I,i),k=z}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ge(Nm,"id","scatter"),Ge(Nm,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ge(Nm,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var qB=Object.freeze({__proto__:null,BarController:_f,BubbleController:Em,DoughnutController:wl,LineController:wf,PieController:F2,PolarAreaController:Sf,RadarController:Im,ScatterController:Nm});function Ec(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yx{constructor(e){Ge(this,"options");this.options=e||{}}static override(e){Object.assign(yx.prototype,e)}init(){}formats(){return Ec()}parse(){return Ec()}format(){return Ec()}add(){return Ec()}diff(){return Ec()}startOf(){return Ec()}endOf(){return Ec()}}var HB={_date:yx};function WB(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?fV:ha;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=c(s,e,n-h),f=c(s,e,n+h);return{lo:p.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:p}=t,f=p.slice(0,u.lo+1).reverse().findIndex(b=>!Rt(b[h.axis]));u.lo-=Math.max(0,f);const y=p.slice(u.hi).findIndex(b=>!Rt(b[h.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function E1(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:p}=WB(s[a],e,o,i);for(let f=h;f<=p;++f){const y=u[f];y.skip||r(y,c,f)}}}function $B(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Hy(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||E1(t,n,e,function(a,l,c){!i&&!da(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function KB(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=HN(o,{x:e.x,y:e.y});up(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return E1(t,n,e,s),i}function GB(t,e,n,r,i,s){let o=[];const a=$B(n);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!f)return;const A=a(e,y);A<l?(o=[{element:u,datasetIndex:h,index:p}],l=A):A===l&&o.push({element:u,datasetIndex:h,index:p})}return E1(t,n,e,c),o}function Wy(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?KB(t,e,n,i):GB(t,e,n,r,i,s)}function mk(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return E1(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var YB={modes:{index(t,e,n,r){const i=Cc(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Hy(t,i,s,r,o):Wy(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Cc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Hy(t,i,s,r,o):Wy(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Cc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Hy(t,i,s,r,o)},nearest(t,e,n,r){const i=Cc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Wy(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Cc(e,t);return mk(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Cc(e,t);return mk(t,i,"y",n.intersect,r)}}};const gP=["left","top","right","bottom"];function Pd(t,e){return t.filter(n=>n.pos===e)}function yk(t,e){return t.filter(n=>gP.indexOf(n.pos)===-1&&n.box.axis===e)}function Td(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function QB(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function XB(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!gP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function JB(t,e){const n=XB(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function ZB(t){const e=QB(t),n=Td(e.filter(c=>c.box.fullSize),!0),r=Td(Pd(e,"left"),!0),i=Td(Pd(e,"right")),s=Td(Pd(e,"top"),!0),o=Td(Pd(e,"bottom")),a=yk(e,"x"),l=yk(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Pd(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function vk(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function mP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function eU(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Vt(i)){n.size&&(t[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&mP(o,s.getPadding());const a=Math.max(0,e.outerWidth-vk(o,t,"left","right")),l=Math.max(0,e.outerHeight-vk(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function tU(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function nU(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Gd(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,nU(a.horizontal,e));const{same:h,other:p}=eU(e,n,a,r);c|=h&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&Gd(i,e,n,r)||u}function Wg(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function bk(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,p=c.size||l.height;cp(c.start)&&(o=c.start),l.fullSize?Wg(l,i.left,o,n.outerWidth-i.right-i.left,p):Wg(l,e.left+c.placed,o,h,p),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,p=c.size||l.width;cp(c.start)&&(s=c.start),l.fullSize?Wg(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Wg(l,s,e.top+c.placed,p,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var ni={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=oi(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=ZB(t.boxes),l=a.vertical,c=a.horizontal;nn(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=l.reduce((b,A)=>A.box.options&&A.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);mP(p,oi(r));const f=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=JB(l.concat(c),h);Gd(a.fullSize,f,h,y),Gd(l,f,h,y),Gd(c,f,h,y)&&Gd(l,f,h,y),tU(f),bk(a.leftAndTop,f,h,y),f.x+=f.w,f.y+=f.h,bk(a.rightAndBottom,f,h,y),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},nn(a.chartArea,b=>{const A=b.box;Object.assign(A,t.chartArea),A.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class yP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class rU extends yP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Pm="$chartjs",iU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xk=t=>t===null||t==="";function sU(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Pm]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xk(i)){const s=rk(t,"width");s!==void 0&&(t.width=s)}if(xk(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=rk(t,"height");s!==void 0&&(t.height=s)}return t}const vP=oB?{passive:!0}:!1;function oU(t,e,n){t&&t.addEventListener(e,n,vP)}function aU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,vP)}function lU(t,e){const n=iU[t.type]||t.type,{x:r,y:i}=Cc(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function T0(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||T0(a.addedNodes,r),o=o&&!T0(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function uU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||T0(a.removedNodes,r),o=o&&!T0(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const dp=new Map;let _k=0;function bP(){const t=window.devicePixelRatio;t!==_k&&(_k=t,dp.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function hU(t,e){dp.size||window.addEventListener("resize",bP),dp.set(t,e)}function dU(t){dp.delete(t),dp.size||window.removeEventListener("resize",bP)}function fU(t,e,n){const r=t.canvas,i=r&&mx(r);if(!i)return;const s=GN((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),hU(t,s),o}function $y(t,e,n){n&&n.disconnect(),e==="resize"&&dU(t)}function pU(t,e,n){const r=t.canvas,i=GN(s=>{t.ctx!==null&&n(lU(s,t))},t);return oU(r,e,i),i}class gU extends yP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(sU(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Pm])return!1;const r=n[Pm].initial;["height","width"].forEach(s=>{const o=r[s];Rt(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Pm],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:cU,detach:uU,resize:fU}[n]||pU;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:$y,detach:$y,resize:$y}[n]||aU)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return sB(e,n,r,i)}isAttached(e){const n=e&&mx(e);return!!(n&&n.isConnected)}}function mU(t){return!gx()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?rU:gU}class $s{constructor(){Ge(this,"x");Ge(this,"y");Ge(this,"active",!1);Ge(this,"options");Ge(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Uh(this.x)&&Uh(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}Ge($s,"defaults",{}),Ge($s,"defaultRoutes");function yU(t,e){const n=t.options.ticks,r=vU(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?xU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return _U(e,c,s,o/i),c;const u=bU(s,e,i);if(o>0){let h,p;const f=o>1?Math.round((l-a)/(o-1)):null;for($g(e,c,u,Rt(f)?0:a-f,a),h=0,p=o-1;h<p;h++)$g(e,c,u,s[h],s[h+1]);return $g(e,c,u,l,Rt(f)?e.length:l+f),c}return $g(e,c,u),c}function vU(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function bU(t,e,n){const r=wU(t),i=e.length/n;if(!r)return Math.max(i,1);const s=lV(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function xU(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function _U(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function $g(t,e,n,r,i){const s=Et(r,0),o=Math.min(Et(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function wU(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const SU=t=>t==="left"?"right":t==="right"?"left":t,wk=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Sk=(t,e)=>Math.min(e||t,t);function kk(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function kU(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function AU(t,e){nn(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Cd(t){return t.drawTicks?t.tickLength:0}function Ak(t,e){if(!t.display)return 0;const n=gr(t.font,e),r=oi(t.padding);return(Nn(t.text)?t.text.length:1)*n.lineHeight+r.height}function EU(t,e){return rc(t,{scale:e,type:"scale"})}function IU(t,e,n){return rc(t,{tick:n,index:e,type:"tick"})}function NU(t,e,n){let r=cx(t);return(n&&e!=="right"||!n&&e==="right")&&(r=SU(r)),r}function PU(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,p,f,y;const b=o-i,A=a-s;if(t.isHorizontal()){if(f=Xr(r,s,a),Vt(n)){const v=Object.keys(n)[0],_=n[v];y=u[v].getPixelForValue(_)+b-e}else n==="center"?y=(c.bottom+c.top)/2+b-e:y=wk(t,n,e);p=a-s}else{if(Vt(n)){const v=Object.keys(n)[0],_=n[v];f=u[v].getPixelForValue(_)-A+e}else n==="center"?f=(c.left+c.right)/2-A+e:f=wk(t,n,e);y=Xr(r,o,i),h=n==="left"?-er:er}return{titleX:f,titleY:y,maxWidth:p,rotation:h}}class yu extends $s{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Wi(e,Number.POSITIVE_INFINITY),n=Wi(n,Number.NEGATIVE_INFINITY),r=Wi(r,Number.POSITIVE_INFINITY),i=Wi(i,Number.NEGATIVE_INFINITY),{min:Wi(e,r),max:Wi(n,i),minDefined:Hn(e),maxDefined:Hn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Wi(n,Wi(r,n)),max:Wi(r,Wi(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jV(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?kk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mn(this.options.afterUpdate,[this])}beforeSetDimensions(){mn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=mn(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){mn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Sk(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,f=wr(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-Cd(e.grid)-n.padding-Ak(e.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),o=ax(Math.min(Math.asin(wr((u.highest.height+6)/a,-1,1)),Math.asin(wr(l/c,-1,1))-Math.asin(wr(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){mn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ak(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Cd(s)+l):(e.height=this.maxHeight,e.width=Cd(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),f=r.padding*2,y=Fs(this.labelRotation),b=Math.cos(y),A=Math.sin(y);if(a){const v=r.mirror?0:A*h.width+b*p.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=r.mirror?0:b*h.width+A*p.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(c,u,A,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,f=0;l?c?(p=i*e.width,f=r*n.height):(p=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,f=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Rt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=kk(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Sk(n,r));let c=0,u=0,h,p,f,y,b,A,v,_,k,R,M;for(h=0;h<n;h+=l){if(y=e[h].label,b=this._resolveTickFontOptions(h),i.font=A=b.string,v=s[A]=s[A]||{data:{},gc:[]},_=b.lineHeight,k=R=0,!Rt(y)&&!Nn(y))k=N0(i,v.data,v.gc,k,y),R=_;else if(Nn(y))for(p=0,f=y.length;p<f;++p)M=y[p],!Rt(M)&&!Nn(M)&&(k=N0(i,v.data,v.gc,k,M),R+=_);o.push(k),a.push(R),c=Math.max(k,c),u=Math.max(R,u)}AU(s,n);const z=o.indexOf(c),I=a.indexOf(u),S=L=>({width:o[L]||0,height:a[L]||0});return{first:S(0),last:S(n-1),widest:S(z),highest:S(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return dV(this._alignToPixels?Ac(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=IU(this.getContext(),e,r))}return this.$context||(this.$context=EU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fs(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=Cd(s),f=[],y=a.setContext(this.getContext()),b=y.display?y.width:0,A=b/2,v=function(U){return Ac(r,U,b)};let _,k,R,M,z,I,S,L,D,x,w,P;if(o==="top")_=v(this.bottom),I=this.bottom-p,L=_-A,x=v(e.top)+A,P=e.bottom;else if(o==="bottom")_=v(this.top),x=e.top,P=v(e.bottom)-A,I=_+A,L=this.top+p;else if(o==="left")_=v(this.right),z=this.right-p,S=_-A,D=v(e.left)+A,w=e.right;else if(o==="right")_=v(this.left),D=e.left,w=v(e.right)-A,z=_+A,S=this.left+p;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(Vt(o)){const U=Object.keys(o)[0],W=o[U];_=v(this.chart.scales[U].getPixelForValue(W))}x=e.top,P=e.bottom,I=_+A,L=I+p}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(Vt(o)){const U=Object.keys(o)[0],W=o[U];_=v(this.chart.scales[U].getPixelForValue(W))}z=_-A,S=z-p,D=e.left,w=e.right}const j=Et(i.ticks.maxTicksLimit,h),q=Math.max(1,Math.ceil(h/j));for(k=0;k<h;k+=q){const U=this.getContext(k),W=s.setContext(U),O=a.setContext(U),H=W.lineWidth,ne=W.color,ae=O.dash||[],F=O.dashOffset,Y=W.tickWidth,Z=W.tickColor,Q=W.tickBorderDash||[],re=W.tickBorderDashOffset;R=kU(this,k,l),R!==void 0&&(M=Ac(r,R,H),c?z=S=D=w=M:I=L=x=P=M,f.push({tx1:z,ty1:I,tx2:S,ty2:L,x1:D,y1:x,x2:w,y2:P,width:H,color:ne,borderDash:ae,borderDashOffset:F,tickWidth:Y,tickColor:Z,tickBorderDash:Q,tickBorderDashOffset:re}))}return this._ticksLength=h,this._borderValue=_,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,p=Cd(r.grid),f=p+u,y=h?-u:f,b=-Fs(this.labelRotation),A=[];let v,_,k,R,M,z,I,S,L,D,x,w,P="middle";if(i==="top")z=this.bottom-y,I=this._getXAxisLabelAlignment();else if(i==="bottom")z=this.top+y,I=this._getXAxisLabelAlignment();else if(i==="left"){const q=this._getYAxisLabelAlignment(p);I=q.textAlign,M=q.x}else if(i==="right"){const q=this._getYAxisLabelAlignment(p);I=q.textAlign,M=q.x}else if(n==="x"){if(i==="center")z=(e.top+e.bottom)/2+f;else if(Vt(i)){const q=Object.keys(i)[0],U=i[q];z=this.chart.scales[q].getPixelForValue(U)+f}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")M=(e.left+e.right)/2-f;else if(Vt(i)){const q=Object.keys(i)[0],U=i[q];M=this.chart.scales[q].getPixelForValue(U)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const j=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){k=a[v],R=k.label;const q=s.setContext(this.getContext(v));S=this.getPixelForTick(v)+s.labelOffset,L=this._resolveTickFontOptions(v),D=L.lineHeight,x=Nn(R)?R.length:1;const U=x/2,W=q.color,O=q.textStrokeColor,H=q.textStrokeWidth;let ne=I;o?(M=S,I==="inner"&&(v===_-1?ne=this.options.reverse?"left":"right":v===0?ne=this.options.reverse?"right":"left":ne="center"),i==="top"?c==="near"||b!==0?w=-x*D+D/2:c==="center"?w=-j.highest.height/2-U*D+D:w=-j.highest.height+D/2:c==="near"||b!==0?w=D/2:c==="center"?w=j.highest.height/2-U*D:w=j.highest.height-x*D,h&&(w*=-1),b!==0&&!q.showLabelBackdrop&&(M+=D/2*Math.sin(b))):(z=S,w=(1-x)*D/2);let ae;if(q.showLabelBackdrop){const F=oi(q.backdropPadding),Y=j.heights[v],Z=j.widths[v];let Q=w-F.top,re=0-F.left;switch(P){case"middle":Q-=Y/2;break;case"bottom":Q-=Y;break}switch(I){case"center":re-=Z/2;break;case"right":re-=Z;break;case"inner":v===_-1?re-=Z:v>0&&(re-=Z/2);break}ae={left:re,top:Q,width:Z+F.width,height:Y+F.height,color:q.backdropColor}}A.push({label:R,font:L,textOffset:w,options:{rotation:b,color:W,strokeColor:O,strokeWidth:H,textAlign:ne,textBaseline:P,translation:[M,z],backdrop:ae}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fs(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=Ac(e,this.left,o)-o/2,u=Ac(e,this.right,a)+a/2,h=p=l):(h=Ac(e,this.top,o)-o/2,p=Ac(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&S1(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;au(r,c,0,u,l,a)}i&&k1(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=gr(r.font),o=oi(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Vt(n)?(l+=o.bottom,Nn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=PU(this,l,n,a);au(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:p,textAlign:NU(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Et(e.grid&&e.grid.z,-1),i=Et(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==yu.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return gr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Kg{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;LU(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,TU(e,o,r),this.override&&Cn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Cn[i]&&(delete Cn[i][r],this.override&&delete ou[r])}}function TU(t,e,n){const r=lp(Object.create(null),[n?Cn.get(n):{},Cn.get(e),t.defaults]);Cn.set(e,r),t.defaultRoutes&&CU(e,t.defaultRoutes),t.descriptors&&Cn.describe(e,t.descriptors)}function CU(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Cn.route(s,i,l,a)})}function LU(t){return"id"in t&&"defaults"in t}class RU{constructor(){this.controllers=new Kg(Us,"datasets",!0),this.elements=new Kg($s,"elements"),this.plugins=new Kg(Object,"plugins"),this.scales=new Kg(yu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):nn(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=ox(e);mn(r["before"+i],[],r),n[e](r),mn(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var fo=new RU;class DU{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(mn(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Rt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Et(r.options&&r.options.plugins,{}),s=MU(r);return i===!1&&!n?[]:jU(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function MU(t){const e={},n=[],r=Object.keys(fo.plugins.items);for(let s=0;s<r.length;s++)n.push(fo.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function OU(t,e){return!e&&t===!1?null:t===!0?{}:t}function jU(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=OU(r[l],i);c!==null&&s.push({plugin:a,options:FU(t.config,{plugin:a,local:n[l]},c,o)})}return s}function FU(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function V2(t,e){const n=Cn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function VU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function BU(t,e){return t===e?"_index_":"_value_"}function Ek(t){if(t==="x"||t==="y"||t==="r")return t}function UU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function B2(t,...e){if(Ek(t))return t;for(const n of e){const r=n.axis||UU(n.position)||t.length>1&&Ek(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Ik(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function zU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Ik(t,"x",n[0])||Ik(t,"y",n[0])}return{}}function qU(t,e){const n=ou[t.type]||{scales:{}},r=e.scales||{},i=V2(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Vt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=B2(o,a,zU(o,t),Cn.scales[a.type]),c=BU(l,i),u=n.scales||{};s[o]=yf(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||V2(a,e),u=(ou[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=VU(h,l),f=o[p+"AxisID"]||p;s[f]=s[f]||Object.create(null),yf(s[f],[{axis:p},r[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];yf(a,[Cn.scales[a.type],Cn.scale])}),s}function xP(t){const e=t.options||(t.options={});e.plugins=Et(e.plugins,{}),e.scales=qU(t,e)}function _P(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function HU(t){return t=t||{},t.data=_P(t.data),xP(t),t}const Nk=new Map,wP=new Set;function Gg(t,e){let n=Nk.get(t);return n||(n=e(),Nk.set(t,n),wP.add(n)),n}const Ld=(t,e,n)=>{const r=$l(e,n);r!==void 0&&t.add(r)};class WU{constructor(e){this._config=HU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=_P(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),xP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Gg(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Gg(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Gg(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ld(l,e,h))),u.forEach(h=>Ld(l,i,h)),u.forEach(h=>Ld(l,ou[s]||{},h)),u.forEach(h=>Ld(l,Cn,h)),u.forEach(h=>Ld(l,O2,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),wP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ou[n]||{},Cn.datasets[n]||{},{type:n},Cn,O2]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Pk(this._resolverCache,e,i);let l=o;if(KU(o,n)){s.$shared=!1,r=Kl(r)?r():r;const c=this.createResolver(e,r,a);l=zh(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Pk(this._resolverCache,e,r);return Vt(n)?zh(s,n,void 0,i):s}}function Pk(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:dx(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const $U=t=>Vt(t)&&Object.getOwnPropertyNames(t).some(e=>Kl(t[e]));function KU(t,e){const{isScriptable:n,isIndexable:r}=eP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Kl(a)||$U(a))||o&&Nn(a))return!0}return!1}var GU="4.5.0";const YU=["top","bottom","left","right","chartArea"];function Tk(t,e){return t==="top"||t==="bottom"||YU.indexOf(t)===-1&&e==="x"}function Ck(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Lk(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),mn(n&&n.onComplete,[t],e)}function QU(t){const e=t.chart,n=e.options.animation;mn(n&&n.onProgress,[t],e)}function SP(t){return gx()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Tm={},Rk=t=>{const e=SP(t);return Object.values(Tm).filter(n=>n.canvas===e).pop()};function XU(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function JU(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ol;let I1=(ol=class{static register(...e){fo.add(...e),Dk()}static unregister(...e){fo.remove(...e),Dk()}constructor(e,n){const r=this.config=new WU(n),i=SP(e),s=Rk(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||mU(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ZF(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new DU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mV(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Tm[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Zo.listen(this,"complete",Lk),Zo.listen(this,"progress",QU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Rt(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return fo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ZS(this.canvas,this.ctx),this}stop(){return Zo.stop(this),this}resize(e,n){Zo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nk(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),mn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};nn(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=B2(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),nn(s,o=>{const a=o.options,l=a.id,c=B2(l,a),u=Et(a.type,o.dtype);(a.position===void 0||Tk(a.position,c)!==Tk(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const p=fo.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),nn(i,(o,a)=>{o||delete r[a]}),nn(r,o=>{ni.configure(this,o,o.options),ni.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Ck("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||V2(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=fo.getController(a),{datasetElementType:c,dataElementType:u}=Cn.datasets[a];Object.assign(l,{dataElementType:fo.getElement(u),datasetElementType:c&&fo.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){nn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||nn(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ck("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){nn(this.scales,e=>{ni.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!HS(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;XU(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!HS(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ni.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],nn(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Kl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zo.has(this)?this.attached&&!Zo.running(this)&&Zo.start(this):(this.draw(),Lk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=hP(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&S1(n,i),e.controller.draw(),i&&k1(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return da(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=YB.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=rc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);cp(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Zo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ZS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Tm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};nn(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){nn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},nn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!A0(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=sV(e),c=JU(e,this._lastEvent,r,l);r&&(this._lastEvent=null,mn(s.onHover,[e,a,this],this),l&&mn(s.onClick,[e,a,this],this));const u=!A0(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},Ge(ol,"defaults",Cn),Ge(ol,"instances",Tm),Ge(ol,"overrides",ou),Ge(ol,"registry",fo),Ge(ol,"version",GU),Ge(ol,"getChart",Rk),ol);function Dk(){return nn(I1.instances,t=>t._plugins.invalidate())}function ZU(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,Zr(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+h/2,n-h/2),a>0){const p=Math.min(c/a,Zr(r-n));t.arc(i,s,a+c/2,n-p/2,r+p/2,!0)}else{const p=Math.min(c/2,o*Zr(r-n));if(u==="round")t.arc(i,s,p,n-Kt/2,r+Kt/2,!0);else if(u==="bevel"){const f=2*p*p,y=-f*Math.cos(n+Kt/2)+i,b=-f*Math.sin(n+Kt/2)+s,A=f*Math.cos(r+Kt/2)+i,v=f*Math.sin(r+Kt/2)+s;t.lineTo(y,b),t.lineTo(A,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function ez(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+er,r-er),t.closePath(),t.clip()}function tz(t){return hx(t,["outerStart","outerEnd","innerStart","innerEnd"])}function nz(t,e,n,r){const i=tz(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return wr(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:wr(i.innerStart,0,o),innerEnd:wr(i.innerEnd,0,o)}}function $u(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function C0(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),p=u>0?u+r+n+c:0;let f=0;const y=i-l;if(r){const q=u>0?u-r:0,U=h>0?h-r:0,W=(q+U)/2,O=W!==0?y*W/(W+r):y;f=(y-O)/2}const b=Math.max(.001,y*h-n/Kt)/h,A=(y-b)/2,v=l+A+f,_=i-A-f,{outerStart:k,outerEnd:R,innerStart:M,innerEnd:z}=nz(e,p,h,_-v),I=h-k,S=h-R,L=v+k/I,D=_-R/S,x=p+M,w=p+z,P=v+M/x,j=_-z/w;if(t.beginPath(),s){const q=(L+D)/2;if(t.arc(o,a,h,L,q),t.arc(o,a,h,q,D),R>0){const H=$u(S,D,o,a);t.arc(H.x,H.y,R,D,_+er)}const U=$u(w,_,o,a);if(t.lineTo(U.x,U.y),z>0){const H=$u(w,j,o,a);t.arc(H.x,H.y,z,_+er,j+Math.PI)}const W=(_-z/p+(v+M/p))/2;if(t.arc(o,a,p,_-z/p,W,!0),t.arc(o,a,p,W,v+M/p,!0),M>0){const H=$u(x,P,o,a);t.arc(H.x,H.y,M,P+Math.PI,v-er)}const O=$u(I,v,o,a);if(t.lineTo(O.x,O.y),k>0){const H=$u(I,L,o,a);t.arc(H.x,H.y,k,v-er,L)}}else{t.moveTo(o,a);const q=Math.cos(L)*h+o,U=Math.sin(L)*h+a;t.lineTo(q,U);const W=Math.cos(D)*h+o,O=Math.sin(D)*h+a;t.lineTo(W,O)}t.closePath()}function rz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){C0(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Sn||Sn))}return C0(t,e,n,r,l,i),t.fill(),l}function iz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:f}=l,y=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=p,y?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let b=e.endAngle;if(s){C0(t,e,n,r,b,i);for(let A=0;A<s;++A)t.stroke();isNaN(a)||(b=o+(a%Sn||Sn))}y&&ez(t,e,b),l.selfJoin&&b-o>=Kt&&f===0&&u!=="miter"&&ZU(t,e,b),s||(C0(t,e,n,r,b,i),t.stroke())}class Yd extends $s{constructor(n){super();Ge(this,"circumference");Ge(this,"endAngle");Ge(this,"fullCircles");Ge(this,"innerRadius");Ge(this,"outerRadius");Ge(this,"pixelMargin");Ge(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=HN(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,y=Et(p,c-l),b=up(o,l,c)&&l!==c,A=y>=Sn||b,v=ua(a,u+f,h+f);return A&&v}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,p=(a+l+u+c)/2;return{x:r+Math.cos(h)*p,y:i+Math.sin(h)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Sn?Math.floor(i/Sn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Kt,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,rz(n,this,u,o,a),iz(n,this,u,o,a),n.restore()}}Ge(Yd,"id","arc"),Ge(Yd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Ge(Yd,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ge(Yd,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function kP(t,e,n=e){t.lineCap=Et(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Et(n.borderDash,e.borderDash)),t.lineDashOffset=Et(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Et(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Et(n.borderWidth,e.borderWidth),t.strokeStyle=Et(n.borderColor,e.borderColor)}function sz(t,e,n){t.lineTo(n.x,n.y)}function oz(t){return t.stepped?NV:t.tension||t.cubicInterpolationMode==="monotone"?PV:sz}function AP(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function az(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=AP(i,n,r),u=oz(s);let{move:h=!0,reverse:p}=r||{},f,y,b;for(f=0;f<=c;++f)y=i[(a+(p?c-f:f))%o],!y.skip&&(h?(t.moveTo(y.x,y.y),h=!1):u(t,b,y,p,s.stepped),b=y);return l&&(y=i[(a+(p?c:0))%o],u(t,b,y,p,s.stepped)),!!l}function lz(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=AP(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,p,f,y,b,A,v;const _=R=>(o+(c?a-R:R))%s,k=()=>{b!==A&&(t.lineTo(u,A),t.lineTo(u,b),t.lineTo(u,v))};for(l&&(f=i[_(0)],t.moveTo(f.x,f.y)),p=0;p<=a;++p){if(f=i[_(p)],f.skip)continue;const R=f.x,M=f.y,z=R|0;z===y?(M<b?b=M:M>A&&(A=M),u=(h*u+R)/++h):(k(),t.lineTo(R,M),y=z,h=0,b=A=M),v=M}k()}function U2(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?lz:az}function cz(t){return t.stepped?aB:t.tension||t.cubicInterpolationMode==="monotone"?lB:Lc}function uz(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),kP(t,e.options),t.stroke(i)}function hz(t,e,n,r){const{segments:i,options:s}=e,o=U2(e);for(const a of i)kP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const dz=typeof Path2D=="function";function fz(t,e,n,r){dz&&!e.options.segment?uz(t,e,n,r):hz(t,e,n,r)}class Sl extends $s{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;ZV(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=pB(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=uP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=cz(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:p}=o[c],f=s[h],y=s[p];if(f===y){a.push(f);continue}const b=Math.abs((i-f[n])/(y[n]-f[n])),A=l(f,y,b,r.stepped);A[n]=e[n],a.push(A)}return a.length===1?a[0]:a}pathSegment(e,n,r){return U2(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=U2(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),fz(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ge(Sl,"id","line"),Ge(Sl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ge(Sl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ge(Sl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Mk(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Cm extends $s{constructor(n){super();Ge(this,"parsed");Ge(this,"skip");Ge(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Mk(this,n,"x",r)}inYRange(n,r){return Mk(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!da(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,j2(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ge(Cm,"id","point"),Ge(Cm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ge(Cm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function EP(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function kl(t,e,n,r){return t?0:wr(e,n,r)}function pz(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=ZN(r);return{t:kl(i.top,s.top,0,n),r:kl(i.right,s.right,0,e),b:kl(i.bottom,s.bottom,0,n),l:kl(i.left,s.left,0,e)}}function gz(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=zc(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Vt(i);return{topLeft:kl(!l||a.top||a.left,s.topLeft,0,o),topRight:kl(!l||a.top||a.right,s.topRight,0,o),bottomLeft:kl(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:kl(!l||a.bottom||a.right,s.bottomRight,0,o)}}function mz(t){const e=EP(t),n=e.right-e.left,r=e.bottom-e.top,i=pz(t,n/2,r/2),s=gz(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Ky(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&EP(t,r);return a&&(i||ua(e,a.left,a.right))&&(s||ua(n,a.top,a.bottom))}function yz(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function vz(t,e){t.rect(e.x,e.y,e.w,e.h)}function Gy(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Lm extends $s{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=mz(this),a=yz(o.radius)?hp:vz;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Gy(o,n,s)),e.clip(),a(e,Gy(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Gy(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Ky(this,e,n,r)}inXRange(e,n){return Ky(this,e,null,n)}inYRange(e,n){return Ky(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ge(Lm,"id","bar"),Ge(Lm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ge(Lm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var bz=Object.freeze({__proto__:null,ArcElement:Yd,BarElement:Lm,LineElement:Sl,PointElement:Cm});const z2=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Ok=z2.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function IP(t){return z2[t%z2.length]}function NP(t){return Ok[t%Ok.length]}function xz(t,e){return t.borderColor=IP(e),t.backgroundColor=NP(e),++e}function _z(t,e){return t.backgroundColor=t.data.map(()=>IP(e++)),e}function wz(t,e){return t.backgroundColor=t.data.map(()=>NP(e++)),e}function Sz(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof wl?e=_z(n,e):i instanceof Sf?e=wz(n,e):i&&(e=xz(n,e))}}function jk(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function kz(t){return t&&(t.borderColor||t.backgroundColor)}function Az(){return Cn.borderColor!=="rgba(0,0,0,0.1)"||Cn.backgroundColor!=="rgba(0,0,0,0.1)"}var Ez={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=jk(r)||kz(i)||s&&jk(s)||Az();if(!n.forceOverride&&o)return;const a=Sz(t);r.forEach(a)}};function Iz(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,h,p,f,y,b;for(o[l++]=t[u],h=0;h<s-2;h++){let A=0,v=0,_;const k=Math.floor((h+1)*a)+1+e,R=Math.min(Math.floor((h+2)*a)+1,n)+e,M=R-k;for(_=k;_<R;_++)A+=t[_].x,v+=t[_].y;A/=M,v/=M;const z=Math.floor(h*a)+1+e,I=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:S,y:L}=t[u];for(f=y=-1,_=z;_<I;_++)y=.5*Math.abs((S-A)*(t[_].y-L)-(S-t[_].x)*(v-L)),y>f&&(f=y,p=t[_],b=_);o[l++]=p,u=b}return o[l++]=t[c],o}function Nz(t,e,n,r){let i=0,s=0,o,a,l,c,u,h,p,f,y,b;const A=[],v=e+n-1,_=t[e].x,R=t[v].x-_;for(o=e;o<e+n;++o){a=t[o],l=(a.x-_)/R*r,c=a.y;const M=l|0;if(M===u)c<y?(y=c,h=o):c>b&&(b=c,p=o),i=(s*i+a.x)/++s;else{const z=o-1;if(!Rt(h)&&!Rt(p)){const I=Math.min(h,p),S=Math.max(h,p);I!==f&&I!==z&&A.push({...t[I],x:i}),S!==f&&S!==z&&A.push({...t[S],x:i})}o>0&&z!==f&&A.push(t[z]),A.push(a),u=M,s=0,y=b=c,h=p=f=o}}return A}function PP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Fk(t){t.data.datasets.forEach(e=>{PP(e)})}function Pz(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=wr(ha(e,s.axis,o).lo,0,n-1)),c?i=wr(ha(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var Tz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Fk(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Kd([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:p}=Pz(l,c);const f=n.threshold||4*r;if(p<=f){PP(i);return}Rt(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(n.algorithm){case"lttb":y=Iz(c,h,p,r,n);break;case"min-max":y=Nz(c,h,p,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=y})},destroy(t){Fk(t)}};function Cz(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=N1(l,c,i);const u=q2(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=uP(e,u);for(const p of h){const f=q2(n,s[p.start],s[p.end],p.loop),y=cP(a,i,f);for(const b of y)o.push({source:b,target:p,start:{[n]:Vk(u,f,"start",Math.max)},end:{[n]:Vk(u,f,"end",Math.min)}})}}return o}function q2(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Zr(i),s=Zr(s)),{property:t,start:i,end:s}}function Lz(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=N1(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function N1(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Vk(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function TP(t,e){let n=[],r=!1;return Nn(t)?(r=!0,n=t):n=Lz(t,e),n.length?new Sl({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Bk(t){return t&&t.fill!==!1}function Rz(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Hn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Dz(t,e,n){const r=Fz(t);if(Vt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Hn(i)&&Math.floor(i)===i?Mz(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Mz(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Oz(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Vt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function jz(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Vt(t)?r=t.value:r=e.getBaseValue(),r}function Fz(t){const e=t.options,n=e.fill;let r=Et(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Vz(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Bz(e,n);a.push(TP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)Uz(i,o[u],a)}return new Sl({points:i,options:{}})}function Bz(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Uz(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=zz(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function zz(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],p=o[u.end][n];if(ua(i,h,p)){a=i===h,l=i===p;break}}return{first:a,last:l,point:r}}class CP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Sn},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function qz(t){const{chart:e,fill:n,line:r}=t;if(Hn(n))return Hz(e,n);if(n==="stack")return Vz(t);if(n==="shape")return!0;const i=Wz(t);return i instanceof CP?i:TP(i,r)}function Hz(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Wz(t){return(t.scale||{}).getPointPositionForValue?Kz(t):$z(t)}function $z(t){const{scale:e={},fill:n}=t,r=Oz(n,e);if(Hn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Kz(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=jz(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new CP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function Yy(t,e,n){const r=qz(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:p=h,below:f=h}=u||{},y=i.getDatasetMeta(s),b=hP(i,y);r&&o.points.length&&(S1(t,n),Gz(t,{line:o,target:r,above:p,below:f,area:n,scale:a,axis:l,clip:b}),k1(t))}function Gz(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(Uk(t,r,o.top),Qy(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Uk(t,r,o.bottom)):c==="y"&&(zk(t,r,o.left),Qy(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),zk(t,r,o.right),u=i)),Qy(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function Uk(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[N1(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function zk(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[N1(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Qy(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=Cz(n,r,i);for(const{source:c,target:u,start:h,end:p}of l){const{style:{backgroundColor:f=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=f,Yz(t,o,a,y&&q2(i,h,p)),t.beginPath();const b=!!n.pathSegment(t,c);let A;if(y){b?t.closePath():qk(t,r,p,i);const v=!!r.pathSegment(t,u,{move:b,reverse:!0});A=b&&v,A||qk(t,r,h,i)}t.closePath(),t.fill(A?"evenodd":"nonzero"),t.restore()}}function Yz(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,h;s==="x"?(l=o,c=i.top,u=a,h=i.bottom):(l=i.left,c=o,u=i.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function qk(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Qz={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Sl&&(l={visible:t.isDatasetVisible(o),index:o,fill:Dz(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Rz(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Yy(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Bk(s)&&Yy(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Bk(r)||n.drawTime!=="beforeDatasetDraw"||Yy(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Hk=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Xz=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Wk extends $s{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=mn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=gr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Hk(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let p=-1,f=-u;return this.legendItems.forEach((y,b)=>{const A=r+n/2+s.measureText(y.text).width;(b===0||c[c.length-1]+A+2*a>o)&&(h+=u,c[c.length-(b>0?0:1)]=0,f+=u,p++),l[b]={left:0,top:f,row:p,width:A,height:i},c[c.length-1]+=A+a}),h}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,p=0,f=0,y=0,b=0;return this.legendItems.forEach((A,v)=>{const{itemWidth:_,itemHeight:k}=Jz(r,n,s,A,i);v>0&&f+k+2*a>u&&(h+=p+a,c.push({width:p,height:f}),y+=p+a,b++,p=f=0),l[v]={left:y,top:f,col:b,width:_,height:k},p=Math.max(p,_),f+=k+a}),h+=p,c.push({width:p,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=kh(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xr(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Xr(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Xr(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Xr(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;S1(e,this),this._draw(),k1(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Cn.color,l=kh(e.rtl,this.left,this.width),c=gr(o.font),{padding:u}=o,h=c.size,p=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:b,itemHeight:A}=Hk(o,h),v=function(z,I,S){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;i.save();const L=Et(S.lineWidth,1);if(i.fillStyle=Et(S.fillStyle,a),i.lineCap=Et(S.lineCap,"butt"),i.lineDashOffset=Et(S.lineDashOffset,0),i.lineJoin=Et(S.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=Et(S.strokeStyle,a),i.setLineDash(Et(S.lineDash,[])),o.usePointStyle){const D={radius:b*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:L},x=l.xPlus(z,y/2),w=I+p;JN(i,D,x,w,o.pointStyleWidth&&y)}else{const D=I+Math.max((h-b)/2,0),x=l.leftForLtr(z,y),w=zc(S.borderRadius);i.beginPath(),Object.values(w).some(P=>P!==0)?hp(i,{x,y:D,w:y,h:b,radius:w}):i.rect(x,D,y,b),i.fill(),L!==0&&i.stroke()}i.restore()},_=function(z,I,S){au(i,S.text,z,I+A/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},k=this.isHorizontal(),R=this._computeTitleHeight();k?f={x:Xr(s,this.left+u,this.right-r[0]),y:this.top+u+R,line:0}:f={x:this.left+u,y:Xr(s,this.top+R+u,this.bottom-n[0].height),line:0},oP(this.ctx,e.textDirection);const M=A+u;this.legendItems.forEach((z,I)=>{i.strokeStyle=z.fontColor,i.fillStyle=z.fontColor;const S=i.measureText(z.text).width,L=l.textAlign(z.textAlign||(z.textAlign=o.textAlign)),D=y+p+S;let x=f.x,w=f.y;l.setWidth(this.width),k?I>0&&x+D+u>this.right&&(w=f.y+=M,f.line++,x=f.x=Xr(s,this.left+u,this.right-r[f.line])):I>0&&w+M>this.bottom&&(x=f.x=x+n[f.line].width+u,f.line++,w=f.y=Xr(s,this.top+R+u,this.bottom-n[f.line].height));const P=l.x(x);if(v(P,w,z),x=yV(L,x+y+p,k?x+D:this.right,e.rtl),_(l.x(x),w,z),k)f.x+=D+u;else if(typeof z.text!="string"){const j=c.lineHeight;f.y+=LP(z,j)+u}else f.y+=M}),aP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=gr(n.font),i=oi(n.padding);if(!n.display)return;const s=kh(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=Xr(e.align,h,this.right-p);else{const y=this.columnSizes.reduce((b,A)=>Math.max(b,A.height),0);u=c+Xr(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const f=Xr(a,h,h+p);o.textAlign=s.textAlign(cx(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,au(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=gr(e.font),r=oi(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ua(e,this.left,this.right)&&ua(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ua(e,i.left,i.left+i.width)&&ua(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!tq(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Xz(i,r);i&&!s&&mn(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&mn(n.onHover,[e,r,this],this)}else r&&mn(n.onClick,[e,r,this],this)}}function Jz(t,e,n,r,i){const s=Zz(r,t,e,n),o=eq(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Zz(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function eq(t,e,n){let r=t;return typeof e.text!="string"&&(r=LP(e,n)),r}function LP(t,e){const n=t.text?t.text.length:0;return e*n}function tq(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nq={id:"legend",_element:Wk,start(t,e,n){const r=t.legend=new Wk({ctx:t.ctx,options:n,chart:t});ni.configure(t,r,n),ni.addBox(t,r)},stop(t){ni.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;ni.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=oi(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class vx extends $s{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Nn(r.text)?r.text.length:1;this._padding=oi(r.padding);const s=i*gr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Xr(a,r,s),h=n+e,c=s-r):(o.position==="left"?(u=r+e,h=Xr(a,i,n),l=Kt*-.5):(u=s-e,h=Xr(a,n,i),l=Kt*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=gr(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);au(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:cx(n.align),textBaseline:"middle",translation:[o,a]})}}function rq(t,e){const n=new vx({ctx:t.ctx,options:e,chart:t});ni.configure(t,n,e),ni.addBox(t,n),t.titleBlock=n}var iq={id:"title",_element:vx,start(t,e,n){rq(t,n)},stop(t){const e=t.titleBlock;ni.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;ni.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yg=new WeakMap;var sq={id:"subtitle",start(t,e,n){const r=new vx({ctx:t.ctx,options:n,chart:t});ni.configure(t,r,n),ni.addBox(t,r),Yg.set(t,r)},stop(t){ni.removeBox(t,Yg.get(t)),Yg.delete(t)},beforeUpdate(t,e,n){const r=Yg.get(t);ni.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qd={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=M2(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function co(t,e){return e&&(Nn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ea(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function oq(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function $k(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=gr(e.bodyFont),c=gr(e.titleFont),u=gr(e.footerFont),h=s.length,p=i.length,f=r.length,y=oi(e.padding);let b=y.height,A=0,v=r.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=f*R+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}p&&(b+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let _=0;const k=function(R){A=Math.max(A,n.measureText(R).width+_)};return n.save(),n.font=c.string,nn(t.title,k),n.font=l.string,nn(t.beforeBody.concat(t.afterBody),k),_=e.displayColors?o+2+e.boxPadding:0,nn(r,R=>{nn(R.before,k),nn(R.lines,k),nn(R.after,k)}),_=0,n.font=u.string,nn(t.footer,k),n.restore(),A+=y.width,{width:A,height:b}}function aq(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function lq(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function cq(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),lq(c,t,e,n)&&(c="center"),c}function Kk(t,e,n){const r=n.yAlign||e.yAlign||aq(t,n);return{xAlign:n.xAlign||e.xAlign||cq(t,e,n,r),yAlign:r}}function uq(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function hq(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Gk(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:f}=zc(o);let y=uq(e,a);const b=hq(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+i:a==="right"&&(y+=Math.max(h,f)+i),{x:wr(y,0,r.width-e.width),y:wr(b,0,r.height-e.height)}}function Qg(t,e,n){const r=oi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Yk(t){return co([],ea(t))}function dq(t,e,n){return rc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Qk(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const RP={beforeTitle:Qo,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Qo,beforeBody:Qo,beforeLabel:Qo,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Rt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Qo,afterBody:Qo,beforeFooter:Qo,footer:Qo,afterFooter:Qo};function Pi(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?RP[e].call(n,r):i}class H2 extends $s{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new dP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=dq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Pi(r,"beforeTitle",this,e),s=Pi(r,"title",this,e),o=Pi(r,"afterTitle",this,e);let a=[];return a=co(a,ea(i)),a=co(a,ea(s)),a=co(a,ea(o)),a}getBeforeBody(e,n){return Yk(Pi(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return nn(e,s=>{const o={before:[],lines:[],after:[]},a=Qk(r,s);co(o.before,ea(Pi(a,"beforeLabel",this,s))),co(o.lines,Pi(a,"label",this,s)),co(o.after,ea(Pi(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Yk(Pi(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Pi(r,"beforeFooter",this,e),s=Pi(r,"footer",this,e),o=Pi(r,"afterFooter",this,e);let a=[];return a=co(a,ea(i)),a=co(a,ea(s)),a=co(a,ea(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(oq(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,p)=>e.filter(u,h,p,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),nn(a,u=>{const h=Qk(e.callbacks,u);i.push(Pi(h,"labelColor",this,u)),s.push(Pi(h,"labelPointStyle",this,u)),o.push(Pi(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Qd[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=$k(this,r),c=Object.assign({},a,l),u=Kk(this.chart,r,c),h=Gk(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=zc(a),{x:p,y:f}=e,{width:y,height:b}=n;let A,v,_,k,R,M;return s==="center"?(R=f+b/2,i==="left"?(A=p,v=A-o,k=R+o,M=R-o):(A=p+y,v=A+o,k=R-o,M=R+o),_=A):(i==="left"?v=p+Math.max(l,u)+o:i==="right"?v=p+y-Math.max(c,h)-o:v=this.caretX,s==="top"?(k=f,R=k-o,A=v-o,_=v+o):(k=f+b,R=k+o,A=v+o,_=v-o),M=k),{x1:A,x2:v,x3:_,y1:k,y2:R,y3:M}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=kh(r.rtl,this.x,this.width);for(e.x=Qg(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=gr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=gr(s.bodyFont),h=Qg(this,"left",s),p=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+f;if(s.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},A=i.leftForLtr(p,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,j2(e,b,A,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,j2(e,b,A,v)}else{e.lineWidth=Vt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(p,c),A=i.leftForLtr(i.xPlus(p,1),c-2),v=zc(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,hp(e,{x:b,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),hp(e,{x:A,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,y,c,l),e.strokeRect(b,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(A,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=gr(r.bodyFont);let p=h.lineHeight,f=0;const y=kh(r.rtl,this.x,this.width),b=function(S){n.fillText(S,y.x(e.x+f),e.y+p/2),e.y+=p+s},A=y.textAlign(o);let v,_,k,R,M,z,I;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Qg(this,A,r),n.fillStyle=r.bodyColor,nn(this.beforeBody,b),f=a&&A!=="right"?o==="center"?c/2+u:c+2+u:0,R=0,z=i.length;R<z;++R){for(v=i[R],_=this.labelTextColors[R],n.fillStyle=_,nn(v.before,b),k=v.lines,a&&k.length&&(this._drawColorBox(n,e,R,y,r),p=Math.max(h.lineHeight,l)),M=0,I=k.length;M<I;++M)b(k[M]),p=h.lineHeight;nn(v.after,b)}f=0,p=h.lineHeight,nn(this.afterBody,b),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=kh(r.rtl,this.x,this.width);for(e.x=Qg(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=gr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:p,bottomLeft:f,bottomRight:y}=zc(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Qd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=$k(this,e),l=Object.assign({},o,this._size),c=Kk(n,e,l),u=Gk(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=oi(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),oP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),aP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!A0(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!A0(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Qd[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ge(H2,"positioners",Qd);var fq={id:"tooltip",_element:H2,positioners:Qd,afterInit(t,e,n){n&&(t.tooltip=new H2({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:RP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pq=Object.freeze({__proto__:null,Colors:Ez,Decimation:Tz,Filler:Qz,Legend:nq,SubTitle:sq,Title:iq,Tooltip:fq});const gq=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function mq(t,e,n,r){const i=t.indexOf(e);if(i===-1)return gq(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const yq=(t,e)=>t===null?null:wr(Math.round(t),0,e);function Xk(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class W2 extends yu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Rt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:mq(r,e,Et(n,e),this._addedLabels),yq(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Xk.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ge(W2,"id","category"),Ge(W2,"defaults",{ticks:{callback:Xk}});function vq(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=t,f=s||1,y=u-1,{min:b,max:A}=e,v=!Rt(o),_=!Rt(a),k=!Rt(c),R=(A-b)/(h+1);let M=$S((A-b)/y/f)*f,z,I,S,L;if(M<1e-14&&!v&&!_)return[{value:b},{value:A}];L=Math.ceil(A/M)-Math.floor(b/M),L>y&&(M=$S(L*M/y/f)*f),Rt(l)||(z=Math.pow(10,l),M=Math.ceil(M*z)/z),i==="ticks"?(I=Math.floor(b/M)*M,S=Math.ceil(A/M)*M):(I=b,S=A),v&&_&&s&&uV((a-o)/s,M/1e3)?(L=Math.round(Math.min((a-o)/M,u)),M=(a-o)/L,I=o,S=a):k?(I=v?o:I,S=_?a:S,L=c-1,M=(S-I)/L):(L=(S-I)/M,vf(L,Math.round(L),M/1e3)?L=Math.round(L):L=Math.ceil(L));const D=Math.max(KS(M),KS(I));z=Math.pow(10,Rt(l)?D:l),I=Math.round(I*z)/z,S=Math.round(S*z)/z;let x=0;for(v&&(p&&I!==o?(n.push({value:o}),I<o&&x++,vf(Math.round((I+x*M)*z)/z,o,Jk(o,R,t))&&x++):I<o&&x++);x<L;++x){const w=Math.round((I+x*M)*z)/z;if(_&&w>a)break;n.push({value:w})}return _&&p&&S!==a?n.length&&vf(n[n.length-1].value,a,Jk(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!_||S===a)&&n.push({value:S}),n}function Jk(t,e,{horizontal:n,minRotation:r}){const i=Fs(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class L0 extends yu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Rt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Ao(i),c=Ao(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=vq(i,s);return e.bounds==="ticks"&&qN(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Hp(e,this.chart.options.locale,this.options.ticks.format)}}class $2 extends L0{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Hn(e)?e:0,this.max=Hn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Fs(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ge($2,"id","linear"),Ge($2,"defaults",{ticks:{callback:w1.formatters.numeric}});const fp=t=>Math.floor(_l(t)),Ic=(t,e)=>Math.pow(10,fp(t)+e);function Zk(t){return t/Math.pow(10,fp(t))===1}function e4(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function bq(t,e){const n=e-t;let r=fp(n);for(;e4(t,e,r)>10;)r++;for(;e4(t,e,r)<10;)r--;return Math.min(r,fp(t))}function xq(t,{min:e,max:n}){e=Wi(t.min,e);const r=[],i=fp(e);let s=bq(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),p=Wi(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;p<n;)r.push({value:p,major:Zk(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),p=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=Wi(t.max,p);return r.push({value:f,major:Zk(f),significand:h}),r}class K2 extends yu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=L0.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Hn(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Hn(e)?Math.max(0,e):null,this.max=Hn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Hn(this._userMin)&&(this.min=e===Ic(this.min,0)?Ic(this.min,-1):Ic(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Ic(r,-1)),o(Ic(i,1)))),r<=0&&s(Ic(i,-1)),i<=0&&o(Ic(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=xq(n,this);return e.bounds==="ticks"&&qN(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Hp(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=_l(e),this._valueRange=_l(this.max)-_l(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_l(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ge(K2,"id","logarithmic"),Ge(K2,"defaults",{ticks:{callback:w1.formatters.logarithmic,major:{enabled:!0}}});function G2(t){const e=t.ticks;if(e.display&&t.display){const n=oi(e.backdropPadding);return Et(e.font&&e.font.size,Cn.font.size)+n.height}return 0}function _q(t,e,n){return n=Nn(n)?n:[n],{w:IV(t,e.string,n),h:n.length*e.lineHeight}}function t4(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wq(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Kt/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),h=gr(c.font),p=_q(t.ctx,h,t._pointLabels[l]);r[l]=p;const f=Zr(t.getIndexAngle(l)+a),y=Math.round(ax(f)),b=t4(y,u.x,p.w,0,180),A=t4(y,u.y,p.h,90,270);Sq(n,e,f,b,A)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Eq(t,r,i)}function Sq(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function kq(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(ax(Zr(l.angle+er))),u=Pq(l.y,a.h,c),h=Iq(c),p=Nq(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:p,top:u,right:p+a.w,bottom:u+a.h}}function Aq(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(da({x:n,y:r},e)||da({x:n,y:s},e)||da({x:i,y:r},e)||da({x:i,y:s},e))}function Eq(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:G2(s)/2,additionalAngle:o?Kt/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const h=kq(t,u,l);r.push(h),a==="auto"&&(h.visible=Aq(h,c),h.visible&&(c=h))}return r}function Iq(t){return t===0||t===180?"center":t<180?"left":"right"}function Nq(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Pq(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Tq(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Rt(a)){const l=zc(e.borderRadius),c=oi(e.backdropPadding);t.fillStyle=a;const u=r-c.left,h=i-c.top,p=s-r+c.width,f=o-i+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),hp(t,{x:u,y:h,w:p,h:f,radius:l}),t.fill()):t.fillRect(u,h,p,f)}}function Cq(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Tq(n,o,s);const a=gr(o.font),{x:l,y:c,textAlign:u}=s;au(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function DP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Sn);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Lq(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),DP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function Rq(t,e,n){return rc(t,{label:n,index:e,type:"pointLabel"})}class Xd extends L0{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=oi(G2(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Hn(e)&&!isNaN(e)?e:0,this.max=Hn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/G2(this.options))}generateTickLabels(e){L0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=mn(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?wq(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Sn/(this._pointLabels.length||1),r=this.options.startAngle||0;return Zr(e*n+Fs(r))}getDistanceFromCenterForValue(e){if(Rt(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Rt(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Rq(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-er+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),DP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Cq(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(h),f=i.setContext(p),y=s.setContext(p);Lq(this,f,l,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=u;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=gr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=oi(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}au(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ge(Xd,"id","radialLinear"),Ge(Xd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:w1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ge(Xd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ge(Xd,"descriptors",{angleLines:{_fallback:"grid"}});const P1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ci=Object.keys(P1);function n4(t,e){return t-e}function r4(t,e){if(Rt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Hn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Uh(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function i4(t,e,n,r){const i=Ci.length;for(let s=Ci.indexOf(t);s<i-1;++s){const o=P1[Ci[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ci[s]}return Ci[i-1]}function Dq(t,e,n,r,i){for(let s=Ci.length-1;s>=Ci.indexOf(n);s--){const o=Ci[s];if(P1[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Ci[n?Ci.indexOf(n):0]}function Mq(t){for(let e=Ci.indexOf(t)+1,n=Ci.length;e<n;++e)if(P1[Ci[e]].common)return Ci[e]}function s4(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=lx(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Oq(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function o4(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Oq(t,r,i,n)}class pp extends yu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new HB._date(e.adapters.date);i.init(n),yf(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:r4(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Hn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Hn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=pV(i,s,o);return this._unit=n.unit||(r.autoSkip?i4(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Dq(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Mq(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),o4(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=wr(n,0,o),r=wr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||i4(s.minUnit,n,r,this._getLabelCapacity(n)),a=Et(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Uh(l)||l===!0,u={};let h=n,p,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=h,f=0;p<r;p=+e.add(p,a,o),f++)s4(u,p,y);return(p===r||i.bounds==="ticks"||f===1)&&s4(u,p,y),Object.keys(u).sort(n4).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return mn(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=r[n],f=c&&h&&p&&p.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Fs(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,o4(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(r4(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $N(e.sort(n4))}}Ge(pp,"id","time"),Ge(pp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xg(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ha(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ha(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Y2 extends pp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Xg(n,this.min),this._tableRange=Xg(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Xg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Xg(this._table,r*this._tableRange+this._minPos,!0)}}Ge(Y2,"id","timeseries"),Ge(Y2,"defaults",pp.defaults);var jq=Object.freeze({__proto__:null,CategoryScale:W2,LinearScale:$2,LogarithmicScale:K2,RadialLinearScale:Xd,TimeScale:pp,TimeSeriesScale:Y2});const Fq=[qB,bz,pq,jq];I1.register(...Fq);const MP="label";function a4(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Vq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function OP(t,e){t.labels=e}function jP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MP;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function Bq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MP;const n={labels:[],datasets:[]};return OP(n,t.labels),jP(n,t.datasets,e),n}function Uq(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...p}=t,f=le.useRef(null),y=le.useRef(null),b=()=>{f.current&&(y.current=new I1(f.current,{type:o,data:Bq(a,s),options:l&&{...l},plugins:c}),a4(e,y.current))},A=()=>{a4(e,null),y.current&&(y.current.destroy(),y.current=null)};return le.useEffect(()=>{!i&&y.current&&l&&Vq(y.current,l)},[i,l]),le.useEffect(()=>{!i&&y.current&&OP(y.current.config.data,a.labels)},[i,a.labels]),le.useEffect(()=>{!i&&y.current&&a.datasets&&jP(y.current.config.data,a.datasets,s)},[i,a.datasets]),le.useEffect(()=>{y.current&&(i?(A(),setTimeout(b)):y.current.update(h))},[i,l,a.labels,a.datasets,h]),le.useEffect(()=>{y.current&&(A(),setTimeout(b))},[o]),le.useEffect(()=>(b(),()=>A()),[]),ps.createElement("canvas",{ref:f,role:"img",height:n,width:r,...p},u)}const zq=le.forwardRef(Uq);function bx(t,e){return I1.register(e),le.forwardRef((n,r)=>ps.createElement(zq,{...n,ref:r,type:t}))}const qq=bx("line",wf),Hq=bx("bar",_f),Wq=bx("doughnut",wl);function Xo(t){return"Rp "+Number(t||0).toLocaleString("id-ID")}function $q(t){const e=[];for(let n=t-1;n>=0;n--)e.push(mt().subtract(n,"day").format("YYYY-MM-DD"));return e}function Kq(){const{org:t}=Vr(),[e,n]=le.useState(!0),[r,i]=le.useState([]),[s,o]=le.useState([]),[a,l]=le.useState([]),[c,u]=le.useState(14),h=le.useMemo(()=>$q(c),[c]);le.useEffect(()=>{(async()=>{if(!t)return;n(!0);const A=Pn(It(Ke,"sales"),Xt("orgId","==",t.id)),v=Pn(It(Ke,"purchases"),Xt("orgId","==",t.id)),[_,k]=await Promise.all([Tn(A),Tn(v)]),R=_.docs.map(S=>({id:S.id,...S.data()})),M=k.docs.map(S=>({id:S.id,...S.data()}));R.sort((S,L)=>{var D,x,w,P;return(((x=(D=S.createdAt)==null?void 0:D.toMillis)==null?void 0:x.call(D))||0)-(((P=(w=L.createdAt)==null?void 0:w.toMillis)==null?void 0:P.call(w))||0)}),M.sort((S,L)=>{var D,x,w,P;return(((x=(D=S.createdAt)==null?void 0:D.toMillis)==null?void 0:x.call(D))||0)-(((P=(w=L.createdAt)==null?void 0:w.toMillis)==null?void 0:P.call(w))||0)}),i(R),o(M);const z=new Map;R.forEach(S=>{(Array.isArray(S.items)?S.items:[]).forEach(D=>{const x=String(D.name||"Unknown"),w=z.get(x)||{qty:0,amount:0};w.qty+=Number(D.qty||0),w.amount+=Number(D.qty||0)*Number(D.price||0),z.set(x,w)})});const I=Array.from(z.entries()).map(([S,L])=>({name:S,qty:L.qty,amount:L.amount})).sort((S,L)=>L.qty-S.qty).slice(0,8);l(I),n(!1)})()},[t==null?void 0:t.id,c]);const p=le.useMemo(()=>{const b={},A={},v={};h.forEach(M=>(b[M]=0,A[M]=0,v[M]=0)),r.forEach(M=>{var I,S,L,D;const z=mt(((S=(I=M.date)==null?void 0:I.toDate)==null?void 0:S.call(I))||((D=(L=M.createdAt)==null?void 0:L.toDate)==null?void 0:D.call(L))||new Date).format("YYYY-MM-DD");b[z]!=null&&(b[z]+=Number(M.total||0),A[z]+=Number(M.cogs||0))}),s.forEach(M=>{var I,S,L,D;const z=mt(((S=(I=M.date)==null?void 0:I.toDate)==null?void 0:S.call(I))||((D=(L=M.createdAt)==null?void 0:L.toDate)==null?void 0:D.call(L))||new Date).format("YYYY-MM-DD");v[z]!=null&&(v[z]+=Number(M.total||0))});const _=h.map(M=>b[M]||0),k=h.map(M=>A[M]||0),R=h.map(M=>v[M]||0);return{rev:_,cogs:k,pur:R}},[h,r,s]),f=le.useMemo(()=>{const b=r.reduce((R,M)=>R+Number(M.total||0),0),A=r.reduce((R,M)=>R+Number(M.cogs||0),0),v=b-A,_=b>0?+(v/b*100).toFixed(2):0,k=s.reduce((R,M)=>R+Number(M.total||0),0);return{revenue:b,cogs:A,profit:v,margin:_,purchaseTotal:k}},[r,s]),y=le.useMemo(()=>{const b={QRIS:0,Tunai:0,Kartu:0,Grab:0};return r.forEach(A=>{const v=String(A.paymentMethod||"").toLowerCase();v==="qris"?b.QRIS+=Number(A.total||0):v==="tunai"?b.Tunai+=Number(A.total||0):v==="kartu"?b.Kartu+=Number(A.total||0):v==="grab"&&(b.Grab+=Number(A.total||0))}),b},[r]);return N.jsxs("div",{className:"grid gap-6",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Rentang"}),N.jsxs("select",{value:c,onChange:b=>u(Number(b.target.value)),children:[N.jsx("option",{value:7,children:"7 hari"}),N.jsx("option",{value:14,children:"14 hari"}),N.jsx("option",{value:30,children:"30 hari"})]})]})]}),N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[N.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-100 dark:bg-neutral-800",children:[N.jsx("div",{className:"text-sm opacity-70",children:"Revenue"}),N.jsx("div",{className:"text-xl font-bold",children:Xo(f.revenue)})]}),N.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-100 dark:bg-neutral-800",children:[N.jsx("div",{className:"text-sm opacity-70",children:"COGS"}),N.jsx("div",{className:"text-xl font-bold",children:Xo(f.cogs)})]}),N.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-100 dark:bg-neutral-800",children:[N.jsx("div",{className:"text-sm opacity-70",children:"Gross Profit"}),N.jsx("div",{className:"text-xl font-bold",children:Xo(f.profit)})]}),N.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-100 dark:bg-neutral-800",children:[N.jsx("div",{className:"text-sm opacity-70",children:"Margin"}),N.jsxs("div",{className:"text-xl font-bold",children:[f.margin,"%"]})]})]}),N.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[N.jsxs("div",{className:"lg:col-span-2 p-4 rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-black/5",children:[N.jsx("div",{className:"text-sm font-semibold mb-2",children:"Revenue vs COGS"}),N.jsx(qq,{data:{labels:h,datasets:[{label:"Revenue",data:p.rev},{label:"COGS",data:p.cogs}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:b=>`${b.dataset.label}: ${Xo(Number(b.parsed.y||0))}`}}},scales:{y:{ticks:{callback:b=>Xo(Number(b)).replace("Rp ","")}}}}})]}),N.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-black/5",children:[N.jsx("div",{className:"text-sm font-semibold mb-2",children:"Distribusi Metode Bayar"}),N.jsx(Wq,{data:{labels:Object.keys(y),datasets:[{data:Object.values(y)}]},options:{plugins:{tooltip:{callbacks:{label:b=>`${b.label}: ${Xo(Number(b.parsed||0))}`}}}}})]})]}),N.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[N.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-black/5",children:[N.jsx("div",{className:"text-sm font-semibold mb-2",children:"Pembelian per Hari"}),N.jsx(Hq,{data:{labels:h,datasets:[{label:"Pembelian",data:p.pur}]},options:{plugins:{tooltip:{callbacks:{label:b=>`${b.dataset.label}: ${Xo(Number(b.parsed.y||0))}`}}},scales:{y:{ticks:{callback:b=>Xo(Number(b)).replace("Rp ","")}}}}})]}),N.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-neutral-900 ring-1 ring-black/5",children:[N.jsx("div",{className:"text-sm font-semibold mb-3",children:"Produk Terlaris"}),N.jsxs("div",{className:"grid gap-2 max-h-[360px] overflow-auto",children:[a.map(b=>N.jsxs("div",{className:"p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800 flex items-center justify-between",children:[N.jsx("div",{className:"font-semibold",children:b.name}),N.jsxs("div",{className:"text-sm opacity-80",children:["x",b.qty," • ",Xo(b.amount)]})]},b.name)),a.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada data"})]})]})]})]})}const Gq=jN((t,e)=>({items:[],add:n=>t(r=>{const i=n.id||crypto.randomUUID(),s=r.items.find(o=>n.productId?o.productId===n.productId:o.name===n.name&&o.price===n.price);return s?{items:r.items.map(o=>o===s?{...o,qty:o.qty+(n.qty||1)}:o)}:{items:[...r.items,{id:i,productId:n.productId,name:n.name,price:n.price,qty:n.qty||1}]}}),inc:n=>t(r=>({items:r.items.map(i=>i.id===n?{...i,qty:i.qty+1}:i)})),dec:n=>t(r=>({items:r.items.map(i=>i.id===n?{...i,qty:Math.max(1,i.qty-1)}:i)})),setQty:(n,r)=>t(i=>({items:i.items.map(s=>s.id===n?{...s,qty:Math.max(1,r)}:s)})),remove:n=>t(r=>({items:r.items.filter(i=>i.id!==n)})),clear:()=>t({items:[]}),total:()=>e().items.reduce((n,r)=>n+r.price*r.qty,0)})),Xy=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Jy(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Rd(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on".concat(e),n)}function FP(t,e){const n=e.slice(0,e.length-1);for(let r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function VP(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function Yq(t,e){const n=t.length>=e.length?t:e,r=t.length>=e.length?e:t;let i=!0;for(let s=0;s<n.length;s++)r.indexOf(n[s])===-1&&(i=!1);return i}const gp={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Xy?173:189,"=":Xy?61:187,";":Xy?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},zs={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91},Jd={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Lr={16:!1,18:!1,17:!1,91:!1},Rn={};for(let t=1;t<20;t++)gp["f".concat(t)]=111+t;let En=[],kf=null,BP="all";const na=new Map,Zh=t=>gp[t.toLowerCase()]||zs[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),Qq=t=>Object.keys(gp).find(e=>gp[e]===t),Xq=t=>Object.keys(zs).find(e=>zs[e]===t);function UP(t){BP=t||"all"}function mp(){return BP||"all"}function Jq(){return En.slice(0)}function Zq(){return En.map(t=>Qq(t)||Xq(t)||String.fromCharCode(t))}function eH(){const t=[];return Object.keys(Rn).forEach(e=>{Rn[e].forEach(n=>{let{key:r,scope:i,mods:s,shortcut:o}=n;t.push({scope:i,shortcut:o,mods:s,keys:r.split("+").map(a=>Zh(a))})})}),t}function tH(t){const e=t.target||t.srcElement,{tagName:n}=e;let r=!0;const i=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function nH(t){return typeof t=="string"&&(t=Zh(t)),En.indexOf(t)!==-1}function rH(t,e){let n,r;t||(t=mp());for(const i in Rn)if(Object.prototype.hasOwnProperty.call(Rn,i))for(n=Rn[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1).forEach(o=>{let{element:a}=o;return xx(a)}):r++;mp()===t&&UP(e||"all")}function iH(t){let e=t.keyCode||t.which||t.charCode;t.key&&t.key.toLowerCase()==="capslock"&&(e=Zh(t.key));const n=En.indexOf(e);if(n>=0&&En.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&En.splice(0,En.length),(e===93||e===224)&&(e=91),e in Lr){Lr[e]=!1;for(const r in zs)zs[r]===e&&(mo[r]=!1)}}function zP(t){if(typeof t>"u")Object.keys(Rn).forEach(i=>{Array.isArray(Rn[i])&&Rn[i].forEach(s=>Jg(s)),delete Rn[i]}),xx(null);else if(Array.isArray(t))t.forEach(i=>{i.key&&Jg(i)});else if(typeof t=="object")t.key&&Jg(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];let[i,s]=n;typeof i=="function"&&(s=i,i=""),Jg({key:t,scope:i,method:s,splitKey:"+"})}}const Jg=t=>{let{key:e,scope:n,method:r,splitKey:i="+"}=t;VP(e).forEach(o=>{const a=o.split(i),l=a.length,c=a[l-1],u=c==="*"?"*":Zh(c);if(!Rn[u])return;n||(n=mp());const h=l>1?FP(zs,a):[],p=[];Rn[u]=Rn[u].filter(f=>{const b=(r?f.method===r:!0)&&f.scope===n&&Yq(f.mods,h);return b&&p.push(f.element),!b}),p.forEach(f=>xx(f))})};function l4(t,e,n,r){if(e.element!==r)return;let i;if(e.scope===n||e.scope==="all"){i=e.mods.length>0;for(const s in Lr)Object.prototype.hasOwnProperty.call(Lr,s)&&(!Lr[s]&&e.mods.indexOf(+s)>-1||Lr[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!Lr[16]&&!Lr[18]&&!Lr[17]&&!Lr[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(En),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function c4(t,e){const n=Rn["*"];let r=t.keyCode||t.which||t.charCode;if(t.key&&t.key.toLowerCase()==="capslock"||!mo.filter.call(this,t))return;if((r===93||r===224)&&(r=91),En.indexOf(r)===-1&&r!==229&&En.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(a=>{const l=Jd[a];t[a]&&En.indexOf(l)===-1?En.push(l):!t[a]&&En.indexOf(l)>-1?En.splice(En.indexOf(l),1):a==="metaKey"&&t[a]&&(En=En.filter(c=>c in Jd||c===r))}),r in Lr){Lr[r]=!0;for(const a in zs)if(Object.prototype.hasOwnProperty.call(zs,a)){const l=Jd[zs[a]];mo[a]=t[l]}if(!n)return}for(const a in Lr)Object.prototype.hasOwnProperty.call(Lr,a)&&(Lr[a]=t[Jd[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(En.indexOf(17)===-1&&En.push(17),En.indexOf(18)===-1&&En.push(18),Lr[17]=!0,Lr[18]=!0);const i=mp();if(n)for(let a=0;a<n.length;a++)n[a].scope===i&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&l4(t,n[a],i,e);if(!(r in Rn))return;const s=Rn[r],o=s.length;for(let a=0;a<o;a++)if((t.type==="keydown"&&s[a].keydown||t.type==="keyup"&&s[a].keyup)&&s[a].key){const l=s[a],{splitKey:c}=l,u=l.key.split(c),h=[];for(let p=0;p<u.length;p++)h.push(Zh(u[p]));h.sort().join("")===En.sort().join("")&&l4(t,l,i,e)}}function mo(t,e,n){En=[];const r=VP(t);let i=[],s="all",o=document,a=0,l=!1,c=!0,u="+",h=!1,p=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(h=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(p=!0)),typeof e=="string"&&(s=e),p&&zP(t,s);a<r.length;a++)t=r[a].split(u),i=[],t.length>1&&(i=FP(zs,t)),t=t[t.length-1],t=t==="*"?"*":Zh(t),t in Rn||(Rn[t]=[]),Rn[t].push({keyup:l,keydown:c,scope:s,mods:i,shortcut:r[a],method:n,key:r[a],splitKey:u,element:o});if(typeof o<"u"&&window){if(!na.has(o)){const f=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return c4(b,o)},y=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;c4(b,o),iH(b)};na.set(o,{keydownListener:f,keyupListenr:y,capture:h}),Jy(o,"keydown",f,h),Jy(o,"keyup",y,h)}if(!kf){const f=()=>{En=[]};kf={listener:f,capture:h},Jy(window,"focus",f,h)}}}function sH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Rn).forEach(n=>{Rn[n].filter(i=>i.scope===e&&i.shortcut===t).forEach(i=>{i&&i.method&&i.method()})})}function xx(t){const e=Object.values(Rn).flat();if(e.findIndex(r=>{let{element:i}=r;return i===t})<0){const{keydownListener:r,keyupListenr:i,capture:s}=na.get(t)||{};r&&i&&(Rd(t,"keyup",i,s),Rd(t,"keydown",r,s),na.delete(t))}if((e.length<=0||na.size<=0)&&(Object.keys(na).forEach(i=>{const{keydownListener:s,keyupListenr:o,capture:a}=na.get(i)||{};s&&o&&(Rd(i,"keyup",o,a),Rd(i,"keydown",s,a),na.delete(i))}),na.clear(),Object.keys(Rn).forEach(i=>delete Rn[i]),kf)){const{listener:i,capture:s}=kf;Rd(window,"focus",i,s),kf=null}}const Zy={getPressedKeyString:Zq,setScope:UP,getScope:mp,deleteScope:rH,getPressedKeyCodes:Jq,getAllKeyCodes:eH,isPressed:nH,filter:tH,trigger:sH,unbind:zP,keyMap:gp,modifier:zs,modifierMap:Jd};for(const t in Zy)Object.prototype.hasOwnProperty.call(Zy,t)&&(mo[t]=Zy[t]);if(typeof window<"u"){const t=window.hotkeys;mo.noConflict=e=>(e&&window.hotkeys===mo&&(window.hotkeys=t),mo),window.hotkeys=mo}function oH({data:t,onClose:e}){var l,c,u;const{org:n}=Vr(),r=((l=n==null?void 0:n.store)==null?void 0:l.name)||"Zyngra POS",i=((c=n==null?void 0:n.store)==null?void 0:c.phone)||"",s=((u=n==null?void 0:n.store)==null?void 0:u.address)||"",o=t.items.map(h=>{const p=`${h.qty} x ${Number(h.price||0).toLocaleString("id-ID")}`,f=(Number(h.qty||0)*Number(h.price||0)).toLocaleString("id-ID");return{name:String(h.name||"-"),rightA:p,rightB:f}}),a=()=>setTimeout(()=>window.print(),50);return N.jsxs("div",{className:"fixed inset-0 z-[9998]",children:[N.jsx("div",{className:"no-print absolute top-0 left-0 right-0 grid place-items-center pointer-events-none",children:N.jsxs("div",{className:"pointer-events-auto mt-3 px-4 py-3 rounded-2xl border border-black/10 bg-white/95 shadow-2xl max-w-md w-[92%]",children:[N.jsx("div",{className:"font-semibold",children:"Struk Siap Cetak"}),N.jsx("div",{className:"text-sm opacity-70 mb-3",children:"Pastikan printer thermal 80mm sudah dipilih."}),N.jsxs("div",{className:"flex gap-2 justify-end",children:[N.jsx("button",{onClick:e,className:"px-3 py-1.5 rounded bg-black/10",children:"Tutup"}),N.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded bg-green-600 text-white",children:"Print"})]})]})}),N.jsx("div",{id:"receipt-print",className:"print-only",children:N.jsxs("div",{className:"receipt-paper bg-white text-black rounded",children:[N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"font-bold text-lg",children:r}),i?N.jsx("div",{className:"text-xs",children:i}):null,s?N.jsx("div",{className:"text-xs",children:s}):null,N.jsxs("div",{className:"text-xs",children:["Tanggal ",mt().format("DD/MM/YYYY HH:mm")]})]}),N.jsx("div",{className:"my-2 border-t border-dashed border-black/40"}),N.jsx("div",{className:"text-[13px] font-mono",children:o.map((h,p)=>N.jsxs("div",{className:"py-0.5",children:[N.jsxs("div",{className:"flex justify-between",children:[N.jsx("span",{className:"truncate max-w-[60%]",children:h.name}),N.jsx("span",{className:"tabular-nums",children:h.rightA})]}),N.jsxs("div",{className:"flex justify-between text-xs opacity-70",children:[N.jsx("span",{children:"Subtotal"}),N.jsxs("span",{className:"tabular-nums",children:["Rp ",h.rightB]})]})]},p))}),N.jsx("div",{className:"my-2 border-t border-dashed border-black/40"}),N.jsxs("div",{className:"text-[13px] font-mono",children:[N.jsxs("div",{className:"flex justify-between",children:[N.jsx("span",{children:"Metode"}),N.jsx("span",{className:"uppercase",children:String(t.method||"tunai")})]}),N.jsxs("div",{className:"flex justify-between font-semibold",children:[N.jsx("span",{children:"Total"}),N.jsxs("span",{className:"tabular-nums",children:["Rp ",Number(t.total||0).toLocaleString("id-ID")]})]})]}),N.jsx("div",{className:"my-2 border-t border-dashed border-black/40"}),N.jsx("div",{className:"text-center text-[12px]",children:"Terima kasih telah berbelanja!"}),N.jsx("div",{className:"mt-2 text-center text-[11px] opacity-70",children:"Struk ini bukan bukti pajak"})]})})]})}function Ea(){const[t,e]=le.useState(()=>localStorage.getItem("sessionRole")||null);return le.useEffect(()=>{const r=i=>{i.key==="sessionRole"&&e(localStorage.getItem("sessionRole")||null)};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)},[]),{role:t,set:r=>{r?localStorage.setItem("sessionRole",r):localStorage.removeItem("sessionRole"),e(r)}}}function aH(t){switch(t){case"in":return"cash_in";case"out":return"cash_out";case"adjust":return"adjustment";case"opname":return"stock_opname";case"export":return"report_export";case"pdf_export":return"report_pdf_export";case"csv_export":return"report_csv_export";case"open":return"shift_open";case"close":return"shift_close";default:return t}}async function an(t){var n,r;const e=aH(t.action);await yi(It(Ke,"logs"),{orgId:t.orgId,entity:t.entity,action:e,entityId:t.entityId??null,before:t.before??null,after:t.after??null,meta:t.meta??null,byUid:((n=t.user)==null?void 0:n.uid)??null,byEmail:((r=t.user)==null?void 0:r.email)??null,createdAt:fn()})}function _x(){const{org:t,user:e,userDoc:n}=Vr(),[r,i]=le.useState(!1),[s,o]=le.useState(null),a=le.useCallback(async()=>{if(!t)return;i(!0);const f=Pn(It(Ke,"shifts"),Xt("orgId","==",t.id),Xt("closedAt","==",null),kN(1)),y=await Tn(f);o(y.docs.length?{id:y.docs[0].id,...y.docs[0].data()}:null),i(!1)},[t==null?void 0:t.id]);return le.useEffect(()=>{a()},[a]),{loading:r,shift:s,open:async f=>{if(!t||!n)return;if(s)throw new Error("Shift masih terbuka");const y=await yi(It(Ke,"shifts"),{orgId:t.id,openedByUid:n.uid,openingCash:Number(f)||0,closingCash:null,cashSales:0,cashIn:0,cashOut:0,notes:"",createdAt:fn(),openedAt:fn(),closedAt:null});await an({orgId:t.id,user:e,entity:"shift",action:"open",entityId:y.id,after:{openingCash:Number(f)||0}}),await a()},close:async f=>{!t||!s||(await br(Ct(Ke,"shifts",s.id),{closingCash:Number(f)||0,closedAt:fn()},{merge:!0}),await an({orgId:t.id,user:e,entity:"shift",action:"close",entityId:s.id,after:{closingCash:Number(f)||0}}),await a())},addCashIn:async(f,y)=>{if(!t||!n||!s)return;const b=Number(f)||0;await yi(It(Ke,"cashMovements"),{orgId:t.id,shiftId:s.id,type:"cash_in",amount:b,reason:y,createdAt:fn(),byUid:n.uid}),await Am(Ct(Ke,"shifts",s.id),{cashIn:Dy(b)}),await an({orgId:t.id,user:e,entity:"cash",action:"in",entityId:s.id,after:{amount:b,reason:y}}),await a()},addCashOut:async(f,y)=>{if(!t||!n||!s)return;const b=Number(f)||0;await yi(It(Ke,"cashMovements"),{orgId:t.id,shiftId:s.id,type:"cash_out",amount:b,reason:y,createdAt:fn(),byUid:n.uid}),await Am(Ct(Ke,"shifts",s.id),{cashOut:Dy(b)}),await an({orgId:t.id,user:e,entity:"cash",action:"out",entityId:s.id,after:{amount:b,reason:y}}),await a()},addCashSale:async(f,y)=>{if(!t||!n||!s)return;const b=Number(f)||0;await yi(It(Ke,"cashMovements"),{orgId:t.id,shiftId:s.id,type:"cash_sale",amount:b,reason:"Penjualan tunai",saleId:y||null,createdAt:fn(),byUid:n.uid}),await Am(Ct(Ke,"shifts",s.id),{cashSales:Dy(b)}),await an({orgId:t.id,user:e,entity:"cash",action:"sale",entityId:s.id,after:{amount:b,saleId:y||null}}),await a()},refresh:a}}function lH(){const{org:t,user:e}=Vr(),{role:n}=Ea(),r=Gq(),[i,s]=le.useState(()=>mt().format("YYYY-MM-DD")),[o,a]=le.useState("tunai"),[l,c]=le.useState([]),[u,h]=le.useState(null),[p,f]=le.useState([]),[y,b]=le.useState(""),[A,v]=le.useState(""),[_,k]=le.useState(""),[R,M]=le.useState(""),z=le.useRef(null),I=n==="admin",{addCashSale:S}=_x();le.useEffect(()=>(mo("f2,alt+k",(O,H)=>{var ne;O.preventDefault(),H.key==="f2"&&((ne=z.current)==null||ne.focus()),H.key==="alt+k"&&q()}),()=>mo.unbind("f2,alt+k")),[o,r.items,i]),le.useEffect(()=>{(async()=>{if(!t)return;const H=Pn(It(Ke,"sales"),Xt("orgId","==",t.id)),ae=(await Tn(H)).docs.map(F=>({id:F.id,...F.data()}));ae.sort((F,Y)=>{var Z,Q,re,ce;return(((Q=(Z=Y.createdAt)==null?void 0:Z.toMillis)==null?void 0:Q.call(Z))||0)-(((ce=(re=F.createdAt)==null?void 0:re.toMillis)==null?void 0:ce.call(re))||0)}),c(ae)})()},[t]),le.useEffect(()=>{(async()=>{if(!t)return;const H=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),ae=(await Tn(H)).docs.map(F=>({id:F.id,...F.data()}));ae.sort((F,Y)=>String(F.name||"").localeCompare(String(Y.name||""))),f(ae)})()},[t]);const L=Array.from(new Set(p.map(O=>String(O.category||"").trim()).filter(Boolean))),D=p.filter(O=>{const H=y.trim().toLowerCase(),ne=H?String(O.name).toLowerCase().includes(H):!0,ae=A?String(O.category||"").toLowerCase()===A.toLowerCase():!0;return ne&&ae}),x=O=>{const H=r.items.find(ae=>ae.productId===O.id),ne=H?H.qty:0;if((O.stock||0)-ne<=0){Oe.error("Stok habis untuk "+O.name);return}r.add({productId:O.id,name:O.name,price:Number(O.price||0),qty:1}),Oe.info(O.name+" ditambahkan ke keranjang")},w=()=>{if(!I){Oe.error("Hanya admin yang dapat menambah item custom");return}if(!_||!R){Oe.error("Isi nama dan harga");return}r.add({name:_,price:Number(R),qty:1}),k(""),M(""),Oe.success("Item custom ditambahkan")},P=le.useMemo(()=>r.total(),[r]),j=O=>["qris","tunai","kartu","grab"].includes(String(O))?O:"tunai",q=async()=>{if(!t)return Oe.error("Organisasi belum siap");if(r.items.length===0)return Oe.error("Keranjang kosong");try{let O=0;await Vh(Ke,async pe=>{var xe,De,je,We,Ae,$,Te,Pe;const he=r.items.filter(be=>be.productId),_e=[];for(const be of he){const Ee=Ct(Ke,"products",String(be.productId)),Ve=await pe.get(Ee);if(!Ve.exists())throw new Error("Produk tidak ditemukan: "+be.name);_e.push({ref:Ee,cur:Ve.data(),need:Number(be.qty||1),name:be.name})}for(const be of _e){if(Number(((xe=be.cur)==null?void 0:xe.stock)||0)<be.need)throw new Error("Stok tidak cukup untuk "+be.name);if(!!((De=be.cur)!=null&&De.hasMeasure)){const Be=Number(((je=be.cur)==null?void 0:je.contentPerItem)||0),Ze=Number(((We=be.cur)==null?void 0:We.stockContent)||0),ot=be.need*Be;if(Ze<ot)throw new Error("Stok isi tidak cukup untuk "+be.name)}}O=_e.reduce((be,Ee)=>{var Ve;return be+Number(Ee.need)*Number(((Ve=Ee.cur)==null?void 0:Ve.avgCost)||0)},0);for(const be of _e){const Ee=Number(((Ae=be.cur)==null?void 0:Ae.stock)||0),Ve=!!(($=be.cur)!=null&&$.hasMeasure),Be=Number(((Te=be.cur)==null?void 0:Te.contentPerItem)||0),Ze=Number(((Pe=be.cur)==null?void 0:Pe.stockContent)||0),ot={stock:Ee-be.need};if(Ve){const $e=be.need*Be;ot.stockContent=Ze-$e}pe.update(be.ref,ot)}});const H=j(o),ne=r.total(),ae=ne-O,F=ne>0?+(ae/ne*100).toFixed(2):0,Y={orgId:t.id,date:kn.fromDate(mt(i).toDate()),items:r.items.map(pe=>({productId:pe.productId||null,name:pe.name,qty:Number(pe.qty||1),price:Number(pe.price||0)})),paymentMethod:H,total:ne,cogs:O,grossProfit:ae,margin:F,source:H==="grab"?"grab":"offline",createdAt:fn()},Z=await yi(It(Ke,"sales"),Y);if(await an({orgId:t.id,user:e,entity:"sale",action:"create",entityId:Z.id,after:{total:ne,paymentMethod:H,itemCount:r.items.length,cogs:O,grossProfit:ae,margin:F}}),H==="tunai")try{await S(ne)}catch{}h({date:mt(i).format("DD/MM/YYYY"),items:r.items,total:ne,method:H}),r.clear(),Oe.success("Transaksi tersimpan");const Q=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),ce=(await Tn(Q)).docs.map(pe=>({id:pe.id,...pe.data()}));ce.sort((pe,he)=>String(pe.name||"").localeCompare(String(he.name||""))),f(ce)}catch(O){Oe.error((O==null?void 0:O.message)||"Gagal checkout")}},U=async O=>{if(!I)return Oe.error("Hanya admin yang dapat menghapus");await R2(Ct(Ke,"sales",O.id)),await an({orgId:t.id,user:e,entity:"sale",action:"delete",entityId:O.id,before:{total:O.total,paymentMethod:O.paymentMethod}}),c(H=>H.filter(ne=>ne.id!==O.id)),Oe.success("Penjualan dihapus")},W=async O=>{if(!I)return Oe.error("Hanya admin yang dapat mengedit");const H=prompt("Ubah total (angka)",String(O.total));H&&(await Am(Ct(Ke,"sales",O.id),{total:Number(H)}),await an({orgId:t.id,user:e,entity:"sale",action:"update",entityId:O.id,before:{total:O.total},after:{total:Number(H)}}),c(ne=>ne.map(ae=>ae.id===O.id?{...ae,total:Number(H)}:ae)),Oe.success("Total diperbarui"))};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Penjualan"}),N.jsxs("div",{className:"card p-4 grid gap-3",children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Tanggal"}),N.jsx("input",{value:i,onChange:O=>s(O.target.value),type:"date"})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Metode"}),N.jsxs("select",{value:o,onChange:O=>a(O.target.value),children:[N.jsx("option",{value:"qris",children:"QRIS"}),N.jsx("option",{value:"tunai",children:"Tunai"}),N.jsx("option",{value:"kartu",children:"Kartu"}),N.jsx("option",{value:"grab",children:"Grab"})]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Cari"}),N.jsx("input",{ref:z,value:y,onChange:O=>b(O.target.value),placeholder:"Cari produk",className:"flex-1"}),N.jsxs("select",{value:A,onChange:O=>v(O.target.value),children:[N.jsx("option",{value:"",children:"Semua"}),L.map(O=>N.jsx("option",{value:O,children:O},O))]})]})]}),I&&N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[N.jsx("input",{value:_,onChange:O=>k(O.target.value),placeholder:"Nama custom (admin)"}),N.jsx("input",{value:R,onChange:O=>M(O.target.value?Number(O.target.value):""),placeholder:"Harga custom",type:"number"}),N.jsx("button",{onClick:w,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Tambah ke Keranjang"})]})]}),N.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[N.jsxs("div",{className:"md:col-span-2 card p-4",children:[N.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 max-h-[300px] overflow-auto",children:D.map(O=>N.jsxs("button",{onClick:()=>x(O),className:"p-3 rounded-xl bg-black/5 hover:bg-black/[.08] text-left",children:[N.jsx("div",{className:"font-semibold",children:O.name}),N.jsx("div",{className:"text-sm opacity-70",children:O.category||"-"}),N.jsxs("div",{className:"text-sm",children:["Rp ",Number(O.price||0).toLocaleString("id-ID")]}),N.jsxs("div",{className:"text-xs opacity-70",children:["Stok: ",Number(O.stock||0)]})]},O.id))}),N.jsxs("div",{className:"mt-4",children:[N.jsx("h3",{className:"font-semibold mb-2",children:"Keranjang"}),N.jsx("div",{className:"grid gap-2",children:r.items.map(O=>N.jsxs("div",{className:"grid grid-cols-[1fr_auto_auto_auto_auto] items-center gap-2 p-2 rounded bg-black/5",children:[N.jsx("span",{children:O.name}),I?N.jsx("input",{type:"number",value:O.price,onChange:H=>r.add({id:O.id,productId:O.productId,name:O.name,price:Number(H.target.value||0),qty:O.qty}),className:"w-28"}):N.jsxs("span",{children:["Rp ",O.price.toLocaleString("id-ID")]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:()=>r.dec(O.id),className:"px-2 rounded bg-black/10",children:"-"}),N.jsx("input",{value:O.qty,onChange:H=>r.setQty(O.id,Number(H.target.value||1)),type:"number",className:"w-14"}),N.jsx("button",{onClick:()=>r.inc(O.id),className:"px-2 rounded bg-black/10",children:"+"})]}),N.jsxs("span",{children:["= Rp ",(O.qty*O.price).toLocaleString("id-ID")]}),N.jsx("button",{onClick:()=>{r.remove(O.id),Oe.info("Item dihapus")},className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]},O.id))}),N.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[N.jsxs("div",{className:"text-xl font-bold",children:["Total: Rp ",P.toLocaleString("id-ID")]}),N.jsx("button",{onClick:q,className:"px-4 py-2 rounded-lg bg-green-600 text-white",children:"Checkout (Alt+K)"})]})]})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("h3",{className:"font-semibold mb-2",children:"Riwayat Penjualan"}),N.jsx("div",{className:"grid gap-2 max-h-[500px] overflow-auto",children:l.map(O=>{var H,ne;return N.jsxs("div",{className:"p-2 rounded bg-black/5 flex flex-col gap-1",children:[N.jsxs("div",{className:"text-sm opacity-70",children:[mt(((ne=(H=O.date)==null?void 0:H.toDate)==null?void 0:ne.call(H))||new Date).format("DD/MM/YYYY")," ","• ",String(O.paymentMethod||"").toUpperCase()]}),N.jsxs("div",{className:"font-semibold",children:["Rp ",Number(O.total||0).toLocaleString("id-ID")]}),N.jsxs("div",{className:"flex gap-2 text-xs",children:[N.jsx("button",{onClick:()=>{var ae,F;return h({date:mt(((F=(ae=O.date)==null?void 0:ae.toDate)==null?void 0:F.call(ae))||new Date).format("DD/MM/YYYY"),items:O.items,total:O.total,method:O.paymentMethod})},className:"px-2 py-1 rounded bg-black/10",children:"Cetak Struk"}),N.jsx("button",{onClick:()=>W(O),className:"px-2 py-1 rounded bg-black/10",children:"Edit Total"}),N.jsx("button",{onClick:()=>U(O),className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]})]},O.id)})})]})]}),u&&N.jsx(oH,{data:u,onClose:()=>h(null)})]})}const cH=t=>{const e=(t||"").toString().trim().toLowerCase();return e?e.toUpperCase():"-"},u4=t=>t.kind==="inventory"||t.kind==="other"?t.kind:Array.isArray(t.items)&&t.items.some(n=>!!(n!=null&&n.productId))?"inventory":"other";function uH(){const{org:t,user:e}=Vr(),{role:n}=Ea(),r=n==="admin",{addCashOut:i}=_x(),[s,o]=le.useState([]),[a,l]=le.useState([]),[c,u]=le.useState(()=>mt().format("YYYY-MM-DD")),[h,p]=le.useState(""),[f,y]=le.useState("tunai"),[b,A]=le.useState("inventory"),[v,_]=le.useState(""),[k,R]=le.useState(""),[M,z]=le.useState(""),[I,S]=le.useState([]),L=le.useRef(null),[D,x]=le.useState(""),[w,P]=le.useState(""),[j,q]=le.useState([]);le.useEffect(()=>{const Q=async()=>{if(!t)return;const ce=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),he=(await Tn(ce)).docs.map(_e=>({id:_e.id,..._e.data()}));he.sort((_e,xe)=>String(_e.name||"").localeCompare(String(xe.name||""))),o(he),!v&&he.length&&_(he[0].id)},re=async()=>{if(!t)return;const ce=Pn(It(Ke,"purchases"),Xt("orgId","==",t.id)),he=(await Tn(ce)).docs.map(_e=>{const xe=_e.data();return{id:_e.id,orgId:xe.orgId,date:xe.date,supplier:xe.supplier??"",method:xe.method??"",kind:xe.kind??void 0,items:Array.isArray(xe.items)?xe.items:[],itemsOther:Array.isArray(xe.itemsOther)?xe.itemsOther:[],total:Number(xe.total||0),createdAt:xe.createdAt,voidedAt:xe.voidedAt??null,voidedByUid:xe.voidedByUid??null}});he.sort((_e,xe)=>{var De,je,We,Ae;return(((je=(De=_e.createdAt)==null?void 0:De.toMillis)==null?void 0:je.call(De))||0)-(((Ae=(We=xe.createdAt)==null?void 0:We.toMillis)==null?void 0:Ae.call(We))||0)}),he.reverse(),l(he)};Q(),re()},[t==null?void 0:t.id]);const U=()=>{var pe;if(!v)return Oe.error("Pilih produk");if(!k||!M)return Oe.error("Isi qty dan harga modal");const Q=s.find(he=>he.id===v);if(!Q)return Oe.error("Produk tidak ditemukan");const re=I.findIndex(he=>he.productId===v),ce={productId:v,name:Q.name,qty:Number(k||0),unitCost:Number(M||0)};if(re>=0){const he=[...I];he[re]={...he[re],qty:he[re].qty+ce.qty,unitCost:ce.unitCost},S(he)}else S(he=>[...he,ce]);R(""),z(""),(pe=L.current)==null||pe.focus()},W=Q=>S(re=>re.filter(ce=>ce.productId!==Q)),O=()=>{if(!D.trim()||!w)return Oe.error("Isi nama dan harga");q(Q=>[...Q,{name:D.trim(),amount:Number(w||0)}]),x(""),P("")},H=Q=>q(re=>re.filter(ce=>ce.name!==Q)),ne=le.useMemo(()=>I.reduce((Q,re)=>Q+re.qty*re.unitCost,0),[I]),ae=le.useMemo(()=>j.reduce((Q,re)=>Q+Number(re.amount||0),0),[j]),F=b==="inventory"?ne:ae,Y=async()=>{if(!t)return Oe.error("Organisasi belum siap");if(!r)return Oe.error("Hanya admin");const Q=h.trim()||"Tanpa Pemasok";if(b==="inventory"&&!I.length||b==="other"&&!j.length)return Oe.error("Item kosong");try{if(b==="inventory"){const he=await Vh(Ke,async _e=>{const xe=Ct(It(Ke,"purchases")),De={orgId:t.id,date:kn.fromDate(mt(c).toDate()),supplier:Q,method:f||"tunai",kind:"inventory",items:I,itemsOther:[],total:F,createdAt:fn(),voidedAt:null,voidedByUid:null};for(const je of I){const We=Ct(Ke,"products",je.productId),Ae=await _e.get(We);if(!Ae.exists())throw new Error("Produk tidak ditemukan: "+je.name);const $=Ae.data(),Te=Number(($==null?void 0:$.stock)||0),Pe=Number(($==null?void 0:$.avgCost)||0),be=Number(($==null?void 0:$.stockContent)||0),Ee=!!($!=null&&$.hasMeasure),Ve=($==null?void 0:$.measureUnit)||null,Be=Number(($==null?void 0:$.contentPerItem)||0),Ze=Number(je.qty||0),ot=Number(je.unitCost||0),$e=Te+Ze,it=$e>0?(Pe*Te+ot*Ze)/$e:0,lt=Ee?Ze*Be:0,Nt=Ee?be+lt:be;_e.update(We,{stock:$e,avgCost:it,...Ee?{stockContent:Nt}:{}});const ct=Ct(It(Ke,"stockMoves"));_e.set(ct,{orgId:t.id,productId:je.productId,type:"purchase",qty:Ze,stockBefore:Te,stockAfter:$e,avgBefore:Pe,avgAfter:it,unitCost:ot,measureUnit:Ee?Ve:null,contentDelta:Ee?lt:0,contentBefore:Ee?be:0,contentAfter:Ee?Nt:0,reason:`Pembelian dari ${Q}`,purchaseId:xe.id,createdAt:fn(),byUid:(e==null?void 0:e.uid)||null})}return _e.set(xe,De),xe.id});if(await an({orgId:t.id,user:e,entity:"purchase",action:"create",entityId:he,after:{supplier:Q,method:f||"tunai",kind:"inventory",total:F,itemCount:I.length}}),(f||"tunai")==="tunai")try{await i(F,`Pembelian bahan baku dari ${Q}`)}catch{}}else{const he=await yi(It(Ke,"purchases"),{orgId:t.id,date:kn.fromDate(mt(c).toDate()),supplier:Q,method:f||"tunai",kind:"other",items:[],itemsOther:j,total:F,createdAt:fn(),voidedAt:null,voidedByUid:null});if(await an({orgId:t.id,user:e,entity:"purchase",action:"create",entityId:he.id,after:{supplier:Q,method:f||"tunai",kind:"other",total:F,itemCount:j.length}}),(f||"tunai")==="tunai")try{await i(F,`Pembelian lainnya dari ${Q}`)}catch{}}p(""),S([]),q([]),Oe.success("Pembelian disimpan");const re=Pn(It(Ke,"purchases"),Xt("orgId","==",t.id)),pe=(await Tn(re)).docs.map(he=>{const _e=he.data();return{id:he.id,orgId:_e.orgId,date:_e.date,supplier:_e.supplier??"",method:_e.method??"",kind:_e.kind??void 0,items:Array.isArray(_e.items)?_e.items:[],itemsOther:Array.isArray(_e.itemsOther)?_e.itemsOther:[],total:Number(_e.total||0),createdAt:_e.createdAt,voidedAt:_e.voidedAt??null,voidedByUid:_e.voidedByUid??null}});pe.sort((he,_e)=>{var xe,De,je,We;return(((De=(xe=he.createdAt)==null?void 0:xe.toMillis)==null?void 0:De.call(xe))||0)-(((We=(je=_e.createdAt)==null?void 0:je.toMillis)==null?void 0:We.call(je))||0)}),pe.reverse(),l(pe)}catch(re){Oe.error((re==null?void 0:re.message)||"Gagal menyimpan pembelian")}},Z=async Q=>{if(!t)return;if(!r)return Oe.error("Hanya admin");if(Q.voidedAt)return Oe.info("Dokumen ini sudah dibatalkan");const re=u4(Q);try{if(re==="inventory"){const _e=Array.isArray(Q.items)?Q.items:[];await Vh(Ke,async xe=>{var De,je;for(const We of _e){const Ae=Ct(Ke,"products",We.productId),$=await xe.get(Ae);if(!$.exists())throw new Error("Produk tidak ditemukan: "+We.name);const Te=Number(((De=$.data())==null?void 0:De.stock)||0);if(Te<We.qty)throw new Error(`Tidak bisa void. Stok ${We.name} tidak cukup (${Te} < ${We.qty}).`)}for(const We of _e){const Ae=Ct(Ke,"products",We.productId),$=await xe.get(Ae),Te=Number(((je=$.data())==null?void 0:je.stock)||0),Pe=Te-We.qty;xe.update(Ae,{stock:Pe});const be=Ct(It(Ke,"stockMoves"));xe.set(be,{orgId:t.id,productId:We.productId,type:"purchase_void",qty:Number(We.qty||0),stockBefore:Te,stockAfter:Pe,unitCost:Number(We.unitCost||0),reason:`Void pembelian ${Q.id}`,purchaseId:Q.id,createdAt:fn(),byUid:(e==null?void 0:e.uid)||null})}xe.set(Ct(Ke,"purchases",Q.id),{voidedAt:fn(),voidedByUid:(e==null?void 0:e.uid)||null},{merge:!0})})}else await br(Ct(Ke,"purchases",Q.id),{voidedAt:fn(),voidedByUid:(e==null?void 0:e.uid)||null},{merge:!0});await an({orgId:t.id,user:e,entity:"purchase",action:"delete",entityId:Q.id,before:{supplier:Q.supplier||"",total:Number(Q.total||0),kind:re},after:{status:"void"}}),Oe.success("Pembelian dibatalkan");const ce=Pn(It(Ke,"purchases"),Xt("orgId","==",t.id)),he=(await Tn(ce)).docs.map(_e=>{const xe=_e.data();return{id:_e.id,orgId:xe.orgId,date:xe.date,supplier:xe.supplier??"",method:xe.method??"",kind:xe.kind??void 0,items:Array.isArray(xe.items)?xe.items:[],itemsOther:Array.isArray(xe.itemsOther)?xe.itemsOther:[],total:Number(xe.total||0),createdAt:xe.createdAt,voidedAt:xe.voidedAt??null,voidedByUid:xe.voidedByUid??null}});he.sort((_e,xe)=>{var De,je,We,Ae;return(((je=(De=_e.createdAt)==null?void 0:De.toMillis)==null?void 0:je.call(De))||0)-(((Ae=(We=xe.createdAt)==null?void 0:We.toMillis)==null?void 0:Ae.call(We))||0)}),he.reverse(),l(he)}catch(ce){Oe.error((ce==null?void 0:ce.message)||"Gagal membatalkan pembelian")}};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Pembelian"}),N.jsxs("div",{className:"card p-4 grid gap-3",children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2",children:[N.jsx("input",{type:"date",value:c,onChange:Q=>u(Q.target.value)}),N.jsx("input",{placeholder:"Pemasok (boleh kosong)",value:h,onChange:Q=>p(Q.target.value)}),N.jsxs("select",{value:f,onChange:Q=>y(Q.target.value),children:[N.jsx("option",{value:"tunai",children:"Tunai"}),N.jsx("option",{value:"qris",children:"QRIS"}),N.jsx("option",{value:"transfer",children:"Transfer"}),N.jsx("option",{value:"kartu",children:"Kartu"})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Jenis"}),N.jsxs("select",{value:b,onChange:Q=>A(Q.target.value),children:[N.jsx("option",{value:"inventory",children:"Bahan Baku"}),N.jsx("option",{value:"other",children:"Lainnya"})]})]}),N.jsxs("div",{className:"md:col-span-2 text-sm opacity-70 self-center",children:["Total: ",N.jsxs("b",{children:["Rp ",F.toLocaleString("id-ID")]})]})]}),b==="inventory"?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[N.jsx("select",{ref:L,value:v,onChange:Q=>_(Q.target.value),children:s.map(Q=>N.jsxs("option",{value:Q.id,children:[Q.name," ",Q.category?`(${Q.category})`:""," • Stok"," ",Number(Q.stock||0)]},Q.id))}),N.jsx("input",{type:"number",placeholder:"Qty",value:k,onChange:Q=>R(Q.target.value?Number(Q.target.value):"")}),N.jsx("input",{type:"number",placeholder:"Harga modal/unit",value:M,onChange:Q=>z(Q.target.value?Number(Q.target.value):"")}),N.jsx("button",{onClick:U,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Tambah Item"})]}),N.jsxs("div",{className:"grid gap-2",children:[I.map(Q=>N.jsxs("div",{className:"p-2 rounded bg-black/5 grid grid-cols-[1fr_auto_auto_auto] gap-2 items-center",children:[N.jsxs("div",{children:[N.jsx("div",{className:"font-semibold",children:Q.name}),N.jsxs("div",{className:"text-xs opacity-70",children:["ID: ",Q.productId]})]}),N.jsxs("div",{children:["Qty: ",Q.qty]}),N.jsxs("div",{children:["Unit: Rp ",Q.unitCost.toLocaleString("id-ID")]}),N.jsx("button",{onClick:()=>W(Q.productId),className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]},Q.productId)),I.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada item"})]})]}):N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[N.jsx("input",{placeholder:"Nama barang (mis. Susu)",value:D,onChange:Q=>x(Q.target.value)}),N.jsx("input",{type:"number",placeholder:"Harga",value:w,onChange:Q=>P(Q.target.value?Number(Q.target.value):"")}),N.jsx("button",{onClick:O,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Tambah Item"})]}),N.jsxs("div",{className:"grid gap-2",children:[j.map(Q=>N.jsxs("div",{className:"p-2 rounded bg-black/5 grid grid-cols-[1fr_auto_auto] gap-2 items-center",children:[N.jsx("div",{className:"font-semibold",children:Q.name}),N.jsxs("div",{children:["Rp ",Number(Q.amount||0).toLocaleString("id-ID")]}),N.jsx("button",{onClick:()=>H(Q.name),className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]},Q.name+Q.amount)),j.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada item"})]})]}),N.jsx("div",{children:N.jsx("button",{onClick:Y,className:"px-4 py-2 rounded bg-green-600 text-white",children:"Simpan Pembelian"})})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Riwayat Pembelian"}),N.jsxs("div",{className:"grid gap-2 max-h-[520px] overflow-auto",children:[a.map(Q=>{var We;const re=(We=Q.date)!=null&&We.toDate?mt(Q.date.toDate()).format("DD/MM/YYYY"):"-",ce=cH(Q.method),pe=u4(Q),he=!!Q.voidedAt,_e=Number(Q.total||0),xe=Array.isArray(Q.items)?Q.items.length:0,De=Array.isArray(Q.itemsOther)?Q.itemsOther.length:0,je=pe==="inventory"?xe:De;return N.jsxs("div",{className:`p-2 rounded grid grid-cols-[1fr_auto_auto] items-center gap-2 ${he?"bg-red-50":"bg-black/5"}`,children:[N.jsxs("div",{children:[N.jsxs("div",{className:"text-sm opacity-70",children:[re," • ",Q.supplier||"-"," • ",ce," •"," ",pe==="inventory"?"Bahan Baku":"Lainnya"]}),N.jsxs("div",{className:"font-semibold",children:["Rp ",_e.toLocaleString("id-ID")," ",he?N.jsx("span",{className:"text-red-600 text-xs",children:"(VOID)"}):null]}),N.jsxs("div",{className:"text-xs opacity-70",children:[je," item"]})]}),!he&&r&&N.jsx("button",{onClick:()=>Z(Q),className:"px-2 py-1 rounded bg-black/10",children:"Void"}),he&&N.jsx("div",{className:"text-xs opacity-70",children:"Dibatalkan"})]},Q.id)}),a.length===0&&N.jsx("div",{className:"opacity-70",children:"Belum ada pembelian"})]})]})]})}const hH="modulepreload",dH=function(t){return"/"+t},h4={},Q2=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=dH(l),l in h4)return;h4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":hH,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function rn(t){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(t)}var ti=Uint8Array,Yi=Uint16Array,wx=Int32Array,T1=new ti([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C1=new ti([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X2=new ti([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qP=function(t,e){for(var n=new Yi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new wx(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},HP=qP(T1,2),WP=HP.b,J2=HP.r;WP[28]=258,J2[258]=28;var $P=qP(C1,0),fH=$P.b,d4=$P.r,Z2=new Yi(32768);for(var _n=0;_n<32768;++_n){var il=(_n&43690)>>1|(_n&21845)<<1;il=(il&52428)>>2|(il&13107)<<2,il=(il&61680)>>4|(il&3855)<<4,Z2[_n]=((il&65280)>>8|(il&255)<<8)>>1}var Eo=function(t,e,n){for(var r=t.length,i=0,s=new Yi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Yi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Yi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],h=o[t[i]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)a[Z2[h]>>l]=c}else for(a=new Yi(r),i=0;i<r;++i)t[i]&&(a[i]=Z2[o[t[i]-1]++]>>15-t[i]);return a},Gl=new ti(288);for(var _n=0;_n<144;++_n)Gl[_n]=8;for(var _n=144;_n<256;++_n)Gl[_n]=9;for(var _n=256;_n<280;++_n)Gl[_n]=7;for(var _n=280;_n<288;++_n)Gl[_n]=8;var yp=new ti(32);for(var _n=0;_n<32;++_n)yp[_n]=5;var pH=Eo(Gl,9,0),gH=Eo(Gl,9,1),mH=Eo(yp,5,0),yH=Eo(yp,5,1),ev=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Cs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},tv=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Sx=function(t){return(t+7)/8|0},KP=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ti(t.subarray(e,n))},vH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ds=function(t,e,n){var r=new Error(e||vH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Ds),!n)throw r;return r},bH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new ti(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ti(i*3));var c=function(xe){var De=n.length;if(xe>De){var je=new ti(Math.max(De*2,xe));je.set(n),n=je}},u=e.f||0,h=e.p||0,p=e.b||0,f=e.l,y=e.d,b=e.m,A=e.n,v=i*8;do{if(!f){u=Cs(t,h,1);var _=Cs(t,h+1,3);if(h+=3,_)if(_==1)f=gH,y=yH,b=9,A=5;else if(_==2){var z=Cs(t,h,31)+257,I=Cs(t,h+10,15)+4,S=z+Cs(t,h+5,31)+1;h+=14;for(var L=new ti(S),D=new ti(19),x=0;x<I;++x)D[X2[x]]=Cs(t,h+x*3,7);h+=I*3;for(var w=ev(D),P=(1<<w)-1,j=Eo(D,w,1),x=0;x<S;){var q=j[Cs(t,h,P)];h+=q&15;var k=q>>4;if(k<16)L[x++]=k;else{var U=0,W=0;for(k==16?(W=3+Cs(t,h,3),h+=2,U=L[x-1]):k==17?(W=3+Cs(t,h,7),h+=3):k==18&&(W=11+Cs(t,h,127),h+=7);W--;)L[x++]=U}}var O=L.subarray(0,z),H=L.subarray(z);b=ev(O),A=ev(H),f=Eo(O,b,1),y=Eo(H,A,1)}else Ds(1);else{var k=Sx(h)+4,R=t[k-4]|t[k-3]<<8,M=k+R;if(M>i){l&&Ds(0);break}a&&c(p+R),n.set(t.subarray(k,M),p),e.b=p+=R,e.p=h=M*8,e.f=u;continue}if(h>v){l&&Ds(0);break}}a&&c(p+131072);for(var ne=(1<<b)-1,ae=(1<<A)-1,F=h;;F=h){var U=f[tv(t,h)&ne],Y=U>>4;if(h+=U&15,h>v){l&&Ds(0);break}if(U||Ds(2),Y<256)n[p++]=Y;else if(Y==256){F=h,f=null;break}else{var Z=Y-254;if(Y>264){var x=Y-257,Q=T1[x];Z=Cs(t,h,(1<<Q)-1)+WP[x],h+=Q}var re=y[tv(t,h)&ae],ce=re>>4;re||Ds(3),h+=re&15;var H=fH[ce];if(ce>3){var Q=C1[ce];H+=tv(t,h)&(1<<Q)-1,h+=Q}if(h>v){l&&Ds(0);break}a&&c(p+131072);var pe=p+Z;if(p<H){var he=s-H,_e=Math.min(H,pe);for(he+p<0&&Ds(3);p<_e;++p)n[p]=r[he+p]}for(;p<pe;++p)n[p]=n[p-H]}}e.l=f,e.p=F,e.b=p,e.f=u,f&&(u=1,e.m=b,e.d=y,e.n=A)}while(!u);return p!=n.length&&o?KP(n,0,p):n.subarray(0,p)},Jo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Dd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},nv=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:YP,l:0};if(i==1){var o=new ti(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(M,z){return M.f-z.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var p=s[0].s,r=1;r<i;++r)s[r].s>p&&(p=s[r].s);var f=new Yi(p+1),y=eb(n[u-1],f,0);if(y>e){var r=0,b=0,A=y-e,v=1<<A;for(s.sort(function(z,I){return f[I.s]-f[z.s]||z.f-I.f});r<i;++r){var _=s[r].s;if(f[_]>e)b+=v-(1<<y-f[_]),f[_]=e;else break}for(b>>=A;b>0;){var k=s[r].s;f[k]<e?b-=1<<e-f[k]++-1:++r}for(;r>=0&&b;--r){var R=s[r].s;f[R]==e&&(--f[R],++b)}y=e}return{t:new ti(f),l:y}},eb=function(t,e,n){return t.s==-1?Math.max(eb(t.l,e,n+1),eb(t.r,e,n+1)):e[t.s]=n},f4=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Yi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Md=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},GP=function(t,e,n){var r=n.length,i=Sx(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},p4=function(t,e,n,r,i,s,o,a,l,c,u){Jo(e,u++,n),++i[256];for(var h=nv(i,15),p=h.t,f=h.l,y=nv(s,15),b=y.t,A=y.l,v=f4(p),_=v.c,k=v.n,R=f4(b),M=R.c,z=R.n,I=new Yi(19),S=0;S<_.length;++S)++I[_[S]&31];for(var S=0;S<M.length;++S)++I[M[S]&31];for(var L=nv(I,7),D=L.t,x=L.l,w=19;w>4&&!D[X2[w-1]];--w);var P=c+5<<3,j=Md(i,Gl)+Md(s,yp)+o,q=Md(i,p)+Md(s,b)+o+14+3*w+Md(I,D)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&P<=j&&P<=q)return GP(e,u,t.subarray(l,l+c));var U,W,O,H;if(Jo(e,u,1+(q<j)),u+=2,q<j){U=Eo(p,f,0),W=p,O=Eo(b,A,0),H=b;var ne=Eo(D,x,0);Jo(e,u,k-257),Jo(e,u+5,z-1),Jo(e,u+10,w-4),u+=14;for(var S=0;S<w;++S)Jo(e,u+3*S,D[X2[S]]);u+=3*w;for(var ae=[_,M],F=0;F<2;++F)for(var Y=ae[F],S=0;S<Y.length;++S){var Z=Y[S]&31;Jo(e,u,ne[Z]),u+=D[Z],Z>15&&(Jo(e,u,Y[S]>>5&127),u+=Y[S]>>12)}}else U=pH,W=Gl,O=mH,H=yp;for(var S=0;S<a;++S){var Q=r[S];if(Q>255){var Z=Q>>18&31;Dd(e,u,U[Z+257]),u+=W[Z+257],Z>7&&(Jo(e,u,Q>>23&31),u+=T1[Z]);var re=Q&31;Dd(e,u,O[re]),u+=H[re],re>3&&(Dd(e,u,Q>>5&8191),u+=C1[re])}else Dd(e,u,U[Q]),u+=W[Q]}return Dd(e,u,U[256]),u+W[256]},xH=new wx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YP=new ti(0),_H=function(t,e,n,r,i,s){var o=s.z||t.length,a=new ti(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var h=xH[e-1],p=h>>13,f=h&8191,y=(1<<n)-1,b=s.p||new Yi(32768),A=s.h||new Yi(y+1),v=Math.ceil(n/3),_=2*v,k=function(We){return(t[We]^t[We+1]<<v^t[We+2]<<_)&y},R=new wx(25e3),M=new Yi(288),z=new Yi(32),I=0,S=0,L=s.i||0,D=0,x=s.w||0,w=0;L+2<o;++L){var P=k(L),j=L&32767,q=A[P];if(b[j]=q,A[P]=j,x<=L){var U=o-L;if((I>7e3||D>24576)&&(U>423||!c)){u=p4(t,l,0,R,M,z,S,D,w,L-w,u),D=I=S=0,w=L;for(var W=0;W<286;++W)M[W]=0;for(var W=0;W<30;++W)z[W]=0}var O=2,H=0,ne=f,ae=j-q&32767;if(U>2&&P==k(L-ae))for(var F=Math.min(p,U)-1,Y=Math.min(32767,L),Z=Math.min(258,U);ae<=Y&&--ne&&j!=q;){if(t[L+O]==t[L+O-ae]){for(var Q=0;Q<Z&&t[L+Q]==t[L+Q-ae];++Q);if(Q>O){if(O=Q,H=ae,Q>F)break;for(var re=Math.min(ae,Q-2),ce=0,W=0;W<re;++W){var pe=L-ae+W&32767,he=b[pe],_e=pe-he&32767;_e>ce&&(ce=_e,q=pe)}}}j=q,q=b[j],ae+=j-q&32767}if(H){R[D++]=268435456|J2[O]<<18|d4[H];var xe=J2[O]&31,De=d4[H]&31;S+=T1[xe]+C1[De],++M[257+xe],++z[De],x=L+O,++I}else R[D++]=t[L],++M[t[L]]}}for(L=Math.max(L,x);L<o;++L)R[D++]=t[L],++M[t[L]];u=p4(t,l,c,R,M,z,S,D,w,L-w,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=A,s.p=b,s.i=L,s.w=x)}else{for(var L=s.w||0;L<o+c;L+=65535){var je=L+65535;je>=o&&(l[u/8|0]=c,je=o),u=GP(l,u+1,t.subarray(L,je))}s.i=o}return KP(a,0,r+Sx(u)+i)},QP=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ti(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return _H(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},XP=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},SH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=QP();i.p(e.dictionary),XP(t,2,i.d())}},kH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ds(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ds(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function tb(t,e){e||(e={});var n=QP();n.p(t);var r=wH(t,e,e.dictionary?6:2,4);return SH(r,e),XP(r,r.length-4,n.d()),r}function AH(t,e){return bH(t.subarray(kH(t),-4),{i:2},e,e)}var EH=typeof TextDecoder<"u"&&new TextDecoder,IH=0;try{EH.decode(YP,{stream:!0}),IH=1}catch{}var yt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function rv(){yt.console&&typeof yt.console.log=="function"&&yt.console.log.apply(yt.console,arguments)}var hn={log:rv,warn:function(t){yt.console&&(typeof yt.console.warn=="function"?yt.console.warn.apply(yt.console,arguments):rv.call(null,arguments))},error:function(t){yt.console&&(typeof yt.console.error=="function"?yt.console.error.apply(yt.console,arguments):rv(t))}};function iv(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Rc(r.response,e,n)},r.onerror=function(){hn.error("could not download file")},r.send()}function g4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Zg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Af,nb,Rc=yt.saveAs||((typeof window>"u"?"undefined":rn(window))!=="object"||window!==yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=yt.URL||yt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?g4(i.href)?iv(t,e,n):Zg(i,i.target="_blank"):Zg(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Zg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(g4(t))iv(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Zg(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:rn(s)!=="object"&&(hn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return iv(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(yt.HTMLElement)||yt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":rn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=yt.URL||yt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function JP(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function sv(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Kr(n,r,i,s,e[0],7,-680876936),s=Kr(s,n,r,i,e[1],12,-389564586),i=Kr(i,s,n,r,e[2],17,606105819),r=Kr(r,i,s,n,e[3],22,-1044525330),n=Kr(n,r,i,s,e[4],7,-176418897),s=Kr(s,n,r,i,e[5],12,1200080426),i=Kr(i,s,n,r,e[6],17,-1473231341),r=Kr(r,i,s,n,e[7],22,-45705983),n=Kr(n,r,i,s,e[8],7,1770035416),s=Kr(s,n,r,i,e[9],12,-1958414417),i=Kr(i,s,n,r,e[10],17,-42063),r=Kr(r,i,s,n,e[11],22,-1990404162),n=Kr(n,r,i,s,e[12],7,1804603682),s=Kr(s,n,r,i,e[13],12,-40341101),i=Kr(i,s,n,r,e[14],17,-1502002290),n=Gr(n,r=Kr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Gr(s,n,r,i,e[6],9,-1069501632),i=Gr(i,s,n,r,e[11],14,643717713),r=Gr(r,i,s,n,e[0],20,-373897302),n=Gr(n,r,i,s,e[5],5,-701558691),s=Gr(s,n,r,i,e[10],9,38016083),i=Gr(i,s,n,r,e[15],14,-660478335),r=Gr(r,i,s,n,e[4],20,-405537848),n=Gr(n,r,i,s,e[9],5,568446438),s=Gr(s,n,r,i,e[14],9,-1019803690),i=Gr(i,s,n,r,e[3],14,-187363961),r=Gr(r,i,s,n,e[8],20,1163531501),n=Gr(n,r,i,s,e[13],5,-1444681467),s=Gr(s,n,r,i,e[2],9,-51403784),i=Gr(i,s,n,r,e[7],14,1735328473),n=Yr(n,r=Gr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Yr(s,n,r,i,e[8],11,-2022574463),i=Yr(i,s,n,r,e[11],16,1839030562),r=Yr(r,i,s,n,e[14],23,-35309556),n=Yr(n,r,i,s,e[1],4,-1530992060),s=Yr(s,n,r,i,e[4],11,1272893353),i=Yr(i,s,n,r,e[7],16,-155497632),r=Yr(r,i,s,n,e[10],23,-1094730640),n=Yr(n,r,i,s,e[13],4,681279174),s=Yr(s,n,r,i,e[0],11,-358537222),i=Yr(i,s,n,r,e[3],16,-722521979),r=Yr(r,i,s,n,e[6],23,76029189),n=Yr(n,r,i,s,e[9],4,-640364487),s=Yr(s,n,r,i,e[12],11,-421815835),i=Yr(i,s,n,r,e[15],16,530742520),n=Qr(n,r=Yr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Qr(s,n,r,i,e[7],10,1126891415),i=Qr(i,s,n,r,e[14],15,-1416354905),r=Qr(r,i,s,n,e[5],21,-57434055),n=Qr(n,r,i,s,e[12],6,1700485571),s=Qr(s,n,r,i,e[3],10,-1894986606),i=Qr(i,s,n,r,e[10],15,-1051523),r=Qr(r,i,s,n,e[1],21,-2054922799),n=Qr(n,r,i,s,e[8],6,1873313359),s=Qr(s,n,r,i,e[15],10,-30611744),i=Qr(i,s,n,r,e[6],15,-1560198380),r=Qr(r,i,s,n,e[13],21,1309151649),n=Qr(n,r,i,s,e[4],6,-145523070),s=Qr(s,n,r,i,e[11],10,-1120210379),i=Qr(i,s,n,r,e[2],15,718787259),r=Qr(r,i,s,n,e[9],21,-343485551),t[0]=Al(n,t[0]),t[1]=Al(r,t[1]),t[2]=Al(i,t[2]),t[3]=Al(s,t[3])}function L1(t,e,n,r,i,s){return e=Al(Al(e,t),Al(r,s)),Al(e<<i|e>>>32-i,n)}function Kr(t,e,n,r,i,s,o){return L1(e&n|~e&r,t,e,i,s,o)}function Gr(t,e,n,r,i,s,o){return L1(e&r|n&~r,t,e,i,s,o)}function Yr(t,e,n,r,i,s,o){return L1(e^n^r,t,e,i,s,o)}function Qr(t,e,n,r,i,s,o){return L1(n^(e|~r),t,e,i,s,o)}function ZP(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)sv(r,NH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(sv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,sv(r,i),r}function NH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Af=yt.atob.bind(yt),nb=yt.btoa.bind(yt);var m4="0123456789abcdef".split("");function PH(t){for(var e="",n=0;n<4;n++)e+=m4[t>>8*n+4&15]+m4[t>>8*n&15];return e}function TH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function rb(t){return ZP(t).map(TH).join("")}var CH=function(t){for(var e=0;e<t.length;e++)t[e]=PH(t[e]);return t.join("")}(ZP("hello"))!="5d41402abc4b2a76b9719d911017c592";function Al(t,e){if(CH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ib(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var h=e.length,p=0,f=0,y="";for(l=0;l<h;l++)f=(f+(u=a[p=(p+1)%256]))%256,a[p]=a[f],a[f]=u,o=a[(a[p]+a[f])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var y4={print:4,modify:8,copy:16,"annot-forms":32};function Ju(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(y4.perm!==void 0)throw new Error("Invalid permission: "+a);i+=y4[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=rb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ib(this.encryptionKey,this.padding)}function Zu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function v4(t){if(rn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){yt.console&&hn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vp(t){if(!(this instanceof vp))return new vp(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function eT(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function gl(t,e,n,r,i){if(!(this instanceof gl))return new gl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,eT.call(this,r,i)}function Fc(t,e,n,r,i){if(!(this instanceof Fc))return new Fc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,eT.call(this,r,i)}function dt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;rn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=v4;var y="1.3",b=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(E){y=E};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return A};var v=f.__private__.getPageFormat=function(E){return A[E]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},k=_.COMPAT;function R(){this.saveGraphicsState(),$(new nt(Xe,0,0,-Xe,0,qr()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),c="n",k=_.ADVANCED}function M(){this.restoreGraphicsState(),c="S",k=_.COMPAT}var z=f.__private__.combineFontStyleAndFontWeight=function(E,K){if(E=="bold"&&K=="normal"||E=="bold"&&K==400||E=="normal"&&K=="italic"||E=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(E=K==400||K==="normal"?E==="italic"?"italic":"normal":K!=700&&K!=="bold"||E!=="normal"?(K==700?"bold":K)+""+E:"bold"),E};f.advancedAPI=function(E){var K=k===_.COMPAT;return K&&R.call(this),typeof E!="function"||(E(this),K&&M.call(this)),this},f.compatAPI=function(E){var K=k===_.ADVANCED;return K&&M.call(this),typeof E!="function"||(E(this),K&&R.call(this)),this},f.isAdvancedAPI=function(){return k===_.ADVANCED};var I,S=function(E){if(k!==_.ADVANCED)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=f.roundToPrecision=f.__private__.roundToPrecision=function(E,K){var oe=e||K;if(isNaN(E)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(oe).replace(/0+$/,"")};I=f.hpf=f.__private__.hpf=typeof l=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return L(E,l)}:l==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return L(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return L(E,16)};var D=f.f2=f.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return L(E,2)},x=f.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return L(E,3)},w=f.scale=f.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return k===_.COMPAT?E*Xe:k===_.ADVANCED?E:void 0},P=function(E){return k===_.COMPAT?qr()-E:k===_.ADVANCED?E:void 0},j=function(E){return w(P(E))};f.__private__.setPrecision=f.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var q,U="00000000000000000000000000000000",W=f.__private__.getFileId=function(){return U},O=f.__private__.setFileId=function(E){return U=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(bn=new Ju(u.userPermissions,u.userPassword,u.ownerPassword,U)),U};f.setFileId=function(E){return O(E),this},f.getFileId=function(){return W()};var H=f.__private__.convertDateToPDFDate=function(E){var K=E.getTimezoneOffset(),oe=K<0?"+":"-",ue=Math.floor(Math.abs(K/60)),ye=Math.abs(K%60),Ne=[oe,Z(ue),"'",Z(ye),"'"].join("");return["D:",E.getFullYear(),Z(E.getMonth()+1),Z(E.getDate()),Z(E.getHours()),Z(E.getMinutes()),Z(E.getSeconds()),Ne].join("")},ne=f.__private__.convertPDFDateToDate=function(E){var K=parseInt(E.substr(2,4),10),oe=parseInt(E.substr(6,2),10)-1,ue=parseInt(E.substr(8,2),10),ye=parseInt(E.substr(10,2),10),Ne=parseInt(E.substr(12,2),10),Ue=parseInt(E.substr(14,2),10);return new Date(K,oe,ue,ye,Ne,Ue,0)},ae=f.__private__.setCreationDate=function(E){var K;if(E===void 0&&(E=new Date),E instanceof Date)K=H(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=E}return q=K},F=f.__private__.getCreationDate=function(E){var K=q;return E==="jsDate"&&(K=ne(q)),K};f.setCreationDate=function(E){return ae(E),this},f.getCreationDate=function(E){return F(E)};var Y,Z=f.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},Q=f.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},re=0,ce=[],pe=[],he=0,_e=[],xe=[],De=!1,je=pe,We=function(){re=0,he=0,pe=[],ce=[],_e=[],bs=Vn(),zr=Vn()};f.__private__.setCustomOutputDestination=function(E){De=!0,je=E};var Ae=function(E){De||(je=E)};f.__private__.resetCustomOutputDestination=function(){De=!1,je=pe};var $=f.__private__.out=function(E){return E=E.toString(),he+=E.length+1,je.push(E),je},Te=f.__private__.write=function(E){return $(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},Pe=f.__private__.getArrayBuffer=function(E){for(var K=E.length,oe=new ArrayBuffer(K),ue=new Uint8Array(oe);K--;)ue[K]=E.charCodeAt(K);return oe},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return be};var Ee=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(E){return Ee=k===_.ADVANCED?E/Xe:E,this};var Ve,Be=f.__private__.getFontSize=f.getFontSize=function(){return k===_.COMPAT?Ee:Ee*Xe},Ze=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(E){return Ze=E,this},f.__private__.getR2L=f.getR2L=function(){return Ze};var ot,$e=f.__private__.setZoomMode=function(E){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))Ve=E;else if(isNaN(E)){if(K.indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');Ve=E}else Ve=parseInt(E,10)};f.__private__.getZoomMode=function(){return Ve};var it,lt=f.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');ot=E};f.__private__.getPageMode=function(){return ot};var Nt=f.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');it=E};f.__private__.getLayoutMode=function(){return it},f.__private__.setDisplayMode=f.setDisplayMode=function(E,K,oe){return $e(E),Nt(K),lt(oe),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(E){if(Object.keys(ct).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[E]},f.__private__.getDocumentProperties=function(){return ct},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(E){for(var K in ct)ct.hasOwnProperty(K)&&E[K]&&(ct[K]=E[K]);return this},f.__private__.setDocumentProperty=function(E,K){if(Object.keys(ct).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[E]=K};var Pt,Xe,An,Lt,kr,_t={},gt={},ai=[],Mt={},ts={},ln={},cr={},li=null,Jt=0,ht=[],Bt=new v4(f),_i=t.hotfixes||[],Fn={},Br={},ji=[],nt=function E(K,oe,ue,ye,Ne,Ue){if(!(this instanceof E))return new E(K,oe,ue,ye,Ne,Ue);isNaN(K)&&(K=1),isNaN(oe)&&(oe=0),isNaN(ue)&&(ue=0),isNaN(ye)&&(ye=1),isNaN(Ne)&&(Ne=0),isNaN(Ue)&&(Ue=0),this._matrix=[K,oe,ue,ye,Ne,Ue]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(E)},nt.prototype.multiply=function(E){var K=E.sx*this.sx+E.shy*this.shx,oe=E.sx*this.shy+E.shy*this.sy,ue=E.shx*this.sx+E.sy*this.shx,ye=E.shx*this.shy+E.sy*this.sy,Ne=E.tx*this.sx+E.ty*this.shx+this.tx,Ue=E.tx*this.shy+E.ty*this.sy+this.ty;return new nt(K,oe,ue,ye,Ne,Ue)},nt.prototype.decompose=function(){var E=this.sx,K=this.shy,oe=this.shx,ue=this.sy,ye=this.tx,Ne=this.ty,Ue=Math.sqrt(E*E+K*K),Qe=(E/=Ue)*oe+(K/=Ue)*ue;oe-=E*Qe,ue-=K*Qe;var g=Math.sqrt(oe*oe+ue*ue);return Qe/=g,E*(ue/=g)<K*(oe/=g)&&(E=-E,K=-K,Qe=-Qe,Ue=-Ue),{scale:new nt(Ue,0,0,g,0,0),translate:new nt(1,0,0,1,ye,Ne),rotate:new nt(E,K,-K,E,0,0),skew:new nt(1,0,Qe,1,0,0)}},nt.prototype.toString=function(E){return this.join(" ")},nt.prototype.inversed=function(){var E=this.sx,K=this.shy,oe=this.shx,ue=this.sy,ye=this.tx,Ne=this.ty,Ue=1/(E*ue-K*oe),Qe=ue*Ue,g=-K*Ue,C=-oe*Ue,B=E*Ue;return new nt(Qe,g,C,B,-Qe*ye-C*Ne,-g*ye-B*Ne)},nt.prototype.applyToPoint=function(E){var K=E.x*this.sx+E.y*this.shx+this.tx,oe=E.x*this.shy+E.y*this.sy+this.ty;return new Uo(K,oe)},nt.prototype.applyToRectangle=function(E){var K=this.applyToPoint(E),oe=this.applyToPoint(new Uo(E.x+E.w,E.y+E.h));return new Ua(K.x,K.y,oe.x-K.x,oe.y-K.y)},nt.prototype.clone=function(){var E=this.sx,K=this.shy,oe=this.shx,ue=this.sy,ye=this.tx,Ne=this.ty;return new nt(E,K,oe,ue,ye,Ne)},f.Matrix=nt;var wi=f.matrixMult=function(E,K){return K.multiply(E)},Ur=new nt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ur;var nr=function(E,K){if(!ts[E]){var oe=(K instanceof gl?"Sh":"P")+(Object.keys(Mt).length+1).toString(10);K.id=oe,ts[E]=oe,Mt[oe]=K,Bt.publish("addPattern",K)}};f.ShadingPattern=gl,f.TilingPattern=Fc,f.addShadingPattern=function(E,K){return S("addShadingPattern()"),nr(E,K),this},f.beginTilingPattern=function(E){S("beginTilingPattern()"),za(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},f.endTilingPattern=function(E,K){S("endTilingPattern()"),K.stream=xe[Y].join(`
`),nr(E,K),Bt.publish("endTilingPattern",K),ji.pop().restore()};var Wn=f.__private__.newObject=function(){var E=Vn();return rr(E,!0),E},Vn=f.__private__.newObjectDeferred=function(){return re++,ce[re]=function(){return he},re},rr=function(E,K){return K=typeof K=="boolean"&&K,ce[E]=he,K&&$(E+" 0 obj"),E},Ia=f.__private__.newAdditionalObject=function(){var E={objId:Vn(),content:""};return _e.push(E),E},bs=Vn(),zr=Vn(),Si=f.__private__.decodeColorString=function(E){var K=E.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var oe=parseFloat(K[0]);K=[oe,oe,oe,"r"]}for(var ue="#",ye=0;ye<3;ye++)ue+=("0"+Math.floor(255*parseFloat(K[ye])).toString(16)).slice(-2);return ue},ci=f.__private__.encodeColorString=function(E){var K;typeof E=="string"&&(E={ch1:E});var oe=E.ch1,ue=E.ch2,ye=E.ch3,Ne=E.ch4,Ue=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var Qe=new JP(oe);if(Qe.ok)oe=Qe.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var g=parseInt(oe.substr(1),16);oe=g>>16&255,ue=g>>8&255,ye=255&g}if(ue===void 0||Ne===void 0&&oe===ue&&ue===ye)if(typeof oe=="string")K=oe+" "+Ue[0];else switch(E.precision){case 2:K=D(oe/255)+" "+Ue[0];break;case 3:default:K=x(oe/255)+" "+Ue[0]}else if(Ne===void 0||rn(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return K=["1.","1.","1.",Ue[1]].join(" ");if(typeof oe=="string")K=[oe,ue,ye,Ue[1]].join(" ");else switch(E.precision){case 2:K=[D(oe/255),D(ue/255),D(ye/255),Ue[1]].join(" ");break;default:case 3:K=[x(oe/255),x(ue/255),x(ye/255),Ue[1]].join(" ")}}else if(typeof oe=="string")K=[oe,ue,ye,Ne,Ue[2]].join(" ");else switch(E.precision){case 2:K=[D(oe),D(ue),D(ye),D(Ne),Ue[2]].join(" ");break;case 3:default:K=[x(oe),x(ue),x(ye),x(Ne),Ue[2]].join(" ")}return K},ui=f.__private__.getFilters=function(){return o},$n=f.__private__.putStream=function(E){var K=(E=E||{}).data||"",oe=E.filters||ui(),ue=E.alreadyAppliedFilters||[],ye=E.addLength1||!1,Ne=K.length,Ue=E.objectId,Qe=function(St){return St};if(u!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Qe=bn.encryptor(Ue,0));var g={};oe===!0&&(oe=["FlateEncode"]);var C=E.additionalKeyValues||[],B=(g=dt.API.processDataByFilters!==void 0?dt.API.processDataByFilters(K,oe):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(g.data.length!==0&&(C.push({key:"Length",value:g.data.length}),ye===!0&&C.push({key:"Length1",value:Ne})),B.length!=0)if(B.split("/").length-1==1)C.push({key:"Filter",value:B});else{C.push({key:"Filter",value:"["+B+"]"});for(var ee=0;ee<C.length;ee+=1)if(C[ee].key==="DecodeParms"){for(var me=[],ke=0;ke<g.reverseChain.split("/").length-1;ke+=1)me.push("null");me.push(C[ee].value),C[ee].value="["+me.join(" ")+"]"}}$("<<");for(var ze=0;ze<C.length;ze++)$("/"+C[ze].key+" "+C[ze].value);$(">>"),g.data.length!==0&&($("stream"),$(Qe(g.data)),$("endstream"))},Fi=f.__private__.putPage=function(E){var K=E.number,oe=E.data,ue=E.objId,ye=E.contentsObjId;rr(ue,!0),$("<</Type /Page"),$("/Parent "+E.rootDictionaryObjId+" 0 R"),$("/Resources "+E.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(I(E.mediaBox.bottomLeftX))+" "+parseFloat(I(E.mediaBox.bottomLeftY))+" "+I(E.mediaBox.topRightX)+" "+I(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&$("/CropBox ["+I(E.cropBox.bottomLeftX)+" "+I(E.cropBox.bottomLeftY)+" "+I(E.cropBox.topRightX)+" "+I(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&$("/BleedBox ["+I(E.bleedBox.bottomLeftX)+" "+I(E.bleedBox.bottomLeftY)+" "+I(E.bleedBox.topRightX)+" "+I(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&$("/TrimBox ["+I(E.trimBox.bottomLeftX)+" "+I(E.trimBox.bottomLeftY)+" "+I(E.trimBox.topRightX)+" "+I(E.trimBox.topRightY)+"]"),E.artBox!==null&&$("/ArtBox ["+I(E.artBox.bottomLeftX)+" "+I(E.artBox.bottomLeftY)+" "+I(E.artBox.topRightX)+" "+I(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&$("/UserUnit "+E.userUnit),Bt.publish("putPage",{objId:ue,pageContext:ht[K],pageNumber:K,page:oe}),$("/Contents "+ye+" 0 R"),$(">>"),$("endobj");var Ne=oe.join(`
`);return k===_.ADVANCED&&(Ne+=`
Q`),rr(ye,!0),$n({data:Ne,filters:ui(),objectId:ye}),$("endobj"),ue},Ys=f.__private__.putPages=function(){var E,K,oe=[];for(E=1;E<=Jt;E++)ht[E].objId=Vn(),ht[E].contentsObjId=Vn();for(E=1;E<=Jt;E++)oe.push(Fi({number:E,data:xe[E],objId:ht[E].objId,contentsObjId:ht[E].contentsObjId,mediaBox:ht[E].mediaBox,cropBox:ht[E].cropBox,bleedBox:ht[E].bleedBox,trimBox:ht[E].trimBox,artBox:ht[E].artBox,userUnit:ht[E].userUnit,rootDictionaryObjId:bs,resourceDictionaryObjId:zr}));rr(bs,!0),$("<</Type /Pages");var ue="/Kids [";for(K=0;K<Jt;K++)ue+=oe[K]+" 0 R ";$(ue+"]"),$("/Count "+Jt),$(">>"),$("endobj"),Bt.publish("postPutPages")},Qs=function(E){Bt.publish("putFont",{font:E,out:$,newObject:Wn,putStream:$n}),E.isAlreadyPutted!==!0&&(E.objectNumber=Wn(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Zu(E.postScriptName)),$("/Subtype /Type1"),typeof E.encoding=="string"&&$("/Encoding /"+E.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Xs=function(){for(var E in _t)_t.hasOwnProperty(E)&&(h===!1||h===!0&&p.hasOwnProperty(E))&&Qs(_t[E])},Lo=function(E){E.objectNumber=Wn();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[I(E.x),I(E.y),I(E.x+E.width),I(E.y+E.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var oe=E.pages[1].join(`
`);$n({data:oe,additionalKeyValues:K,objectId:E.objectNumber}),$("endobj")},Ro=function(){for(var E in Fn)Fn.hasOwnProperty(E)&&Lo(Fn[E])},bu=function(E,K){var oe,ue=[],ye=1/(K-1);for(oe=0;oe<1;oe+=ye)ue.push(oe);if(ue.push(1),E[0].offset!=0){var Ne={offset:0,color:E[0].color};E.unshift(Ne)}if(E[E.length-1].offset!=1){var Ue={offset:1,color:E[E.length-1].color};E.push(Ue)}for(var Qe="",g=0,C=0;C<ue.length;C++){for(oe=ue[C];oe>E[g+1].offset;)g++;var B=E[g].offset,ee=(oe-B)/(E[g+1].offset-B),me=E[g].color,ke=E[g+1].color;Qe+=Q(Math.round((1-ee)*me[0]+ee*ke[0]).toString(16))+Q(Math.round((1-ee)*me[1]+ee*ke[1]).toString(16))+Q(Math.round((1-ee)*me[2]+ee*ke[2]).toString(16))}return Qe.trim()},Na=function(E,K){K||(K=21);var oe=Wn(),ue=bu(E.colors,K),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+K+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$n({data:ue,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),$("endobj"),E.objectNumber=Wn(),$("<< /ShadingType "+E.type),$("/ColorSpace /DeviceRGB");var Ne="/Coords ["+I(parseFloat(E.coords[0]))+" "+I(parseFloat(E.coords[1]))+" ";E.type===2?Ne+=I(parseFloat(E.coords[2]))+" "+I(parseFloat(E.coords[3])):Ne+=I(parseFloat(E.coords[2]))+" "+I(parseFloat(E.coords[3]))+" "+I(parseFloat(E.coords[4]))+" "+I(parseFloat(E.coords[5])),$(Ne+="]"),E.matrix&&$("/Matrix ["+E.matrix.toString()+"]"),$("/Function "+oe+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},xu=function(E,K){var oe=Vn(),ue=Wn();K.push({resourcesOid:oe,objectOid:ue}),E.objectNumber=ue;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+E.boundingBox.map(I).join(" ")+"]"}),ye.push({key:"XStep",value:I(E.xStep)}),ye.push({key:"YStep",value:I(E.yStep)}),ye.push({key:"Resources",value:oe+" 0 R"}),E.matrix&&ye.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),$n({data:E.stream,additionalKeyValues:ye,objectId:E.objectNumber}),$("endobj")},Js=function(E){var K;for(K in Mt)Mt.hasOwnProperty(K)&&(Mt[K]instanceof gl?Na(Mt[K]):Mt[K]instanceof Fc&&xu(Mt[K],E))},Zs=function(E){for(var K in E.objectNumber=Wn(),$("<<"),E)switch(K){case"opacity":$("/ca "+D(E[K]));break;case"stroke-opacity":$("/CA "+D(E[K]))}$(">>"),$("endobj")},xs=function(){var E;for(E in ln)ln.hasOwnProperty(E)&&Zs(ln[E])},Do=function(){for(var E in $("/XObject <<"),Fn)Fn.hasOwnProperty(E)&&Fn[E].objectNumber>=0&&$("/"+E+" "+Fn[E].objectNumber+" 0 R");Bt.publish("putXobjectDict"),$(">>")},ed=function(){bn.oid=Wn(),$("<<"),$("/Filter /Standard"),$("/V "+bn.v),$("/R "+bn.r),$("/U <"+bn.toHexString(bn.U)+">"),$("/O <"+bn.toHexString(bn.O)+">"),$("/P "+bn.P),$(">>"),$("endobj")},ic=function(){for(var E in $("/Font <<"),_t)_t.hasOwnProperty(E)&&(h===!1||h===!0&&p.hasOwnProperty(E))&&$("/"+E+" "+_t[E].objectNumber+" 0 R");$(">>")},_u=function(){if(Object.keys(Mt).length>0){for(var E in $("/Shading <<"),Mt)Mt.hasOwnProperty(E)&&Mt[E]instanceof gl&&Mt[E].objectNumber>=0&&$("/"+E+" "+Mt[E].objectNumber+" 0 R");Bt.publish("putShadingPatternDict"),$(">>")}},Mo=function(E){if(Object.keys(Mt).length>0){for(var K in $("/Pattern <<"),Mt)Mt.hasOwnProperty(K)&&Mt[K]instanceof f.TilingPattern&&Mt[K].objectNumber>=0&&Mt[K].objectNumber<E&&$("/"+K+" "+Mt[K].objectNumber+" 0 R");Bt.publish("putTilingPatternDict"),$(">>")}},sc=function(){if(Object.keys(ln).length>0){var E;for(E in $("/ExtGState <<"),ln)ln.hasOwnProperty(E)&&ln[E].objectNumber>=0&&$("/"+E+" "+ln[E].objectNumber+" 0 R");Bt.publish("putGStateDict"),$(">>")}},vn=function(E){rr(E.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ic(),_u(),Mo(E.objectOid),sc(),Do(),$(">>"),$("endobj")},oc=function(){var E=[];Xs(),xs(),Ro(),Js(E),Bt.publish("putResources"),E.forEach(vn),vn({resourcesOid:zr,objectOid:Number.MAX_SAFE_INTEGER}),Bt.publish("postPutResources")},ac=function(){Bt.publish("putAdditionalObjects");for(var E=0;E<_e.length;E++){var K=_e[E];rr(K.objId,!0),$(K.content),$("endobj")}Bt.publish("postPutAdditionalObjects")},wu=function(E){gt[E.fontName]=gt[E.fontName]||{},gt[E.fontName][E.fontStyle]=E.id},lc=function(E,K,oe,ue,ye){var Ne={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:E,fontName:K,fontStyle:oe,encoding:ue,isStandardFont:ye||!1,metadata:{}};return Bt.publish("addFont",{font:Ne,instance:this}),_t[Ne.id]=Ne,wu(Ne),Ne.id},Su=function(E){for(var K=0,oe=be.length;K<oe;K++){var ue=lc.call(this,E[K][0],E[K][1],E[K][2],be[K][3],!0);h===!1&&(p[ue]=!0);var ye=E[K][0].split("-");wu({id:ue,fontName:ye[0],fontStyle:ye[1]||""})}Bt.publish("addFonts",{fonts:_t,dictionary:gt})},ki=function(E){return E.foo=function(){try{return E.apply(this,arguments)}catch(ue){var K=ue.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var oe="Error in function "+K.split(`
`)[0].split("<")[0]+": "+ue.message;if(!yt.console)throw new Error(oe);yt.console.error(oe,ue),yt.alert&&alert(oe)}},E.foo.bar=E,E.foo},Pa=function(E,K){var oe,ue,ye,Ne,Ue,Qe,g,C,B;if(ye=(K=K||{}).sourceEncoding||"Unicode",Ue=K.outputEncoding,(K.autoencode||Ue)&&_t[Pt].metadata&&_t[Pt].metadata[ye]&&_t[Pt].metadata[ye].encoding&&(Ne=_t[Pt].metadata[ye].encoding,!Ue&&_t[Pt].encoding&&(Ue=_t[Pt].encoding),!Ue&&Ne.codePages&&(Ue=Ne.codePages[0]),typeof Ue=="string"&&(Ue=Ne[Ue]),Ue)){for(g=!1,Qe=[],oe=0,ue=E.length;oe<ue;oe++)(C=Ue[E.charCodeAt(oe)])?Qe.push(String.fromCharCode(C)):Qe.push(E[oe]),Qe[oe].charCodeAt(0)>>8&&(g=!0);E=Qe.join("")}for(oe=E.length;g===void 0&&oe!==0;)E.charCodeAt(oe-1)>>8&&(g=!0),oe--;if(!g)return E;for(Qe=K.noBOM?[]:[254,255],oe=0,ue=E.length;oe<ue;oe++){if((B=(C=E.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qe.push(B),Qe.push(C-(B<<8))}return String.fromCharCode.apply(void 0,Qe)},Bn=f.__private__.pdfEscape=f.pdfEscape=function(E,K){return Pa(E,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hi=f.__private__.beginPage=function(E){xe[++Jt]=[],ht[Jt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},cc(Jt),Ae(xe[Y])},Oo=function(E,K){var oe,ue,ye;switch(n=K||n,typeof E=="string"&&(oe=v(E.toLowerCase()),Array.isArray(oe)&&(ue=oe[0],ye=oe[1])),Array.isArray(E)&&(ue=E[0]*Xe,ye=E[1]*Xe),isNaN(ue)&&(ue=i[0],ye=i[1]),(ue>14400||ye>14400)&&(hn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),ye=Math.min(14400,ye)),i=[ue,ye],n.substr(0,1)){case"l":ye>ue&&(i=[ye,ue]);break;case"p":ue>ye&&(i=[ye,ue])}hi(i),pc(fc),$(Ar),yc!==0&&$(yc+" J"),Ba!==0&&$(Ba+" j"),Bt.publish("addPage",{pageNumber:Jt})},Ta=function(E){E>0&&E<=Jt&&(xe.splice(E,1),ht.splice(E,1),Jt--,Y>Jt&&(Y=Jt),this.setPage(Y))},cc=function(E){E>0&&E<=Jt&&(Y=E)},Zt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return xe.length-1},jo=function(E,K,oe){var ue,ye=void 0;return oe=oe||{},E=E!==void 0?E:_t[Pt].fontName,K=K!==void 0?K:_t[Pt].fontStyle,ue=E.toLowerCase(),gt[ue]!==void 0&&gt[ue][K]!==void 0?ye=gt[ue][K]:gt[E]!==void 0&&gt[E][K]!==void 0?ye=gt[E][K]:oe.disableWarning===!1&&hn.warn("Unable to look up font label for font '"+E+"', '"+K+"'. Refer to getFontList() for available fonts."),ye||oe.noFallback||(ye=gt.times[K])==null&&(ye=gt.times.normal),ye},Fo=f.__private__.putInfo=function(){var E=Wn(),K=function(ue){return ue};for(var oe in u!==null&&(K=bn.encryptor(E,0)),$("<<"),$("/Producer ("+Bn(K("jsPDF "+dt.version))+")"),ct)ct.hasOwnProperty(oe)&&ct[oe]&&$("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Bn(K(ct[oe]))+")");$("/CreationDate ("+Bn(K(q))+")"),$(">>"),$("endobj")},_s=f.__private__.putCatalog=function(E){var K=(E=E||{}).rootDictionaryObjId||bs;switch(Wn(),$("<<"),$("/Type /Catalog"),$("/Pages "+K+" 0 R"),Ve||(Ve="fullwidth"),Ve){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+Ve;oe.substr(oe.length-1)==="%"&&(Ve=parseInt(Ve)/100),typeof Ve=="number"&&$("/OpenAction [3 0 R /XYZ null null "+D(Ve)+"]")}switch(it||(it="continuous"),it){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}ot&&$("/PageMode /"+ot),Bt.publish("putCatalog"),$(">>"),$("endobj")},td=f.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(re+1)),$("/Root "+re+" 0 R"),$("/Info "+(re-1)+" 0 R"),u!==null&&$("/Encrypt "+bn.oid+" 0 R"),$("/ID [ <"+U+"> <"+U+"> ]"),$(">>")},ku=f.__private__.putHeader=function(){$("%PDF-"+y),$("%ºß¬à")},nd=f.__private__.putXRef=function(){var E="0000000000";$("xref"),$("0 "+(re+1)),$("0000000000 65535 f ");for(var K=1;K<=re;K++)typeof ce[K]=="function"?$((E+ce[K]()).slice(-10)+" 00000 n "):ce[K]!==void 0?$((E+ce[K]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},ws=f.__private__.buildDocument=function(){We(),Ae(pe),Bt.publish("buildDocument"),ku(),Ys(),ac(),oc(),u!==null&&ed(),Fo(),_s();var E=he;return nd(),td(),$("startxref"),$(""+E),$("%%EOF"),Ae(xe[Y]),pe.join(`
`)},Ca=f.__private__.getBlob=function(E){return new Blob([Pe(E)],{type:"application/pdf"})},La=f.output=f.__private__.output=ki(function(E,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",E){case void 0:return ws();case"save":f.save(K.filename);break;case"arraybuffer":return Pe(ws());case"blob":return Ca(ws());case"bloburi":case"bloburl":if(yt.URL!==void 0&&typeof yt.URL.createObjectURL=="function")return yt.URL&&yt.URL.createObjectURL(Ca(ws()))||void 0;hn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ue=ws();try{oe=nb(ue)}catch{oe=nb(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+K.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(ye=K.pdfObjectUrl,Ne="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Qe=yt.open();return Qe!==null&&Qe.document.write(Ue),Qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var g='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',C=yt.open();if(C!==null){C.document.write(g);var B=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=K.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(B.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',me=yt.open();if(me!==null&&(me.document.write(ee),me.document.title=K.filename),me||typeof safari>"u")return me;break;case"datauri":case"dataurl":return yt.document.location.href=this.output("datauristring",K);default:return null}}),eo=function(E){return Array.isArray(_i)===!0&&_i.indexOf(E)>-1};switch(r){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=eo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xe=r}var bn=null;ae(),O();var Au=function(E){return u!==null?bn.encryptor(E,0):function(K){return K}},uc=f.__private__.getPageInfo=f.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ht[E].objId,pageNumber:E,pageContext:ht[E]}},vt=f.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in ht)if(ht[K].objId===E)break;return uc(K)},to=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ht[Y].objId,pageNumber:Y,pageContext:ht[Y]}};f.addPage=function(){return Oo.apply(this,arguments),this},f.setPage=function(){return cc.apply(this,arguments),Ae.call(this,xe[Y]),this},f.insertPage=function(E){return this.addPage(),this.movePage(Y,E),this},f.movePage=function(E,K){var oe,ue;if(E>K){oe=xe[E],ue=ht[E];for(var ye=E;ye>K;ye--)xe[ye]=xe[ye-1],ht[ye]=ht[ye-1];xe[K]=oe,ht[K]=ue,this.setPage(K)}else if(E<K){oe=xe[E],ue=ht[E];for(var Ne=E;Ne<K;Ne++)xe[Ne]=xe[Ne+1],ht[Ne]=ht[Ne+1];xe[K]=oe,ht[K]=ue,this.setPage(K)}return this},f.deletePage=function(){return Ta.apply(this,arguments),this},f.__private__.text=f.text=function(E,K,oe,ue,ye){var Ne,Ue,Qe,g,C,B,ee,me,ke,ze=(ue=ue||{}).scope||this;if(typeof E=="number"&&typeof K=="number"&&(typeof oe=="string"||Array.isArray(oe))){var St=oe;oe=K,K=E,E=St}if(arguments[3]instanceof nt?(S("The transform parameter of text() with a Matrix value"),ke=ye):(Qe=arguments[4],g=arguments[5],rn(ee=arguments[3])==="object"&&ee!==null||(typeof Qe=="string"&&(g=Qe,Qe=null),typeof ee=="string"&&(g=ee,ee=null),typeof ee=="number"&&(Qe=ee,ee=null),ue={flags:ee,angle:Qe,align:g})),isNaN(K)||isNaN(oe)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return ze;var Ot="",kt=!1,Qt=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:Yt,cn=ze.internal.scaleFactor;function Is(pn){return pn=pn.split("	").join(Array(ue.TabLen||9).join(" ")),Bn(pn,ee)}function Er(pn){for(var gn,Gn=pn.concat(),hr=[],$o=Gn.length;$o--;)typeof(gn=Gn.shift())=="string"?hr.push(gn):Array.isArray(pn)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?hr.push(gn[0]):hr.push([gn[0],gn[1],gn[2]]);return hr}function so(pn,gn){var Gn;if(typeof pn=="string")Gn=gn(pn)[0];else if(Array.isArray(pn)){for(var hr,$o,hd=pn.concat(),Fu=[],Yp=hd.length;Yp--;)typeof(hr=hd.shift())=="string"?Fu.push(gn(hr)[0]):Array.isArray(hr)&&typeof hr[0]=="string"&&($o=gn(hr[0],hr[1],hr[2]),Fu.push([$o[0],$o[1],$o[2]]));Gn=Fu}return Gn}var oo=!1,id=!0;if(typeof E=="string")oo=!0;else if(Array.isArray(E)){var sd=E.concat();Ue=[];for(var Tu,Ir=sd.length;Ir--;)(typeof(Tu=sd.shift())!="string"||Array.isArray(Tu)&&typeof Tu[0]!="string")&&(id=!1);oo=id}if(oo===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var Cu=Ee/ze.internal.scaleFactor,Lu=Cu*(Qt-1);switch(ue.baseline){case"bottom":oe-=Lu;break;case"top":oe+=Cu-Lu;break;case"hanging":oe+=Cu-2*Lu;break;case"middle":oe+=Cu/2-Lu}if((B=ue.maxWidth||0)>0&&(typeof E=="string"?E=ze.splitTextToSize(E,B):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(pn,gn){return pn.concat(ze.splitTextToSize(gn,B))},[]))),Ne={text:E,x:K,y:oe,options:ue,mutex:{pdfEscape:Bn,activeFontKey:Pt,fonts:_t,activeFontSize:Ee}},Bt.publish("preProcessText",Ne),E=Ne.text,Qe=(ue=Ne.options).angle,!(ke instanceof nt)&&Qe&&typeof Qe=="number"){Qe*=Math.PI/180,ue.rotationDirection===0&&(Qe=-Qe),k===_.ADVANCED&&(Qe=-Qe);var Ru=Math.cos(Qe),od=Math.sin(Qe);ke=new nt(Ru,od,-od,Ru,0,0)}else Qe&&Qe instanceof nt&&(ke=Qe);k!==_.ADVANCED||ke||(ke=Ur),(C=ue.charSpace||Bo)!==void 0&&(Ot+=I(w(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(me=ue.horizontalScale)!==void 0&&(Ot+=I(100*me)+` Tz
`),ue.lang;var Ai=-1,R1=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,ad=ze.internal.getCurrentPageInfo().pageContext;switch(R1){case 0:case!1:case"fill":Ai=0;break;case 1:case!0:case"stroke":Ai=1;break;case 2:case"fillThenStroke":Ai=2;break;case 3:case"invisible":Ai=3;break;case 4:case"fillAndAddForClipping":Ai=4;break;case 5:case"strokeAndAddPathForClipping":Ai=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ai=6;break;case 7:case"addToPathForClipping":Ai=7}var Wp=ad.usedRenderingMode!==void 0?ad.usedRenderingMode:-1;Ai!==-1?Ot+=Ai+` Tr
`:Wp!==-1&&(Ot+=`0 Tr
`),Ai!==-1&&(ad.usedRenderingMode=Ai),g=ue.align||"left";var rs,Du=Ee*Qt,$p=ze.internal.pageSize.getWidth(),Kp=_t[Pt];C=ue.charSpace||Bo,B=ue.maxWidth||0,ee=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Wa=[],vc=function(pn){return ze.getStringUnitWidth(pn,{font:Kp,charSpace:C,fontSize:Ee,doKerning:!1})*Ee/cn};if(Object.prototype.toString.call(E)==="[object Array]"){var Ei;Ue=Er(E),g!=="left"&&(rs=Ue.map(vc));var di,$a=0;if(g==="right"){K-=rs[0],E=[],Ir=Ue.length;for(var qo=0;qo<Ir;qo++)qo===0?(di=Ui(K),Ei=ur(oe)):(di=w($a-rs[qo]),Ei=-Du),E.push([Ue[qo],di,Ei]),$a=rs[qo]}else if(g==="center"){K-=rs[0]/2,E=[],Ir=Ue.length;for(var Ho=0;Ho<Ir;Ho++)Ho===0?(di=Ui(K),Ei=ur(oe)):(di=w(($a-rs[Ho])/2),Ei=-Du),E.push([Ue[Ho],di,Ei]),$a=rs[Ho]}else if(g==="left"){E=[],Ir=Ue.length;for(var Mu=0;Mu<Ir;Mu++)E.push(Ue[Mu])}else if(g==="justify"&&Kp.encoding==="Identity-H"){E=[],Ir=Ue.length,B=B!==0?B:$p;for(var Wo=0,Kn=0;Kn<Ir;Kn++)if(Ei=Kn===0?ur(oe):-Du,di=Kn===0?Ui(K):Wo,Kn<Ir-1){var ld=w((B-rs[Kn])/(Ue[Kn].split(" ").length-1)),fi=Ue[Kn].split(" ");E.push([fi[0]+" ",di,Ei]),Wo=0;for(var is=1;is<fi.length;is++){var Ou=(vc(fi[is-1]+" "+fi[is])-vc(fi[is]))*cn+ld;is==fi.length-1?E.push([fi[is],Ou,0]):E.push([fi[is]+" ",Ou,0]),Wo-=Ou}}else E.push([Ue[Kn],di,Ei]);E.push(["",Wo,0])}else{if(g!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],Ir=Ue.length,B=B!==0?B:$p,Kn=0;Kn<Ir;Kn++)Ei=Kn===0?ur(oe):-Du,di=Kn===0?Ui(K):0,Kn<Ir-1?Wa.push(I(w((B-rs[Kn])/(Ue[Kn].split(" ").length-1)))):Wa.push(0),E.push([Ue[Kn],di,Ei])}}var Gp=typeof ue.R2L=="boolean"?ue.R2L:Ze;Gp===!0&&(E=so(E,function(pn,gn,Gn){return[pn.split("").reverse().join(""),gn,Gn]})),Ne={text:E,x:K,y:oe,options:ue,mutex:{pdfEscape:Bn,activeFontKey:Pt,fonts:_t,activeFontSize:Ee}},Bt.publish("postProcessText",Ne),E=Ne.text,kt=Ne.mutex.isHex||!1;var cd=_t[Pt].encoding;cd!=="WinAnsiEncoding"&&cd!=="StandardEncoding"||(E=so(E,function(pn,gn,Gn){return[Is(pn),gn,Gn]})),Ue=Er(E),E=[];for(var bc,xc,Ka,_c=0,ju=1,wc=Array.isArray(Ue[0])?ju:_c,Ga="",ud=function(pn,gn,Gn){var hr="";return Gn instanceof nt?(Gn=typeof ue.angle=="number"?wi(Gn,new nt(1,0,0,1,pn,gn)):wi(new nt(1,0,0,1,pn,gn),Gn),k===_.ADVANCED&&(Gn=wi(new nt(1,0,0,-1,0,0),Gn)),hr=Gn.join(" ")+` Tm
`):hr=I(pn)+" "+I(gn)+` Td
`,hr},ss=0;ss<Ue.length;ss++){switch(Ga="",wc){case ju:Ka=(kt?"<":"(")+Ue[ss][0]+(kt?">":")"),bc=parseFloat(Ue[ss][1]),xc=parseFloat(Ue[ss][2]);break;case _c:Ka=(kt?"<":"(")+Ue[ss]+(kt?">":")"),bc=Ui(K),xc=ur(oe)}Wa!==void 0&&Wa[ss]!==void 0&&(Ga=Wa[ss]+` Tw
`),ss===0?E.push(Ga+ud(bc,xc,ke)+Ka):wc===_c?E.push(Ga+Ka):wc===ju&&E.push(Ga+ud(bc,xc,ke)+Ka)}E=wc===_c?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var os=`BT
/`;return os+=Pt+" "+Ee+` Tf
`,os+=I(Ee*Qt)+` TL
`,os+=As+`
`,os+=Ot,os+=E,$(os+="ET"),p[Pt]=!0,ze};var rd=f.__private__.clip=f.clip=function(E){return $(E==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return rd("evenodd")},f.__private__.discardPath=f.discardPath=function(){return $("n"),this};var ns=f.__private__.isValidStyle=function(E){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(K=!0),K};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(E){return ns(E)&&(c=E),this};var Eu=f.__private__.getStyle=f.getStyle=function(E){var K=c;switch(E){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=E}return K},Vi=f.close=function(){return $("h"),this};f.stroke=function(){return $("S"),this},f.fill=function(E){return Ra("f",E),this},f.fillEvenOdd=function(E){return Ra("f*",E),this},f.fillStroke=function(E){return Ra("B",E),this},f.fillStrokeEvenOdd=function(E){return Ra("B*",E),this};var Ra=function(E,K){rn(K)==="object"?Ma(K,E):$(E)},hc=function(E){E===null||k===_.ADVANCED&&E===void 0||(E=Eu(E),$(E))};function Da(E,K,oe,ue,ye){var Ne=new Fc(K||this.boundingBox,oe||this.xStep,ue||this.yStep,this.gState,ye||this.matrix);Ne.stream=this.stream;var Ue=E+"$$"+this.cloneIndex+++"$$";return nr(Ue,Ne),Ne}var Ma=function(E,K){var oe=ts[E.key],ue=Mt[oe];if(ue instanceof gl)$("q"),$(Iu(K)),ue.gState&&f.setGState(ue.gState),$(E.matrix.toString()+" cm"),$("/"+oe+" sh"),$("Q");else if(ue instanceof Fc){var ye=new nt(1,0,0,-1,0,qr());E.matrix&&(ye=ye.multiply(E.matrix||Ur),oe=Da.call(ue,E.key,E.boundingBox,E.xStep,E.yStep,ye).id),$("q"),$("/Pattern cs"),$("/"+oe+" scn"),ue.gState&&f.setGState(ue.gState),$(K),$("Q")}},Iu=function(E){switch(E){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ss=f.moveTo=function(E,K){return $(I(w(E))+" "+I(j(K))+" m"),this},Bi=f.lineTo=function(E,K){return $(I(w(E))+" "+I(j(K))+" l"),this},ks=f.curveTo=function(E,K,oe,ue,ye,Ne){return $([I(w(E)),I(j(K)),I(w(oe)),I(j(ue)),I(w(ye)),I(j(Ne)),"c"].join(" ")),this};f.__private__.line=f.line=function(E,K,oe,ue,ye){if(isNaN(E)||isNaN(K)||isNaN(oe)||isNaN(ue)||!ns(ye))throw new Error("Invalid arguments passed to jsPDF.line");return k===_.COMPAT?this.lines([[oe-E,ue-K]],E,K,[1,1],ye||"S"):this.lines([[oe-E,ue-K]],E,K,[1,1]).stroke()},f.__private__.lines=f.lines=function(E,K,oe,ue,ye,Ne){var Ue,Qe,g,C,B,ee,me,ke,ze,St,Ot,kt;if(typeof E=="number"&&(kt=oe,oe=K,K=E,E=kt),ue=ue||[1,1],Ne=Ne||!1,isNaN(K)||isNaN(oe)||!Array.isArray(E)||!Array.isArray(ue)||!ns(ye)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ss(K,oe),Ue=ue[0],Qe=ue[1],C=E.length,St=K,Ot=oe,g=0;g<C;g++)(B=E[g]).length===2?(St=B[0]*Ue+St,Ot=B[1]*Qe+Ot,Bi(St,Ot)):(ee=B[0]*Ue+St,me=B[1]*Qe+Ot,ke=B[2]*Ue+St,ze=B[3]*Qe+Ot,St=B[4]*Ue+St,Ot=B[5]*Qe+Ot,ks(ee,me,ke,ze,St,Ot));return Ne&&Vi(),hc(ye),this},f.path=function(E){for(var K=0;K<E.length;K++){var oe=E[K],ue=oe.c;switch(oe.op){case"m":Ss(ue[0],ue[1]);break;case"l":Bi(ue[0],ue[1]);break;case"c":ks.apply(this,ue);break;case"h":Vi()}}return this},f.__private__.rect=f.rect=function(E,K,oe,ue,ye){if(isNaN(E)||isNaN(K)||isNaN(oe)||isNaN(ue)||!ns(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return k===_.COMPAT&&(ue=-ue),$([I(w(E)),I(j(K)),I(w(oe)),I(w(ue)),"re"].join(" ")),hc(ye),this},f.__private__.triangle=f.triangle=function(E,K,oe,ue,ye,Ne,Ue){if(isNaN(E)||isNaN(K)||isNaN(oe)||isNaN(ue)||isNaN(ye)||isNaN(Ne)||!ns(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-E,ue-K],[ye-oe,Ne-ue],[E-ye,K-Ne]],E,K,[1,1],Ue,!0),this},f.__private__.roundedRect=f.roundedRect=function(E,K,oe,ue,ye,Ne,Ue){if(isNaN(E)||isNaN(K)||isNaN(oe)||isNaN(ue)||isNaN(ye)||isNaN(Ne)||!ns(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qe=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*oe),Ne=Math.min(Ne,.5*ue),this.lines([[oe-2*ye,0],[ye*Qe,0,ye,Ne-Ne*Qe,ye,Ne],[0,ue-2*Ne],[0,Ne*Qe,-ye*Qe,Ne,-ye,Ne],[2*ye-oe,0],[-ye*Qe,0,-ye,-Ne*Qe,-ye,-Ne],[0,2*Ne-ue],[0,-Ne*Qe,ye*Qe,-Ne,ye,-Ne]],E+ye,K,[1,1],Ue,!0),this},f.__private__.ellipse=f.ellipse=function(E,K,oe,ue,ye){if(isNaN(E)||isNaN(K)||isNaN(oe)||isNaN(ue)||!ns(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*oe,Ue=4/3*(Math.SQRT2-1)*ue;return Ss(E+oe,K),ks(E+oe,K-Ue,E+Ne,K-ue,E,K-ue),ks(E-Ne,K-ue,E-oe,K-Ue,E-oe,K),ks(E-oe,K+Ue,E-Ne,K+ue,E,K+ue),ks(E+Ne,K+ue,E+oe,K+Ue,E+oe,K),hc(ye),this},f.__private__.circle=f.circle=function(E,K,oe,ue){if(isNaN(E)||isNaN(K)||isNaN(oe)||!ns(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,K,oe,oe,ue)},f.setFont=function(E,K,oe){return oe&&(K=z(K,oe)),Pt=jo(E,K,{disableWarning:!1}),this};var dc=f.__private__.getFont=f.getFont=function(){return _t[jo.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var E,K,oe={};for(E in gt)if(gt.hasOwnProperty(E))for(K in oe[E]=[],gt[E])gt[E].hasOwnProperty(K)&&oe[E].push(K);return oe},f.addFont=function(E,K,oe,ue,ye){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(oe=z(oe,ue)),ye=ye||"Identity-H",lc.call(this,E,K,oe,ye)};var Yt,fc=t.lineWidth||.200025,Oa=f.__private__.getLineWidth=f.getLineWidth=function(){return fc},pc=f.__private__.setLineWidth=f.setLineWidth=function(E){return fc=E,$(I(w(E))+" w"),this};f.__private__.setLineDash=dt.API.setLineDash=dt.API.setLineDashPattern=function(E,K){if(E=E||[],K=K||0,isNaN(K)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(oe){return I(w(oe))}).join(" "),K=I(w(K)),$("["+E+"] "+K+" d"),this};var gc=f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*Yt};f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*Yt};var mc=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(Yt=E),this},Vo=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Yt};mc(t.lineHeight);var Ui=f.__private__.getHorizontalCoordinate=function(E){return w(E)},ur=f.__private__.getVerticalCoordinate=function(E){return k===_.ADVANCED?E:ht[Y].mediaBox.topRightY-ht[Y].mediaBox.bottomLeftY-w(E)},Nu=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(E){return I(Ui(E))},no=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(E){return I(ur(E))},Ar=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Si(Ar)},f.__private__.setStrokeColor=f.setDrawColor=function(E,K,oe,ue){return Ar=ci({ch1:E,ch2:K,ch3:oe,ch4:ue,pdfColorType:"draw",precision:2}),$(Ar),this};var ja=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Si(ja)},f.__private__.setFillColor=f.setFillColor=function(E,K,oe,ue){return ja=ci({ch1:E,ch2:K,ch3:oe,ch4:ue,pdfColorType:"fill",precision:2}),$(ja),this};var As=t.textColor||"0 g",Fa=f.__private__.getTextColor=f.getTextColor=function(){return Si(As)};f.__private__.setTextColor=f.setTextColor=function(E,K,oe,ue){return As=ci({ch1:E,ch2:K,ch3:oe,ch4:ue,pdfColorType:"text",precision:3}),this};var Bo=t.charSpace,Va=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Bo||0)};f.__private__.setCharSpace=f.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bo=E,this};var yc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(E){var K=f.CapJoinStyles[E];if(K===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yc=K,$(K+" J"),this};var Ba=0;f.__private__.setLineJoin=f.setLineJoin=function(E){var K=f.CapJoinStyles[E];if(K===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ba=K,$(K+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(I(w(E))+" M"),this},f.GState=vp,f.setGState=function(E){(E=typeof E=="string"?ln[cr[E]]:ro(null,E)).equals(li)||($("/"+E.id+" gs"),li=E)};var ro=function(E,K){if(!E||!cr[E]){var oe=!1;for(var ue in ln)if(ln.hasOwnProperty(ue)&&ln[ue].equals(K)){oe=!0;break}if(oe)K=ln[ue];else{var ye="GS"+(Object.keys(ln).length+1).toString(10);ln[ye]=K,K.id=ye}return E&&(cr[E]=K.id),Bt.publish("addGState",K),K}};f.addGState=function(E,K){return ro(E,K),this},f.saveGraphicsState=function(){return $("q"),ai.push({key:Pt,size:Ee,color:As}),this},f.restoreGraphicsState=function(){$("Q");var E=ai.pop();return Pt=E.key,Ee=E.size,As=E.color,li=null,this},f.setCurrentTransformationMatrix=function(E){return $(E.toString()+" cm"),this},f.comment=function(E){return $("#"+E),this};var Uo=function(E,K){var oe=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ne){isNaN(Ne)||(oe=parseFloat(Ne))}});var ue=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Ne){isNaN(Ne)||(ue=parseFloat(Ne))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Ne){ye=Ne.toString()}}),this},Ua=function(E,K,oe,ue){Uo.call(this,E,K),this.type="rect";var ye=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Ue){isNaN(Ue)||(ye=parseFloat(Ue))}});var Ne=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Ue){isNaN(Ue)||(Ne=parseFloat(Ue))}}),this},zo=function(){this.page=Jt,this.currentPage=Y,this.pages=xe.slice(0),this.pagesContext=ht.slice(0),this.x=An,this.y=Lt,this.matrix=kr,this.width=io(Y),this.height=qr(Y),this.outputDestination=je,this.id="",this.objectNumber=-1};zo.prototype.restore=function(){Jt=this.page,Y=this.currentPage,ht=this.pagesContext,xe=this.pages,An=this.x,Lt=this.y,kr=this.matrix,qa(Y,this.width),Ha(Y,this.height),je=this.outputDestination};var za=function(E,K,oe,ue,ye){ji.push(new zo),Jt=Y=0,xe=[],An=E,Lt=K,kr=ye,hi([oe,ue])},Pu=function(E){if(Br[E])ji.pop().restore();else{var K=new zo,oe="Xo"+(Object.keys(Fn).length+1).toString(10);K.id=oe,Br[E]=oe,Fn[oe]=K,Bt.publish("addFormObject",K),ji.pop().restore()}};for(var Es in f.beginFormObject=function(E,K,oe,ue,ye){return za(E,K,oe,ue,ye),this},f.endFormObject=function(E){return Pu(E),this},f.doFormObject=function(E,K){var oe=Fn[Br[E]];return $("q"),$(K.toString()+" cm"),$("/"+oe.id+" Do"),$("Q"),this},f.getFormObject=function(E){var K=Fn[Br[E]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},f.save=function(E,K){return E=E||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Rc(Ca(ws()),E),typeof Rc.unload=="function"&&yt.setTimeout&&setTimeout(Rc.unload,911),this):new Promise(function(oe,ue){try{var ye=Rc(Ca(ws()),E);typeof Rc.unload=="function"&&yt.setTimeout&&setTimeout(Rc.unload,911),oe(ye)}catch(Ne){ue(Ne.message)}})},dt.API)dt.API.hasOwnProperty(Es)&&(Es==="events"&&dt.API.events.length?function(E,K){var oe,ue,ye;for(ye=K.length-1;ye!==-1;ye--)oe=K[ye][0],ue=K[ye][1],E.subscribe.apply(E,[oe].concat(typeof ue=="function"?[ue]:ue))}(Bt,dt.API.events):f[Es]=dt.API[Es]);var io=f.getPageWidth=function(E){return(ht[E=E||Y].mediaBox.topRightX-ht[E].mediaBox.bottomLeftX)/Xe},qa=f.setPageWidth=function(E,K){ht[E].mediaBox.topRightX=K*Xe+ht[E].mediaBox.bottomLeftX},qr=f.getPageHeight=function(E){return(ht[E=E||Y].mediaBox.topRightY-ht[E].mediaBox.bottomLeftY)/Xe},Ha=f.setPageHeight=function(E,K){ht[E].mediaBox.topRightY=K*Xe+ht[E].mediaBox.bottomLeftY};return f.internal={pdfEscape:Bn,getStyle:Eu,getFont:dc,getFontSize:Be,getCharSpace:Va,getTextColor:Fa,getLineHeight:gc,getLineHeightFactor:Vo,getLineWidth:Oa,write:Te,getHorizontalCoordinate:Ui,getVerticalCoordinate:ur,getCoordinateString:Nu,getVerticalCoordinateString:no,collections:{},newObject:Wn,newAdditionalObject:Ia,newObjectDeferred:Vn,newObjectDeferredBegin:rr,getFilters:ui,putStream:$n,events:Bt,scaleFactor:Xe,pageSize:{getWidth:function(){return io(Y)},setWidth:function(E){qa(Y,E)},getHeight:function(){return qr(Y)},setHeight:function(E){Ha(Y,E)}},encryptionOptions:u,encryption:bn,getEncryptor:Au,output:La,getNumberOfPages:Zt,pages:xe,out:$,f2:D,f3:x,getPageInfo:uc,getPageInfoByObjId:vt,getCurrentPageInfo:to,getPDFVersion:b,Point:Uo,Rectangle:Ua,Matrix:nt,hasHotfix:eo},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return io(Y)},set:function(E){qa(Y,E)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return qr(Y)},set:function(E){Ha(Y,E)},enumerable:!0,configurable:!0}),Su.call(f,be),Pt="F1",Oo(i,n),Bt.publish("initialized"),f}Ju.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ju.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ju.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ju.prototype.processOwnerPassword=function(t,e){return ib(rb(e).substr(0,5),t)},Ju.prototype.encryptor=function(t,e){var n=rb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ib(n,r)}},vp.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||rn(t)!==rn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},dt.API={events:[]},dt.version="2.5.2";var zn=dt.API,kx=1,vu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ku=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(t){return t.toFixed(2)},sl=function(t){return t.toFixed(5)};zn.__acroform__={};var Oi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},b4=function(t){return t*kx},uo=function(t){var e=new nT,n=st.internal.getHeight(t)||0,r=st.internal.getWidth(t)||0;return e.BBox=[0,0,Number(At(r)),Number(At(n))],e},LH=zn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},RH=zn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},DH=zn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Xn=zn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DH(t,e-1)},Jn=zn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return LH(t,e-1)},Zn=zn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return RH(t,e-1)},MH=zn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},OH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=sb(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=uo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},sb=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(x){return x.split(`
`)}):i.map(function(x){return[x]});var s=n,o=st.internal.getHeight(t)||0;o=o<0?-o:o;var a=st.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(x,w,P){if(x+1<i.length){var j=w+" "+i[x+1][0];return em(j,t,P).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,h=em("3",t,s).height,p=t.multiline?o-s:(o-h)/2,f=p+=2,y=0,b=0,A=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+em(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var v="",_=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var R=!1;if(i[k].length!==1&&A!==i[k].length-1){if((h+2)*(_+2)+2>o)continue e;v+=i[k][A],R=!0,b=k,k--}else{v=(v+=i[k][A]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var M=parseInt(k),z=l(M,v,s),I=k>=i.length-1;if(z&&!I){v+=" ",A=0;continue}if(z||I){if(I)b=M;else if(t.multiline&&(h+2)*(_+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(_+2)+2>o)continue e;b=M}}for(var S="",L=y;L<=b;L++){var D=i[L];if(t.multiline){if(L===b){S+=D[A]+" ",A=(A+1)%D.length;continue}if(L===y){S+=D[D.length-1]+" ";continue}}S+=D[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=em(S,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=At(c)+" "+At(f)+` Td
`,e+="("+vu(S)+`) Tj
`,e+=-At(c)+` 0 Td
`,f=-(s+2),u=0,y=R?b:b+1,_++,v=""}break}return r.text=e,r.fontSize=s,r},em=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},jH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},VH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),rn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},BH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ks.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(jH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kx=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new rT,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&FH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=MH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=st.createDefaultAppearanceStream(a),rn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=OH(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var p in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(p)){var f=a.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var y=f[o];typeof y=="function"&&(y=y.call(i,a)),h+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(i,a)),h+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&VH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},tT=zn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),rn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+vu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ov=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+vu(r(t))+")"},yo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};yo.prototype.toString=function(){return this.objId+" 0 R"},yo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},yo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:tT(i,this.objId,this.scope)}):i instanceof yo?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var nT=function(){yo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Oi(nT,yo);var rT=function(){yo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+vu(n(t))+")"}},set:function(n){t=n}})};Oi(rT,yo);var Ks=function t(){yo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xn(e,3)},set:function(v){v?this.F=Jn(e,3):this.F=Zn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof R0)return;s="FieldObject"+t.FieldNum++}var v=function(_){return _};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+vu(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/kx:c},set:function(v){c=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof R0||this instanceof Vl))return ov(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof fr?p:ov(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof fr?v:v.substr(0,1)==="("?Ku(v.substr(1,v.length-2)):Ku(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fr?Ku(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof fr?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof fr?f:ov(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof fr?v:v.substr(0,1)==="("?Ku(v.substr(1,v.length-2)):Ku(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fr?Ku(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof fr?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(v){v=!!v,b=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,1)},set:function(v){v?this.Ff=Jn(this.Ff,1):this.Ff=Zn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,2)},set:function(v){v?this.Ff=Jn(this.Ff,2):this.Ff=Zn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,3)},set:function(v){v?this.Ff=Jn(this.Ff,3):this.Ff=Zn(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');A=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(A){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};Oi(Ks,yo);var Hc=function(){Ks.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tT(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,18)},set:function(n){n?this.Ff=Jn(this.Ff,18):this.Ff=Zn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Jn(this.Ff,19):this.Ff=Zn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,20)},set:function(n){n?(this.Ff=Jn(this.Ff,20),e.sort()):this.Ff=Zn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,22)},set:function(n){n?this.Ff=Jn(this.Ff,22):this.Ff=Zn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,23)},set:function(n){n?this.Ff=Jn(this.Ff,23):this.Ff=Zn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,27)},set:function(n){n?this.Ff=Jn(this.Ff,27):this.Ff=Zn(this.Ff,27)}}),this.hasAppearanceStream=!1};Oi(Hc,Ks);var Wc=function(){Hc.call(this),this.fontName="helvetica",this.combo=!1};Oi(Wc,Hc);var $c=function(){Wc.call(this),this.combo=!0};Oi($c,Wc);var Ef=function(){$c.call(this),this.edit=!0};Oi(Ef,$c);var fr=function(){Ks.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,15)},set:function(n){n?this.Ff=Jn(this.Ff,15):this.Ff=Zn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,16)},set:function(n){n?this.Ff=Jn(this.Ff,16):this.Ff=Zn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,17)},set:function(n){n?this.Ff=Jn(this.Ff,17):this.Ff=Zn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,26)},set:function(n){n?this.Ff=Jn(this.Ff,26):this.Ff=Zn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+vu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){rn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Oi(fr,Ks);var If=function(){fr.call(this),this.pushButton=!0};Oi(If,fr);var Kc=function(){fr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Oi(Kc,fr);var R0=function(){var t,e;Ks.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+vu(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){rn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=st.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oi(R0,Ks),Kc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Kc.prototype.createOption=function(t){var e=new R0;return e.Parent=this,e.optionName=t,this.Kids.push(e),UH.call(this.scope,e),e};var Nf=function(){fr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=st.CheckBox.createAppearanceStream()};Oi(Nf,fr);var Vl=function(){Ks.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,13)},set:function(e){e?this.Ff=Jn(this.Ff,13):this.Ff=Zn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,21)},set:function(e){e?this.Ff=Jn(this.Ff,21):this.Ff=Zn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,23)},set:function(e){e?this.Ff=Jn(this.Ff,23):this.Ff=Zn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,24)},set:function(e){e?this.Ff=Jn(this.Ff,24):this.Ff=Zn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,25)},set:function(e){e?this.Ff=Jn(this.Ff,25):this.Ff=Zn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,26)},set:function(e){e?this.Ff=Jn(this.Ff,26):this.Ff=Zn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oi(Vl,Ks);var Pf=function(){Vl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,14)},set:function(t){t?this.Ff=Jn(this.Ff,14):this.Ff=Zn(this.Ff,14)}}),this.password=!0};Oi(Pf,Vl);var st={CheckBox:{createAppearanceStream:function(){return{N:{On:st.CheckBox.YesNormal},D:{On:st.CheckBox.YesPushDown,Off:st.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=sb(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+At(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=st.internal.getHeight(t),o=st.internal.getWidth(t),a=sb(t,t.caption);return i.push("1 g"),i.push("0 0 "+At(o)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(o-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+At(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:st.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=st.RadioButton.Circle.YesNormal,e.D[t]=st.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=st.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sl(st.internal.getWidth(t)/2)+" "+sl(st.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*st.internal.Bezier_C).toFixed(5)),o=Number((r*st.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(st.internal.getWidth(t)/2)+" "+sl(st.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sl(st.internal.getWidth(t)/2)+" "+sl(st.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*st.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(st.internal.getWidth(t)/2)+" "+sl(st.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:st.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=st.RadioButton.Cross.YesNormal,e.D[t]=st.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=st.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+At(st.internal.getWidth(t)-2)+" "+At(st.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),n.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),n.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),n.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=st.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(st.internal.getWidth(t)-2)+" "+At(st.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(At(n.x1.x)+" "+At(n.x1.y)+" m"),r.push(At(n.x2.x)+" "+At(n.x2.y)+" l"),r.push(At(n.x4.x)+" "+At(n.x4.y)+" m"),r.push(At(n.x3.x)+" "+At(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};st.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=st.internal.getWidth(t),n=st.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},st.internal.getWidth=function(t){var e=0;return rn(t)==="object"&&(e=b4(t.Rect[2])),e},st.internal.getHeight=function(t){var e=0;return rn(t)==="object"&&(e=b4(t.Rect[3])),e};var UH=zn.addField=function(t){if(BH(this,t),!(t instanceof Ks))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};zn.AcroFormChoiceField=Hc,zn.AcroFormListBox=Wc,zn.AcroFormComboBox=$c,zn.AcroFormEditBox=Ef,zn.AcroFormButton=fr,zn.AcroFormPushButton=If,zn.AcroFormRadioButton=Kc,zn.AcroFormCheckBox=Nf,zn.AcroFormTextField=Vl,zn.AcroFormPasswordField=Pf,zn.AcroFormAppearance=st,zn.AcroForm={ChoiceField:Hc,ListBox:Wc,ComboBox:$c,EditBox:Ef,Button:fr,PushButton:If,RadioButton:Kc,CheckBox:Nf,TextField:Vl,PasswordField:Pf,Appearance:st},dt.AcroForm={ChoiceField:Hc,ListBox:Wc,ComboBox:$c,EditBox:Ef,Button:fr,PushButton:If,RadioButton:Kc,CheckBox:Nf,TextField:Vl,PasswordField:Pf,Appearance:st};var zH=dt.AcroForm;function iT(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(x,w){var P,j,q,U,W,O=e;if((w=w||e)==="RGBA"||x.data!==void 0&&x.data instanceof Uint8ClampedArray&&"height"in x&&"width"in x)return"RGBA";if(z(x))for(W in n)for(q=n[W],P=0;P<q.length;P+=1){for(U=!0,j=0;j<q[P].length;j+=1)if(q[P][j]!==void 0&&q[P][j]!==x[j]){U=!1;break}if(U===!0){O=W;break}}else for(W in n)for(q=n[W],P=0;P<q.length;P+=1){for(U=!0,j=0;j<q[P].length;j+=1)if(q[P][j]!==void 0&&q[P][j]!==x.charCodeAt(j)){U=!1;break}if(U===!0){O=W;break}}return O===e&&w!==e&&(O=w),O},i=function x(w){for(var P=this.internal.write,j=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);w.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:w.width}),U.push({key:"Height",value:w.height}),w.colorSpace===A.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(w.palette.length/3-1)+" "+("sMask"in w&&w.sMask!==void 0?w.objectId+2:w.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+w.colorSpace}),w.colorSpace===A.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:w.bitsPerComponent}),"decodeParameters"in w&&w.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+w.decodeParameters+">>"}),"transparency"in w&&Array.isArray(w.transparency)){for(var W="",O=0,H=w.transparency.length;O<H;O++)W+=w.transparency[O]+" "+w.transparency[O]+" ";U.push({key:"Mask",value:"["+W+"]"})}w.sMask!==void 0&&U.push({key:"SMask",value:w.objectId+1+" 0 R"});var ne=w.filter!==void 0?["/"+w.filter]:void 0;if(j({data:w.data,additionalKeyValues:U,alreadyAppliedFilters:ne,objectId:w.objectId}),P("endobj"),"sMask"in w&&w.sMask!==void 0){var ae="/Predictor "+w.predictor+" /Colors 1 /BitsPerComponent "+w.bitsPerComponent+" /Columns "+w.width,F={width:w.width,height:w.height,colorSpace:"DeviceGray",bitsPerComponent:w.bitsPerComponent,decodeParameters:ae,data:w.sMask};"filter"in w&&(F.filter=w.filter),x.call(this,F)}if(w.colorSpace===A.INDEXED){var Y=this.internal.newObject();j({data:S(new Uint8Array(w.palette)),objectId:Y}),P("endobj")}},s=function(){var x=this.internal.collections.addImage_images;for(var w in x)i.call(this,x[w])},o=function(){var x,w=this.internal.collections.addImage_images,P=this.internal.write;for(var j in w)P("/I"+(x=w[j]).index,x.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var x=this.internal.collections.addImage_images;return a.call(this),x},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(x){return typeof t["process"+x.toUpperCase()]=="function"},h=function(x){return rn(x)==="object"&&x.nodeType===1},p=function(x,w){if(x.nodeName==="IMG"&&x.hasAttribute("src")){var P=""+x.getAttribute("src");if(P.indexOf("data:image/")===0)return Af(unescape(P).split("base64,").pop());var j=t.loadFile(P,!0);if(j!==void 0)return j}if(x.nodeName==="CANVAS"){if(x.width===0||x.height===0)throw new Error("Given canvas must have data. Canvas width: "+x.width+", height: "+x.height);var q;switch(w){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;case"JPEG":case"JPG":default:q="image/jpeg"}return Af(x.toDataURL(q,1).split("base64,").pop())}},f=function(x){var w=this.internal.collections.addImage_images;if(w){for(var P in w)if(x===w[P].alias)return w[P]}},y=function(x,w,P){return x||w||(x=-96,w=-96),x<0&&(x=-1*P.width*72/x/this.internal.scaleFactor),w<0&&(w=-1*P.height*72/w/this.internal.scaleFactor),x===0&&(x=w*P.width/P.height),w===0&&(w=x*P.height/P.width),[x,w]},b=function(x,w,P,j,q,U){var W=y.call(this,P,j,q),O=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ne=l.call(this);if(P=W[0],j=W[1],ne[q.index]=q,U){U*=Math.PI/180;var ae=Math.cos(U),F=Math.sin(U),Y=function(Q){return Q.toFixed(4)},Z=[Y(ae),Y(F),Y(-1*F),Y(ae),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,O(x),H(w+j),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([O(P),"0","0",O(j),"0","0","cm"].join(" "))):this.internal.write([O(P),"0","0",O(j),O(x),H(w+j),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},A=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(x){var w,P,j=0;if(typeof x=="string")for(P=x.length,w=0;w<P;w++)j=(j<<5)-j+x.charCodeAt(w),j|=0;else if(z(x))for(P=x.byteLength/2,w=0;w<P;w++)j=(j<<5)-j+x[w],j|=0;return j},k=t.__addimage__.validateStringAsBase64=function(x){(x=x||"").toString().trim();var w=!0;return x.length===0&&(w=!1),x.length%4!=0&&(w=!1),/^[A-Za-z0-9+/]+$/.test(x.substr(0,x.length-2))===!1&&(w=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(x.substr(-2))===!1&&(w=!1),w},R=t.__addimage__.extractImageFromDataUrl=function(x){var w=(x=x||"").split("base64,"),P=null;if(w.length===2){var j=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(w[0]);Array.isArray(j)&&(P={mimeType:j[1],charset:j[2],data:w[1]})}return P},M=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(x){return M()&&x instanceof ArrayBuffer};var z=t.__addimage__.isArrayBufferView=function(x){return M()&&typeof Uint32Array<"u"&&(x instanceof Int8Array||x instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(x){for(var w=x.length,P=new Uint8Array(w),j=0;j<w;j++)P[j]=x.charCodeAt(j);return P},S=t.__addimage__.arrayBufferToBinaryString=function(x){for(var w="",P=z(x)?x:new Uint8Array(x),j=0;j<P.length;j+=8192)w+=String.fromCharCode.apply(null,P.subarray(j,j+8192));return w};t.addImage=function(){var x,w,P,j,q,U,W,O,H;if(typeof arguments[1]=="number"?(w=e,P=arguments[1],j=arguments[2],q=arguments[3],U=arguments[4],W=arguments[5],O=arguments[6],H=arguments[7]):(w=arguments[1],P=arguments[2],j=arguments[3],q=arguments[4],U=arguments[5],W=arguments[6],O=arguments[7],H=arguments[8]),rn(x=arguments[0])==="object"&&!h(x)&&"imageData"in x){var ne=x;x=ne.imageData,w=ne.format||w||e,P=ne.x||P||0,j=ne.y||j||0,q=ne.w||ne.width||q,U=ne.h||ne.height||U,W=ne.alias||W,O=ne.compression||O,H=ne.rotation||ne.angle||H}var ae=this.internal.getFilters();if(O===void 0&&ae.indexOf("FlateEncode")!==-1&&(O="SLOW"),isNaN(P)||isNaN(j))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=L.call(this,x,w,W,O);return b.call(this,P,j,q,U,F,H),this};var L=function(x,w,P,j){var q,U,W;if(typeof x=="string"&&r(x)===e){x=unescape(x);var O=D(x,!1);(O!==""||(O=t.loadFile(x,!0))!==void 0)&&(x=O)}if(h(x)&&(x=p(x,w)),w=r(x,w),!u(w))throw new Error("addImage does not support files of type '"+w+"', please ensure that a plugin for '"+w+"' support is added.");if(((W=P)==null||W.length===0)&&(P=function(H){return typeof H=="string"||z(H)?_(H):z(H.data)?_(H.data):null}(x)),(q=f.call(this,P))||(M()&&(x instanceof Uint8Array||w==="RGBA"||(U=x,x=I(x))),q=this["process"+w.toUpperCase()](x,c.call(this),P,function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:v.NONE}(j),U)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},D=t.__addimage__.convertBase64ToBinaryString=function(x,w){var P;w=typeof w!="boolean"||w;var j,q="";if(typeof x=="string"){j=(P=R(x))!==null?P.data:x;try{q=Af(j)}catch(U){if(w)throw k(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};t.getImageProperties=function(x){var w,P,j="";if(h(x)&&(x=p(x)),typeof x=="string"&&r(x)===e&&((j=D(x,!1))===""&&(j=t.loadFile(x)||""),x=j),P=r(x),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!M()||x instanceof Uint8Array||(x=I(x)),!(w=this["process"+P.toUpperCase()](x)))throw new Error("An unknown error occurred whilst processing the image");return w.fileType=P,w}})(dt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((r=c[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){r=c[p];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(b.objId),_=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(v(r.contents))+")",s+=" /Popup "+A.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(v(_))+") >>",b.content=s;var k=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(s+=" /Open true"),s+=" >>",A.content=s,this.internal.write(b.objId,"0 R",A.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(y(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var M=this.annotations._nameMap[r.options.name];r.options.pageNumber=M.page,r.options.top=M.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var z=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=t.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&i.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(b){var A=0,v=n,_="",k=0;for(A=0;A<b.length;A+=1)v[b.charCodeAt(A)]!==void 0?(k++,typeof(v=v[b.charCodeAt(A)])=="number"&&(_+=String.fromCharCode(v),v=n,k=0),A===b.length-1&&(v=n,_+=b.charAt(A-(k-1)),A-=k-1,k=0)):(v=n,_+=b.charAt(A-k),A-=k,k=0);return _};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(b,A,v){return o(b)?s(b)===!1?-1:!c(b)||!o(A)&&!o(v)||!o(v)&&a(A)||a(b)&&!o(A)||a(b)&&l(A)||a(b)&&a(A)?0:u(b)&&o(A)&&!a(A)&&o(v)&&c(v)?3:a(b)||!o(v)?1:2:-1},f=function(b){var A=0,v=0,_=0,k="",R="",M="",z=(b=b||"").split("\\s+"),I=[];for(A=0;A<z.length;A+=1){for(I.push(""),v=0;v<z[A].length;v+=1)k=z[A][v],R=z[A][v-1],M=z[A][v+1],o(k)?(_=p(k,R,M),I[A]+=_!==-1?String.fromCharCode(e[k.charCodeAt(0)][_]):k):I[A]+=k;I[A]=h(I[A])}return I.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var b,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(A)){var _=0;for(v=[],_=0;_<A.length;_+=1)Array.isArray(A[_])?v.push([f(A[_][0]),A[_][1],A[_][2]]):v.push([f(A[_])]);b=v}else b=f(A);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",y])}(dt.API),dt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(b){y=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,f=0,y=0,b=0,A=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,R){return k.concat(A.splitTextToSize(R,v))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)f<(b=this.getStringUnitWidth(l[_],{font:h})*u)&&(f=b);return f!==0&&(y=l.length),{w:f/=p,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,f&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,p){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,y,b,A,v=[],_=[],k=[],R={},M={},z=[],I=[],S=(p=p||{}).autoSize||!1,L=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,x=p.margins||Object.assign({width:this.getPageWidth()},e),w=typeof p.padding=="number"?p.padding:3,P=p.headerBackgroundColor||"#c8c8c8",j=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=x,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=w,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=j,this.setFontSize(D),h==null)_=v=Object.keys(u[0]),k=v.map(function(){return"left"});else if(Array.isArray(h)&&rn(h[0])==="object")for(v=h.map(function(ne){return ne.name}),_=h.map(function(ne){return ne.prompt||ne.name||""}),k=h.map(function(ne){return ne.align||"left"}),f=0;f<h.length;f+=1)M[h[f].name]=h[f].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(_=v=h,k=v.map(function(){return"left"}));if(S||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<v.length;f+=1){for(R[A=v[f]]=u.map(function(ne){return ne[A]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(_[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=R[A],this.setFont(void 0,"normal"),b=0;b<y.length;b+=1)z.push(this.getTextDimensions(y[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[A]=Math.max.apply(null,z)+w+w,z=[]}if(L){var q={};for(f=0;f<v.length;f+=1)q[v[f]]={},q[v[f]].text=_[f],q[v[f]].align=k[f];var U=a.call(this,q,M);I=v.map(function(ne){return new s(l,c,M[ne],U,q[ne].text,void 0,q[ne].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var W=h.reduce(function(ne,ae){return ne[ae.name]=ae.align,ne},{});for(f=0;f<u.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:u[f]},this);var O=a.call(this,u[f],M);for(b=0;b<v.length;b+=1){var H=u[f][v[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:b,data:H},this),o.call(this,new s(l,c,M[v[b]],O,H,f+2,W[v[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(f){var y=l[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/p+u+u},this).reduce(function(f,y){return Math.max(f,y)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(dt.API);var sT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},oT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ob=iT(oT),aT=[100,200,300,400,500,600,700,800,900],qH=iT(aT);function ab(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return sT[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof ob[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function x4(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var HH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function w4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function WH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},HH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=ab(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+w4(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=ob[l],h=u<=ob.normal?-1:1,p=x4(c,oT,u,h);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=sT[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=qH[l],h=x4(c,aT,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+w4(s)+"'.");return o}function S4(t){return t.trimLeft()}function $H(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function KH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var tm,k4,A4,av=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=F;Object.defineProperty(this,"pdf",{get:function(){return Y}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Ae){Z=!!Ae}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(Ae){Q=!!Ae}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(Ae){isNaN(Ae)||(re=Ae)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(Ae){isNaN(Ae)||(ce=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ae){var $;typeof Ae=="number"?$=[Ae,Ae,Ae,Ae]:(($=new Array(4))[0]=Ae[0],$[1]=Ae.length>=2?Ae[1]:$[0],$[2]=Ae.length>=3?Ae[2]:$[0],$[3]=Ae.length>=4?Ae[3]:$[1]),c.margin=$}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(Ae){pe=Ae}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(Ae){he=Ae}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(Ae){_e=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ae){Ae instanceof u&&(c=Ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ae){c.path=Ae}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(Ae){xe=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var $;$=p(Ae),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var $=p(Ae);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var De=null;function je(Ae,$){if(De===null){var Te=function(Pe){var be=[];return Object.keys(Pe).forEach(function(Ee){Pe[Ee].forEach(function(Ve){var Be=null;switch(Ve){case"bold":Be={family:Ee,weight:"bold"};break;case"italic":Be={family:Ee,style:"italic"};break;case"bolditalic":Be={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:Ee}}Be!==null&&(Be.ref={name:Ee,style:Ve},be.push(Be))})}),be}(Ae.getFontList());De=function(Pe){for(var be={},Ee=0;Ee<Pe.length;++Ee){var Ve=ab(Pe[Ee]),Be=Ve.family,Ze=Ve.stretch,ot=Ve.style,$e=Ve.weight;be[Be]=be[Be]||{},be[Be][Ze]=be[Be][Ze]||{},be[Be][Ze][ot]=be[Be][Ze][ot]||{},be[Be][Ze][ot][$e]=Ve}return be}(Te.concat($))}return De}var We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(Ae){De=null,We=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var $;if(this.ctx.font=Ae,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var Te=$[1],Pe=($[2],$[3]),be=$[4],Ee=($[5],$[6]),Ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(Ve==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:Ve==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var Be=function(ct){var Pt,Xe,An=[],Lt=ct.trim();if(Lt==="")return av;if(Lt in _4)return[_4[Lt]];for(;Lt!=="";){switch(Xe=null,Pt=(Lt=S4(Lt)).charAt(0)){case'"':case"'":Xe=$H(Lt.substring(1),Pt);break;default:Xe=KH(Lt)}if(Xe===null||(An.push(Xe[0]),(Lt=S4(Xe[1]))!==""&&Lt.charAt(0)!==","))return av;Lt=Lt.replace(/^,/,"")}return An}(Ee);if(this.fontFaces){var Ze=WH(je(this.pdf,this.fontFaces),Be.map(function(ct){return{family:ct,stretch:"normal",weight:Pe,style:Te}}));this.pdf.setFont(Ze.ref.name,Ze.ref.style)}else{var ot="";(Pe==="bold"||parseInt(Pe,10)>=700||Te==="bold")&&(ot="bold"),Te==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var $e="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<Be.length;lt++){if(this.pdf.internal.getFont(Be[lt],ot,{noFallback:!0,disableWarning:!0})!==void 0){$e=Be[lt];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(Be[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$e=Be[lt],ot="bold";else if(this.pdf.internal.getFont(Be[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$e=Be[lt],ot="normal";break}}if($e===""){for(var Nt=0;Nt<Be.length;Nt++)if(it[Be[Nt]]){$e=it[Be[Nt]];break}}$e=$e===""?"Times":$e,this.pdf.setFont($e,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};h.prototype.setLineDash=function(F){this.lineDash=F},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){R.call(this,"fill",!1)},h.prototype.stroke=function(){R.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(F,Y){if(isNaN(F)||isNaN(Y))throw hn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(F,Y));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(F,Y)},h.prototype.closePath=function(){var F=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&rn(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){F=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},h.prototype.lineTo=function(F,Y){if(isNaN(F)||isNaN(Y))throw hn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(F,Y));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},h.prototype.quadraticCurveTo=function(F,Y,Z,Q){if(isNaN(Z)||isNaN(Q)||isNaN(F)||isNaN(Y))throw hn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(Z,Q)),ce=this.ctx.transform.applyToPoint(new o(F,Y));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.bezierCurveTo=function(F,Y,Z,Q,re,ce){if(isNaN(re)||isNaN(ce)||isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q))throw hn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(re,ce)),he=this.ctx.transform.applyToPoint(new o(F,Y)),_e=this.ctx.transform.applyToPoint(new o(Z,Q));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:_e.x,y2:_e.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},h.prototype.arc=function(F,Y,Z,Q,re,ce){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q)||isNaN(re))throw hn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(F,Y));F=pe.x,Y=pe.y;var he=this.ctx.transform.applyToPoint(new o(0,Z)),_e=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(he.x-_e.x,2)+Math.pow(he.y-_e.y,2))}Math.abs(re-Q)>=2*Math.PI&&(Q=0,re=2*Math.PI),this.path.push({type:"arc",x:F,y:Y,radius:Z,startAngle:Q,endAngle:re,counterclockwise:ce})},h.prototype.arcTo=function(F,Y,Z,Q,re){throw new Error("arcTo not implemented.")},h.prototype.rect=function(F,Y,Z,Q){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q))throw hn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,Y),this.lineTo(F+Z,Y),this.lineTo(F+Z,Y+Q),this.lineTo(F,Y+Q),this.lineTo(F,Y),this.lineTo(F+Z,Y),this.lineTo(F,Y)},h.prototype.fillRect=function(F,Y,Z,Q){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q))throw hn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,Y,Z,Q),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},h.prototype.strokeRect=function(F,Y,Z,Q){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q))throw hn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(F,Y,Z,Q),this.stroke())},h.prototype.clearRect=function(F,Y,Z,Q){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q))throw hn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,Y,Z,Q))},h.prototype.save=function(F){F=typeof F!="boolean"||F;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},h.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(F){var Y,Z,Q,re;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))Y=0,Z=0,Q=0,re=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ce!==null)Y=parseInt(ce[1]),Z=parseInt(ce[2]),Q=parseInt(ce[3]),re=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)Y=parseInt(ce[1]),Z=parseInt(ce[2]),Q=parseInt(ce[3]),re=parseFloat(ce[4]);else{if(re=1,typeof F=="string"&&F.charAt(0)!=="#"){var pe=new JP(F);F=pe.ok?pe.toHex():"#000000"}F.length===4?(Y=F.substring(1,2),Y+=Y,Z=F.substring(2,3),Z+=Z,Q=F.substring(3,4),Q+=Q):(Y=F.substring(1,3),Z=F.substring(3,5),Q=F.substring(5,7)),Y=parseInt(Y,16),Z=parseInt(Z,16),Q=parseInt(Q,16)}}return{r:Y,g:Z,b:Q,a:re,style:F}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(F,Y,Z,Q){if(isNaN(Y)||isNaN(Z)||typeof F!="string")throw hn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!f.call(this)){var re=O(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;w.call(this,{text:F,x:Y,y:Z,scale:ce,angle:re,align:this.textAlign,maxWidth:Q})}},h.prototype.strokeText=function(F,Y,Z,Q){if(isNaN(Y)||isNaN(Z)||typeof F!="string")throw hn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Q=isNaN(Q)?void 0:Q;var re=O(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;w.call(this,{text:F,x:Y,y:Z,scale:ce,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Q})}},h.prototype.measureText=function(F){if(typeof F!="string")throw hn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,Z=this.pdf.internal.scaleFactor,Q=Y.internal.getFontSize(),re=Y.getStringUnitWidth(F)*Q/Y.internal.scaleFactor,ce=function(pe){var he=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new ce({width:re*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(F,Y){if(isNaN(F)||isNaN(Y))throw hn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(F,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(F){if(isNaN(F))throw hn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(F,Y){if(isNaN(F)||isNaN(Y))throw hn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,F,Y);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(F,Y,Z,Q,re,ce){if(isNaN(F)||isNaN(Y)||isNaN(Z)||isNaN(Q)||isNaN(re)||isNaN(ce))throw hn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new l(F,Y,Z,Q,re,ce);this.ctx.transform=this.ctx.transform.multiply(pe)},h.prototype.setTransform=function(F,Y,Z,Q,re,ce){F=isNaN(F)?1:F,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?0:Z,Q=isNaN(Q)?1:Q,re=isNaN(re)?0:re,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(F,Y,Z,Q,re,ce)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(F,Y,Z,Q,re,ce,pe,he,_e){var xe=this.pdf.getImageProperties(F),De=1,je=1,We=1,Ae=1;Q!==void 0&&he!==void 0&&(We=he/Q,Ae=_e/re,De=xe.width/Q*he/Q,je=xe.height/re*_e/re),ce===void 0&&(ce=Y,pe=Z,Y=0,Z=0),Q!==void 0&&he===void 0&&(he=Q,_e=re),Q===void 0&&he===void 0&&(he=xe.width,_e=xe.height);for(var $,Te=this.ctx.transform.decompose(),Pe=O(Te.rotate.shx),be=new l,Ee=(be=(be=(be=be.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new a(ce-Y*We,pe-Z*Ae,Q*De,re*je)),Ve=A.call(this,Ee),Be=[],Ze=0;Ze<Ve.length;Ze+=1)Be.indexOf(Ve[Ze])===-1&&Be.push(Ve[Ze]);if(k(Be),this.autoPaging)for(var ot=Be[0],$e=Be[Be.length-1],it=ot;it<$e+1;it++){this.pdf.setPage(it);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=it===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=it===1?0:ct+(it-2)*Pt;if(this.ctx.clip_path.length!==0){var An=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_($,this.posX+this.margin[3],-Xe+Nt+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=An}var Lt=JSON.parse(JSON.stringify(Ee));Lt=_([Lt],this.posX+this.margin[3],-Xe+Nt+this.ctx.prevPageLastElemOffset)[0];var kr=(it>ot||it<$e)&&b.call(this);kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Pt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,Pe),kr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Pe)};var A=function(F,Y,Z){var Q=[];Y=Y||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":Q.push(Math.floor((F.y+re)/Z)+1);break;case"arc":Q.push(Math.floor((F.y+re-F.radius)/Z)+1),Q.push(Math.floor((F.y+re+F.radius)/Z)+1);break;case"qct":var ce=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);Q.push(Math.floor((ce.y+re)/Z)+1),Q.push(Math.floor((ce.y+ce.h+re)/Z)+1);break;case"bct":var pe=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);Q.push(Math.floor((pe.y+re)/Z)+1),Q.push(Math.floor((pe.y+pe.h+re)/Z)+1);break;case"rect":Q.push(Math.floor((F.y+re)/Z)+1),Q.push(Math.floor((F.y+F.h+re)/Z)+1)}for(var he=0;he<Q.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<Q[he];)v.call(this);return Q},v=function(){var F=this.fillStyle,Y=this.strokeStyle,Z=this.font,Q=this.lineCap,re=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=Y,this.font=Z,this.lineCap=Q,this.lineWidth=re,this.lineJoin=ce},_=function(F,Y,Z){for(var Q=0;Q<F.length;Q++)switch(F[Q].type){case"bct":F[Q].x2+=Y,F[Q].y2+=Z;case"qct":F[Q].x1+=Y,F[Q].y1+=Z;case"mt":case"lt":case"arc":default:F[Q].x+=Y,F[Q].y+=Z}return F},k=function(F){return F.sort(function(Y,Z){return Y-Z})},R=function(F,Y){for(var Z,Q,re=this.fillStyle,ce=this.strokeStyle,pe=this.lineCap,he=this.lineWidth,_e=Math.abs(he*this.ctx.transform.scaleX),xe=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),We=[],Ae=0;Ae<je.length;Ae++)if(je[Ae].x!==void 0)for(var $=A.call(this,je[Ae]),Te=0;Te<$.length;Te+=1)We.indexOf($[Te])===-1&&We.push($[Te]);for(var Pe=0;Pe<We.length;Pe++)for(;this.pdf.internal.getNumberOfPages()<We[Pe];)v.call(this);if(k(We),this.autoPaging)for(var be=We[0],Ee=We[We.length-1],Ve=be;Ve<Ee+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=re,this.strokeStyle=ce,this.lineCap=pe,this.lineWidth=_e,this.lineJoin=xe;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=Ve===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Ve===1?0:ot+(Ve-2)*$e;if(this.ctx.clip_path.length!==0){var lt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Z,this.posX+this.margin[3],-it+Ze+this.ctx.prevPageLastElemOffset),M.call(this,F,!0),this.path=lt}if(Q=JSON.parse(JSON.stringify(De)),this.path=_(Q,this.posX+this.margin[3],-it+Ze+this.ctx.prevPageLastElemOffset),Y===!1||Ve===0){var Nt=(Ve>be||Ve<Ee)&&b.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,$e,null).clip().discardPath()),M.call(this,F,Y),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=_e,M.call(this,F,Y),this.lineWidth=he;this.path=De},M=function(F,Y){if((F!=="stroke"||Y||!y.call(this))&&(F==="stroke"||Y||!f.call(this))){for(var Z,Q,re=[],ce=this.path,pe=0;pe<ce.length;pe++){var he=ce[pe];switch(he.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:he,deltas:[],abs:[]});break;case"lt":var _e=re.length;if(ce[pe-1]&&!isNaN(ce[pe-1].x)&&(Z=[he.x-ce[pe-1].x,he.y-ce[pe-1].y],_e>0)){for(;_e>=0;_e--)if(re[_e-1].close!==!0&&re[_e-1].begin!==!0){re[_e-1].deltas.push(Z),re[_e-1].abs.push(he);break}}break;case"bct":Z=[he.x1-ce[pe-1].x,he.y1-ce[pe-1].y,he.x2-ce[pe-1].x,he.y2-ce[pe-1].y,he.x-ce[pe-1].x,he.y-ce[pe-1].y],re[re.length-1].deltas.push(Z);break;case"qct":var xe=ce[pe-1].x+2/3*(he.x1-ce[pe-1].x),De=ce[pe-1].y+2/3*(he.y1-ce[pe-1].y),je=he.x+2/3*(he.x1-he.x),We=he.y+2/3*(he.y1-he.y),Ae=he.x,$=he.y;Z=[xe-ce[pe-1].x,De-ce[pe-1].y,je-ce[pe-1].x,We-ce[pe-1].y,Ae-ce[pe-1].x,$-ce[pe-1].y],re[re.length-1].deltas.push(Z);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(he)}}Q=Y?null:F==="stroke"?"stroke":"fill";for(var Te=!1,Pe=0;Pe<re.length;Pe++)if(re[Pe].arc)for(var be=re[Pe].abs,Ee=0;Ee<be.length;Ee++){var Ve=be[Ee];Ve.type==="arc"?S.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,Y,!Te):P.call(this,Ve.x,Ve.y),Te=!0}else if(re[Pe].close===!0)this.pdf.internal.out("h"),Te=!1;else if(re[Pe].begin!==!0){var Be=re[Pe].start.x,Ze=re[Pe].start.y;j.call(this,re[Pe].deltas,Be,Ze),Te=!0}Q&&L.call(this,Q),Y&&D.call(this)}},z=function(F){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Z;case"top":return F+Y-Z;case"hanging":return F+Y-2*Z;case"middle":return F+Y/2-Z;case"ideographic":return F;case"alphabetic":default:return F}},I=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(Y,Z){this.colorStops.push([Y,Z])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(F,Y,Z,Q,re,ce,pe,he,_e){for(var xe=U.call(this,Z,Q,re,ce),De=0;De<xe.length;De++){var je=xe[De];De===0&&(_e?x.call(this,je.x1+F,je.y1+Y):P.call(this,je.x1+F,je.y1+Y)),q.call(this,F,Y,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}he?D.call(this):L.call(this,pe)},L=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},x=function(F,Y){this.pdf.internal.out(n(F)+" "+r(Y)+" m")},w=function(F){var Y;switch(F.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var Z=this.pdf.getTextDimensions(F.text),Q=z.call(this,F.y),re=I.call(this,Q)-Z.h,ce=this.ctx.transform.applyToPoint(new o(F.x,Q)),pe=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var _e,xe,De,je=this.ctx.transform.applyToRectangle(new a(F.x,Q,Z.w,Z.h)),We=he.applyToRectangle(new a(F.x,re,Z.w,Z.h)),Ae=A.call(this,We),$=[],Te=0;Te<Ae.length;Te+=1)$.indexOf(Ae[Te])===-1&&$.push(Ae[Te]);if(k($),this.autoPaging)for(var Pe=$[0],be=$[$.length-1],Ee=Pe;Ee<be+1;Ee++){this.pdf.setPage(Ee);var Ve=Ee===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[2],ot=Ze-this.margin[0],$e=this.pdf.internal.pageSize.width-this.margin[1],it=$e-this.margin[3],lt=Ee===1?0:Be+(Ee-2)*ot;if(this.ctx.clip_path.length!==0){var Nt=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(_e,this.posX+this.margin[3],-1*lt+Ve),M.call(this,"fill",!0),this.path=Nt}var ct=_([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*F.scale),De=this.lineWidth,this.lineWidth=De*F.scale);var Pt=this.autoPaging!=="text";if(Pt||ct.y+ct.h<=Ze){if(Pt||ct.y>=Ve&&ct.x<=$e){var Xe=Pt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||$e-ct.x)[0],An=_([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset)[0],Lt=Pt&&(Ee>Pe||Ee<be)&&b.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,ot,null).clip().discardPath()),this.pdf.text(Xe,An.x,An.y,{angle:F.angle,align:Y,renderingMode:F.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else ct.y<Ze&&(this.ctx.prevPageLastElemOffset+=Ze-ct.y);F.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=De)}else F.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*F.scale),De=this.lineWidth,this.lineWidth=De*F.scale),this.pdf.text(F.text,ce.x+this.posX,ce.y+this.posY,{angle:F.angle,align:Y,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=De)},P=function(F,Y,Z,Q){Z=Z||0,Q=Q||0,this.pdf.internal.out(n(F+Z)+" "+r(Y+Q)+" l")},j=function(F,Y,Z){return this.pdf.lines(F,Y,Z,null,null)},q=function(F,Y,Z,Q,re,ce,pe,he){this.pdf.internal.out([e(i(Z+F)),e(s(Q+Y)),e(i(re+F)),e(s(ce+Y)),e(i(pe+F)),e(s(he+Y)),"c"].join(" "))},U=function(F,Y,Z,Q){for(var re=2*Math.PI,ce=Math.PI/2;Y>Z;)Y-=re;var pe=Math.abs(Z-Y);pe<re&&Q&&(pe=re-pe);for(var he=[],_e=Q?-1:1,xe=Y;pe>1e-5;){var De=xe+_e*Math.min(pe,ce);he.push(W.call(this,F,xe,De)),pe-=Math.abs(De-xe),xe=De}return he},W=function(F,Y,Z){var Q=(Z-Y)/2,re=F*Math.cos(Q),ce=F*Math.sin(Q),pe=re,he=-ce,_e=pe*pe+he*he,xe=_e+pe*re+he*ce,De=4/3*(Math.sqrt(2*_e*xe)-xe)/(pe*ce-he*re),je=pe-De*he,We=he+De*pe,Ae=je,$=-We,Te=Q+Y,Pe=Math.cos(Te),be=Math.sin(Te);return{x1:F*Math.cos(Y),y1:F*Math.sin(Y),x2:je*Pe-We*be,y2:je*be+We*Pe,x3:Ae*Pe-$*be,y3:Ae*be+$*Pe,x4:F*Math.cos(Z),y4:F*Math.sin(Z)}},O=function(F){return 180*F/Math.PI},H=function(F,Y,Z,Q,re,ce){var pe=F+.5*(Z-F),he=Y+.5*(Q-Y),_e=re+.5*(Z-re),xe=ce+.5*(Q-ce),De=Math.min(F,re,pe,_e),je=Math.max(F,re,pe,_e),We=Math.min(Y,ce,he,xe),Ae=Math.max(Y,ce,he,xe);return new a(De,We,je-De,Ae-We)},ne=function(F,Y,Z,Q,re,ce,pe,he){var _e,xe,De,je,We,Ae,$,Te,Pe,be,Ee,Ve,Be,Ze,ot=Z-F,$e=Q-Y,it=re-Z,lt=ce-Q,Nt=pe-re,ct=he-ce;for(xe=0;xe<41;xe++)Pe=($=(De=F+(_e=xe/40)*ot)+_e*((We=Z+_e*it)-De))+_e*(We+_e*(re+_e*Nt-We)-$),be=(Te=(je=Y+_e*$e)+_e*((Ae=Q+_e*lt)-je))+_e*(Ae+_e*(ce+_e*ct-Ae)-Te),xe==0?(Ee=Pe,Ve=be,Be=Pe,Ze=be):(Ee=Math.min(Ee,Pe),Ve=Math.min(Ve,be),Be=Math.max(Be,Pe),Ze=Math.max(Ze,be));return new a(Math.round(Ee),Math.round(Ve),Math.round(Be-Ee),Math.round(Ze-Ve))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,Y,Z=(F=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:Y}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(dt.API),function(t){var e=function(s){var o,a,l,c,u,h,p,f,y,b;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(b=u%85))/85)-(y=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)%85,a.push(h+33,p+33,f+33,y+33,b+33)):a.push(122);return function(A,v){for(var _=v;_>0;_--)A.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,h=String,p="length",f=255,y="charCodeAt",b="slice",A="replace";for(s[b](-2),s=s[b](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[b](s[p]%5||5))[p];u>c;c+=5)a=52200625*(s[y](c)-33)+614125*(s[y](c+1)-33)+7225*(s[y](c+2)-33)+85*(s[y](c+3)-33)+(s[y](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(v,_){for(var k=_;k>0;k--)v.pop()}(l,o[p]),h.fromCharCode.apply(h,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=tb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(dt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var h=new XMLHttpRequest,p=0,f=function(y){var b=y.length,A=[],v=String.fromCharCode;for(p=0;p<b;p+=1)A.push(v(255&y.charCodeAt(p)));return A.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return f(h.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(dt.API),function(t){function e(){return(yt.html2canvas?Promise.resolve(yt.html2canvas):Q2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(yt.DOMPurify?Promise.resolve(yt.DOMPurify):Q2(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=rn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var f=c[p],y=f.src.find(function(b){return b.format==="truetype"});y&&l.addFont(y.url,f.ref.name,f.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,dt.getPageSize=function(o,a,l){if(rn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,y=0,b=0;if(p.hasOwnProperty(h))y=p[h][1]/u,b=p[h][0]/u;else try{y=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",b>y&&(f=b,b=y,y=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>b&&(f=b,b=y,y=f)}return{width:b,height:y,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(ab):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(dt.API),dt.API.addJS=function(t){return A4=t,this.internal.events.subscribe("postPutResources",function(){tm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(tm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),k4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+A4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){tm!==void 0&&k4!==void 0&&this.internal.out("/Names <</JavaScript "+tm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var h=n.internal.newObject();u.push(h);var p=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var p,f=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,b={width:0,height:0,numcomponents:1},A=4;A<y;A+=2){if(A+=f,e.indexOf(h.charCodeAt(A+1))!==-1){p=256*h.charCodeAt(A+5)+h.charCodeAt(A+6),b={width:256*h.charCodeAt(A+7)+h.charCodeAt(A+8),height:p,numcomponents:h.charCodeAt(A+9)};break}f=256*h.charCodeAt(A+2)+h.charCodeAt(A+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(dt.API);var Gu,nm,E4,I4,N4,GH=function(){var t,e,n;function r(s){var o,a,l,c,u,h,p,f,y,b,A,v,_,k;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var R,M;for(M=[],R=0;R<4;++R)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),s=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(_=0;0<=b?_<b:_>b;0<=b?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(A=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,A.slice(0,p)),this.text[f]=String.fromCharCode.apply(String,A.slice(p+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(h,p,f,y){var b,A,v,_,k,R,M,z,I,S,L,D,x,w,P,j,q,U,W,O,H,ne=Math.ceil((c.width-h)/f),ae=Math.ceil((c.height-p)/y),F=c.width==ne&&c.height==ae;for(w=o*ne,D=F?a:new Uint8Array(w*ae),R=s.length,x=0,A=0;x<ae&&l<R;){switch(s[l++]){case 0:for(_=q=0;q<w;_=q+=1)D[A++]=s[l++];break;case 1:for(_=U=0;U<w;_=U+=1)b=s[l++],k=_<o?0:D[A-o],D[A++]=(b+k)%256;break;case 2:for(_=W=0;W<w;_=W+=1)b=s[l++],v=(_-_%o)/o,P=x&&D[(x-1)*w+v*o+_%o],D[A++]=(P+b)%256;break;case 3:for(_=O=0;O<w;_=O+=1)b=s[l++],v=(_-_%o)/o,k=_<o?0:D[A-o],P=x&&D[(x-1)*w+v*o+_%o],D[A++]=(b+Math.floor((k+P)/2))%256;break;case 4:for(_=H=0;H<w;_=H+=1)b=s[l++],v=(_-_%o)/o,k=_<o?0:D[A-o],x===0?P=j=0:(P=D[(x-1)*w+v*o+_%o],j=v&&D[(x-1)*w+(v-1)*o+_%o]),M=k+P-j,z=Math.abs(M-k),S=Math.abs(M-P),L=Math.abs(M-j),I=z<=S&&z<=L?k:S<=L?P:j,D[A++]=(b+I)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!F){var Y=((p+x*y)*c.width+h)*o,Z=x*w;for(_=0;_<ne;_+=1){for(var Q=0;Q<o;Q+=1)a[Y++]=D[Z++];Y+=(f-1)*o}}x++}}return s=AH(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,h,p,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=h=0,p=a.length;h<p;o=h+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[s++])!=null?f:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,h,p,f,y,b,A,v;if(l=this.colors,b=null,a=this.hasAlphaChannel,this.palette.length&&(b=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,a=!0),y=(c=s.data||s).length,h=b||o,u=p=0,l===1)for(;u<y;)f=b?4*o[u/4]:p,A=h[f++],c[u++]=A,c[u++]=A,c[u++]=A,c[u++]=a?h[f++]:255,p=f;else for(;u<y;)f=b?4*o[u/4]:p,c[u++]=h[f++],c[u++]=h[f++],c[u++]=h[f++],c[u++]=a?h[f++]:255,p=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(yt)==="[object Window]"){try{e=yt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,h,p,f;if(this.animation){for(f=[],a=u=0,h=(p=this.animation.frames).length;u<h;a=++u)o=p[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,h,p=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(o=function(){var f,y;if(f=a++%c,y=l[f],p.renderFrame(s,f),c>1&&a/c<u)return p.animation._timeout=setTimeout(o,y.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function YH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],h=0,p=null,f=0,y=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],!(1&b)&&(p=null),f=b>>2&7,e++;break;case 254:for(;;){if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var A=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,R=t[e++],M=R>>6&1,z=1<<(7&R)+1,I=a,S=l,L=!1;R>>7&&(L=!0,I=e,S=z,e+=3*z);var D=e;for(e++;;){var x;if(!((x=t[e++])>=0))throw Error("Invalid block size");if(x===0)break;e+=x}u.push({x:A,y:v,width:_,height:k,has_local_palette:L,palette_offset:I,palette_size:S,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!M,delay:h,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(w){if(w<0||w>=u.length)throw new Error("Frame index out of range.");return u[w]},this.decodeAndBlitFrameBGRA=function(w,P){var j=this.frameInfo(w),q=j.width*j.height,U=new Uint8Array(q);P4(t,j.data_offset,U,q);var W=j.palette_offset,O=j.transparent_index;O===null&&(O=256);var H=j.width,ne=n-H,ae=H,F=4*(j.y*n+j.x),Y=4*((j.y+j.height)*n+j.x),Z=F,Q=4*ne;j.interlaced===!0&&(Q+=4*n*7);for(var re=8,ce=0,pe=U.length;ce<pe;++ce){var he=U[ce];if(ae===0&&(ae=H,(Z+=Q)>=Y&&(Q=4*ne+4*n*(re-1),Z=F+(H+ne)*(re<<1),re>>=1)),he===O)Z+=4;else{var _e=t[W+3*he],xe=t[W+3*he+1],De=t[W+3*he+2];P[Z++]=De,P[Z++]=xe,P[Z++]=_e,P[Z++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(w,P){var j=this.frameInfo(w),q=j.width*j.height,U=new Uint8Array(q);P4(t,j.data_offset,U,q);var W=j.palette_offset,O=j.transparent_index;O===null&&(O=256);var H=j.width,ne=n-H,ae=H,F=4*(j.y*n+j.x),Y=4*((j.y+j.height)*n+j.x),Z=F,Q=4*ne;j.interlaced===!0&&(Q+=4*n*7);for(var re=8,ce=0,pe=U.length;ce<pe;++ce){var he=U[ce];if(ae===0&&(ae=H,(Z+=Q)>=Y&&(Q=4*ne+4*n*(re-1),Z=F+(H+ne)*(re<<1),re>>=1)),he===O)Z+=4;else{var _e=t[W+3*he],xe=t[W+3*he+1],De=t[W+3*he+2];P[Z++]=_e,P[Z++]=xe,P[Z++]=De,P[Z++]=255}--ae}}}function P4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,h=0,p=0,f=t[e++],y=new Int32Array(4096),b=null;;){for(;u<16&&f!==0;)h|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var A=h&c;if(h>>=l,u-=l,A!==s){if(A===o)break;for(var v=A<a?A:b,_=0,k=v;k>s;)k=y[k]>>8,++_;var R=k;if(p+_+(v!==A?1:0)>r)return void hn.log("Warning, gif stream longer than expected.");n[p++]=R;var M=p+=_;for(v!==A&&(n[p++]=R),k=v;_--;)k=y[k],n[--M]=255&k,k>>=8;b!==null&&a<4096&&(y[a++]=b<<8|R,a>=c+1&&l<12&&(++l,c=c<<1|1)),b=A}else a=o+1,c=(1<<(l=i+1))-1,b=null}return p!==r&&hn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function lv(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),p=new Array(65535),f=new Array(64),y=new Array(64),b=[],A=0,v=7,_=new Array(64),k=new Array(64),R=new Array(64),M=new Array(256),z=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],w=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(F,Y){for(var Z=0,Q=0,re=new Array,ce=1;ce<=16;ce++){for(var pe=1;pe<=F[ce];pe++)re[Y[Q]]=[],re[Y[Q]][0]=Z,re[Y[Q]][1]=ce,Q++,Z++;Z*=2}return re}function W(F){for(var Y=F[0],Z=F[1]-1;Z>=0;)Y&1<<Z&&(A|=1<<v),Z--,--v<0&&(A==255?(O(255),O(0)):O(A),v=7,A=0)}function O(F){b.push(F)}function H(F){O(F>>8&255),O(255&F)}function ne(F,Y,Z,Q,re){for(var ce,pe=re[0],he=re[240],_e=function(be,Ee){var Ve,Be,Ze,ot,$e,it,lt,Nt,ct,Pt,Xe=0;for(ct=0;ct<8;++ct){Ve=be[Xe],Be=be[Xe+1],Ze=be[Xe+2],ot=be[Xe+3],$e=be[Xe+4],it=be[Xe+5],lt=be[Xe+6];var An=Ve+(Nt=be[Xe+7]),Lt=Ve-Nt,kr=Be+lt,_t=Be-lt,gt=Ze+it,ai=Ze-it,Mt=ot+$e,ts=ot-$e,ln=An+Mt,cr=An-Mt,li=kr+gt,Jt=kr-gt;be[Xe]=ln+li,be[Xe+4]=ln-li;var ht=.707106781*(Jt+cr);be[Xe+2]=cr+ht,be[Xe+6]=cr-ht;var Bt=.382683433*((ln=ts+ai)-(Jt=_t+Lt)),_i=.5411961*ln+Bt,Fn=1.306562965*Jt+Bt,Br=.707106781*(li=ai+_t),ji=Lt+Br,nt=Lt-Br;be[Xe+5]=nt+_i,be[Xe+3]=nt-_i,be[Xe+1]=ji+Fn,be[Xe+7]=ji-Fn,Xe+=8}for(Xe=0,ct=0;ct<8;++ct){Ve=be[Xe],Be=be[Xe+8],Ze=be[Xe+16],ot=be[Xe+24],$e=be[Xe+32],it=be[Xe+40],lt=be[Xe+48];var wi=Ve+(Nt=be[Xe+56]),Ur=Ve-Nt,nr=Be+lt,Wn=Be-lt,Vn=Ze+it,rr=Ze-it,Ia=ot+$e,bs=ot-$e,zr=wi+Ia,Si=wi-Ia,ci=nr+Vn,ui=nr-Vn;be[Xe]=zr+ci,be[Xe+32]=zr-ci;var $n=.707106781*(ui+Si);be[Xe+16]=Si+$n,be[Xe+48]=Si-$n;var Fi=.382683433*((zr=bs+rr)-(ui=Wn+Ur)),Ys=.5411961*zr+Fi,Qs=1.306562965*ui+Fi,Xs=.707106781*(ci=rr+Wn),Lo=Ur+Xs,Ro=Ur-Xs;be[Xe+40]=Ro+Ys,be[Xe+24]=Ro-Ys,be[Xe+8]=Lo+Qs,be[Xe+56]=Lo-Qs,Xe++}for(ct=0;ct<64;++ct)Pt=be[ct]*Ee[ct],f[ct]=Pt>0?Pt+.5|0:Pt-.5|0;return f}(F,Y),xe=0;xe<64;++xe)y[I[xe]]=_e[xe];var De=y[0]-Z;Z=y[0],De==0?W(Q[0]):(W(Q[p[ce=32767+De]]),W(h[ce]));for(var je=63;je>0&&y[je]==0;)je--;if(je==0)return W(pe),Z;for(var We,Ae=1;Ae<=je;){for(var $=Ae;y[Ae]==0&&Ae<=je;)++Ae;var Te=Ae-$;if(Te>=16){We=Te>>4;for(var Pe=1;Pe<=We;++Pe)W(he);Te&=15}ce=32767+y[Ae],W(re[(Te<<4)+p[ce]]),W(h[ce]),Ae++}return je!=63&&W(pe),Z}function ae(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(Y){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var re=o((Z[Q]*Y+50)/100);re=Math.min(Math.max(re,1),255),a[I[Q]]=re}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var he=o((ce[pe]*Y+50)/100);he=Math.min(Math.max(he,1),255),l[I[pe]]=he}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,De=0;De<8;De++)for(var je=0;je<8;je++)c[xe]=1/(a[I[xe]]*_e[De]*_e[je]*8),u[xe]=1/(l[I[xe]]*_e[De]*_e[je]*8),xe++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,Y){Y&&ae(Y),b=new Array,A=0,v=7,H(65496),H(65504),H(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),H(1),H(1),O(0),O(0),function(){H(65499),H(132),O(0);for(var Be=0;Be<64;Be++)O(a[Be]);O(1);for(var Ze=0;Ze<64;Ze++)O(l[Ze])}(),function(Be,Ze){H(65472),H(17),O(8),H(Ze),H(Be),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(F.width,F.height),function(){H(65476),H(418),O(0);for(var Be=0;Be<16;Be++)O(S[Be+1]);for(var Ze=0;Ze<=11;Ze++)O(L[Ze]);O(16);for(var ot=0;ot<16;ot++)O(D[ot+1]);for(var $e=0;$e<=161;$e++)O(x[$e]);O(1);for(var it=0;it<16;it++)O(w[it+1]);for(var lt=0;lt<=11;lt++)O(P[lt]);O(17);for(var Nt=0;Nt<16;Nt++)O(j[Nt+1]);for(var ct=0;ct<=161;ct++)O(q[ct])}(),H(65498),H(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var Z=0,Q=0,re=0;A=0,v=7,this.encode.displayName="_encode_";for(var ce,pe,he,_e,xe,De,je,We,Ae,$=F.data,Te=F.width,Pe=F.height,be=4*Te,Ee=0;Ee<Pe;){for(ce=0;ce<be;){for(xe=be*Ee+ce,je=-1,We=0,Ae=0;Ae<64;Ae++)De=xe+(We=Ae>>3)*be+(je=4*(7&Ae)),Ee+We>=Pe&&(De-=be*(Ee+1+We-Pe)),ce+je>=be&&(De-=ce+je-be+4),pe=$[De++],he=$[De++],_e=$[De++],_[Ae]=(z[pe]+z[he+256>>0]+z[_e+512>>0]>>16)-128,k[Ae]=(z[pe+768>>0]+z[he+1024>>0]+z[_e+1280>>0]>>16)-128,R[Ae]=(z[pe+1280>>0]+z[he+1536>>0]+z[_e+1792>>0]>>16)-128;Z=ne(_,c,Z,e,r),Q=ne(k,u,Q,n,i),re=ne(R,u,re,n,i),ce+=32}Ee+=8}if(v>=0){var Ve=[];Ve[1]=v+1,Ve[0]=(1<<v+1)-1,W(Ve)}return H(65497),new Uint8Array(b)},t=t||50,function(){for(var F=String.fromCharCode,Y=0;Y<256;Y++)M[Y]=F(Y)}(),e=U(S,L),n=U(w,P),r=U(D,x),i=U(j,q),function(){for(var F=1,Y=2,Z=1;Z<=15;Z++){for(var Q=F;Q<Y;Q++)p[32767+Q]=Z,h[32767+Q]=[],h[32767+Q][1]=Z,h[32767+Q][0]=Q;for(var re=-(Y-1);re<=-F;re++)p[32767+re]=Z,h[32767+re]=[],h[32767+re][1]=Z,h[32767+re][0]=Y-1+re;F<<=1,Y<<=1}}(),function(){for(var F=0;F<256;F++)z[F]=19595*F,z[F+256>>0]=38470*F,z[F+512>>0]=7471*F+32768,z[F+768>>0]=-11059*F,z[F+1024>>0]=-21709*F,z[F+1280>>0]=32768*F+8421375,z[F+1536>>0]=-27439*F,z[F+1792>>0]=-5329*F}(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ls(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T4(t){function e(S){if(!S)throw Error("assert :P")}function n(S,L,D){for(var x=0;4>x;x++)if(S[L+x]!=D.charCodeAt(x))return!0;return!1}function r(S,L,D,x,w){for(var P=0;P<w;P++)S[L+P]=D[x+P]}function i(S,L,D,x){for(var w=0;w<x;w++)S[L+w]=D}function s(S){return new Int32Array(S)}function o(S,L){for(var D=[],x=0;x<S;x++)D.push(new L);return D}function a(S,L){var D=[];return function x(w,P,j){for(var q=j[P],U=0;U<q&&(w.push(j.length>P+1?[]:new L),!(j.length<P+1));U++)x(w[U],P+1,j)}(D,0,S),D}var l=function(){var S=this;function L(d,m){for(var T=1<<m-1>>>0;d&T;)T>>>=1;return T?(d&T-1)+T:d}function D(d,m,T,V,G){e(!(V%T));do d[m+(V-=T)]=G;while(0<V)}function x(d,m,T,V,G){if(e(2328>=G),512>=G)var X=s(512);else if((X=s(G))==null)return 0;return function(J,te,ie,se,de,we){var Se,ve,Me=te,Ie=1<<ie,fe=s(16),ge=s(16);for(e(de!=0),e(se!=null),e(J!=null),e(0<ie),ve=0;ve<de;++ve){if(15<se[ve])return 0;++fe[se[ve]]}if(fe[0]==de)return 0;for(ge[1]=0,Se=1;15>Se;++Se){if(fe[Se]>1<<Se)return 0;ge[Se+1]=ge[Se]+fe[Se]}for(ve=0;ve<de;++ve)Se=se[ve],0<se[ve]&&(we[ge[Se]++]=ve);if(ge[15]==1)return(se=new w).g=0,se.value=we[0],D(J,Me,1,Ie,se),Ie;var Ce,Fe=-1,Re=Ie-1,tt=0,Ye=1,ft=1,Je=1<<ie;for(ve=0,Se=1,de=2;Se<=ie;++Se,de<<=1){if(Ye+=ft<<=1,0>(ft-=fe[Se]))return 0;for(;0<fe[Se];--fe[Se])(se=new w).g=Se,se.value=we[ve++],D(J,Me+tt,de,Je,se),tt=L(tt,Se)}for(Se=ie+1,de=2;15>=Se;++Se,de<<=1){if(Ye+=ft<<=1,0>(ft-=fe[Se]))return 0;for(;0<fe[Se];--fe[Se]){if(se=new w,(tt&Re)!=Fe){for(Me+=Je,Ce=1<<(Fe=Se)-ie;15>Fe&&!(0>=(Ce-=fe[Fe]));)++Fe,Ce<<=1;Ie+=Je=1<<(Ce=Fe-ie),J[te+(Fe=tt&Re)].g=Ce+ie,J[te+Fe].value=Me-te-Fe}se.g=Se-ie,se.value=we[ve++],D(J,Me+(tt>>ie),de,Je,se),tt=L(tt,Se)}}return Ye!=2*ge[15]-1?0:Ie}(d,m,T,V,G,X)}function w(){this.value=this.g=0}function P(){this.value=this.g=0}function j(){this.G=o(5,w),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ir,P)}function q(d,m,T,V){e(d!=null),e(m!=null),e(2147483648>V),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=m,d.pa=T,d.Jd=m,d.Yc=T+V,d.Zc=4<=V?T+V-4+1:T,ce(d)}function U(d,m){for(var T=0;0<m--;)T|=he(d,128)<<m;return T}function W(d,m){var T=U(d,m);return pe(d)?-T:T}function O(d,m,T,V){var G,X=0;for(e(d!=null),e(m!=null),e(4294967288>V),d.Sb=V,d.Ra=0,d.u=0,d.h=0,4<V&&(V=4),G=0;G<V;++G)X+=m[T+G]<<8*G;d.Ra=X,d.bb=V,d.oa=m,d.pa=T}function H(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Ru-8>>>0,++d.bb,d.u-=8;Z(d)&&(d.h=1,d.u=0)}function ne(d,m){if(e(0<=m),!d.h&&m<=Lu){var T=Y(d)&Cu[m];return d.u+=m,H(d),T}return d.h=1,d.u=0}function ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(d){return d.Ra>>>(d.u&Ru-1)>>>0}function Z(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Ru}function Q(d,m){d.u=m,d.h=Z(d)}function re(d){d.u>=od&&(e(d.u>=od),H(d))}function ce(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function pe(d){return U(d,1)}function he(d,m){var T=d.Ca;0>d.b&&ce(d);var V=d.b,G=T*m>>>8,X=(d.I>>>V>G)+0;for(X?(T-=G,d.I-=G+1<<V>>>0):T=G+1,V=T,G=0;256<=V;)G+=8,V>>=8;return V=7^G+Ai[V],d.b-=V,d.Ca=(T<<V)-1,X}function _e(d,m,T){d[m+0]=T>>24&255,d[m+1]=T>>16&255,d[m+2]=T>>8&255,d[m+3]=T>>0&255}function xe(d,m){return d[m+0]<<0|d[m+1]<<8}function De(d,m){return xe(d,m)|d[m+2]<<16}function je(d,m){return xe(d,m)|xe(d,m+2)<<16}function We(d,m){var T=1<<m;return e(d!=null),e(0<m),d.X=s(T),d.X==null?0:(d.Mb=32-m,d.Xa=m,1)}function Ae(d,m){e(d!=null),e(m!=null),e(d.Xa==m.Xa),r(m.X,0,d.X,0,1<<m.Xa)}function $(){this.X=[],this.Xa=this.Mb=0}function Te(d,m,T,V){e(T!=null),e(V!=null);var G=T[0],X=V[0];return G==0&&(G=(d*X+m/2)/m),X==0&&(X=(m*G+d/2)/d),0>=G||0>=X?0:(T[0]=G,V[0]=X,1)}function Pe(d,m){return d+(1<<m)-1>>>m}function be(d,m){return((4278255360&d)+(4278255360&m)>>>0&4278255360)+((16711935&d)+(16711935&m)>>>0&16711935)>>>0}function Ee(d,m){S[m]=function(T,V,G,X,J,te,ie){var se;for(se=0;se<J;++se){var de=S[d](te[ie+se-1],G,X+se);te[ie+se]=be(T[V+se],de)}}}function Ve(){this.ud=this.hd=this.jd=0}function Be(d,m){return((4278124286&(d^m))>>>1)+(d&m)>>>0}function Ze(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ot(d,m){return Ze(d+(d-m+.5>>1))}function $e(d,m,T){return Math.abs(m-T)-Math.abs(d-T)}function it(d,m,T,V,G,X,J){for(V=X[J-1],T=0;T<G;++T)X[J+T]=V=be(d[m+T],V)}function lt(d,m,T,V,G){var X;for(X=0;X<T;++X){var J=d[m+X],te=J>>8&255,ie=16711935&(ie=(ie=16711935&J)+((te<<16)+te));V[G+X]=(4278255360&J)+ie>>>0}}function Nt(d,m){m.jd=d>>0&255,m.hd=d>>8&255,m.ud=d>>16&255}function ct(d,m,T,V,G,X){var J;for(J=0;J<V;++J){var te=m[T+J],ie=te>>>8,se=te,de=255&(de=(de=te>>>16)+((d.jd<<24>>24)*(ie<<24>>24)>>>5));se=255&(se=(se=se+((d.hd<<24>>24)*(ie<<24>>24)>>>5))+((d.ud<<24>>24)*(de<<24>>24)>>>5)),G[X+J]=(4278255360&te)+(de<<16)+se}}function Pt(d,m,T,V,G){S[m]=function(X,J,te,ie,se,de,we,Se,ve){for(ie=we;ie<Se;++ie)for(we=0;we<ve;++we)se[de++]=G(te[V(X[J++])])},S[d]=function(X,J,te,ie,se,de,we){var Se=8>>X.b,ve=X.Ea,Me=X.K[0],Ie=X.w;if(8>Se)for(X=(1<<X.b)-1,Ie=(1<<Se)-1;J<te;++J){var fe,ge=0;for(fe=0;fe<ve;++fe)fe&X||(ge=V(ie[se++])),de[we++]=G(Me[ge&Ie]),ge>>=Se}else S["VP8LMapColor"+T](ie,se,Me,Ie,de,we,J,te,ve)}}function Xe(d,m,T,V,G){for(T=m+T;m<T;){var X=d[m++];V[G++]=X>>16&255,V[G++]=X>>8&255,V[G++]=X>>0&255}}function An(d,m,T,V,G){for(T=m+T;m<T;){var X=d[m++];V[G++]=X>>16&255,V[G++]=X>>8&255,V[G++]=X>>0&255,V[G++]=X>>24&255}}function Lt(d,m,T,V,G){for(T=m+T;m<T;){var X=(J=d[m++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;V[G++]=X,V[G++]=J}}function kr(d,m,T,V,G){for(T=m+T;m<T;){var X=(J=d[m++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;V[G++]=X,V[G++]=J}}function _t(d,m,T,V,G){for(T=m+T;m<T;){var X=d[m++];V[G++]=X>>0&255,V[G++]=X>>8&255,V[G++]=X>>16&255}}function gt(d,m,T,V,G,X){if(X==0)for(T=m+T;m<T;)_e(V,((X=d[m++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),G+=32;else r(V,G,d,m,T)}function ai(d,m){S[m][0]=S[d+"0"],S[m][1]=S[d+"1"],S[m][2]=S[d+"2"],S[m][3]=S[d+"3"],S[m][4]=S[d+"4"],S[m][5]=S[d+"5"],S[m][6]=S[d+"6"],S[m][7]=S[d+"7"],S[m][8]=S[d+"8"],S[m][9]=S[d+"9"],S[m][10]=S[d+"10"],S[m][11]=S[d+"11"],S[m][12]=S[d+"12"],S[m][13]=S[d+"13"],S[m][14]=S[d+"0"],S[m][15]=S[d+"0"]}function Mt(d){return d==O1||d==j1||d==tg||d==F1}function ts(){this.eb=[],this.size=this.A=this.fb=0}function ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ts,this.f.kb=new ln,this.sd=null}function li(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ht(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Bt(d,m){var T=d.T,V=m.ba.f.RGBA,G=V.eb,X=V.fb+d.ka*V.A,J=ls[m.ba.S],te=d.y,ie=d.O,se=d.f,de=d.N,we=d.ea,Se=d.W,ve=m.cc,Me=m.dc,Ie=m.Mc,fe=m.Nc,ge=d.ka,Ce=d.ka+d.T,Fe=d.U,Re=Fe+1>>1;for(ge==0?J(te,ie,null,null,se,de,we,Se,se,de,we,Se,G,X,null,null,Fe):(J(m.ec,m.fc,te,ie,ve,Me,Ie,fe,se,de,we,Se,G,X-V.A,G,X,Fe),++T);ge+2<Ce;ge+=2)ve=se,Me=de,Ie=we,fe=Se,de+=d.Rc,Se+=d.Rc,X+=2*V.A,J(te,(ie+=2*d.fa)-d.fa,te,ie,ve,Me,Ie,fe,se,de,we,Se,G,X-V.A,G,X,Fe);return ie+=d.fa,d.j+Ce<d.o?(r(m.ec,m.fc,te,ie,Fe),r(m.cc,m.dc,se,de,Re),r(m.Mc,m.Nc,we,Se,Re),T--):1&Ce||J(te,ie,null,null,se,de,we,Se,se,de,we,Se,G,X+V.A,null,null,Fe),T}function _i(d,m,T){var V=d.F,G=[d.J];if(V!=null){var X=d.U,J=m.ba.S,te=J==eg||J==tg;m=m.ba.f.RGBA;var ie=[0],se=d.ka;ie[0]=d.T,d.Kb&&(se==0?--ie[0]:(--se,G[0]-=d.width),d.j+d.ka+d.T==d.o&&(ie[0]=d.o-d.j-se));var de=m.eb;se=m.fb+se*m.A,d=gn(V,G[0],d.width,X,ie,de,se+(te?0:3),m.A),e(T==ie),d&&Mt(J)&&os(de,se,te,X,ie,m.A)}return 0}function Fn(d){var m=d.ma,T=m.ba.S,V=11>T,G=T==Jp||T==Zp||T==eg||T==M1||T==12||Mt(T);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!id(m.Oa,d,G?11:12))return 0;if(G&&Mt(T)&&Ue(),d.da)alert("todo:use_scaling");else{if(V){if(m.Ib=ht,d.Kb){if(T=d.U+1>>1,m.memory=s(d.U+2*T),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+d.U,m.Mc=m.cc,m.Nc=m.dc+T,m.Ib=Bt,Ue()}}else alert("todo:EmitYUV");G&&(m.Jb=_i,V&&ye())}if(V&&!Mx){for(d=0;256>d;++d)RT[d]=89858*(d-128)+rg>>ng,OT[d]=-22014*(d-128)+rg,MT[d]=-45773*(d-128),DT[d]=113618*(d-128)+rg>>ng;for(d=fd;d<U1;++d)m=76283*(d-16)+rg>>ng,jT[d-fd]=Qt(m,255),FT[d-fd]=Qt(m+8>>4,15);Mx=1}return 1}function Br(d){var m=d.ma,T=d.U,V=d.T;return e(!(1&d.ka)),0>=T||0>=V?0:(T=m.Ib(d,m),m.Jb!=null&&m.Jb(d,m,T),m.Dc+=T,1)}function ji(d){d.ma.memory=null}function nt(d,m,T,V){return ne(d,8)!=47?0:(m[0]=ne(d,14)+1,T[0]=ne(d,14)+1,V[0]=ne(d,1),ne(d,3)!=0?0:!d.h)}function wi(d,m){if(4>d)return d+1;var T=d-2>>1;return(2+(1&d)<<T)+ne(m,T)+1}function Ur(d,m){return 120<m?m-120:1<=(T=((T=bT[m-1])>>4)*d+(8-(15&T)))?T:1;var T}function nr(d,m,T){var V=Y(T),G=d[m+=255&V].g-8;return 0<G&&(Q(T,T.u+8),V=Y(T),m+=d[m].value,m+=V&(1<<G)-1),Q(T,T.u+d[m].g),d[m].value}function Wn(d,m,T){return T.g+=d.g,T.value+=d.value<<m>>>0,e(8>=T.g),d.g}function Vn(d,m,T){var V=d.xc;return e((m=V==0?0:d.vc[d.md*(T>>V)+(m>>V)])<d.Wb),d.Ya[m]}function rr(d,m,T,V){var G=d.ab,X=d.c*m,J=d.C;m=J+m;var te=T,ie=V;for(V=d.Ta,T=d.Ua;0<G--;){var se=d.gc[G],de=J,we=m,Se=te,ve=ie,Me=(ie=V,te=T,se.Ea);switch(e(de<we),e(we<=se.nc),se.hc){case 2:Wp(Se,ve,(we-de)*Me,ie,te);break;case 0:var Ie=de,fe=we,ge=ie,Ce=te,Fe=(Je=se).Ea;Ie==0&&(R1(Se,ve,null,null,1,ge,Ce),it(Se,ve+1,0,0,Fe-1,ge,Ce+1),ve+=Fe,Ce+=Fe,++Ie);for(var Re=1<<Je.b,tt=Re-1,Ye=Pe(Fe,Je.b),ft=Je.K,Je=Je.w+(Ie>>Je.b)*Ye;Ie<fe;){var Gt=ft,en=Je,qt=1;for(ad(Se,ve,ge,Ce-Fe,1,ge,Ce);qt<Fe;){var jt=(qt&~tt)+Re;jt>Fe&&(jt=Fe),(0,Wa[Gt[en++]>>8&15])(Se,ve+ +qt,ge,Ce+qt-Fe,jt-qt,ge,Ce+qt),qt=jt}ve+=Fe,Ce+=Fe,++Ie&tt||(Je+=Ye)}we!=se.nc&&r(ie,te-Me,ie,te+(we-de-1)*Me,Me);break;case 1:for(Me=Se,fe=ve,Fe=(Se=se.Ea)-(Ce=Se&~(ge=(ve=1<<se.b)-1)),Ie=Pe(Se,se.b),Re=se.K,se=se.w+(de>>se.b)*Ie;de<we;){for(tt=Re,Ye=se,ft=new Ve,Je=fe+Ce,Gt=fe+Se;fe<Je;)Nt(tt[Ye++],ft),vc(ft,Me,fe,ve,ie,te),fe+=ve,te+=ve;fe<Gt&&(Nt(tt[Ye++],ft),vc(ft,Me,fe,Fe,ie,te),fe+=Fe,te+=Fe),++de&ge||(se+=Ie)}break;case 3:if(Se==ie&&ve==te&&0<se.b){for(fe=ie,Se=Me=te+(we-de)*Me-(Ce=(we-de)*Pe(se.Ea,se.b)),ve=ie,ge=te,Ie=[],Ce=(Fe=Ce)-1;0<=Ce;--Ce)Ie[Ce]=ve[ge+Ce];for(Ce=Fe-1;0<=Ce;--Ce)fe[Se+Ce]=Ie[Ce];rs(se,de,we,ie,Me,ie,te)}else rs(se,de,we,Se,ve,ie,te)}te=V,ie=T}ie!=T&&r(V,T,te,ie,X)}function Ia(d,m){var T=d.V,V=d.Ba+d.c*d.C,G=m-d.C;if(e(m<=d.l.o),e(16>=G),0<G){var X=d.l,J=d.Ta,te=d.Ua,ie=X.width;if(rr(d,G,T,V),G=te=[te],e((T=d.C)<(V=m)),e(X.v<X.va),V>X.o&&(V=X.o),T<X.j){var se=X.j-T;T=X.j,G[0]+=se*ie}if(T>=V?T=0:(G[0]+=4*X.v,X.ka=T-X.j,X.U=X.va-X.v,X.T=V-T,T=1),T){if(te=te[0],11>(T=d.ca).S){var de=T.f.RGBA,we=(V=T.S,G=X.U,X=X.T,se=de.eb,de.A),Se=X;for(de=de.fb+d.Ma*de.A;0<Se--;){var ve=J,Me=te,Ie=G,fe=se,ge=de;switch(V){case Xp:Ei(ve,Me,Ie,fe,ge);break;case Jp:di(ve,Me,Ie,fe,ge);break;case O1:di(ve,Me,Ie,fe,ge),os(fe,ge,0,Ie,1,0);break;case Ex:Ho(ve,Me,Ie,fe,ge);break;case Zp:gt(ve,Me,Ie,fe,ge,1);break;case j1:gt(ve,Me,Ie,fe,ge,1),os(fe,ge,0,Ie,1,0);break;case eg:gt(ve,Me,Ie,fe,ge,0);break;case tg:gt(ve,Me,Ie,fe,ge,0),os(fe,ge,1,Ie,1,0);break;case M1:$a(ve,Me,Ie,fe,ge);break;case F1:$a(ve,Me,Ie,fe,ge),pn(fe,ge,Ie,1,0);break;case Ix:qo(ve,Me,Ie,fe,ge);break;default:e(0)}te+=ie,de+=we}d.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=T.height)}}d.C=m,e(d.C<=d.i)}function bs(d){var m;if(0<d.ua)return 0;for(m=0;m<d.Wb;++m){var T=d.Ya[m].G,V=d.Ya[m].H;if(0<T[1][V[1]+0].g||0<T[2][V[2]+0].g||0<T[3][V[3]+0].g)return 0}return 1}function zr(d,m,T,V,G,X){if(d.Z!=0){var J=d.qd,te=d.rd;for(e(Qa[d.Z]!=null);m<T;++m)Qa[d.Z](J,te,V,G,V,G,X),J=V,te=G,G+=X;d.qd=J,d.rd=te}}function Si(d,m){var T=d.l.ma,V=T.Z==0||T.Z==1?d.l.j:d.C;if(V=d.C<V?V:d.C,e(m<=d.l.o),m>V){var G=d.l.width,X=T.ca,J=T.tb+G*V,te=d.V,ie=d.Ba+d.c*V,se=d.gc;e(d.ab==1),e(se[0].hc==3),$p(se[0],V,m,te,ie,X,J),zr(T,V,m,X,J,G)}d.C=d.Ma=m}function ci(d,m,T,V,G,X,J){var te=d.$/V,ie=d.$%V,se=d.m,de=d.s,we=T+d.$,Se=we;G=T+V*G;var ve=T+V*X,Me=280+de.ua,Ie=d.Pb?te:16777216,fe=0<de.ua?de.Wa:null,ge=de.wc,Ce=we<ve?Vn(de,ie,te):null;e(d.C<X),e(ve<=G);var Fe=!1;e:for(;;){for(;Fe||we<ve;){var Re=0;if(te>=Ie){var tt=we-T;e((Ie=d).Pb),Ie.wd=Ie.m,Ie.xd=tt,0<Ie.s.ua&&Ae(Ie.s.Wa,Ie.s.vb),Ie=te+_T}if(ie&ge||(Ce=Vn(de,ie,te)),e(Ce!=null),Ce.Qb&&(m[we]=Ce.qb,Fe=!0),!Fe)if(re(se),Ce.jc){Re=se,tt=m;var Ye=we,ft=Ce.pd[Y(Re)&Ir-1];e(Ce.jc),256>ft.g?(Q(Re,Re.u+ft.g),tt[Ye]=ft.value,Re=0):(Q(Re,Re.u+ft.g-256),e(256<=ft.value),Re=ft.value),Re==0&&(Fe=!0)}else Re=nr(Ce.G[0],Ce.H[0],se);if(se.h)break;if(Fe||256>Re){if(!Fe)if(Ce.nd)m[we]=(Ce.qb|Re<<8)>>>0;else{if(re(se),Fe=nr(Ce.G[1],Ce.H[1],se),re(se),tt=nr(Ce.G[2],Ce.H[2],se),Ye=nr(Ce.G[3],Ce.H[3],se),se.h)break;m[we]=(Ye<<24|Fe<<16|Re<<8|tt)>>>0}if(Fe=!1,++we,++ie>=V&&(ie=0,++te,J!=null&&te<=X&&!(te%16)&&J(d,te),fe!=null))for(;Se<we;)Re=m[Se++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re}else if(280>Re){if(Re=wi(Re-256,se),tt=nr(Ce.G[4],Ce.H[4],se),re(se),tt=Ur(V,tt=wi(tt,se)),se.h)break;if(we-T<tt||G-we<Re)break e;for(Ye=0;Ye<Re;++Ye)m[we+Ye]=m[we+Ye-tt];for(we+=Re,ie+=Re;ie>=V;)ie-=V,++te,J!=null&&te<=X&&!(te%16)&&J(d,te);if(e(we<=G),ie&ge&&(Ce=Vn(de,ie,te)),fe!=null)for(;Se<we;)Re=m[Se++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re}else{if(!(Re<Me))break e;for(Fe=Re-280,e(fe!=null);Se<we;)Re=m[Se++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re;Re=we,e(!(Fe>>>(tt=fe).Xa)),m[Re]=tt.X[Fe],Fe=!0}Fe||e(se.h==Z(se))}if(d.Pb&&se.h&&we<G)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ae(d.s.vb,d.s.Wa);else{if(se.h)break e;J!=null&&J(d,te>X?X:te),d.a=0,d.$=we-T}return 1}return d.a=3,0}function ui(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var m=d.Wa;m!=null&&(m.X=null),d.vb=null,e(d!=null)}function $n(){var d=new Pu;return d==null?null:(d.a=0,d.xb=Tx,ai("Predictor","VP8LPredictors"),ai("Predictor","VP8LPredictors_C"),ai("PredictorAdd","VP8LPredictorsAdd"),ai("PredictorAdd","VP8LPredictorsAdd_C"),Wp=lt,vc=ct,Ei=Xe,di=An,$a=Lt,qo=kr,Ho=_t,S.VP8LMapColor32b=Du,S.VP8LMapColor8b=Kp,d)}function Fi(d,m,T,V,G){var X=1,J=[d],te=[m],ie=V.m,se=V.s,de=null,we=0;e:for(;;){if(T)for(;X&&ne(ie,1);){var Se=J,ve=te,Me=V,Ie=1,fe=Me.m,ge=Me.gc[Me.ab],Ce=ne(fe,2);if(Me.Oc&1<<Ce)X=0;else{switch(Me.Oc|=1<<Ce,ge.hc=Ce,ge.Ea=Se[0],ge.nc=ve[0],ge.K=[null],++Me.ab,e(4>=Me.ab),Ce){case 0:case 1:ge.b=ne(fe,3)+2,Ie=Fi(Pe(ge.Ea,ge.b),Pe(ge.nc,ge.b),0,Me,ge.K),ge.K=ge.K[0];break;case 3:var Fe,Re=ne(fe,8)+1,tt=16<Re?0:4<Re?1:2<Re?2:3;if(Se[0]=Pe(ge.Ea,tt),ge.b=tt,Fe=Ie=Fi(Re,1,0,Me,ge.K)){var Ye,ft=Re,Je=ge,Gt=1<<(8>>Je.b),en=s(Gt);if(en==null)Fe=0;else{var qt=Je.K[0],jt=Je.w;for(en[0]=Je.K[0][0],Ye=1;Ye<1*ft;++Ye)en[Ye]=be(qt[jt+Ye],en[Ye-1]);for(;Ye<4*Gt;++Ye)en[Ye]=0;Je.K[0]=null,Je.K[0]=en,Fe=1}}Ie=Fe;break;case 2:break;default:e(0)}X=Ie}}if(J=J[0],te=te[0],X&&ne(ie,1)&&!(X=1<=(we=ne(ie,4))&&11>=we)){V.a=3;break e}var un;if(un=X)t:{var on,Tt,ir,Ii=V,sr=J,Ni=te,tn=we,qi=T,Hi=Ii.m,mr=Ii.s,Nr=[null],pi=1,cs=0,ao=xT[tn];n:for(;;){if(qi&&ne(Hi,1)){var yr=ne(Hi,3)+2,Go=Pe(sr,yr),Sc=Pe(Ni,yr),Vu=Go*Sc;if(!Fi(Go,Sc,0,Ii,Nr))break n;for(Nr=Nr[0],mr.xc=yr,on=0;on<Vu;++on){var Xa=Nr[on]>>8&65535;Nr[on]=Xa,Xa>=pi&&(pi=Xa+1)}}if(Hi.h)break n;for(Tt=0;5>Tt;++Tt){var Un=Nx[Tt];!Tt&&0<tn&&(Un+=1<<tn),cs<Un&&(cs=Un)}var z1=o(pi*ao,w),Fx=pi,Vx=o(Fx,j);if(Vx==null)var sg=null;else e(65536>=Fx),sg=Vx;var pd=s(cs);if(sg==null||pd==null||z1==null){Ii.a=1;break n}var og=z1;for(on=ir=0;on<pi;++on){var Ps=sg[on],Bu=Ps.G,Uu=Ps.H,Bx=0,ag=1,Ux=0;for(Tt=0;5>Tt;++Tt){Un=Nx[Tt],Bu[Tt]=og,Uu[Tt]=ir,!Tt&&0<tn&&(Un+=1<<tn);i:{var lg,q1=Un,cg=Ii,gd=pd,UT=og,zT=ir,H1=0,Ja=cg.m,qT=ne(Ja,1);if(i(gd,0,0,q1),qT){var HT=ne(Ja,1)+1,WT=ne(Ja,1),zx=ne(Ja,WT==0?1:8);gd[zx]=1,HT==2&&(gd[zx=ne(Ja,8)]=1);var ug=1}else{var qx=s(19),Hx=ne(Ja,4)+4;if(19<Hx){cg.a=3;var hg=0;break i}for(lg=0;lg<Hx;++lg)qx[vT[lg]]=ne(Ja,3);var W1=void 0,md=void 0,Wx=cg,$T=qx,dg=q1,$x=gd,$1=0,Za=Wx.m,Kx=8,Gx=o(128,w);r:for(;x(Gx,0,7,$T,19);){if(ne(Za,1)){var KT=2+2*ne(Za,3);if((W1=2+ne(Za,KT))>dg)break r}else W1=dg;for(md=0;md<dg&&W1--;){re(Za);var Yx=Gx[0+(127&Y(Za))];Q(Za,Za.u+Yx.g);var zu=Yx.value;if(16>zu)$x[md++]=zu,zu!=0&&(Kx=zu);else{var GT=zu==16,Qx=zu-16,YT=mT[Qx],Xx=ne(Za,gT[Qx])+YT;if(md+Xx>dg)break r;for(var QT=GT?Kx:0;0<Xx--;)$x[md++]=QT}}$1=1;break r}$1||(Wx.a=3),ug=$1}(ug=ug&&!Ja.h)&&(H1=x(UT,zT,8,gd,q1)),ug&&H1!=0?hg=H1:(cg.a=3,hg=0)}if(hg==0)break n;if(ag&&yT[Tt]==1&&(ag=og[ir].g==0),Bx+=og[ir].g,ir+=hg,3>=Tt){var yd,K1=pd[0];for(yd=1;yd<Un;++yd)pd[yd]>K1&&(K1=pd[yd]);Ux+=K1}}if(Ps.nd=ag,Ps.Qb=0,ag&&(Ps.qb=(Bu[3][Uu[3]+0].value<<24|Bu[1][Uu[1]+0].value<<16|Bu[2][Uu[2]+0].value)>>>0,Bx==0&&256>Bu[0][Uu[0]+0].value&&(Ps.Qb=1,Ps.qb+=Bu[0][Uu[0]+0].value<<8)),Ps.jc=!Ps.Qb&&6>Ux,Ps.jc){var fg,Yo=Ps;for(fg=0;fg<Ir;++fg){var el=fg,tl=Yo.pd[el],pg=Yo.G[0][Yo.H[0]+el];256<=pg.value?(tl.g=pg.g+256,tl.value=pg.value):(tl.g=0,tl.value=0,el>>=Wn(pg,8,tl),el>>=Wn(Yo.G[1][Yo.H[1]+el],16,tl),el>>=Wn(Yo.G[2][Yo.H[2]+el],0,tl),Wn(Yo.G[3][Yo.H[3]+el],24,tl))}}}mr.vc=Nr,mr.Wb=pi,mr.Ya=sg,mr.yc=z1,un=1;break t}un=0}if(!(X=un)){V.a=3;break e}if(0<we){if(se.ua=1<<we,!We(se.Wa,we)){V.a=1,X=0;break e}}else se.ua=0;var G1=V,Jx=J,XT=te,Y1=G1.s,Q1=Y1.xc;if(G1.c=Jx,G1.i=XT,Y1.md=Pe(Jx,Q1),Y1.wc=Q1==0?-1:(1<<Q1)-1,T){V.xb=NT;break e}if((de=s(J*te))==null){V.a=1,X=0;break e}X=(X=ci(V,de,0,J,te,te,null))&&!ie.h;break e}return X?(G!=null?G[0]=de:(e(de==null),e(T)),V.$=0,T||ui(se)):ui(se),X}function Ys(d,m){var T=d.c*d.i,V=T+m+16*m;return e(d.c<=m),d.V=s(V),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+T+m,1)}function Qs(d,m){var T=d.C,V=m-T,G=d.V,X=d.Ba+d.c*T;for(e(m<=d.l.o);0<V;){var J=16<V?16:V,te=d.l.ma,ie=d.l.width,se=ie*J,de=te.ca,we=te.tb+ie*T,Se=d.Ta,ve=d.Ua;rr(d,J,G,X),Gn(Se,ve,de,we,se),zr(te,T,T+J,de,we,ie),V-=J,G+=J*d.c,T+=J}e(T==m),d.C=d.Ma=m}function Xs(){this.ub=this.yd=this.td=this.Rb=0}function Lo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ro(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function bu(){this.Yb=function(){var d=[];return function m(T,V,G){for(var X=G[V],J=0;J<X&&(T.push(G.length>V+1?[]:0),!(G.length<V+1));J++)m(T[J],V+1,G)}(d,0,[3,11]),d}()}function Na(){this.jb=s(3),this.Wc=a([4,8],bu),this.Xc=a([4,17],bu)}function xu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Js(){this.ld=this.La=this.dd=this.tc=0}function Zs(){this.Na=this.la=0}function xs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Do(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ed(){this.uc=this.M=this.Nb=0,this.wa=Array(new Js),this.Y=0,this.ya=Array(new Do),this.aa=0,this.l=new Mo}function ic(){this.y=s(16),this.f=s(8),this.ea=s(8)}function _u(){this.cb=this.a=0,this.sc="",this.m=new ae,this.Od=new Xs,this.Kc=new Lo,this.ed=new xu,this.Qa=new Ro,this.Ic=this.$c=this.Aa=0,this.D=new ed,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ae),this.ia=0,this.pb=o(4,xs),this.Pa=new Na,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ic),this.Hd=0,this.rb=Array(new Zs),this.sb=0,this.wa=Array(new Js),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Do),this.L=this.aa=0,this.gd=a([4,2],Js),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Mo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sc(){var d=new _u;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,dd||(dd=wu)),d}function vn(d,m,T){return d.a==0&&(d.a=m,d.sc=T,d.cb=0),0}function oc(d,m,T){return 3<=T&&d[m+0]==157&&d[m+1]==1&&d[m+2]==42}function ac(d,m){if(d==null)return 0;if(d.a=0,d.sc="OK",m==null)return vn(d,2,"null VP8Io passed to VP8GetHeaders()");var T=m.data,V=m.w,G=m.ha;if(4>G)return vn(d,7,"Truncated header.");var X=T[V+0]|T[V+1]<<8|T[V+2]<<16,J=d.Od;if(J.Rb=!(1&X),J.td=X>>1&7,J.yd=X>>4&1,J.ub=X>>5,3<J.td)return vn(d,3,"Incorrect keyframe parameters.");if(!J.yd)return vn(d,4,"Frame not displayable.");V+=3,G-=3;var te=d.Kc;if(J.Rb){if(7>G)return vn(d,7,"cannot parse picture header");if(!oc(T,V,G))return vn(d,3,"Bad code word");te.c=16383&(T[V+4]<<8|T[V+3]),te.Td=T[V+4]>>6,te.i=16383&(T[V+6]<<8|T[V+5]),te.Ud=T[V+6]>>6,V+=7,G-=7,d.za=te.c+15>>4,d.Ub=te.i+15>>4,m.width=te.c,m.height=te.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((X=d.Pa).jb,0,255,X.jb.length),e((X=d.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,i(X.Zb,0,0,X.Zb.length),i(X.Lb,0,0,X.Lb)}if(J.ub>G)return vn(d,7,"bad partition length");q(X=d.m,T,V,J.ub),V+=J.ub,G-=J.ub,J.Rb&&(te.Ld=pe(X),te.Kd=pe(X)),te=d.Qa;var ie,se=d.Pa;if(e(X!=null),e(te!=null),te.Cb=pe(X),te.Cb){if(te.Bb=pe(X),pe(X)){for(te.Fb=pe(X),ie=0;4>ie;++ie)te.Zb[ie]=pe(X)?W(X,7):0;for(ie=0;4>ie;++ie)te.Lb[ie]=pe(X)?W(X,6):0}if(te.Bb)for(ie=0;3>ie;++ie)se.jb[ie]=pe(X)?U(X,8):255}else te.Bb=0;if(X.Ka)return vn(d,3,"cannot parse segment header");if((te=d.ed).zd=pe(X),te.Tb=U(X,6),te.wb=U(X,3),te.Pc=pe(X),te.Pc&&pe(X)){for(se=0;4>se;++se)pe(X)&&(te.vd[se]=W(X,6));for(se=0;4>se;++se)pe(X)&&(te.od[se]=W(X,6))}if(d.L=te.Tb==0?0:te.zd?1:2,X.Ka)return vn(d,3,"cannot parse filter header");var de=G;if(G=ie=V,V=ie+de,te=de,d.Xb=(1<<U(d.m,2))-1,de<3*(se=d.Xb))T=7;else{for(ie+=3*se,te-=3*se,de=0;de<se;++de){var we=T[G+0]|T[G+1]<<8|T[G+2]<<16;we>te&&(we=te),q(d.Jc[+de],T,ie,we),ie+=we,te-=we,G+=3}q(d.Jc[+se],T,ie,te),T=ie<V?0:5}if(T!=0)return vn(d,T,"cannot parse partitions");for(T=U(ie=d.m,7),G=pe(ie)?W(ie,4):0,V=pe(ie)?W(ie,4):0,te=pe(ie)?W(ie,4):0,se=pe(ie)?W(ie,4):0,ie=pe(ie)?W(ie,4):0,de=d.Qa,we=0;4>we;++we){if(de.Cb){var Se=de.Zb[we];de.Fb||(Se+=T)}else{if(0<we){d.pb[we]=d.pb[0];continue}Se=T}var ve=d.pb[we];ve.Sc[0]=V1[Qt(Se+G,127)],ve.Sc[1]=B1[Qt(Se+0,127)],ve.Eb[0]=2*V1[Qt(Se+V,127)],ve.Eb[1]=101581*B1[Qt(Se+te,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=V1[Qt(Se+se,117)],ve.Qc[1]=B1[Qt(Se+ie,127)],ve.lc=Se+ie}if(!J.Rb)return vn(d,4,"Not a key frame.");for(pe(X),J=d.Pa,T=0;4>T;++T){for(G=0;8>G;++G)for(V=0;3>V;++V)for(te=0;11>te;++te)se=he(X,ET[T][G][V][te])?U(X,8):kT[T][G][V][te],J.Wc[T][G].Yb[V][te]=se;for(G=0;17>G;++G)J.Xc[T][G]=J.Wc[T][IT[G]]}return d.kc=pe(X),d.kc&&(d.Bd=U(X,8)),d.cb=1}function wu(d,m,T,V,G,X,J){var te=m[G].Yb[T];for(T=0;16>G;++G){if(!he(d,te[T+0]))return G;for(;!he(d,te[T+1]);)if(te=m[++G].Yb[0],T=0,G==16)return 16;var ie=m[G+1].Yb;if(he(d,te[T+2])){var se=d,de=0;if(he(se,(Se=te)[(we=T)+3]))if(he(se,Se[we+6])){for(te=0,we=2*(de=he(se,Se[we+8]))+(Se=he(se,Se[we+9+de])),de=0,Se=wT[we];Se[te];++te)de+=de+he(se,Se[te]);de+=3+(8<<we)}else he(se,Se[we+7])?(de=7+2*he(se,165),de+=he(se,145)):de=5+he(se,159);else de=he(se,Se[we+4])?3+he(se,Se[we+5]):2;te=ie[2]}else de=1,te=ie[1];ie=J+ST[G],0>(se=d).b&&ce(se);var we,Se=se.b,ve=(we=se.Ca>>1)-(se.I>>Se)>>31;--se.b,se.Ca+=ve,se.Ca|=1,se.I-=(we+1&ve)<<Se,X[ie]=((de^ve)-ve)*V[(0<G)+0]}return 16}function lc(d){var m=d.rb[d.sb-1];m.la=0,m.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Su(d,m){if(d==null)return 0;if(m==null)return vn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!ac(d,m))return 0;if(e(d.cb),m.ac==null||m.ac(m)){m.ob&&(d.L=0);var T=ig[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=m.v-T>>4,d.zb=m.j-T>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=m.o+15+T>>4,d.Hb=m.va+15+T>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var V=d.ed;for(T=0;4>T;++T){var G;if(d.Qa.Cb){var X=d.Qa.Lb[T];d.Qa.Fb||(X+=V.Tb)}else X=V.Tb;for(G=0;1>=G;++G){var J=d.gd[T][G],te=X;if(V.Pc&&(te+=V.vd[0],G&&(te+=V.od[0])),0<(te=0>te?0:63<te?63:te)){var ie=te;0<V.wb&&(ie=4<V.wb?ie>>2:ie>>1)>9-V.wb&&(ie=9-V.wb),1>ie&&(ie=1),J.dd=ie,J.tc=2*te+ie,J.ld=40<=te?2:15<=te?1:0}else J.tc=0;J.La=G}}}T=0}else vn(d,6,"Frame setup failed"),T=d.a;if(T=T==0){if(T){d.$c=0,0<d.Aa||(d.Ic=BT);e:{T=d.Ic,V=4*(ie=d.za);var se=32*ie,de=ie+1,we=0<d.L?ie*(0<d.Aa?2:1):0,Se=(d.Aa==2?2:1)*ie;if((J=V+832+(G=3*(16*T+ig[d.L])/2*se)+(X=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=J)T=0;else{if(J>d.Vb){if(d.Vb=0,d.Ec=s(J),d.Fc=0,d.Ec==null){T=vn(d,1,"no memory during frame initialization.");break e}d.Vb=J}J=d.Ec,te=d.Fc,d.Ac=J,d.Bc=te,te+=V,d.Gd=o(se,ic),d.Hd=0,d.rb=o(de+1,Zs),d.sb=1,d.wa=we?o(we,Js):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=ie),e(!0),d.oc=J,d.pc=te,te+=832,d.ya=o(Se,Do),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=ie),d.R=16*ie,d.B=8*ie,ie=(se=ig[d.L])*d.R,se=se/2*d.B,d.sa=J,d.ta=te+ie,d.qa=d.sa,d.ra=d.ta+16*T*d.R+se,d.Ha=d.qa,d.Ia=d.ra+8*T*d.B+se,d.$c=0,te+=G,d.mb=X?J:null,d.nb=X?te:null,e(te+X<=d.Fc+d.Vb),lc(d),i(d.Ac,d.Bc,0,V),T=1}}if(T){if(m.ka=0,m.y=d.sa,m.O=d.ta,m.f=d.qa,m.N=d.ra,m.ea=d.Ha,m.Vd=d.Ia,m.fa=d.R,m.Rc=d.B,m.F=null,m.J=0,!Yp){for(T=-255;255>=T;++T)hr[255+T]=0>T?-T:T;for(T=-1020;1020>=T;++T)$o[1020+T]=-128>T?-128:127<T?127:T;for(T=-112;112>=T;++T)hd[112+T]=-16>T?-16:15<T?15:T;for(T=-255;510>=T;++T)Fu[255+T]=0>T?0:255<T?255:T;Yp=1}Mu=Fo,Wo=Ta,ld=cc,fi=Zt,is=jo,Kn=Oo,Ou=ja,Gp=As,cd=Va,bc=yc,xc=Fa,Ka=Bo,_c=Ba,ju=ro,wc=Vo,Ga=Ui,ud=ur,ss=Nu,Ns[0]=ns,Ns[1]=td,Ns[2]=to,Ns[3]=rd,Ns[4]=Eu,Ns[5]=Ra,Ns[6]=Vi,Ns[7]=hc,Ns[8]=Ma,Ns[9]=Da,Ya[0]=eo,Ya[1]=nd,Ya[2]=ws,Ya[3]=Ca,Ya[4]=bn,Ya[5]=Au,Ya[6]=uc,Ko[0]=ks,Ko[1]=ku,Ko[2]=Iu,Ko[3]=Ss,Ko[4]=Yt,Ko[5]=dc,Ko[6]=fc,T=1}else T=0}T&&(T=function(ve,Me){for(ve.M=0;ve.M<ve.Va;++ve.M){var Ie,fe=ve.Jc[ve.M&ve.Xb],ge=ve.m,Ce=ve;for(Ie=0;Ie<Ce.za;++Ie){var Fe=ge,Re=Ce,tt=Re.Ac,Ye=Re.Bc+4*Ie,ft=Re.zc,Je=Re.ya[Re.aa+Ie];if(Re.Qa.Bb?Je.$b=he(Fe,Re.Pa.jb[0])?2+he(Fe,Re.Pa.jb[2]):he(Fe,Re.Pa.jb[1]):Je.$b=0,Re.kc&&(Je.Ad=he(Fe,Re.Bd)),Je.Za=!he(Fe,145)+0,Je.Za){var Gt=Je.Ob,en=0;for(Re=0;4>Re;++Re){var qt,jt=ft[0+Re];for(qt=0;4>qt;++qt){jt=AT[tt[Ye+qt]][jt];for(var un=Px[he(Fe,jt[0])];0<un;)un=Px[2*un+he(Fe,jt[un])];jt=-un,tt[Ye+qt]=jt}r(Gt,en,tt,Ye,4),en+=4,ft[0+Re]=jt}}else jt=he(Fe,156)?he(Fe,128)?1:3:he(Fe,163)?2:0,Je.Ob[0]=jt,i(tt,Ye,jt,4),i(ft,0,jt,4);Je.Dd=he(Fe,142)?he(Fe,114)?he(Fe,183)?1:3:2:0}if(Ce.m.Ka)return vn(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Ce=fe,Fe=(ge=ve).rb[ge.sb-1],tt=ge.rb[ge.sb+ge.ja],Ie=ge.ya[ge.aa+ge.ja],Ye=ge.kc?Ie.Ad:0)Fe.la=tt.la=0,Ie.Za||(Fe.Na=tt.Na=0),Ie.Hc=0,Ie.Gc=0,Ie.ia=0;else{var on,Tt;if(Fe=tt,tt=Ce,Ye=ge.Pa.Xc,ft=ge.ya[ge.aa+ge.ja],Je=ge.pb[ft.$b],Re=ft.ad,Gt=0,en=ge.rb[ge.sb-1],jt=qt=0,i(Re,Gt,0,384),ft.Za)var ir=0,Ii=Ye[3];else{un=s(16);var sr=Fe.Na+en.Na;if(sr=dd(tt,Ye[1],sr,Je.Eb,0,un,0),Fe.Na=en.Na=(0<sr)+0,1<sr)Mu(un,0,Re,Gt);else{var Ni=un[0]+3>>3;for(un=0;256>un;un+=16)Re[Gt+un]=Ni}ir=1,Ii=Ye[0]}var tn=15&Fe.la,qi=15&en.la;for(un=0;4>un;++un){var Hi=1&qi;for(Ni=Tt=0;4>Ni;++Ni)tn=tn>>1|(Hi=(sr=dd(tt,Ii,sr=Hi+(1&tn),Je.Sc,ir,Re,Gt))>ir)<<7,Tt=Tt<<2|(3<sr?3:1<sr?2:Re[Gt+0]!=0),Gt+=16;tn>>=4,qi=qi>>1|Hi<<7,qt=(qt<<8|Tt)>>>0}for(Ii=tn,ir=qi>>4,on=0;4>on;on+=2){for(Tt=0,tn=Fe.la>>4+on,qi=en.la>>4+on,un=0;2>un;++un){for(Hi=1&qi,Ni=0;2>Ni;++Ni)sr=Hi+(1&tn),tn=tn>>1|(Hi=0<(sr=dd(tt,Ye[2],sr,Je.Qc,0,Re,Gt)))<<3,Tt=Tt<<2|(3<sr?3:1<sr?2:Re[Gt+0]!=0),Gt+=16;tn>>=2,qi=qi>>1|Hi<<5}jt|=Tt<<4*on,Ii|=tn<<4<<on,ir|=(240&qi)<<on}Fe.la=Ii,en.la=ir,ft.Hc=qt,ft.Gc=jt,ft.ia=43690&jt?0:Je.ia,Ye=!(qt|jt)}if(0<ge.L&&(ge.wa[ge.Y+ge.ja]=ge.gd[Ie.$b][Ie.Za],ge.wa[ge.Y+ge.ja].La|=!Ye),Ce.Ka)return vn(ve,7,"Premature end-of-file encountered.")}if(lc(ve),ge=Me,Ce=1,Ie=(fe=ve).D,Fe=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Ie.M=fe.M,Ie.uc=Fe,so(fe,Ie),Ce=1,Ie=(Tt=fe.D).Nb,Fe=(jt=ig[fe.L])*fe.R,tt=jt/2*fe.B,un=16*Ie*fe.R,Ni=8*Ie*fe.B,Ye=fe.sa,ft=fe.ta-Fe+un,Je=fe.qa,Re=fe.ra-tt+Ni,Gt=fe.Ha,en=fe.Ia-tt+Ni,qi=(tn=Tt.M)==0,qt=tn>=fe.Va-1,fe.Aa==2&&so(fe,Tt),Tt.uc)for(Hi=(sr=fe).D.M,e(sr.D.uc),Tt=sr.yb;Tt<sr.Hb;++Tt){ir=Tt,Ii=Hi;var mr=(Nr=(Un=sr).D).Nb;on=Un.R;var Nr=Nr.wa[Nr.Y+ir],pi=Un.sa,cs=Un.ta+16*mr*on+16*ir,ao=Nr.dd,yr=Nr.tc;if(yr!=0)if(e(3<=yr),Un.L==1)0<ir&&Ga(pi,cs,on,yr+4),Nr.La&&ss(pi,cs,on,yr),0<Ii&&wc(pi,cs,on,yr+4),Nr.La&&ud(pi,cs,on,yr);else{var Go=Un.B,Sc=Un.qa,Vu=Un.ra+8*mr*Go+8*ir,Xa=Un.Ha,Un=Un.Ia+8*mr*Go+8*ir;mr=Nr.ld,0<ir&&(Gp(pi,cs,on,yr+4,ao,mr),bc(Sc,Vu,Xa,Un,Go,yr+4,ao,mr)),Nr.La&&(Ka(pi,cs,on,yr,ao,mr),ju(Sc,Vu,Xa,Un,Go,yr,ao,mr)),0<Ii&&(Ou(pi,cs,on,yr+4,ao,mr),cd(Sc,Vu,Xa,Un,Go,yr+4,ao,mr)),Nr.La&&(xc(pi,cs,on,yr,ao,mr),_c(Sc,Vu,Xa,Un,Go,yr,ao,mr))}}if(fe.ia&&alert("todo:DitherRow"),ge.put!=null){if(Tt=16*tn,tn=16*(tn+1),qi?(ge.y=fe.sa,ge.O=fe.ta+un,ge.f=fe.qa,ge.N=fe.ra+Ni,ge.ea=fe.Ha,ge.W=fe.Ia+Ni):(Tt-=jt,ge.y=Ye,ge.O=ft,ge.f=Je,ge.N=Re,ge.ea=Gt,ge.W=en),qt||(tn-=jt),tn>ge.o&&(tn=ge.o),ge.F=null,ge.J=null,fe.Fa!=null&&0<fe.Fa.length&&Tt<tn&&(ge.J=Ha(fe,ge,Tt,tn-Tt),ge.F=fe.mb,ge.F==null&&ge.F.length==0)){Ce=vn(fe,3,"Could not decode alpha data.");break e}Tt<ge.j&&(jt=ge.j-Tt,Tt=ge.j,e(!(1&jt)),ge.O+=fe.R*jt,ge.N+=fe.B*(jt>>1),ge.W+=fe.B*(jt>>1),ge.F!=null&&(ge.J+=ge.width*jt)),Tt<tn&&(ge.O+=ge.v,ge.N+=ge.v>>1,ge.W+=ge.v>>1,ge.F!=null&&(ge.J+=ge.v),ge.ka=Tt-ge.j,ge.U=ge.va-ge.v,ge.T=tn-Tt,Ce=ge.put(ge))}Ie+1!=fe.Ic||qt||(r(fe.sa,fe.ta-Fe,Ye,ft+16*fe.R,Fe),r(fe.qa,fe.ra-tt,Je,Re+8*fe.B,tt),r(fe.Ha,fe.Ia-tt,Gt,en+8*fe.B,tt))}if(!Ce)return vn(ve,6,"Output aborted.")}return 1}(d,m)),m.bc!=null&&m.bc(m),T&=1}return T?(d.cb=0,T):0}function ki(d,m,T,V,G){G=d[m+T+32*V]+(G>>3),d[m+T+32*V]=-256&G?0>G?0:255:G}function Pa(d,m,T,V,G,X){ki(d,m,0,T,V+G),ki(d,m,1,T,V+X),ki(d,m,2,T,V-X),ki(d,m,3,T,V-G)}function Bn(d){return(20091*d>>16)+d}function hi(d,m,T,V){var G,X=0,J=s(16);for(G=0;4>G;++G){var te=d[m+0]+d[m+8],ie=d[m+0]-d[m+8],se=(35468*d[m+4]>>16)-Bn(d[m+12]),de=Bn(d[m+4])+(35468*d[m+12]>>16);J[X+0]=te+de,J[X+1]=ie+se,J[X+2]=ie-se,J[X+3]=te-de,X+=4,m++}for(G=X=0;4>G;++G)te=(d=J[X+0]+4)+J[X+8],ie=d-J[X+8],se=(35468*J[X+4]>>16)-Bn(J[X+12]),ki(T,V,0,0,te+(de=Bn(J[X+4])+(35468*J[X+12]>>16))),ki(T,V,1,0,ie+se),ki(T,V,2,0,ie-se),ki(T,V,3,0,te-de),X++,V+=32}function Oo(d,m,T,V){var G=d[m+0]+4,X=35468*d[m+4]>>16,J=Bn(d[m+4]),te=35468*d[m+1]>>16;Pa(T,V,0,G+J,d=Bn(d[m+1]),te),Pa(T,V,1,G+X,d,te),Pa(T,V,2,G-X,d,te),Pa(T,V,3,G-J,d,te)}function Ta(d,m,T,V,G){hi(d,m,T,V),G&&hi(d,m+16,T,V+4)}function cc(d,m,T,V){Wo(d,m+0,T,V,1),Wo(d,m+32,T,V+128,1)}function Zt(d,m,T,V){var G;for(d=d[m+0]+4,G=0;4>G;++G)for(m=0;4>m;++m)ki(T,V,m,G,d)}function jo(d,m,T,V){d[m+0]&&fi(d,m+0,T,V),d[m+16]&&fi(d,m+16,T,V+4),d[m+32]&&fi(d,m+32,T,V+128),d[m+48]&&fi(d,m+48,T,V+128+4)}function Fo(d,m,T,V){var G,X=s(16);for(G=0;4>G;++G){var J=d[m+0+G]+d[m+12+G],te=d[m+4+G]+d[m+8+G],ie=d[m+4+G]-d[m+8+G],se=d[m+0+G]-d[m+12+G];X[0+G]=J+te,X[8+G]=J-te,X[4+G]=se+ie,X[12+G]=se-ie}for(G=0;4>G;++G)J=(d=X[0+4*G]+3)+X[3+4*G],te=X[1+4*G]+X[2+4*G],ie=X[1+4*G]-X[2+4*G],se=d-X[3+4*G],T[V+0]=J+te>>3,T[V+16]=se+ie>>3,T[V+32]=J-te>>3,T[V+48]=se-ie>>3,V+=64}function _s(d,m,T){var V,G=m-32,X=zi,J=255-d[G-1];for(V=0;V<T;++V){var te,ie=X,se=J+d[m-1];for(te=0;te<T;++te)d[m+te]=ie[se+d[G+te]];m+=32}}function td(d,m){_s(d,m,4)}function ku(d,m){_s(d,m,8)}function nd(d,m){_s(d,m,16)}function ws(d,m){var T;for(T=0;16>T;++T)r(d,m+32*T,d,m-32,16)}function Ca(d,m){var T;for(T=16;0<T;--T)i(d,m,d[m-1],16),m+=32}function La(d,m,T){var V;for(V=0;16>V;++V)i(m,T+32*V,d,16)}function eo(d,m){var T,V=16;for(T=0;16>T;++T)V+=d[m-1+32*T]+d[m+T-32];La(V>>5,d,m)}function bn(d,m){var T,V=8;for(T=0;16>T;++T)V+=d[m-1+32*T];La(V>>4,d,m)}function Au(d,m){var T,V=8;for(T=0;16>T;++T)V+=d[m+T-32];La(V>>4,d,m)}function uc(d,m){La(128,d,m)}function vt(d,m,T){return d+2*m+T+2>>2}function to(d,m){var T,V=m-32;for(V=new Uint8Array([vt(d[V-1],d[V+0],d[V+1]),vt(d[V+0],d[V+1],d[V+2]),vt(d[V+1],d[V+2],d[V+3]),vt(d[V+2],d[V+3],d[V+4])]),T=0;4>T;++T)r(d,m+32*T,V,0,V.length)}function rd(d,m){var T=d[m-1],V=d[m-1+32],G=d[m-1+64],X=d[m-1+96];_e(d,m+0,16843009*vt(d[m-1-32],T,V)),_e(d,m+32,16843009*vt(T,V,G)),_e(d,m+64,16843009*vt(V,G,X)),_e(d,m+96,16843009*vt(G,X,X))}function ns(d,m){var T,V=4;for(T=0;4>T;++T)V+=d[m+T-32]+d[m-1+32*T];for(V>>=3,T=0;4>T;++T)i(d,m+32*T,V,4)}function Eu(d,m){var T=d[m-1+0],V=d[m-1+32],G=d[m-1+64],X=d[m-1-32],J=d[m+0-32],te=d[m+1-32],ie=d[m+2-32],se=d[m+3-32];d[m+0+96]=vt(V,G,d[m-1+96]),d[m+1+96]=d[m+0+64]=vt(T,V,G),d[m+2+96]=d[m+1+64]=d[m+0+32]=vt(X,T,V),d[m+3+96]=d[m+2+64]=d[m+1+32]=d[m+0+0]=vt(J,X,T),d[m+3+64]=d[m+2+32]=d[m+1+0]=vt(te,J,X),d[m+3+32]=d[m+2+0]=vt(ie,te,J),d[m+3+0]=vt(se,ie,te)}function Vi(d,m){var T=d[m+1-32],V=d[m+2-32],G=d[m+3-32],X=d[m+4-32],J=d[m+5-32],te=d[m+6-32],ie=d[m+7-32];d[m+0+0]=vt(d[m+0-32],T,V),d[m+1+0]=d[m+0+32]=vt(T,V,G),d[m+2+0]=d[m+1+32]=d[m+0+64]=vt(V,G,X),d[m+3+0]=d[m+2+32]=d[m+1+64]=d[m+0+96]=vt(G,X,J),d[m+3+32]=d[m+2+64]=d[m+1+96]=vt(X,J,te),d[m+3+64]=d[m+2+96]=vt(J,te,ie),d[m+3+96]=vt(te,ie,ie)}function Ra(d,m){var T=d[m-1+0],V=d[m-1+32],G=d[m-1+64],X=d[m-1-32],J=d[m+0-32],te=d[m+1-32],ie=d[m+2-32],se=d[m+3-32];d[m+0+0]=d[m+1+64]=X+J+1>>1,d[m+1+0]=d[m+2+64]=J+te+1>>1,d[m+2+0]=d[m+3+64]=te+ie+1>>1,d[m+3+0]=ie+se+1>>1,d[m+0+96]=vt(G,V,T),d[m+0+64]=vt(V,T,X),d[m+0+32]=d[m+1+96]=vt(T,X,J),d[m+1+32]=d[m+2+96]=vt(X,J,te),d[m+2+32]=d[m+3+96]=vt(J,te,ie),d[m+3+32]=vt(te,ie,se)}function hc(d,m){var T=d[m+0-32],V=d[m+1-32],G=d[m+2-32],X=d[m+3-32],J=d[m+4-32],te=d[m+5-32],ie=d[m+6-32],se=d[m+7-32];d[m+0+0]=T+V+1>>1,d[m+1+0]=d[m+0+64]=V+G+1>>1,d[m+2+0]=d[m+1+64]=G+X+1>>1,d[m+3+0]=d[m+2+64]=X+J+1>>1,d[m+0+32]=vt(T,V,G),d[m+1+32]=d[m+0+96]=vt(V,G,X),d[m+2+32]=d[m+1+96]=vt(G,X,J),d[m+3+32]=d[m+2+96]=vt(X,J,te),d[m+3+64]=vt(J,te,ie),d[m+3+96]=vt(te,ie,se)}function Da(d,m){var T=d[m-1+0],V=d[m-1+32],G=d[m-1+64],X=d[m-1+96];d[m+0+0]=T+V+1>>1,d[m+2+0]=d[m+0+32]=V+G+1>>1,d[m+2+32]=d[m+0+64]=G+X+1>>1,d[m+1+0]=vt(T,V,G),d[m+3+0]=d[m+1+32]=vt(V,G,X),d[m+3+32]=d[m+1+64]=vt(G,X,X),d[m+3+64]=d[m+2+64]=d[m+0+96]=d[m+1+96]=d[m+2+96]=d[m+3+96]=X}function Ma(d,m){var T=d[m-1+0],V=d[m-1+32],G=d[m-1+64],X=d[m-1+96],J=d[m-1-32],te=d[m+0-32],ie=d[m+1-32],se=d[m+2-32];d[m+0+0]=d[m+2+32]=T+J+1>>1,d[m+0+32]=d[m+2+64]=V+T+1>>1,d[m+0+64]=d[m+2+96]=G+V+1>>1,d[m+0+96]=X+G+1>>1,d[m+3+0]=vt(te,ie,se),d[m+2+0]=vt(J,te,ie),d[m+1+0]=d[m+3+32]=vt(T,J,te),d[m+1+32]=d[m+3+64]=vt(V,T,J),d[m+1+64]=d[m+3+96]=vt(G,V,T),d[m+1+96]=vt(X,G,V)}function Iu(d,m){var T;for(T=0;8>T;++T)r(d,m+32*T,d,m-32,8)}function Ss(d,m){var T;for(T=0;8>T;++T)i(d,m,d[m-1],8),m+=32}function Bi(d,m,T){var V;for(V=0;8>V;++V)i(m,T+32*V,d,8)}function ks(d,m){var T,V=8;for(T=0;8>T;++T)V+=d[m+T-32]+d[m-1+32*T];Bi(V>>4,d,m)}function dc(d,m){var T,V=4;for(T=0;8>T;++T)V+=d[m+T-32];Bi(V>>3,d,m)}function Yt(d,m){var T,V=4;for(T=0;8>T;++T)V+=d[m-1+32*T];Bi(V>>3,d,m)}function fc(d,m){Bi(128,d,m)}function Oa(d,m,T){var V=d[m-T],G=d[m+0],X=3*(G-V)+D1[1020+d[m-2*T]-d[m+T]],J=Qp[112+(X+4>>3)];d[m-T]=zi[255+V+Qp[112+(X+3>>3)]],d[m+0]=zi[255+G-J]}function pc(d,m,T,V){var G=d[m+0],X=d[m+T];return as[255+d[m-2*T]-d[m-T]]>V||as[255+X-G]>V}function gc(d,m,T,V){return 4*as[255+d[m-T]-d[m+0]]+as[255+d[m-2*T]-d[m+T]]<=V}function mc(d,m,T,V,G){var X=d[m-3*T],J=d[m-2*T],te=d[m-T],ie=d[m+0],se=d[m+T],de=d[m+2*T],we=d[m+3*T];return 4*as[255+te-ie]+as[255+J-se]>V?0:as[255+d[m-4*T]-X]<=G&&as[255+X-J]<=G&&as[255+J-te]<=G&&as[255+we-de]<=G&&as[255+de-se]<=G&&as[255+se-ie]<=G}function Vo(d,m,T,V){var G=2*V+1;for(V=0;16>V;++V)gc(d,m+V,T,G)&&Oa(d,m+V,T)}function Ui(d,m,T,V){var G=2*V+1;for(V=0;16>V;++V)gc(d,m+V*T,1,G)&&Oa(d,m+V*T,1)}function ur(d,m,T,V){var G;for(G=3;0<G;--G)Vo(d,m+=4*T,T,V)}function Nu(d,m,T,V){var G;for(G=3;0<G;--G)Ui(d,m+=4,T,V)}function no(d,m,T,V,G,X,J,te){for(X=2*X+1;0<G--;){if(mc(d,m,T,X,J))if(pc(d,m,T,te))Oa(d,m,T);else{var ie=d,se=m,de=T,we=ie[se-2*de],Se=ie[se-de],ve=ie[se+0],Me=ie[se+de],Ie=ie[se+2*de],fe=27*(Ce=D1[1020+3*(ve-Se)+D1[1020+we-Me]])+63>>7,ge=18*Ce+63>>7,Ce=9*Ce+63>>7;ie[se-3*de]=zi[255+ie[se-3*de]+Ce],ie[se-2*de]=zi[255+we+ge],ie[se-de]=zi[255+Se+fe],ie[se+0]=zi[255+ve-fe],ie[se+de]=zi[255+Me-ge],ie[se+2*de]=zi[255+Ie-Ce]}m+=V}}function Ar(d,m,T,V,G,X,J,te){for(X=2*X+1;0<G--;){if(mc(d,m,T,X,J))if(pc(d,m,T,te))Oa(d,m,T);else{var ie=d,se=m,de=T,we=ie[se-de],Se=ie[se+0],ve=ie[se+de],Me=Qp[112+((Ie=3*(Se-we))+4>>3)],Ie=Qp[112+(Ie+3>>3)],fe=Me+1>>1;ie[se-2*de]=zi[255+ie[se-2*de]+fe],ie[se-de]=zi[255+we+Ie],ie[se+0]=zi[255+Se-Me],ie[se+de]=zi[255+ve-fe]}m+=V}}function ja(d,m,T,V,G,X){no(d,m,T,1,16,V,G,X)}function As(d,m,T,V,G,X){no(d,m,1,T,16,V,G,X)}function Fa(d,m,T,V,G,X){var J;for(J=3;0<J;--J)Ar(d,m+=4*T,T,1,16,V,G,X)}function Bo(d,m,T,V,G,X){var J;for(J=3;0<J;--J)Ar(d,m+=4,1,T,16,V,G,X)}function Va(d,m,T,V,G,X,J,te){no(d,m,G,1,8,X,J,te),no(T,V,G,1,8,X,J,te)}function yc(d,m,T,V,G,X,J,te){no(d,m,1,G,8,X,J,te),no(T,V,1,G,8,X,J,te)}function Ba(d,m,T,V,G,X,J,te){Ar(d,m+4*G,G,1,8,X,J,te),Ar(T,V+4*G,G,1,8,X,J,te)}function ro(d,m,T,V,G,X,J,te){Ar(d,m+4,1,G,8,X,J,te),Ar(T,V+4,1,G,8,X,J,te)}function Uo(){this.ba=new cr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ua(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function za(){this.ua=0,this.Wa=new $,this.vb=new $,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new j,this.yc=new w}function Pu(){this.xb=this.a=0,this.l=new Mo,this.ca=new cr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new za,this.ab=0,this.gc=o(4,zo),this.Oc=0}function Es(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Mo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function io(d,m,T,V,G,X,J){for(d=d==null?0:d[m+0],m=0;m<J;++m)G[X+m]=d+T[V+m]&255,d=G[X+m]}function qa(d,m,T,V,G,X,J){var te;if(d==null)io(null,null,T,V,G,X,J);else for(te=0;te<J;++te)G[X+te]=d[m+te]+T[V+te]&255}function qr(d,m,T,V,G,X,J){if(d==null)io(null,null,T,V,G,X,J);else{var te,ie=d[m+0],se=ie,de=ie;for(te=0;te<J;++te)se=de+(ie=d[m+te])-se,de=T[V+te]+(-256&se?0>se?0:255:se)&255,se=ie,G[X+te]=de}}function Ha(d,m,T,V){var G=m.width,X=m.o;if(e(d!=null&&m!=null),0>T||0>=V||T+V>X)return null;if(!d.Cc){if(d.ga==null){var J;if(d.ga=new Es,(J=d.ga==null)||(J=m.width*m.o,e(d.Gb.length==0),d.Gb=s(J),d.Uc=0,d.Gb==null?J=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,J=1),J=!J),!J){J=d.ga;var te=d.Fa,ie=d.P,se=d.qc,de=d.mb,we=d.nb,Se=ie+1,ve=se-1,Me=J.l;if(e(te!=null&&de!=null&&m!=null),Qa[0]=null,Qa[1]=io,Qa[2]=qa,Qa[3]=qr,J.ca=de,J.tb=we,J.c=m.width,J.i=m.height,e(0<J.c&&0<J.i),1>=se)m=0;else if(J.$a=te[ie+0]>>0&3,J.Z=te[ie+0]>>2&3,J.Lc=te[ie+0]>>4&3,ie=te[ie+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||ie)m=0;else if(Me.put=Br,Me.ac=Fn,Me.bc=ji,Me.ma=J,Me.width=m.width,Me.height=m.height,Me.Da=m.Da,Me.v=m.v,Me.va=m.va,Me.j=m.j,Me.o=m.o,J.$a)e:{e(J.$a==1),m=$n();t:for(;;){if(m==null){m=0;break e}if(e(J!=null),J.mc=m,m.c=J.c,m.i=J.i,m.l=J.l,m.l.ma=J,m.l.width=J.c,m.l.height=J.i,m.a=0,O(m.m,te,Se,ve),!Fi(J.c,J.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&bs(m.s)?(J.ic=1,te=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(te),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(J.ic=0,m=Ys(m,J.c)),!m))break t;m=1;break e}J.mc=null,m=0}else m=ve>=J.c*J.i;J=!m}if(J)return null;d.ga.Lc!=1?d.Ga=0:V=X-T}e(d.ga!=null),e(T+V<=X);e:{if(m=(te=d.ga).c,X=te.l.o,te.$a==0){if(Se=d.rc,ve=d.Vc,Me=d.Fa,ie=d.P+1+T*m,se=d.mb,de=d.nb+T*m,e(ie<=d.P+d.qc),te.Z!=0)for(e(Qa[te.Z]!=null),J=0;J<V;++J)Qa[te.Z](Se,ve,Me,ie,se,de,m),Se=se,ve=de,de+=m,ie+=m;else for(J=0;J<V;++J)r(se,de,Me,ie,m),Se=se,ve=de,de+=m,ie+=m;d.rc=Se,d.Vc=ve}else{if(e(te.mc!=null),m=T+V,e((J=te.mc)!=null),e(m<=J.i),J.C>=m)m=1;else if(te.ic||ye(),te.ic){te=J.V,Se=J.Ba,ve=J.c;var Ie=J.i,fe=(Me=1,ie=J.$/ve,se=J.$%ve,de=J.m,we=J.s,J.$),ge=ve*Ie,Ce=ve*m,Fe=we.wc,Re=fe<Ce?Vn(we,se,ie):null;e(fe<=ge),e(m<=Ie),e(bs(we));t:for(;;){for(;!de.h&&fe<Ce;){if(se&Fe||(Re=Vn(we,se,ie)),e(Re!=null),re(de),256>(Ie=nr(Re.G[0],Re.H[0],de)))te[Se+fe]=Ie,++fe,++se>=ve&&(se=0,++ie<=m&&!(ie%16)&&Si(J,ie));else{if(!(280>Ie)){Me=0;break t}Ie=wi(Ie-256,de);var tt,Ye=nr(Re.G[4],Re.H[4],de);if(re(de),!(fe>=(Ye=Ur(ve,Ye=wi(Ye,de)))&&ge-fe>=Ie)){Me=0;break t}for(tt=0;tt<Ie;++tt)te[Se+fe+tt]=te[Se+fe+tt-Ye];for(fe+=Ie,se+=Ie;se>=ve;)se-=ve,++ie<=m&&!(ie%16)&&Si(J,ie);fe<Ce&&se&Fe&&(Re=Vn(we,se,ie))}e(de.h==Z(de))}Si(J,ie>m?m:ie);break t}!Me||de.h&&fe<ge?(Me=0,J.a=de.h?5:3):J.$=fe,m=Me}else m=ci(J,J.V,J.Ba,J.c,J.i,m,Qs);if(!m){V=0;break e}}T+V>=X&&(d.Cc=1),V=1}if(!V)return null;if(d.Cc&&((V=d.ga)!=null&&(V.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+T*G}function E(d,m,T,V,G,X){for(;0<G--;){var J,te=d,ie=m+(T?1:0),se=d,de=m+(T?0:3);for(J=0;J<V;++J){var we=se[de+4*J];we!=255&&(we*=32897,te[ie+4*J+0]=te[ie+4*J+0]*we>>23,te[ie+4*J+1]=te[ie+4*J+1]*we>>23,te[ie+4*J+2]=te[ie+4*J+2]*we>>23)}m+=X}}function K(d,m,T,V,G){for(;0<V--;){var X;for(X=0;X<T;++X){var J=d[m+2*X+0],te=15&(se=d[m+2*X+1]),ie=4369*te,se=(240&se|se>>4)*ie>>16;d[m+2*X+0]=(240&J|J>>4)*ie>>16&240|(15&J|J<<4)*ie>>16>>4&15,d[m+2*X+1]=240&se|te}m+=G}}function oe(d,m,T,V,G,X,J,te){var ie,se,de=255;for(se=0;se<G;++se){for(ie=0;ie<V;++ie){var we=d[m+ie];X[J+4*ie]=we,de&=we}m+=T,J+=te}return de!=255}function ue(d,m,T,V,G){var X;for(X=0;X<G;++X)T[V+X]=d[m+X]>>8}function ye(){os=E,pn=K,gn=oe,Gn=ue}function Ne(d,m,T){S[d]=function(V,G,X,J,te,ie,se,de,we,Se,ve,Me,Ie,fe,ge,Ce,Fe){var Re,tt=Fe-1>>1,Ye=te[ie+0]|se[de+0]<<16,ft=we[Se+0]|ve[Me+0]<<16;e(V!=null);var Je=3*Ye+ft+131074>>2;for(m(V[G+0],255&Je,Je>>16,Ie,fe),X!=null&&(Je=3*ft+Ye+131074>>2,m(X[J+0],255&Je,Je>>16,ge,Ce)),Re=1;Re<=tt;++Re){var Gt=te[ie+Re]|se[de+Re]<<16,en=we[Se+Re]|ve[Me+Re]<<16,qt=Ye+Gt+ft+en+524296,jt=qt+2*(Gt+ft)>>3;Je=jt+Ye>>1,Ye=(qt=qt+2*(Ye+en)>>3)+Gt>>1,m(V[G+2*Re-1],255&Je,Je>>16,Ie,fe+(2*Re-1)*T),m(V[G+2*Re-0],255&Ye,Ye>>16,Ie,fe+(2*Re-0)*T),X!=null&&(Je=qt+ft>>1,Ye=jt+en>>1,m(X[J+2*Re-1],255&Je,Je>>16,ge,Ce+(2*Re-1)*T),m(X[J+2*Re+0],255&Ye,Ye>>16,ge,Ce+(2*Re+0)*T)),Ye=Gt,ft=en}1&Fe||(Je=3*Ye+ft+131074>>2,m(V[G+Fe-1],255&Je,Je>>16,Ie,fe+(Fe-1)*T),X!=null&&(Je=3*ft+Ye+131074>>2,m(X[J+Fe-1],255&Je,Je>>16,ge,Ce+(Fe-1)*T)))}}function Ue(){ls[Xp]=PT,ls[Jp]=Cx,ls[Ex]=TT,ls[Zp]=Lx,ls[eg]=Rx,ls[M1]=Dx,ls[Ix]=CT,ls[O1]=Cx,ls[j1]=Lx,ls[tg]=Rx,ls[F1]=Dx}function Qe(d){return d&-16384?0>d?0:255:d>>LT}function g(d,m){return Qe((19077*d>>8)+(26149*m>>8)-14234)}function C(d,m,T){return Qe((19077*d>>8)-(6419*m>>8)-(13320*T>>8)+8708)}function B(d,m){return Qe((19077*d>>8)+(33050*m>>8)-17685)}function ee(d,m,T,V,G){V[G+0]=g(d,T),V[G+1]=C(d,m,T),V[G+2]=B(d,m)}function me(d,m,T,V,G){V[G+0]=B(d,m),V[G+1]=C(d,m,T),V[G+2]=g(d,T)}function ke(d,m,T,V,G){var X=C(d,m,T);m=X<<3&224|B(d,m)>>3,V[G+0]=248&g(d,T)|X>>5,V[G+1]=m}function ze(d,m,T,V,G){var X=240&B(d,m)|15;V[G+0]=240&g(d,T)|C(d,m,T)>>4,V[G+1]=X}function St(d,m,T,V,G){V[G+0]=255,ee(d,m,T,V,G+1)}function Ot(d,m,T,V,G){me(d,m,T,V,G),V[G+3]=255}function kt(d,m,T,V,G){ee(d,m,T,V,G),V[G+3]=255}function Qt(d,m){return 0>d?0:d>m?m:d}function cn(d,m,T){S[d]=function(V,G,X,J,te,ie,se,de,we){for(var Se=de+(-2&we)*T;de!=Se;)m(V[G+0],X[J+0],te[ie+0],se,de),m(V[G+1],X[J+0],te[ie+0],se,de+T),G+=2,++J,++ie,de+=2*T;1&we&&m(V[G+0],X[J+0],te[ie+0],se,de)}}function Is(d,m,T){return T==0?d==0?m==0?6:5:m==0?4:0:T}function Er(d,m,T,V,G){switch(d>>>30){case 3:Wo(m,T,V,G,0);break;case 2:Kn(m,T,V,G);break;case 1:fi(m,T,V,G)}}function so(d,m){var T,V,G=m.M,X=m.Nb,J=d.oc,te=d.pc+40,ie=d.oc,se=d.pc+584,de=d.oc,we=d.pc+600;for(T=0;16>T;++T)J[te+32*T-1]=129;for(T=0;8>T;++T)ie[se+32*T-1]=129,de[we+32*T-1]=129;for(0<G?J[te-1-32]=ie[se-1-32]=de[we-1-32]=129:(i(J,te-32-1,127,21),i(ie,se-32-1,127,9),i(de,we-32-1,127,9)),V=0;V<d.za;++V){var Se=m.ya[m.aa+V];if(0<V){for(T=-1;16>T;++T)r(J,te+32*T-4,J,te+32*T+12,4);for(T=-1;8>T;++T)r(ie,se+32*T-4,ie,se+32*T+4,4),r(de,we+32*T-4,de,we+32*T+4,4)}var ve=d.Gd,Me=d.Hd+V,Ie=Se.ad,fe=Se.Hc;if(0<G&&(r(J,te-32,ve[Me].y,0,16),r(ie,se-32,ve[Me].f,0,8),r(de,we-32,ve[Me].ea,0,8)),Se.Za){var ge=J,Ce=te-32+16;for(0<G&&(V>=d.za-1?i(ge,Ce,ve[Me].y[15],4):r(ge,Ce,ve[Me+1].y,0,4)),T=0;4>T;T++)ge[Ce+128+T]=ge[Ce+256+T]=ge[Ce+384+T]=ge[Ce+0+T];for(T=0;16>T;++T,fe<<=2)ge=J,Ce=te+Ox[T],Ns[Se.Ob[T]](ge,Ce),Er(fe,Ie,16*+T,ge,Ce)}else if(ge=Is(V,G,Se.Ob[0]),Ya[ge](J,te),fe!=0)for(T=0;16>T;++T,fe<<=2)Er(fe,Ie,16*+T,J,te+Ox[T]);for(T=Se.Gc,ge=Is(V,G,Se.Dd),Ko[ge](ie,se),Ko[ge](de,we),fe=Ie,ge=ie,Ce=se,255&(Se=T>>0)&&(170&Se?ld(fe,256,ge,Ce):is(fe,256,ge,Ce)),Se=de,fe=we,255&(T>>=8)&&(170&T?ld(Ie,320,Se,fe):is(Ie,320,Se,fe)),G<d.Ub-1&&(r(ve[Me].y,0,J,te+480,16),r(ve[Me].f,0,ie,se+224,8),r(ve[Me].ea,0,de,we+224,8)),T=8*X*d.B,ve=d.sa,Me=d.ta+16*V+16*X*d.R,Ie=d.qa,Se=d.ra+8*V+T,fe=d.Ha,ge=d.Ia+8*V+T,T=0;16>T;++T)r(ve,Me+T*d.R,J,te+32*T,16);for(T=0;8>T;++T)r(Ie,Se+T*d.B,ie,se+32*T,8),r(fe,ge+T*d.B,de,we+32*T,8)}}function oo(d,m,T,V,G,X,J,te,ie){var se=[0],de=[0],we=0,Se=ie!=null?ie.kd:0,ve=ie??new Ua;if(d==null||12>T)return 7;ve.data=d,ve.w=m,ve.ha=T,m=[m],T=[T],ve.gb=[ve.gb];e:{var Me=m,Ie=T,fe=ve.gb;if(e(d!=null),e(Ie!=null),e(fe!=null),fe[0]=0,12<=Ie[0]&&!n(d,Me[0],"RIFF")){if(n(d,Me[0]+8,"WEBP")){fe=3;break e}var ge=je(d,Me[0]+4);if(12>ge||4294967286<ge){fe=3;break e}if(Se&&ge>Ie[0]-8){fe=7;break e}fe[0]=ge,Me[0]+=12,Ie[0]-=12}fe=0}if(fe!=0)return fe;for(ge=0<ve.gb[0],T=T[0];;){e:{var Ce=d;Ie=m,fe=T;var Fe=se,Re=de,tt=Me=[0];if((Je=we=[we])[0]=0,8>fe[0])fe=7;else{if(!n(Ce,Ie[0],"VP8X")){if(je(Ce,Ie[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var Ye=je(Ce,Ie[0]+8),ft=1+De(Ce,Ie[0]+12);if(2147483648<=ft*(Ce=1+De(Ce,Ie[0]+15))){fe=3;break e}tt!=null&&(tt[0]=Ye),Fe!=null&&(Fe[0]=ft),Re!=null&&(Re[0]=Ce),Ie[0]+=18,fe[0]-=18,Je[0]=1}fe=0}}if(we=we[0],Me=Me[0],fe!=0)return fe;if(Ie=!!(2&Me),!ge&&we)return 3;if(X!=null&&(X[0]=!!(16&Me)),J!=null&&(J[0]=Ie),te!=null&&(te[0]=0),J=se[0],Me=de[0],we&&Ie&&ie==null){fe=0;break}if(4>T){fe=7;break}if(ge&&we||!ge&&!we&&!n(d,m[0],"ALPH")){T=[T],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{Ye=d,fe=m,ge=T;var Je=ve.gb;Fe=ve.na,Re=ve.P,tt=ve.Sa,ft=22,e(Ye!=null),e(ge!=null),Ce=fe[0];var Gt=ge[0];for(e(Fe!=null),e(tt!=null),Fe[0]=null,Re[0]=null,tt[0]=0;;){if(fe[0]=Ce,ge[0]=Gt,8>Gt){fe=7;break e}var en=je(Ye,Ce+4);if(4294967286<en){fe=3;break e}var qt=8+en+1&-2;if(ft+=qt,0<Je&&ft>Je){fe=3;break e}if(!n(Ye,Ce,"VP8 ")||!n(Ye,Ce,"VP8L")){fe=0;break e}if(Gt[0]<qt){fe=7;break e}n(Ye,Ce,"ALPH")||(Fe[0]=Ye,Re[0]=Ce+8,tt[0]=en),Ce+=qt,Gt-=qt}}if(T=T[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}T=[T],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(Je=d,fe=m,ge=T,Fe=ve.gb[0],Re=ve.Ja,tt=ve.xa,Ye=fe[0],Ce=!n(Je,Ye,"VP8 "),ft=!n(Je,Ye,"VP8L"),e(Je!=null),e(ge!=null),e(Re!=null),e(tt!=null),8>ge[0])fe=7;else{if(Ce||ft){if(Je=je(Je,Ye+4),12<=Fe&&Je>Fe-12){fe=3;break e}if(Se&&Je>ge[0]-8){fe=7;break e}Re[0]=Je,fe[0]+=8,ge[0]-=8,tt[0]=ft}else tt[0]=5<=ge[0]&&Je[Ye+0]==47&&!(Je[Ye+4]>>5),Re[0]=ge[0];fe=0}if(T=T[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],m=m[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(te==null||Ie||(te[0]=ve.xa?2:1),J=[J],Me=[Me],ve.xa){if(5>T){fe=7;break}te=J,Se=Me,Ie=X,d==null||5>T?d=0:5<=T&&d[m+0]==47&&!(d[m+4]>>5)?(ge=[0],Je=[0],Fe=[0],O(Re=new F,d,m,T),nt(Re,ge,Je,Fe)?(te!=null&&(te[0]=ge[0]),Se!=null&&(Se[0]=Je[0]),Ie!=null&&(Ie[0]=Fe[0]),d=1):d=0):d=0}else{if(10>T){fe=7;break}te=Me,d==null||10>T||!oc(d,m+3,T-3)?d=0:(Se=d[m+0]|d[m+1]<<8|d[m+2]<<16,Ie=16383&(d[m+7]<<8|d[m+6]),d=16383&(d[m+9]<<8|d[m+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=ve.Ja||!Ie||!d?d=0:(J&&(J[0]=Ie),te&&(te[0]=d),d=1))}if(!d||(J=J[0],Me=Me[0],we&&(se[0]!=J||de[0]!=Me)))return 3;ie!=null&&(ie[0]=ve,ie.offset=m-ie.w,e(4294967286>m-ie.w),e(ie.offset==ie.ha-T));break}return fe==0||fe==7&&we&&ie==null?(X!=null&&(X[0]|=ve.na!=null&&0<ve.na.length),V!=null&&(V[0]=J),G!=null&&(G[0]=Me),0):fe}function id(d,m,T){var V=m.width,G=m.height,X=0,J=0,te=V,ie=G;if(m.Da=d!=null&&0<d.Da,m.Da&&(te=d.cd,ie=d.bd,X=d.v,J=d.j,11>T||(X&=-2,J&=-2),0>X||0>J||0>=te||0>=ie||X+te>V||J+ie>G))return 0;if(m.v=X,m.j=J,m.va=X+te,m.o=J+ie,m.U=te,m.T=ie,m.da=d!=null&&0<d.da,m.da){if(!Te(te,ie,T=[d.ib],X=[d.hb]))return 0;m.ib=T[0],m.hb=X[0]}return m.ob=d!=null&&d.ob,m.Kb=d==null||!d.Sd,m.da&&(m.ob=m.ib<3*V/4&&m.hb<3*G/4,m.Kb=0),1}function sd(d){if(d==null)return 2;if(11>d.S){var m=d.f.RGBA;m.fb+=(d.height-1)*m.A,m.A=-m.A}else m=d.f.kb,d=d.height,m.O+=(d-1)*m.fa,m.fa=-m.fa,m.N+=(d-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(d-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(d-1)*m.lb,m.lb=-m.lb);return 0}function Tu(d,m,T,V){if(V==null||0>=d||0>=m)return 2;if(T!=null){if(T.Da){var G=T.cd,X=T.bd,J=-2&T.v,te=-2&T.j;if(0>J||0>te||0>=G||0>=X||J+G>d||te+X>m)return 2;d=G,m=X}if(T.da){if(!Te(d,m,G=[T.ib],X=[T.hb]))return 2;d=G[0],m=X[0]}}V.width=d,V.height=m;e:{var ie=V.width,se=V.height;if(d=V.S,0>=ie||0>=se||!(d>=Xp&&13>d))d=2;else{if(0>=V.Rd&&V.sd==null){J=X=G=m=0;var de=(te=ie*jx[d])*se;if(11>d||(X=(se+1)/2*(m=(ie+1)/2),d==12&&(J=(G=ie)*se)),(se=s(de+2*X+J))==null){d=1;break e}V.sd=se,11>d?((ie=V.f.RGBA).eb=se,ie.fb=0,ie.A=te,ie.size=de):((ie=V.f.kb).y=se,ie.O=0,ie.fa=te,ie.Fd=de,ie.f=se,ie.N=0+de,ie.Ab=m,ie.Cd=X,ie.ea=se,ie.W=0+de+X,ie.Db=m,ie.Ed=X,d==12&&(ie.F=se,ie.J=0+de+2*X),ie.Tc=J,ie.lb=G)}if(m=1,G=V.S,X=V.width,J=V.height,G>=Xp&&13>G)if(11>G)d=V.f.RGBA,m&=(te=Math.abs(d.A))*(J-1)+X<=d.size,m&=te>=X*jx[G],m&=d.eb!=null;else{d=V.f.kb,te=(X+1)/2,de=(J+1)/2,ie=Math.abs(d.fa),se=Math.abs(d.Ab);var we=Math.abs(d.Db),Se=Math.abs(d.lb),ve=Se*(J-1)+X;m&=ie*(J-1)+X<=d.Fd,m&=se*(de-1)+te<=d.Cd,m=(m&=we*(de-1)+te<=d.Ed)&ie>=X&se>=te&we>=te,m&=d.y!=null,m&=d.f!=null,m&=d.ea!=null,G==12&&(m&=Se>=X,m&=ve<=d.Tc,m&=d.F!=null)}else m=0;d=m?0:2}}return d!=0||T!=null&&T.fd&&(d=sd(V)),d}var Ir=64,Cu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Lu=24,Ru=32,od=8,Ai=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(d){return d},S.Predictor2=function(d,m,T){return m[T+0]},S.Predictor3=function(d,m,T){return m[T+1]},S.Predictor4=function(d,m,T){return m[T-1]},S.Predictor5=function(d,m,T){return Be(Be(d,m[T+1]),m[T+0])},S.Predictor6=function(d,m,T){return Be(d,m[T-1])},S.Predictor7=function(d,m,T){return Be(d,m[T+0])},S.Predictor8=function(d,m,T){return Be(m[T-1],m[T+0])},S.Predictor9=function(d,m,T){return Be(m[T+0],m[T+1])},S.Predictor10=function(d,m,T){return Be(Be(d,m[T-1]),Be(m[T+0],m[T+1]))},S.Predictor11=function(d,m,T){var V=m[T+0];return 0>=$e(V>>24&255,d>>24&255,(m=m[T-1])>>24&255)+$e(V>>16&255,d>>16&255,m>>16&255)+$e(V>>8&255,d>>8&255,m>>8&255)+$e(255&V,255&d,255&m)?V:d},S.Predictor12=function(d,m,T){var V=m[T+0];return(Ze((d>>24&255)+(V>>24&255)-((m=m[T-1])>>24&255))<<24|Ze((d>>16&255)+(V>>16&255)-(m>>16&255))<<16|Ze((d>>8&255)+(V>>8&255)-(m>>8&255))<<8|Ze((255&d)+(255&V)-(255&m)))>>>0},S.Predictor13=function(d,m,T){var V=m[T-1];return(ot((d=Be(d,m[T+0]))>>24&255,V>>24&255)<<24|ot(d>>16&255,V>>16&255)<<16|ot(d>>8&255,V>>8&255)<<8|ot(d>>0&255,V>>0&255))>>>0};var R1=S.PredictorAdd0;S.PredictorAdd1=it,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var ad=S.PredictorAdd2;Pt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Wp,rs=S.ColorIndexInverseTransform,Du=S.MapARGB,$p=S.VP8LColorIndexInverseTransformAlpha,Kp=S.MapAlpha,Wa=S.VP8LPredictorsAdd=[];Wa.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var vc,Ei,di,$a,qo,Ho,Mu,Wo,Kn,ld,fi,is,Ou,Gp,cd,bc,xc,Ka,_c,ju,wc,Ga,ud,ss,os,pn,gn,Gn,hr=s(511),$o=s(2041),hd=s(225),Fu=s(767),Yp=0,D1=$o,Qp=hd,zi=Fu,as=hr,Xp=0,Jp=1,Ex=2,Zp=3,eg=4,M1=5,Ix=6,O1=7,j1=8,tg=9,F1=10,gT=[2,3,7],mT=[3,3,11],Nx=[280,256,256,256,40],yT=[0,1,1,1,0],vT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],bT=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xT=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_T=8,V1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],B1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],dd=null,wT=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ST=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Px=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kT=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],AT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ET=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],IT=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ya=[],Ns=[],Ko=[],NT=1,Tx=2,Qa=[],ls=[];Ne("UpsampleRgbLinePair",ee,3),Ne("UpsampleBgrLinePair",me,3),Ne("UpsampleRgbaLinePair",kt,4),Ne("UpsampleBgraLinePair",Ot,4),Ne("UpsampleArgbLinePair",St,4),Ne("UpsampleRgba4444LinePair",ze,2),Ne("UpsampleRgb565LinePair",ke,2);var PT=S.UpsampleRgbLinePair,TT=S.UpsampleBgrLinePair,Cx=S.UpsampleRgbaLinePair,Lx=S.UpsampleBgraLinePair,Rx=S.UpsampleArgbLinePair,Dx=S.UpsampleRgba4444LinePair,CT=S.UpsampleRgb565LinePair,ng=16,rg=1<<ng-1,fd=-227,U1=482,LT=6,Mx=0,RT=s(256),DT=s(256),MT=s(256),OT=s(256),jT=s(U1-fd),FT=s(U1-fd);cn("YuvToRgbRow",ee,3),cn("YuvToBgrRow",me,3),cn("YuvToRgbaRow",kt,4),cn("YuvToBgraRow",Ot,4),cn("YuvToArgbRow",St,4),cn("YuvToRgba4444Row",ze,2),cn("YuvToRgb565Row",ke,2);var Ox=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ig=[0,2,8],VT=[8,7,6,4,4,2,2,2,1,1,1,1],BT=1;this.WebPDecodeRGBA=function(d,m,T,V,G){var X=Jp,J=new Uo,te=new cr;J.ba=te,te.S=X,te.width=[te.width],te.height=[te.height];var ie=te.width,se=te.height,de=new li;if(de==null||d==null)var we=2;else e(de!=null),we=oo(d,m,T,de.width,de.height,de.Pd,de.Qd,de.format,null);if(we!=0?ie=0:(ie!=null&&(ie[0]=de.width[0]),se!=null&&(se[0]=de.height[0]),ie=1),ie){te.width=te.width[0],te.height=te.height[0],V!=null&&(V[0]=te.width),G!=null&&(G[0]=te.height);e:{if(V=new Mo,(G=new Ua).data=d,G.w=m,G.ha=T,G.kd=1,m=[0],e(G!=null),((d=oo(G.data,G.w,G.ha,null,null,null,m,null,G))==0||d==7)&&m[0]&&(d=4),(m=d)==0){if(e(J!=null),V.data=G.data,V.w=G.w+G.offset,V.ha=G.ha-G.offset,V.put=Br,V.ac=Fn,V.bc=ji,V.ma=J,G.xa){if((d=$n())==null){J=1;break e}if(function(Se,ve){var Me=[0],Ie=[0],fe=[0];t:for(;;){if(Se==null)return 0;if(ve==null)return Se.a=2,0;if(Se.l=ve,Se.a=0,O(Se.m,ve.data,ve.w,ve.ha),!nt(Se.m,Me,Ie,fe)){Se.a=3;break t}if(Se.xb=Tx,ve.width=Me[0],ve.height=Ie[0],!Fi(Me[0],Ie[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(d,V)){if(V=(m=Tu(V.width,V.height,J.Oa,J.ba))==0){t:{V=d;n:for(;;){if(V==null){V=0;break t}if(e(V.s.yc!=null),e(V.s.Ya!=null),e(0<V.s.Wb),e((T=V.l)!=null),e((G=T.ma)!=null),V.xb!=0){if(V.ca=G.ba,V.tb=G.tb,e(V.ca!=null),!id(G.Oa,T,Zp)){V.a=2;break n}if(!Ys(V,T.width)||T.da)break n;if((T.da||Mt(V.ca.S))&&ye(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&ye()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!We(V.s.vb,V.s.Wa.Xa)){V.a=1;break n}V.xb=0}if(!ci(V,V.V,V.Ba,V.c,V.i,T.o,Ia))break n;G.Dc=V.Ma,V=1;break t}e(V.a!=0),V=0}V=!V}V&&(m=d.a)}else m=d.a}else{if((d=new sc)==null){J=1;break e}if(d.Fa=G.na,d.P=G.P,d.qc=G.Sa,ac(d,V)){if((m=Tu(V.width,V.height,J.Oa,J.ba))==0){if(d.Aa=0,T=J.Oa,e((G=d)!=null),T!=null){if(0<(ie=0>(ie=T.Md)?0:100<ie?255:255*ie/100)){for(se=de=0;4>se;++se)12>(we=G.pb[se]).lc&&(we.ia=ie*VT[0>we.lc?0:we.lc]>>3),de|=we.ia;de&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=T.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}Su(d,V)||(m=d.a)}}else m=d.a}m==0&&J.Oa!=null&&J.Oa.fd&&(m=sd(J.ba))}J=m}X=J!=0?null:11>X?te.f.RGBA.eb:te.f.kb.y}else X=null;return X};var jx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(S,L){for(var D="",x=0;x<4;x++)D+=String.fromCharCode(S[L++]);return D}function u(S,L){return(S[L+0]<<0|S[L+1]<<8|S[L+2]<<16)>>>0}function h(S,L){return(S[L+0]<<0|S[L+1]<<8|S[L+2]<<16|S[L+3]<<24)>>>0}new l;var p=[0],f=[0],y=[],b=new l,A=t,v=function(S,L){var D={},x=0,w=!1,P=0,j=0;if(D.frames=[],!function(Y,Z,Q,re){for(var ce=0;ce<re;ce++)if(Y[Z+ce]!=Q.charCodeAt(ce))return!0;return!1}(S,L,"RIFF",4)){var q,U;for(h(S,L+=4),L+=8;L<S.length;){var W=c(S,L),O=h(S,L+=4);L+=4;var H=O+(1&O);switch(W){case"VP8 ":case"VP8L":D.frames[x]===void 0&&(D.frames[x]={}),(F=D.frames[x]).src_off=w?j:L-8,F.src_size=P+O+8,x++,w&&(w=!1,P=0,j=0);break;case"VP8X":(F=D.header={}).feature_flags=S[L];var ne=L+4;F.canvas_width=1+u(S,ne),ne+=3,F.canvas_height=1+u(S,ne),ne+=3;break;case"ALPH":w=!0,P=H+8,j=L-8;break;case"ANIM":(F=D.header).bgcolor=h(S,L),ne=L+4,F.loop_count=(q=S)[(U=ne)+0]<<0|q[U+1]<<8,ne+=2;break;case"ANMF":var ae,F;(F=D.frames[x]={}).offset_x=2*u(S,L),L+=3,F.offset_y=2*u(S,L),L+=3,F.width=1+u(S,L),L+=3,F.height=1+u(S,L),L+=3,F.duration=u(S,L),L+=3,ae=S[L++],F.dispose=1&ae,F.blend=ae>>1&1}W!="ANMF"&&(L+=H)}return D}}(A,0);v.response=A,v.rgbaoutput=!0,v.dataurl=!1;var _=v.header?v.header:null,k=v.frames?v.frames:null;if(_){_.loop_counter=_.loop_count,p=[_.canvas_height],f=[_.canvas_width];for(var R=0;R<k.length&&k[R].blend!=0;R++);}var M=k[0],z=b.WebPDecodeRGBA(A,M.src_off,M.src_size,f,p);M.rgba=z,M.imgwidth=f[0],M.imgheight=p[0];for(var I=0;I<f[0]*p[0]*4;I++)y[I]=z[I];return this.width=f,this.height=p,this.data=y,this}(function(t){var e=function(){return typeof tb=="function"},n=function(p,f,y,b){var A=4,v=o;switch(b){case t.image_compression.FAST:A=1,v=s;break;case t.image_compression.MEDIUM:A=6,v=a;break;case t.image_compression.SLOW:A=9,v=l}p=r(p,f,y,v);var _=tb(p,{level:A});return t.__addimage__.arrayBufferToBinaryString(_)},r=function(p,f,y,b){for(var A,v,_,k=p.length/f,R=new Uint8Array(p.length+k),M=u(),z=0;z<k;z+=1){if(_=z*f,A=p.subarray(_,_+f),b)R.set(b(A,y,v),_+z);else{for(var I,S=M.length,L=[];I<S;I+=1)L[I]=M[I](A,y,v);var D=h(L.concat());R.set(L[D],_+z)}v=A}return R},i=function(p){var f=Array.apply([],p);return f.unshift(0),f},s=function(p,f){var y,b=[],A=p.length;b[0]=1;for(var v=0;v<A;v+=1)y=p[v-f]||0,b[v+1]=p[v]-y+256&255;return b},o=function(p,f,y){var b,A=[],v=p.length;A[0]=2;for(var _=0;_<v;_+=1)b=y&&y[_]||0,A[_+1]=p[_]-b+256&255;return A},a=function(p,f,y){var b,A,v=[],_=p.length;v[0]=3;for(var k=0;k<_;k+=1)b=p[k-f]||0,A=y&&y[k]||0,v[k+1]=p[k]+256-(b+A>>>1)&255;return v},l=function(p,f,y){var b,A,v,_,k=[],R=p.length;k[0]=4;for(var M=0;M<R;M+=1)b=p[M-f]||0,A=y&&y[M]||0,v=y&&y[M-f]||0,_=c(b,A,v),k[M+1]=p[M]-_+256&255;return k},c=function(p,f,y){if(p===f&&f===y)return p;var b=Math.abs(f-y),A=Math.abs(p-y),v=Math.abs(p+f-y-y);return b<=A&&b<=v?p:A<=v?f:y},u=function(){return[i,s,o,a,l]},h=function(p){var f=p.map(function(y){return y.reduce(function(b,A){return b+Math.abs(A)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(p,f,y,b){var A,v,_,k,R,M,z,I,S,L,D,x,w,P,j,q=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(_=new GH(p)).imgData,v=_.bits,A=_.colorSpace,R=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){S=(I=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,D=new Uint8Array(S*_.colors),L=new Uint8Array(S);var W,O=_.pixelBitlength-_.bits;for(P=0,j=0;P<S;P++){for(w=I[P],W=0;W<O;)D[j++]=w>>>W&255,W+=_.bits;L[P]=w>>>W&255}}if(_.bits===16){S=(I=new Uint32Array(_.decodePixels().buffer)).length,D=new Uint8Array(S*(32/_.pixelBitlength)*_.colors),L=new Uint8Array(S*(32/_.pixelBitlength)),x=_.colors>1,P=0,j=0;for(var H=0;P<S;)w=I[P++],D[j++]=w>>>0&255,x&&(D[j++]=w>>>16&255,w=I[P++],D[j++]=w>>>0&255),L[H++]=w>>>16&255;v=8}b!==t.image_compression.NONE&&e()?(p=n(D,_.width*_.colors,_.colors,b),z=n(L,_.width,1,b)):(p=D,z=L,q=void 0)}if(_.colorType===3&&(A=this.color_spaces.INDEXED,M=_.palette,_.transparency.indexed)){var ne=_.transparency.indexed,ae=0;for(P=0,S=ne.length;P<S;++P)ae+=ne[P];if((ae/=255)===S-1&&ne.indexOf(0)!==-1)k=[ne.indexOf(0)];else if(ae!==S){for(I=_.decodePixels(),L=new Uint8Array(I.length),P=0,S=I.length;P<S;P++)L[P]=ne[I[P]];z=n(L,_.width,1)}}var F=function(Y){var Z;switch(Y){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(b);return q===this.decode.FLATE_DECODE&&(U="/Predictor "+F+" "),U+="/Colors "+R+" /BitsPerComponent "+v+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(z&&this.__addimage__.isArrayBuffer(z)||this.__addimage__.isArrayBufferView(z))&&(z=this.__addimage__.arrayBufferToBinaryString(z)),{alias:y,data:p,index:f,filter:q,decodeParameters:U,transparency:k,palette:M,sMask:z,predictor:F,width:_.width,height:_.height,bitsPerComponent:v,colorSpace:A}}}})(dt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new YH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new lv(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(dt.API),Ls.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ls.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){hn.log("bit decode error:"+n)}},Ls.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ls.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ls.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ls.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},Ls.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Ls.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ls.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ls.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ls(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new lv(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(dt.API),T4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new T4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new lv(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(dt.API),dt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],h=r[c+1],p=r[c+2],f=r[c+3];s[a++]=u,s[a++]=h,s[a++]=p,o[l++]=f}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gu=dt.API,nm=Gu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,p=0,f=t.length,y=0,b=a[0]||l,A=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?A.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(p=h&&rn(c[r])==="object"&&!isNaN(parseInt(c[r][y],10))?c[r][y]/u:0,A.push((a[r]||b)/l+p)),y=r;return A},E4=Gu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Gu.processArabic&&(t=Gu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:nm.apply(this,arguments).reduce(function(s,o){return s+o},0)},I4=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},N4=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],h=[u],p=n.textIndent||0,f=0,y=0,b=t.split(" "),A=nm.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),_=[];b.map(function(R){(R=R.split(/\s*\n/)).length>1?_=_.concat(R.map(function(M,z){return(z&&M.length?`
`:"")+M})):_.push(R[0])}),b=_,l=E4.apply(this,[v,n])}for(s=0,o=b.length;s<o;s++){var k=0;if(r=b[s],l&&r[0]==`
`&&(r=r.substr(1),k=1),p+f+(y=(i=nm.apply(this,[r,n])).reduce(function(R,M){return R+M},0))>e||k){if(y>e){for(a=I4.apply(this,[r,i,e-(p+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);y=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(R,M){return R+M},0)}else u=[r];h.push(u),p=y+l,f=A}else u.push(r),p+=f+y,f=A}return c=l?function(R,M){return(M?v:"")+R.join(" ")}:function(R){return R.join(" ")},h.map(c)},Gu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(N4.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var p,f,y,b,A=["{"];for(var v in h){if(p=h[v],isNaN(parseInt(v,10))?f="'"+v+"'":(v=parseInt(v,10),f=(f=s(v).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof p=="number")p<0?(y=s(p).slice(3),b="-"):(y=s(p).slice(2),b=""),y=b+y.slice(0,-1)+r[y.slice(-1)];else{if(rn(p)!=="object")throw new Error("Don't know what to do with value type "+rn(p)+".");y=o(p)}A.push(f+y)}return A.push("}"),A.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,f,y,b,A={},v=1,_=A,k=[],R="",M="",z=h.length-1,I=1;I<z;I+=1)(b=h[I])=="'"?p?(y=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(k.push([_,y]),_={},y=void 0):b=="}"?((f=k.pop())[0][f[1]]=_,y=void 0,_=f[0]):b=="-"?v=-1:y===void 0?n.hasOwnProperty(b)?(R+=n[b],y=parseInt(R,16)*v,v=1,R=""):R+=b:n.hasOwnProperty(b)?(M+=n[b],_[y]=parseInt(M,16)*v,v=1,y=void 0,M=""):M+=b;return A},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var p=h.font,f=u.Unicode[p.postScriptName];f&&(p.metadata.Unicode={},p.metadata.Unicode.widths=f.widths,p.metadata.Unicode.kerning=f.kerning);var y=c.Unicode[p.postScriptName];y&&(p.metadata.Unicode.encoding=y,p.encoding=y.codePages[0])}])}(dt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Af(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(dt),function(t){function e(){return(yt.canvg?Promise.resolve(yt.canvg):Q2(()=>import("./index.es-Dn4J96aA.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}dt.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw hn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw hn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(y){return y.fromString(h,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(p)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),dt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},dt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function p(y,b){var A,v=!1;for(A=0;A<y.length;A+=1)y[A]===b&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(h=0;h<f;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(rn(t)==="object"){for(i in t)if(s=t[i],p(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&p(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,b=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?b.push("/"+y+" /"+n[y].value):b.push("/"+y+" "+n[y].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(dt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,p=s.length;h<p;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,h,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,p=(a=Object.keys(s).sort(function(f,y){return f-y})).length;h<p;h++)o=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,p=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",y=0;y<p.length;y++)f+=String.fromCharCode(p[y]);var b=c();u({data:f,addLength1:!0,objectId:b}),l("endobj");var A=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Zu(a.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Zu(a.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+A+" 0 R"),l("/BaseFont /"+Zu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,p="",f=0;f<h.length;f++)p+=String.fromCharCode(h[f]);var y=c();u({data:p,addLength1:!0,objectId:y}),l("endobj");var b=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var A=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Zu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var v=0;v<a.metadata.hmtx.widths.length;v++)a.metadata.hmtx.widths[v]=parseInt(a.metadata.hmtx.widths[v]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Zu(a.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},h=s.mutex||{},p=h.pdfEscape,f=h.activeFontKey,y=h.fonts,b=f,A="",v=0,_="",k=y[b].encoding;if(y[b].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:h};for(_=a,b=f,Array.isArray(a)&&(_=a[0]),v=0;v<_.length;v+=1)y[b].metadata.hasOwnProperty("cmap")&&(o=y[b].metadata.cmap.unicode.codeMap[_[v].charCodeAt(0)]),o||_[v].charCodeAt(0)<256&&y[b].metadata.hasOwnProperty("Unicode")?A+=_[v]:A+="";var R="";return parseInt(b.slice(1))<14||k==="WinAnsiEncoding"?R=p(A,b).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(R=n(A,y[b])),h.isHex=!0,{text:R,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,k=0;this.__bidiEngine__={};var R=function(x){var w=x.charCodeAt(),P=w>>8,j=b[P];return j!==void 0?h[256*j+(255&w)]:P===252||P===253?"AL":v.test(P)?"L":P===8?"R":"N"},M=function(x){for(var w,P=0;P<x.length;P++){if((w=R(x.charAt(P)))==="L")return!1;if(w==="R")return!0}return!1},z=function(x,w,P,j){var q,U,W,O,H=w[j];switch(H){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(H="AN");break;case"AL":_=!0,H="R";break;case"WS":H="N";break;case"CS":j<1||j+1>=w.length||(q=P[j-1])!=="EN"&&q!=="AN"||(U=w[j+1])!=="EN"&&U!=="AN"?H="N":_&&(U="AN"),H=U===q?U:"N";break;case"ES":H=(q=j>0?P[j-1]:"B")==="EN"&&j+1<w.length&&w[j+1]==="EN"?"EN":"N";break;case"ET":if(j>0&&P[j-1]==="EN"){H="EN";break}if(_){H="N";break}for(W=j+1,O=w.length;W<O&&w[W]==="ET";)W++;H=W<O&&w[W]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(O=w.length,W=j+1;W<O&&w[W]==="NSM";)W++;if(W<O){var ne=x[j],ae=ne>=1425&&ne<=2303||ne===64286;if(q=w[W],ae&&(q==="R"||q==="AL")){H="R";break}}}H=j<1||(q=w[j-1])==="B"?"N":P[j-1];break;case"B":_=!1,i=!0,H=k;break;case"S":s=!0,H="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":H="N"}return H},I=function(x,w,P){var j=x.split("");return P&&S(j,P,{hiLevel:k}),j.reverse(),w&&w.reverse(),j.join("")},S=function(x,w,P){var j,q,U,W,O,H=-1,ne=x.length,ae=0,F=[],Y=k?f:p,Z=[];for(_=!1,i=!1,s=!1,q=0;q<ne;q++)Z[q]=R(x[q]);for(U=0;U<ne;U++){if(O=ae,F[U]=z(x,Z,F,U),j=240&(ae=Y[O][y[F[U]]]),ae&=15,w[U]=W=Y[ae][5],j>0)if(j===16){for(q=H;q<U;q++)w[q]=1;H=-1}else H=-1;if(Y[ae][6])H===-1&&(H=U);else if(H>-1){for(q=H;q<U;q++)w[q]=W;H=-1}Z[U]==="B"&&(w[U]=0),P.hiLevel|=W}s&&function(Q,re,ce){for(var pe=0;pe<ce;pe++)if(Q[pe]==="S"){re[pe]=k;for(var he=pe-1;he>=0&&Q[he]==="WS";he--)re[he]=k}}(Z,w,ne)},L=function(x,w,P,j,q){if(!(q.hiLevel<x)){if(x===1&&k===1&&!i)return w.reverse(),void(P&&P.reverse());for(var U,W,O,H,ne=w.length,ae=0;ae<ne;){if(j[ae]>=x){for(O=ae+1;O<ne&&j[O]>=x;)O++;for(H=ae,W=O-1;H<W;H++,W--)U=w[H],w[H]=w[W],w[W]=U,P&&(U=P[H],P[H]=P[W],P[W]=U);ae=O}ae++}}},D=function(x,w,P){var j=x.split(""),q={hiLevel:k};return P||(P=[]),S(j,P,q),function(U,W,O){if(O.hiLevel!==0&&u)for(var H,ne=0;ne<U.length;ne++)W[ne]===1&&(H=A.indexOf(U[ne]))>=0&&(U[ne]=A[H+1])}(j,P,q),L(2,j,w,P,q),L(1,j,w,P,q),j.join("")};return this.__bidiEngine__.doBidiReorder=function(x,w,P){if(function(q,U){if(U)for(var W=0;W<q.length;W++)U[W]=W;a===void 0&&(a=M(q)),c===void 0&&(c=M(q))}(x,w),o||!l||c)if(o&&l&&a^c)k=a?1:0,x=I(x,w,P);else if(!o&&l&&c)k=a?1:0,x=D(x,w,P),x=I(x,w);else if(!o||a||l||c){if(o&&!l&&a^c)x=I(x,w),a?(k=0,x=D(x,w,P)):(k=1,x=D(x,w,P),x=I(x,w));else if(o&&a&&!l&&c)k=1,x=D(x,w,P),x=I(x,w);else if(!o&&!l&&a^c){var j=u;a?(k=1,x=D(x,w,P),k=0,u=!1,x=D(x,w,P),u=j):(k=0,x=D(x,w,P),x=I(x,w),k=1,u=!1,x=D(x,w,P),u=j,x=I(x,w))}}else k=0,x=D(x,w,P);else k=a?1:0,x=D(x,w,P);return x},this.__bidiEngine__.setOptions=function(x){x&&(o=x.isInputVisual,l=x.isOutputVisual,a=x.isInputRtl,c=x.isOutputRtl,u=x.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(dt),dt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Yl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new uW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new QH(this.contents),this.head=new JH(this),this.name=new rW(this),this.cmap=new lT(this),this.toUnicode={},this.hhea=new ZH(this),this.maxp=new iW(this),this.hmtx=new sW(this),this.post=new tW(this),this.os2=new eW(this),this.loca=new cW(this),this.glyf=new oW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Gs,Yl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),QH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,h,p,f,y,b;for(b in f=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(f)/l),o=Math.floor(h/l),u=16*f-h,(i=new Yl).writeInt(this.scalarType),i.writeShort(f),i.writeShort(h),i.writeShort(o),i.writeShort(u),s=16*f,c=i.pos+s,a=null,y=[],n)for(p=n[b],i.writeString(b),i.writeInt(t(p)),i.writeInt(c),i.writeInt(p.length),y=y.concat(p),b==="head"&&(a=c),c+=p.length;c%4;)y.push(0),c++;return i.write(y),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=cT.call(n);n.length%4;)n.push(0);for(s=new Yl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),XH={}.hasOwnProperty,Co=function(t,e){for(var n in e)XH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Gs=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Yl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),C4=function(){function t(e,n){var r,i,s,o,a,l,c,u,h,p,f,y,b,A,v,_,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),p=f/2,e.pos+=6,s=function(){var R,M;for(M=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)M.push(e.readUInt16());return M}(),e.pos+=2,b=function(){var R,M;for(M=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)M.push(e.readUInt16());return M}(),c=function(){var R,M;for(M=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)M.push(e.readUInt16());return M}(),u=function(){var R,M;for(M=[],l=R=0;0<=p?R<p:R>p;l=0<=p?++R:--R)M.push(e.readUInt16());return M}(),i=(this.length-e.pos+this.offset)/2,a=function(){var R,M;for(M=[],l=R=0;0<=i?R<i:R>i;l=0<=i?++R:--R)M.push(e.readUInt16());return M}(),l=v=0,k=s.length;v<k;l=++v)for(A=s[l],r=_=y=b[l];y<=A?_<=A:_>=A;r=y<=A?++_:--_)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-y)-(p-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=h}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,h,p,f,y,b,A,v,_,k,R,M,z,I,S,L,D,x,w,P,j,q,U,W,O,H,ne,ae,F,Y,Z,Q,re,ce,pe,he,_e,xe,De;switch(j=new Yl,o=Object.keys(e).sort(function(je,We){return je-We}),n){case"macroman":for(b=0,A=function(){var je=[];for(y=0;y<256;++y)je.push(0);return je}(),_={0:0},s={},q=0,H=o.length;q<H;q++)_[he=e[i=o[q]]]==null&&(_[he]=++b),s[i]={old:e[i],new:_[e[i]]},A[i]=_[e[i]];return j.writeUInt16(1),j.writeUInt16(0),j.writeUInt32(12),j.writeUInt16(0),j.writeUInt16(262),j.writeUInt16(0),j.write(A),{charMap:s,subtable:j.data,maxGlyphID:b+1};case"unicode":for(w=[],h=[],k=0,_={},r={},v=c=null,U=0,ne=o.length;U<ne;U++)_[M=e[i=o[U]]]==null&&(_[M]=++k),r[i]={old:M,new:_[M]},a=_[M]-i,v!=null&&a===c||(v&&h.push(v),w.push(i),c=a),v=i;for(v&&h.push(v),h.push(65535),w.push(65535),D=2*(L=w.length),S=2*Math.pow(Math.log(L)/Math.LN2,2),p=Math.log(S/2)/Math.LN2,I=2*L-S,l=[],z=[],f=[],y=W=0,ae=w.length;W<ae;y=++W){if(x=w[y],u=h[y],x===65535){l.push(0),z.push(0);break}if(x-(P=r[x].new)>=32768)for(l.push(0),z.push(2*(f.length+L-y)),i=O=x;x<=u?O<=u:O>=u;i=x<=u?++O:--O)f.push(r[i].new);else l.push(P-x),z.push(0)}for(j.writeUInt16(3),j.writeUInt16(1),j.writeUInt32(12),j.writeUInt16(4),j.writeUInt16(16+8*L+2*f.length),j.writeUInt16(0),j.writeUInt16(D),j.writeUInt16(S),j.writeUInt16(p),j.writeUInt16(I),ce=0,F=h.length;ce<F;ce++)i=h[ce],j.writeUInt16(i);for(j.writeUInt16(0),pe=0,Y=w.length;pe<Y;pe++)i=w[pe],j.writeUInt16(i);for(_e=0,Z=l.length;_e<Z;_e++)a=l[_e],j.writeUInt16(a);for(xe=0,Q=z.length;xe<Q;xe++)R=z[xe],j.writeUInt16(R);for(De=0,re=f.length;De<re;De++)b=f[De],j.writeUInt16(b);return{charMap:r,subtable:j.data,maxGlyphID:k+1}}},t}(),lT=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new C4(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=C4.encode(n,r),(s=new Yl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),ZH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),eW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),tW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),nW=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},rW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,h,p,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=h=0,p=i.length;h<p;o=++h)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new nW(u,s),c[f=s.nameID]==null&&(c[f]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),iW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),sW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,p,f;for(f=[],u=0,h=(p=this.metrics).length;u<h;u++)o=p[u],f.push(o.advance);return f}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),cT=[].slice,oW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,h,p;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Yl(r.read(s))).readShort(),u=l.readShort(),p=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new lW(l,u,p,c,h):new aW(l,a,u,p,c,h),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),aW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),lW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Yl(cT.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),cW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Co(e,Gs),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},e}(),uW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,h,p,f,y,b,A,v;for(i in r=lT.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},v=r.charMap)f[(l=v[i]).old]=l.new;for(y in p=r.maxGlyphID,o)y in f||(f[y]=p++);return u=function(_){var k,R;for(k in R={},_)R[_[k]]=k;return R}(f),h=Object.keys(u).sort(function(_,k){return _-k}),b=function(){var _,k,R;for(R=[],_=0,k=h.length;_<k;_++)a=h[_],R.push(u[a]);return R}(),s=this.font.glyf.encode(o,b,f),c=this.font.loca.encode(s.offsets,b),A={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},t}();dt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const hW=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:zH,AcroFormAppearance:st,AcroFormButton:fr,AcroFormCheckBox:Nf,AcroFormChoiceField:Hc,AcroFormComboBox:$c,AcroFormEditBox:Ef,AcroFormListBox:Wc,AcroFormPasswordField:Pf,AcroFormPushButton:If,AcroFormRadioButton:Kc,AcroFormTextField:Vl,GState:vp,ShadingPattern:gl,TilingPattern:Fc,default:dt,jsPDF:dt},Symbol.toStringTag,{value:"Module"}));var uT={exports:{}};const dW=F4(hW);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return dW}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Zd<"u"?Zd:typeof window<"u"?window:typeof self<"u"?self:Zd,function(n){return function(){var r={172:function(a,l){var c=this&&this.__extends||function(){var p=function(f,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var v in A)Object.prototype.hasOwnProperty.call(A,v)&&(b[v]=A[v])},p(f,y)};return function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(f,y);function b(){this.constructor=f}f.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function p(f,y,b){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=b,this.doc=f.getDocument()}return p}();l.HookData=u;var h=function(p){c(f,p);function f(y,b,A,v,_,k){var R=p.call(this,y,b,k)||this;return R.cell=A,R.row=v,R.column=_,R.section=v.section,R}return f}(u);l.CellHookData=h},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),h=c(136),p=c(744),f=c(776),y=c(664),b=c(972);function A(v){v.API.autoTable=function(){for(var _=[],k=0;k<arguments.length;k++)_[k]=arguments[k];var R;_.length===1?R=_[0]:(console.error("Use of deprecated autoTable initiation"),R=_[2]||{},R.columns=_[0],R.body=_[1]);var M=(0,f.parseInput)(this,R),z=(0,b.createTable)(this,M);return(0,y.drawTable)(this,z),this},v.API.lastAutoTable=!1,v.API.previousAutoTable=!1,v.API.autoTable.previous=!1,v.API.autoTableText=function(_,k,R,M){(0,h.default)(_,k,R,M,this)},v.API.autoTableSetDefaults=function(_){return p.DocHandler.setDefaults(_,this),this},v.autoTableSetDefaults=function(_,k){p.DocHandler.setDefaults(_,k)},v.API.autoTableHtmlToJson=function(_,k){var R;if(k===void 0&&(k=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var M=new p.DocHandler(this),z=(0,u.parseHtml)(M,_,window,k,!1),I=z.head,S=z.body,L=((R=I[0])===null||R===void 0?void 0:R.map(function(D){return D.content}))||[];return{columns:L,rows:S,data:S}},v.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},v.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),v.API.autoTable.globalDefaults||(v.API.autoTable.globalDefaults={}),v.API.autoTable.globalDefaults.addPageContent=_,this},v.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=A},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,h,p,f,y){f=f||{};var b=1.15,A=y.internal.scaleFactor,v=y.internal.getFontSize()/A,_=y.getLineHeightFactor?y.getLineHeightFactor():b,k=v*_,R=/\r\n|\r|\n/g,M="",z=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(M=typeof u=="string"?u.split(R):u,z=M.length||1),p+=v*(2-b),f.valign==="middle"?p-=z/2*k:f.valign==="bottom"&&(p-=z*k),f.halign==="center"||f.halign==="right"){var I=v;if(f.halign==="center"&&(I*=.5),M&&z>=1){for(var S=0;S<M.length;S++)y.text(M[S],h-y.getStringUnitWidth(M[S])*I,p),p+=k;return y}h-=y.getStringUnitWidth(u)*I}return f.halign==="justify"?y.text(u,h,p,{maxWidth:f.maxWidth||100,align:"justify"}):y.text(u,h,p),y}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(y,b,A){A.applyStyles(b,!0);var v=Array.isArray(y)?y:[y],_=v.map(function(k){return A.getTextWidth(k)}).reduce(function(k,R){return Math.max(k,R)},0);return _}l.getStringWidth=c;function u(y,b,A,v){var _=b.settings.tableLineWidth,k=b.settings.tableLineColor;y.applyStyles({lineWidth:_,lineColor:k});var R=h(_,!1);R&&y.rect(A.x,A.y,b.getWidth(y.pageSize().width),v.y-A.y,R)}l.addTableBorder=u;function h(y,b){var A=y>0,v=b||b===0;return A&&v?"DF":A?"S":v?"F":null}l.getFillStyle=h;function p(y,b){var A,v,_,k;if(y=y||b,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=b}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(A=y.left)!==null&&A!==void 0?A:b,top:(v=y.top)!==null&&v!==void 0?v:b,right:(_=y.right)!==null&&_!==void 0?_:b,bottom:(k=y.bottom)!==null&&k!==void 0?k:b}):(typeof y!="number"&&(y=b),{top:y,right:y,bottom:y,left:y})}l.parseSpacing=p;function f(y,b){var A=p(b.settings.margin,0);return y.pageSize().width-(A.left+A.right)}l.getPageAvailableWidth=f},796:function(a,l){var c=this&&this.__extends||function(){var f=function(y,b){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,v){A.__proto__=v}||function(A,v){for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(A[_]=v[_])},f(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");f(y,b);function A(){this.constructor=y}y.prototype=b===null?Object.create(b):(A.prototype=b.prototype,new A)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(f){c(y,f);function y(b){var A=f.call(this)||this;return A._element=b,A}return y}(Array);l.HtmlRowInput=u;function h(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=h;function p(f){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[f]}l.getTheme=p},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function h(A,v,_,k,R){var M={},z=1.3333333333333333,I=f(v,function(H){return R.getComputedStyle(H).backgroundColor});I!=null&&(M.fillColor=I);var S=f(v,function(H){return R.getComputedStyle(H).color});S!=null&&(M.textColor=S);var L=b(k,_);L&&(M.cellPadding=L);var D="borderTopColor",x=z*_,w=k.borderTopWidth;if(k.borderBottomWidth===w&&k.borderRightWidth===w&&k.borderLeftWidth===w){var P=(parseFloat(w)||0)/x;P&&(M.lineWidth=P)}else M.lineWidth={top:(parseFloat(k.borderTopWidth)||0)/x,right:(parseFloat(k.borderRightWidth)||0)/x,bottom:(parseFloat(k.borderBottomWidth)||0)/x,left:(parseFloat(k.borderLeftWidth)||0)/x},M.lineWidth.top||(M.lineWidth.right?D="borderRightColor":M.lineWidth.bottom?D="borderBottomColor":M.lineWidth.left&&(D="borderLeftColor"));var j=f(v,function(H){return R.getComputedStyle(H)[D]});j!=null&&(M.lineColor=j);var q=["left","right","center","justify"];q.indexOf(k.textAlign)!==-1&&(M.halign=k.textAlign),q=["middle","bottom","top"],q.indexOf(k.verticalAlign)!==-1&&(M.valign=k.verticalAlign);var U=parseInt(k.fontSize||"");isNaN(U)||(M.fontSize=U/z);var W=p(k);W&&(M.fontStyle=W);var O=(k.fontFamily||"").toLowerCase();return A.indexOf(O)!==-1&&(M.font=O),M}l.parseCss=h;function p(A){var v="";return(A.fontWeight==="bold"||A.fontWeight==="bolder"||parseInt(A.fontWeight)>=700)&&(v="bold"),(A.fontStyle==="italic"||A.fontStyle==="oblique")&&(v+="italic"),v}function f(A,v){var _=y(A,v);if(!_)return null;var k=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!k||!Array.isArray(k))return null;var R=[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],M=parseInt(k[4]);return M===0||isNaN(R[0])||isNaN(R[1])||isNaN(R[2])?null:R}function y(A,v){var _=v(A);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?A.parentElement==null?null:y(A.parentElement,v):_}function b(A,v){var _=[A.paddingTop,A.paddingRight,A.paddingBottom,A.paddingLeft],k=96/(72/v),R=(parseInt(A.lineHeight)-parseInt(A.fontSize))/v/2,M=_.map(function(I){return parseInt(I||"0")/k}),z=(0,u.parseSpacing)(M,0);return R>z.top&&(z.top=R),R>z.bottom&&(z.bottom=R),z}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function h(p){this.jsPDFDocument=p,this.userStyles={textColor:p.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:p.internal.getFontSize(),fontStyle:p.internal.getFont().fontStyle,font:p.internal.getFont().fontName,lineWidth:p.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:p.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(p,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=p:c=p},h.unifyColor=function(p){return Array.isArray(p)?p:typeof p=="number"?[p,p,p]:typeof p=="string"?[p]:null},h.prototype.applyStyles=function(p,f){var y,b,A;f===void 0&&(f=!1),p.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(p.fontStyle);var v=this.jsPDFDocument.internal.getFont(),_=v.fontStyle,k=v.fontName;if(p.font&&(k=p.font),p.fontStyle){_=p.fontStyle;var R=this.getFontList()[k];R&&R.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(R[0]),_=R[0])}if(this.jsPDFDocument.setFont(k,_),p.fontSize&&this.jsPDFDocument.setFontSize(p.fontSize),!f){var M=h.unifyColor(p.fillColor);M&&(y=this.jsPDFDocument).setFillColor.apply(y,M),M=h.unifyColor(p.textColor),M&&(b=this.jsPDFDocument).setTextColor.apply(b,M),M=h.unifyColor(p.lineColor),M&&(A=this.jsPDFDocument).setDrawColor.apply(A,M),typeof p.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(p.lineWidth)}},h.prototype.splitTextToSize=function(p,f,y){return this.jsPDFDocument.splitTextToSize(p,f,y)},h.prototype.rect=function(p,f,y,b,A){return this.jsPDFDocument.rect(p,f,y,b,A)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(p){return this.jsPDFDocument.getTextWidth(p)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(p){this.jsPDFDocument.setPage(p)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return c||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var p=this.jsPDFDocument.internal.pageSize;return p.width==null&&(p={width:p.getWidth(),height:p.getHeight()}),p},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var p=this.jsPDFDocument;return p.getLineHeightFactor?p.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(p){return p/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var p=this.jsPDFDocument.internal.getCurrentPageInfo();return p?p.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();l.DocHandler=u},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),h=c(796);function p(b,A,v,_,k){var R,M;_===void 0&&(_=!1),k===void 0&&(k=!1);var z;typeof A=="string"?z=v.document.querySelector(A):z=A;var I=Object.keys(b.getFontList()),S=b.scaleFactor(),L=[],D=[],x=[];if(!z)return console.error("Html table could not be found with input: ",A),{head:L,body:D,foot:x};for(var w=0;w<z.rows.length;w++){var P=z.rows[w],j=(M=(R=P==null?void 0:P.parentElement)===null||R===void 0?void 0:R.tagName)===null||M===void 0?void 0:M.toLowerCase(),q=f(I,S,v,P,_,k);q&&(j==="thead"?L.push(q):j==="tfoot"?x.push(q):D.push(q))}return{head:L,body:D,foot:x}}l.parseHtml=p;function f(b,A,v,_,k,R){for(var M=new h.HtmlRowInput(_),z=0;z<_.cells.length;z++){var I=_.cells[z],S=v.getComputedStyle(I);if(k||S.display!=="none"){var L=void 0;R&&(L=(0,u.parseCss)(b,I,A,S,v)),M.push({rowSpan:I.rowSpan,colSpan:I.colSpan,styles:L,_element:I,content:y(I)})}}var D=v.getComputedStyle(_);if(M.length>0&&(k||D.display!=="none"))return M}function y(b){var A=b.cloneNode(!0);return A.innerHTML=A.innerHTML.replace(/\n/g,"").replace(/ +/g," "),A.innerHTML=A.innerHTML.split(/<br.*?>/).map(function(v){return v.trim()}).join(`
`),A.innerText||A.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),h=c(356),p=c(420),f=c(744),y=c(792);function b(z,I){var S=new f.DocHandler(z),L=S.getDocumentOptions(),D=S.getGlobalOptions();(0,y.default)(S,D,L,I);var x=(0,h.assign)({},D,L,I),w;typeof window<"u"&&(w=window);var P=A(D,L,I),j=v(D,L,I),q=_(S,x),U=R(S,x,w);return{id:I.tableId,content:U,hooks:j,styles:P,settings:q}}l.parseInput=b;function A(z,I,S){for(var L={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},D=function(j){if(j==="columnStyles"){var q=z[j],U=I[j],W=S[j];L.columnStyles=(0,h.assign)({},q,U,W)}else{var O=[z,I,S],H=O.map(function(ne){return ne[j]||{}});L[j]=(0,h.assign)({},H[0],H[1],H[2])}},x=0,w=Object.keys(L);x<w.length;x++){var P=w[x];D(P)}return L}function v(z,I,S){for(var L=[z,I,S],D={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},x=0,w=L;x<w.length;x++){var P=w[x];P.didParseCell&&D.didParseCell.push(P.didParseCell),P.willDrawCell&&D.willDrawCell.push(P.willDrawCell),P.didDrawCell&&D.didDrawCell.push(P.didDrawCell),P.willDrawPage&&D.willDrawPage.push(P.willDrawPage),P.didDrawPage&&D.didDrawPage.push(P.didDrawPage)}return D}function _(z,I){var S,L,D,x,w,P,j,q,U,W,O,H,ne=(0,p.parseSpacing)(I.margin,40/z.scaleFactor()),ae=(S=k(z,I.startY))!==null&&S!==void 0?S:ne.top,F;I.showFoot===!0?F="everyPage":I.showFoot===!1?F="never":F=(L=I.showFoot)!==null&&L!==void 0?L:"everyPage";var Y;I.showHead===!0?Y="everyPage":I.showHead===!1?Y="never":Y=(D=I.showHead)!==null&&D!==void 0?D:"everyPage";var Z=(x=I.useCss)!==null&&x!==void 0?x:!1,Q=I.theme||(Z?"plain":"striped"),re=!!I.horizontalPageBreak,ce=(w=I.horizontalPageBreakRepeat)!==null&&w!==void 0?w:null;return{includeHiddenHtml:(P=I.includeHiddenHtml)!==null&&P!==void 0?P:!1,useCss:Z,theme:Q,startY:ae,margin:ne,pageBreak:(j=I.pageBreak)!==null&&j!==void 0?j:"auto",rowPageBreak:(q=I.rowPageBreak)!==null&&q!==void 0?q:"auto",tableWidth:(U=I.tableWidth)!==null&&U!==void 0?U:"auto",showHead:Y,showFoot:F,tableLineWidth:(W=I.tableLineWidth)!==null&&W!==void 0?W:0,tableLineColor:(O=I.tableLineColor)!==null&&O!==void 0?O:200,horizontalPageBreak:re,horizontalPageBreakRepeat:ce,horizontalPageBreakBehaviour:(H=I.horizontalPageBreakBehaviour)!==null&&H!==void 0?H:"afterAllRows"}}function k(z,I){var S=z.getLastAutoTable(),L=z.scaleFactor(),D=z.pageNumber(),x=!1;if(S&&S.startPageNumber){var w=S.startPageNumber+S.pageNumber-1;x=w===D}return typeof I=="number"?I:(I==null||I===!1)&&x&&(S==null?void 0:S.finalY)!=null?S.finalY+20/L:null}function R(z,I,S){var L=I.head||[],D=I.body||[],x=I.foot||[];if(I.html){var w=I.includeHiddenHtml;if(S){var P=(0,u.parseHtml)(z,I.html,S,w,I.useCss)||{};L=P.head||L,D=P.body||L,x=P.foot||L}else console.error("Cannot parse html in non browser environment")}var j=I.columns||M(L,D,x);return{columns:j,head:L,body:D,foot:x}}function M(z,I,S){var L=z[0]||I[0]||S[0]||[],D=[];return Object.keys(L).filter(function(x){return x!=="_element"}).forEach(function(x){var w=1,P;Array.isArray(L)?P=L[parseInt(x)]:P=L[x],typeof P=="object"&&!Array.isArray(P)&&(w=(P==null?void 0:P.colSpan)||1);for(var j=0;j<w;j++){var q=void 0;Array.isArray(L)?q=D.length:q=x+(j>0?"_".concat(j):"");var U={dataKey:q};D.push(U)}}),D}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,p,f,y){for(var b=function(k){k&&typeof k!="object"&&console.error("The options parameter should be of type object, is: "+typeof k),typeof k.extendWidth<"u"&&(k.tableWidth=k.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof k.margins<"u"&&(typeof k.margin>"u"&&(k.margin=k.margins),console.error("Use of deprecated option: margins, use margin instead.")),k.startY&&typeof k.startY!="number"&&(console.error("Invalid value for startY option",k.startY),delete k.startY),!k.didDrawPage&&(k.afterPageContent||k.beforePageContent||k.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),k.didDrawPage=function(x){h.applyStyles(h.userStyles),k.beforePageContent&&k.beforePageContent(x),h.applyStyles(h.userStyles),k.afterPageContent&&k.afterPageContent(x),h.applyStyles(h.userStyles),k.afterPageAdd&&x.pageNumber>1&&x.afterPageAdd(x),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(x){k[x]&&console.error('The "'.concat(x,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(x){var w=x[0],P=x[1];k[P]&&(console.error("Use of deprecated option ".concat(P,". Use ").concat(w," instead")),k[w]=k[P])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(x){var w=typeof x=="string"?x:x[0],P=typeof x=="string"?x:x[1];typeof k[w]<"u"&&(typeof k.styles[P]>"u"&&(k.styles[P]=k[w]),console.error("Use of deprecated option: "+w+", use the style "+P+" instead."))});for(var R=0,M=["styles","bodyStyles","headStyles","footStyles"];R<M.length;R++){var z=M[R];u(k[z]||{})}for(var I=k.columnStyles||{},S=0,L=Object.keys(I);S<L.length;S++){var D=L[S];u(I[D]||{})}},A=0,v=[p,f,y];A<v.length;A++){var _=v[A];b(_)}}l.default=c;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),h=c(172),p=c(420),f=function(){function v(_,k){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=k.columns,this.head=k.head,this.body=k.body,this.foot=k.foot}return v.prototype.getHeadHeight=function(_){return this.head.reduce(function(k,R){return k+R.getMaxCellHeight(_)},0)},v.prototype.getFootHeight=function(_){return this.foot.reduce(function(k,R){return k+R.getMaxCellHeight(_)},0)},v.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},v.prototype.callCellHooks=function(_,k,R,M,z,I){for(var S=0,L=k;S<L.length;S++){var D=L[S],x=new h.CellHookData(_,this,R,M,z,I),w=D(x)===!1;if(R.text=Array.isArray(R.text)?R.text:[R.text],w)return!1}return!0},v.prototype.callEndPageHooks=function(_,k){_.applyStyles(_.userStyles);for(var R=0,M=this.hooks.didDrawPage;R<M.length;R++){var z=M[R];z(new h.HookData(_,this,k))}},v.prototype.callWillDrawPageHooks=function(_,k){for(var R=0,M=this.hooks.willDrawPage;R<M.length;R++){var z=M[R];z(new h.HookData(_,this,k))}},v.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var k=this.columns.reduce(function(M,z){return M+z.wrappedWidth},0);return k}else{var R=this.settings.margin;return _-R.left-R.right}},v}();l.Table=f;var y=function(){function v(_,k,R,M,z){z===void 0&&(z=!1),this.height=0,this.raw=_,_ instanceof u.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=k,this.section=R,this.cells=M,this.spansMultiplePages=z}return v.prototype.getMaxCellHeight=function(_){var k=this;return _.reduce(function(R,M){var z;return Math.max(R,((z=k.cells[M.index])===null||z===void 0?void 0:z.height)||0)},0)},v.prototype.hasRowSpan=function(_){var k=this;return _.filter(function(R){var M=k.cells[R.index];return M?M.rowSpan>1:!1}).length>0},v.prototype.canEntireRowFit=function(_,k){return this.getMaxCellHeight(k)<=_},v.prototype.getMinimumRowHeight=function(_,k){var R=this;return _.reduce(function(M,z){var I=R.cells[z.index];if(!I)return 0;var S=k.getLineHeight(I.styles.fontSize),L=I.padding("vertical"),D=L+S;return D>M?D:M},0)},v}();l.Row=y;var b=function(){function v(_,k,R){var M,z;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=k,this.section=R,this.raw=_;var I=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,I=(z=(M=_.content)!==null&&M!==void 0?M:_.title)!==null&&z!==void 0?z:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var S=I!=null?""+I:"",L=/\r\n|\r|\n/g;this.text=S.split(L)}return v.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var k=this.height-this.padding("vertical");_=this.y+k/2+this.padding("top")}var R;if(this.styles.halign==="right")R=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var M=this.width-this.padding("horizontal");R=this.x+M/2+this.padding("left")}else R=this.x+this.padding("left");return{x:R,y:_}},v.prototype.getContentHeight=function(_,k){k===void 0&&(k=1.15);var R=Array.isArray(this.text)?this.text.length:1,M=this.styles.fontSize/_*k,z=R*M+this.padding("vertical");return Math.max(z,this.styles.minCellHeight)},v.prototype.padding=function(_){var k=(0,p.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?k.top+k.bottom:_==="horizontal"?k.left+k.right:k[_]},v}();l.Cell=b;var A=function(){function v(_,k,R){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=k,this.index=R}return v.prototype.getMaxCustomCellWidth=function(_){for(var k=0,R=0,M=_.allRows();R<M.length;R++){var z=M[R],I=z.cells[this.index];I&&typeof I.styles.cellWidth=="number"&&(k=Math.max(k,I.styles.cellWidth))}return k},v}();l.Column=A},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,h,p,f,y){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(u),A=1;A<arguments.length;A++){var v=arguments[A];if(v!=null)for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(b[_]=v[_])}return b}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),h=c(260),p=c(324),f=c(796),y=c(356);function b(z,I){var S=new u.DocHandler(z),L=A(I,S.scaleFactor()),D=new h.Table(I,L);return(0,p.calculateWidths)(S,D),S.applyStyles(S.userStyles),D}l.createTable=b;function A(z,I){var S=z.content,L=R(S.columns);if(S.head.length===0){var D=_(L,"head");D&&S.head.push(D)}if(S.foot.length===0){var D=_(L,"foot");D&&S.foot.push(D)}var x=z.settings.theme,w=z.styles;return{columns:L,head:v("head",S.head,L,w,x,I),body:v("body",S.body,L,w,x,I),foot:v("foot",S.foot,L,w,x,I)}}function v(z,I,S,L,D,x){var w={},P=I.map(function(j,q){for(var U=0,W={},O=0,H=0,ne=0,ae=S;ne<ae.length;ne++){var F=ae[ne];if(w[F.index]==null||w[F.index].left===0)if(H===0){var Y=void 0;Array.isArray(j)?Y=j[F.index-O-U]:Y=j[F.dataKey];var Z={};typeof Y=="object"&&!Array.isArray(Y)&&(Z=(Y==null?void 0:Y.styles)||{});var Q=M(z,F,q,D,L,x,Z),re=new h.Cell(Y,Q,z);W[F.dataKey]=re,W[F.index]=re,H=re.colSpan-1,w[F.index]={left:re.rowSpan-1,times:H}}else H--,O++;else w[F.index].left--,H=w[F.index].times,U++}return new h.Row(j,q,z,W)});return P}function _(z,I){var S={};return z.forEach(function(L){if(L.raw!=null){var D=k(I,L.raw);D!=null&&(S[L.dataKey]=D)}}),Object.keys(S).length>0?S:null}function k(z,I){if(z==="head"){if(typeof I=="object")return I.header||I.title||null;if(typeof I=="string"||typeof I=="number")return I}else if(z==="foot"&&typeof I=="object")return I.footer;return null}function R(z){return z.map(function(I,S){var L,D,x;return typeof I=="object"?x=(D=(L=I.dataKey)!==null&&L!==void 0?L:I.key)!==null&&D!==void 0?D:S:x=S,new h.Column(x,I,S)})}function M(z,I,S,L,D,x,w){var P=(0,f.getTheme)(L),j;z==="head"?j=D.headStyles:z==="body"?j=D.bodyStyles:z==="foot"&&(j=D.footStyles);var q=(0,y.assign)({},P.table,P[z],D.styles,j),U=D.columnStyles[I.dataKey]||D.columnStyles[I.index]||{},W=z==="body"?U:{},O=z==="body"&&S%2===0?(0,y.assign)({},P.alternateRow,D.alternateRowStyles):{},H=(0,f.defaultStyles)(x),ne=(0,y.assign)({},H,q,O,W);return(0,y.assign)(ne,w)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),h=c(260),p=c(744),f=c(356),y=c(136),b=c(224);function A(U,W){var O=W.settings,H=O.startY,ne=O.margin,ae={x:ne.left,y:H},F=W.getHeadHeight(W.columns)+W.getFootHeight(W.columns),Y=H+ne.bottom+F;if(O.pageBreak==="avoid"){var Z=W.body,Q=Z.reduce(function(pe,he){return pe+he.height},0);Y+=Q}var re=new p.DocHandler(U);(O.pageBreak==="always"||O.startY!=null&&Y>re.pageSize().height)&&(q(re),ae.y=ne.top),W.callWillDrawPageHooks(re,ae);var ce=(0,f.assign)({},ae);W.startPageNumber=re.pageNumber(),O.horizontalPageBreak?v(re,W,ce,ae):(re.applyStyles(re.userStyles),(O.showHead==="firstPage"||O.showHead==="everyPage")&&W.head.forEach(function(pe){return D(re,W,pe,ae,W.columns)}),re.applyStyles(re.userStyles),W.body.forEach(function(pe,he){var _e=he===W.body.length-1;L(re,W,pe,_e,ce,ae,W.columns)}),re.applyStyles(re.userStyles),(O.showFoot==="lastPage"||O.showFoot==="everyPage")&&W.foot.forEach(function(pe){return D(re,W,pe,ae,W.columns)})),(0,u.addTableBorder)(re,W,ce,ae),W.callEndPageHooks(re,ae),W.finalY=ae.y,U.lastAutoTable=W,U.previousAutoTable=W,U.autoTable&&(U.autoTable.previous=W),re.applyStyles(re.userStyles)}l.drawTable=A;function v(U,W,O,H){var ne=(0,b.calculateAllColumnsCanFitInPage)(U,W),ae=W.settings;if(ae.horizontalPageBreakBehaviour==="afterAllRows")ne.forEach(function(Q,re){U.applyStyles(U.userStyles),re>0?j(U,W,O,H,Q.columns,!0):_(U,W,H,Q.columns),k(U,W,O,H,Q.columns),M(U,W,H,Q.columns)});else for(var F=-1,Y=ne[0],Z=function(){var Q=F;if(Y){U.applyStyles(U.userStyles);var re=Y.columns;F>=0?j(U,W,O,H,re,!0):_(U,W,H,re),Q=R(U,W,F+1,H,re),M(U,W,H,re)}var ce=Q-F;ne.slice(1).forEach(function(pe){U.applyStyles(U.userStyles),j(U,W,O,H,pe.columns,!0),R(U,W,F+1,H,pe.columns,ce),M(U,W,H,pe.columns)}),F=Q};F<W.body.length-1;)Z()}function _(U,W,O,H){var ne=W.settings;U.applyStyles(U.userStyles),(ne.showHead==="firstPage"||ne.showHead==="everyPage")&&W.head.forEach(function(ae){return D(U,W,ae,O,H)})}function k(U,W,O,H,ne){U.applyStyles(U.userStyles),W.body.forEach(function(ae,F){var Y=F===W.body.length-1;L(U,W,ae,Y,O,H,ne)})}function R(U,W,O,H,ne,ae){U.applyStyles(U.userStyles),ae=ae??W.body.length;var F=Math.min(O+ae,W.body.length),Y=-1;return W.body.slice(O,F).forEach(function(Z,Q){var re=O+Q===W.body.length-1,ce=P(U,W,re,H);Z.canEntireRowFit(ce,ne)&&(D(U,W,Z,H,ne),Y=O+Q)}),Y}function M(U,W,O,H){var ne=W.settings;U.applyStyles(U.userStyles),(ne.showFoot==="lastPage"||ne.showFoot==="everyPage")&&W.foot.forEach(function(ae){return D(U,W,ae,O,H)})}function z(U,W,O){var H=O.getLineHeight(U.styles.fontSize),ne=U.padding("vertical"),ae=Math.floor((W-ne)/H);return Math.max(0,ae)}function I(U,W,O,H){var ne={};U.spansMultiplePages=!0,U.height=0;for(var ae=0,F=0,Y=O.columns;F<Y.length;F++){var Z=Y[F],Q=U.cells[Z.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var re=new h.Cell(Q.raw,Q.styles,Q.section);re=(0,f.assign)(re,Q),re.text=[];var ce=z(Q,W,H);Q.text.length>ce&&(re.text=Q.text.splice(ce,Q.text.length));var pe=H.scaleFactor(),he=H.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(pe,he),Q.contentHeight>=W&&(Q.contentHeight=W,re.styles.minCellHeight-=W),Q.contentHeight>U.height&&(U.height=Q.contentHeight),re.contentHeight=re.getContentHeight(pe,he),re.contentHeight>ae&&(ae=re.contentHeight),ne[Z.index]=re}}var _e=new h.Row(U.raw,-1,U.section,ne,!0);_e.height=ae;for(var xe=0,De=O.columns;xe<De.length;xe++){var Z=De[xe],re=_e.cells[Z.index];re&&(re.height=_e.height);var Q=U.cells[Z.index];Q&&(Q.height=U.height)}return _e}function S(U,W,O,H){var ne=U.pageSize().height,ae=H.settings.margin,F=ae.top+ae.bottom,Y=ne-F;W.section==="body"&&(Y-=H.getHeadHeight(H.columns)+H.getFootHeight(H.columns));var Z=W.getMinimumRowHeight(H.columns,U),Q=Z<O;if(Z>Y)return console.error("Will not be able to print row ".concat(W.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var re=W.hasRowSpan(H.columns),ce=W.getMaxCellHeight(H.columns)>Y;return ce?(re&&console.error("The content of row ".concat(W.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(re||H.settings.rowPageBreak==="avoid")}function L(U,W,O,H,ne,ae,F){var Y=P(U,W,H,ae);if(O.canEntireRowFit(Y,F))D(U,W,O,ae,F);else if(S(U,O,Y,W)){var Z=I(O,Y,W,U);D(U,W,O,ae,F),j(U,W,ne,ae,F),L(U,W,Z,H,ne,ae,F)}else j(U,W,ne,ae,F),L(U,W,O,H,ne,ae,F)}function D(U,W,O,H,ne){H.x=W.settings.margin.left;for(var ae=0,F=ne;ae<F.length;ae++){var Y=F[ae],Z=O.cells[Y.index];if(!Z){H.x+=Y.width;continue}U.applyStyles(Z.styles),Z.x=H.x,Z.y=H.y;var Q=W.callCellHooks(U,W.hooks.willDrawCell,Z,O,Y,H);if(Q===!1){H.x+=Y.width;continue}x(U,Z,H);var re=Z.getTextPos();(0,y.default)(Z.text,re.x,re.y,{halign:Z.styles.halign,valign:Z.styles.valign,maxWidth:Math.ceil(Z.width-Z.padding("left")-Z.padding("right"))},U.getDocument()),W.callCellHooks(U,W.hooks.didDrawCell,Z,O,Y,H),H.x+=Y.width}H.y+=O.height}function x(U,W,O){var H=W.styles;if(U.getDocument().setFillColor(U.getDocument().getFillColor()),typeof H.lineWidth=="number"){var ne=(0,u.getFillStyle)(H.lineWidth,H.fillColor);ne&&U.rect(W.x,O.y,W.width,W.height,ne)}else typeof H.lineWidth=="object"&&(H.fillColor&&U.rect(W.x,O.y,W.width,W.height,"F"),w(U,W,O,H.lineWidth))}function w(U,W,O,H){var ne,ae,F,Y;H.top&&(ne=O.x,ae=O.y,F=O.x+W.width,Y=O.y,H.right&&(F+=.5*H.right),H.left&&(ne-=.5*H.left),Z(H.top,ne,ae,F,Y)),H.bottom&&(ne=O.x,ae=O.y+W.height,F=O.x+W.width,Y=O.y+W.height,H.right&&(F+=.5*H.right),H.left&&(ne-=.5*H.left),Z(H.bottom,ne,ae,F,Y)),H.left&&(ne=O.x,ae=O.y,F=O.x,Y=O.y+W.height,H.top&&(ae-=.5*H.top),H.bottom&&(Y+=.5*H.bottom),Z(H.left,ne,ae,F,Y)),H.right&&(ne=O.x+W.width,ae=O.y,F=O.x+W.width,Y=O.y+W.height,H.top&&(ae-=.5*H.top),H.bottom&&(Y+=.5*H.bottom),Z(H.right,ne,ae,F,Y));function Z(Q,re,ce,pe,he){U.getDocument().setLineWidth(Q),U.getDocument().line(re,ce,pe,he,"S")}}function P(U,W,O,H){var ne=W.settings.margin.bottom,ae=W.settings.showFoot;return(ae==="everyPage"||ae==="lastPage"&&O)&&(ne+=W.getFootHeight(W.columns)),U.pageSize().height-H.y-ne}function j(U,W,O,H,ne,ae){ne===void 0&&(ne=[]),ae===void 0&&(ae=!1),U.applyStyles(U.userStyles),W.settings.showFoot==="everyPage"&&!ae&&W.foot.forEach(function(Y){return D(U,W,Y,H,ne)}),W.callEndPageHooks(U,H);var F=W.settings.margin;(0,u.addTableBorder)(U,W,O,H),q(U),W.pageNumber++,W.pageCount++,H.x=F.left,H.y=F.top,O.y=F.top,W.callWillDrawPageHooks(U,H),W.settings.showHead==="everyPage"&&(W.head.forEach(function(Y){return D(U,W,Y,H,ne)}),U.applyStyles(U.userStyles))}l.addPage=j;function q(U){var W=U.pageNumber();U.setPage(W+1);var O=U.pageNumber();return O===W?(U.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function h(f,y,b){var A;b===void 0&&(b={});var v=(0,u.getPageAvailableWidth)(f,y),_=new Map,k=[],R=[],M=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?M=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(M=[y.settings.horizontalPageBreakRepeat]),M.forEach(function(L){var D=y.columns.find(function(x){return x.dataKey===L||x.index===L});D&&!_.has(D.index)&&(_.set(D.index,!0),k.push(D.index),R.push(y.columns[D.index]),v-=D.wrappedWidth)});for(var z=!0,I=(A=b==null?void 0:b.start)!==null&&A!==void 0?A:0;I<y.columns.length;){if(_.has(I)){I++;continue}var S=y.columns[I].wrappedWidth;if(z||v>=S)z=!1,k.push(I),R.push(y.columns[I]),v-=S;else break;I++}return{colIndexes:k,columns:R,lastIndex:I-1}}function p(f,y){for(var b=[],A=0;A<y.columns.length;A++){var v=h(f,y,{start:A});v.columns.length&&(b.push(v),A=v.lastIndex)}return b}l.calculateAllColumnsCanFitInPage=p},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function h(k,R){p(k,R);var M=[],z=0;R.columns.forEach(function(S){var L=S.getMaxCustomCellWidth(R);L?S.width=L:(S.width=S.wrappedWidth,M.push(S)),z+=S.width});var I=R.getWidth(k.pageSize().width)-z;I&&(I=f(M,I,function(S){return Math.max(S.minReadableWidth,S.minWidth)})),I&&(I=f(M,I,function(S){return S.minWidth})),I=Math.abs(I),!R.settings.horizontalPageBreak&&I>.1/k.scaleFactor()&&(I=I<1?I:Math.round(I),console.warn("Of the table content, ".concat(I," units width could not fit page"))),b(R),A(R,k),y(R)}l.calculateWidths=h;function p(k,R){var M=k.scaleFactor(),z=R.settings.horizontalPageBreak,I=(0,u.getPageAvailableWidth)(k,R);R.allRows().forEach(function(S){for(var L=0,D=R.columns;L<D.length;L++){var x=D[L],w=S.cells[x.index];if(w){var P=R.hooks.didParseCell;R.callCellHooks(k,P,w,S,x,null);var j=w.padding("horizontal");w.contentWidth=(0,u.getStringWidth)(w.text,w.styles,k)+j;var q=(0,u.getStringWidth)(w.text.join(" ").split(/[^\S\u00A0]+/),w.styles,k);if(w.minReadableWidth=q+w.padding("horizontal"),typeof w.styles.cellWidth=="number")w.minWidth=w.styles.cellWidth,w.wrappedWidth=w.styles.cellWidth;else if(w.styles.cellWidth==="wrap"||z===!0)w.contentWidth>I?(w.minWidth=I,w.wrappedWidth=I):(w.minWidth=w.contentWidth,w.wrappedWidth=w.contentWidth);else{var U=10/M;w.minWidth=w.styles.minCellWidth||U,w.wrappedWidth=w.contentWidth,w.minWidth>w.wrappedWidth&&(w.wrappedWidth=w.minWidth)}}}}),R.allRows().forEach(function(S){for(var L=0,D=R.columns;L<D.length;L++){var x=D[L],w=S.cells[x.index];if(w&&w.colSpan===1)x.wrappedWidth=Math.max(x.wrappedWidth,w.wrappedWidth),x.minWidth=Math.max(x.minWidth,w.minWidth),x.minReadableWidth=Math.max(x.minReadableWidth,w.minReadableWidth);else{var P=R.styles.columnStyles[x.dataKey]||R.styles.columnStyles[x.index]||{},j=P.cellWidth||P.minCellWidth;j&&typeof j=="number"&&(x.minWidth=j,x.wrappedWidth=j)}w&&(w.colSpan>1&&!x.minWidth&&(x.minWidth=w.minWidth),w.colSpan>1&&!x.wrappedWidth&&(x.wrappedWidth=w.minWidth))}})}function f(k,R,M){for(var z=R,I=k.reduce(function(U,W){return U+W.wrappedWidth},0),S=0;S<k.length;S++){var L=k[S],D=L.wrappedWidth/I,x=z*D,w=L.width+x,P=M(L),j=w<P?P:w;R-=j-L.width,L.width=j}if(R=Math.round(R*1e10)/1e10,R){var q=k.filter(function(U){return R<0?U.width>M(U):!0});q.length&&(R=f(q,R,M))}return R}l.resizeColumns=f;function y(k){for(var R={},M=1,z=k.allRows(),I=0;I<z.length;I++)for(var S=z[I],L=0,D=k.columns;L<D.length;L++){var x=D[L],w=R[x.index];if(M>1)M--,delete S.cells[x.index];else if(w)w.cell.height+=S.height,M=w.cell.colSpan,delete S.cells[x.index],w.left--,w.left<=1&&delete R[x.index];else{var P=S.cells[x.index];if(!P)continue;if(P.height=S.height,P.rowSpan>1){var j=z.length-I,q=P.rowSpan>j?j:P.rowSpan;R[x.index]={cell:P,left:q,row:S}}}}}function b(k){for(var R=k.allRows(),M=0;M<R.length;M++)for(var z=R[M],I=null,S=0,L=0,D=0;D<k.columns.length;D++){var x=k.columns[D];if(L-=1,L>1&&k.columns[D+1])S+=x.width,delete z.cells[x.index];else if(I){var w=I;delete z.cells[x.index],I=null,w.width=x.width+S}else{var w=z.cells[x.index];if(!w)continue;if(L=w.colSpan,S=0,w.colSpan>1){I=w,S+=x.width;continue}w.width=x.width+S}}}function A(k,R){for(var M={count:0,height:0},z=0,I=k.allRows();z<I.length;z++){for(var S=I[z],L=0,D=k.columns;L<D.length;L++){var x=D[L],w=S.cells[x.index];if(w){R.applyStyles(w.styles,!0);var P=w.width-w.padding("horizontal");if(w.styles.overflow==="linebreak")w.text=R.splitTextToSize(w.text,P+1/R.scaleFactor(),{fontSize:w.styles.fontSize});else if(w.styles.overflow==="ellipsize")w.text=v(w.text,P,w.styles,R,"...");else if(w.styles.overflow==="hidden")w.text=v(w.text,P,w.styles,R,"");else if(typeof w.styles.overflow=="function"){var j=w.styles.overflow(w.text,P);typeof j=="string"?w.text=[j]:w.text=j}w.contentHeight=w.getContentHeight(R.scaleFactor(),R.getLineHeightFactor());var q=w.contentHeight/w.rowSpan;w.rowSpan>1&&M.count*M.height<q*w.rowSpan?M={height:q,count:w.rowSpan}:M&&M.count>0&&M.height>q&&(q=M.height),q>S.height&&(S.height=q)}}M.count--}}function v(k,R,M,z,I){return k.map(function(S){return _(S,R,M,z,I)})}l.ellipsize=v;function _(k,R,M,z,I){var S=1e4*z.scaleFactor();if(R=Math.ceil(R*S)/S,R>=(0,u.getStringWidth)(k,M,z))return k;for(;R<(0,u.getStringWidth)(k+I,M,z)&&!(k.length<=1);)k=k.substring(0,k.length-1);return k.trim()+I}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),c=s(776),u=s(664),h=s(972),p=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return p.Table}});var f=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var y=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return y.Row}});function b(R){(0,l.default)(R)}a.applyPlugin=b;function A(R,M){var z=(0,c.parseInput)(R,M),I=(0,h.createTable)(R,z);(0,u.drawTable)(R,I)}function v(R,M){var z=(0,c.parseInput)(R,M);return(0,h.createTable)(R,z)}a.__createTable=v;function _(R,M){(0,u.drawTable)(R,M)}a.__drawTable=_;try{var k=s(964);k.jsPDF&&(k=k.jsPDF),b(k)}catch{}a.default=A}(),o}()})})(uT);var fW=uT.exports;const L4=bp(fW);function R4(t){if(!t.length)return"";const e=t.reduce((s,o)=>(Object.keys(o).forEach(a=>s.add(a)),s),new Set),n=Array.from(e),r=s=>{const o=s==null?"":String(s);return/[",\n]/.test(o)?`"${o.replace(/"/g,'""')}"`:o},i=[n.join(",")];for(const s of t)i.push(n.map(o=>r(s[o])).join(","));return i.join(`
`)}function cv(t,e,n){const r=new Blob([e],{type:n+";charset=utf-8;"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function rm(t){return"Rp "+Number(t||0).toLocaleString("id-ID")}function pW(){const{org:t,user:e}=Vr(),[n,r]=le.useState(()=>mt().format("YYYY-MM-DD")),[i,s]=le.useState(()=>mt().format("YYYY-MM-DD")),[o,a]=le.useState(!1),l=le.useMemo(()=>{const A=mt(n).startOf("day").toDate(),v=mt(i).endOf("day").toDate();return{start:A,end:v}},[n,i]),c=()=>t?!0:(Oe.error("Organisasi belum siap"),!1),u=async A=>{if(!t)return[];const v=Pn(It(Ke,A),Xt("orgId","==",t.id));return(await Tn(v)).docs.map(k=>({id:k.id,...k.data()}))},h=async()=>{if(c()){a(!0);try{const v=(await u("sales")).filter(k=>{var M,z,I,S;const R=((z=(M=k.date)==null?void 0:M.toDate)==null?void 0:z.call(M))||((S=(I=k.createdAt)==null?void 0:I.toDate)==null?void 0:S.call(I))||null;return R&&R>=l.start&&R<=l.end}).map(k=>{var z,I,S,L;const R=((I=(z=k.date)==null?void 0:z.toDate)==null?void 0:I.call(z))||((L=(S=k.createdAt)==null?void 0:S.toDate)==null?void 0:L.call(S)),M=Array.isArray(k.items)?k.items.map(D=>`${D.name} x${Number(D.qty||0)}@${Number(D.price||0)}`).join(" | "):"";return{id:k.id,date:R?mt(R).format("YYYY-MM-DD HH:mm"):"",method:String(k.paymentMethod||"").toUpperCase(),source:k.source||"",total:Number(k.total||0),items:M}}).sort((k,R)=>k.date>R.date?1:-1),_=R4(v);cv(`laporan-penjualan_${mt(l.start).format("YYYYMMDD")}-${mt(l.end).format("YYYYMMDD")}.csv`,_,"text/csv"),await an({orgId:t.id,user:e,entity:"report",action:"export",meta:{kind:"sales_csv",from:n,to:i}}),Oe.success("Export penjualan (CSV) selesai")}catch(A){Oe.error((A==null?void 0:A.message)||"Gagal export penjualan")}finally{a(!1)}}},p=async()=>{if(c()){a(!0);try{const v=(await u("purchases")).filter(k=>{var M,z,I,S;const R=((z=(M=k.date)==null?void 0:M.toDate)==null?void 0:z.call(M))||((S=(I=k.createdAt)==null?void 0:I.toDate)==null?void 0:S.call(I))||null;return R&&R>=l.start&&R<=l.end}).map(k=>{var S,L,D,x;const R=((L=(S=k.date)==null?void 0:S.toDate)==null?void 0:L.call(S))||((x=(D=k.createdAt)==null?void 0:D.toDate)==null?void 0:x.call(D)),M=k.kind||(Array.isArray(k.items)&&k.items.length?"inventory":"other"),z=Array.isArray(k.items)?k.items.map(w=>`${w.name} x${Number(w.qty||0)}@${Number(w.unitCost||0)}`).join(" | "):"",I=Array.isArray(k.itemsOther)?k.itemsOther.map(w=>`${w.name}=${Number(w.amount||0)}`).join(" | "):"";return{id:k.id,date:R?mt(R).format("YYYY-MM-DD HH:mm"):"",supplier:k.supplier||"",method:String(k.method||"").toUpperCase(),kind:M,total:Number(k.total||0),items:M==="inventory"?z:I}}).sort((k,R)=>k.date>R.date?1:-1),_=R4(v);cv(`laporan-pembelian_${mt(l.start).format("YYYYMMDD")}-${mt(l.end).format("YYYYMMDD")}.csv`,_,"text/csv"),await an({orgId:t.id,user:e,entity:"report",action:"export",meta:{kind:"purchases_csv",from:n,to:i}}),Oe.success("Export pembelian (CSV) selesai")}catch(A){Oe.error((A==null?void 0:A.message)||"Gagal export pembelian")}finally{a(!1)}}},f=async()=>{if(c()){a(!0);try{const A=await u("sales"),v=A.filter(z=>{var S,L,D,x;const I=((L=(S=z.date)==null?void 0:S.toDate)==null?void 0:L.call(S))||((x=(D=z.createdAt)==null?void 0:D.toDate)==null?void 0:x.call(D))||null;return I&&I>=l.start&&I<=l.end}).map((z,I)=>{var x,w,P,j;const S=((w=(x=z.date)==null?void 0:x.toDate)==null?void 0:w.call(x))||((j=(P=z.createdAt)==null?void 0:P.toDate)==null?void 0:j.call(P)),L=Array.isArray(z.items)?z.items.map(q=>`${q.name} x${Number(q.qty||0)}@${Number(q.price||0)}`).join(" | "):"",D=L.length>120?L.slice(0,117)+"...":L;return{no:I+1,date:S?mt(S).format("YYYY-MM-DD HH:mm"):"",method:String(z.paymentMethod||"").toUpperCase(),source:z.source||"",total:rm(Number(z.total||0)),items:D}}).sort((z,I)=>z.date>I.date?1:-1),_=A.filter(z=>{var S,L,D,x;const I=((L=(S=z.date)==null?void 0:S.toDate)==null?void 0:L.call(S))||((x=(D=z.createdAt)==null?void 0:D.toDate)==null?void 0:x.call(D))||null;return I&&I>=l.start&&I<=l.end}).reduce((z,I)=>z+Number(I.total||0),0),k=new dt;k.setFontSize(14),k.text("Laporan Penjualan",14,16),k.setFontSize(10),k.text(`${mt(l.start).format("DD MMM YYYY")} - ${mt(l.end).format("DD MMM YYYY")}`,14,22),L4(k,{head:[["No","Tanggal","Metode","Sumber","Total","Items"]],body:v.map(z=>[z.no,z.date,z.method,z.source,z.total,z.items]),startY:28,styles:{fontSize:8},headStyles:{fillColor:[0,0,0]}});const R=k.lastAutoTable.finalY||28;k.setFontSize(10),k.text(`Total Transaksi: ${v.length}`,14,R+8),k.text(`Total Penjualan: ${rm(_)}`,14,R+14);const M=`laporan-penjualan_${mt(l.start).format("YYYYMMDD")}-${mt(l.end).format("YYYYMMDD")}.pdf`;k.save(M),await an({orgId:t.id,user:e,entity:"report",action:"export",meta:{kind:"sales_pdf",from:n,to:i}}),Oe.success("Export penjualan (PDF) selesai")}catch(A){Oe.error((A==null?void 0:A.message)||"Gagal export penjualan PDF")}finally{a(!1)}}},y=async()=>{if(c()){a(!0);try{const v=(await u("purchases")).filter(I=>{var L,D,x,w;const S=((D=(L=I.date)==null?void 0:L.toDate)==null?void 0:D.call(L))||((w=(x=I.createdAt)==null?void 0:x.toDate)==null?void 0:w.call(x))||null;return S&&S>=l.start&&S<=l.end}),_=v.map((I,S)=>{var q,U,W,O;const L=((U=(q=I.date)==null?void 0:q.toDate)==null?void 0:U.call(q))||((O=(W=I.createdAt)==null?void 0:W.toDate)==null?void 0:O.call(W)),D=I.kind||(Array.isArray(I.items)&&I.items.length?"inventory":"other"),x=Array.isArray(I.items)?I.items.map(H=>`${H.name} x${Number(H.qty||0)}@${Number(H.unitCost||0)}`).join(" | "):"",w=Array.isArray(I.itemsOther)?I.itemsOther.map(H=>`${H.name}=${Number(H.amount||0)}`).join(" | "):"",P=D==="inventory"?x:w,j=P.length>120?P.slice(0,117)+"...":P;return{no:S+1,date:L?mt(L).format("YYYY-MM-DD HH:mm"):"",supplier:I.supplier||"",method:String(I.method||"").toUpperCase(),kind:D==="inventory"?"BAHAN BAKU":"LAINNYA",total:rm(Number(I.total||0)),items:j}}).sort((I,S)=>I.date>S.date?1:-1),k=v.reduce((I,S)=>I+Number(S.total||0),0),R=new dt;R.setFontSize(14),R.text("Laporan Pembelian",14,16),R.setFontSize(10),R.text(`${mt(l.start).format("DD MMM YYYY")} - ${mt(l.end).format("DD MMM YYYY")}`,14,22),L4(R,{head:[["No","Tanggal","Pemasok","Metode","Jenis","Total","Items"]],body:_.map(I=>[I.no,I.date,I.supplier,I.method,I.kind,I.total,I.items]),startY:28,styles:{fontSize:8},headStyles:{fillColor:[0,0,0]}});const M=R.lastAutoTable.finalY||28;R.setFontSize(10),R.text(`Total Dokumen: ${_.length}`,14,M+8),R.text(`Total Pembelian: ${rm(k)}`,14,M+14);const z=`laporan-pembelian_${mt(l.start).format("YYYYMMDD")}-${mt(l.end).format("YYYYMMDD")}.pdf`;R.save(z),await an({orgId:t.id,user:e,entity:"report",action:"export",meta:{kind:"purchases_pdf",from:n,to:i}}),Oe.success("Export pembelian (PDF) selesai")}catch(A){Oe.error((A==null?void 0:A.message)||"Gagal export pembelian PDF")}finally{a(!1)}}},b=async()=>{if(c()){a(!0);try{const A=["products","categories","sales","purchases","stockMoves","shifts","cashMovements","logs"],v={};for(const k of A)v[k]=await u(k);const _=JSON.stringify({orgId:t.id,exportedAt:new Date().toISOString(),data:v},null,2);cv(`backup_${mt().format("YYYYMMDD_HHmm")}.json`,_,"application/json"),await an({orgId:t.id,user:e,entity:"backup",action:"export",meta:{size:Object.values(v).reduce((k,R)=>k+R.length,0)}}),Oe.success("Backup JSON diunduh")}catch(A){Oe.error((A==null?void 0:A.message)||"Gagal backup")}finally{a(!1)}}};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Laporan & Backup"}),N.jsxs("div",{className:"card p-4 grid gap-3",children:[N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Dari"}),N.jsx("input",{type:"date",value:n,onChange:A=>r(A.target.value)})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"text-sm opacity-70",children:"Sampai"}),N.jsx("input",{type:"date",value:i,onChange:A=>s(A.target.value)})]}),N.jsxs("div",{className:"md:col-span-3 flex flex-wrap items-center gap-2",children:[N.jsx("button",{onClick:h,disabled:o,className:"px-3 py-2 rounded bg-neutral-900 text-white disabled:opacity-60 dark:bg-white dark:text-neutral-900",children:"Export CSV Penjualan"}),N.jsx("button",{onClick:f,disabled:o,className:"px-3 py-2 rounded bg-neutral-900 text-white disabled:opacity-60 dark:bg-white dark:text-neutral-900",children:"Export PDF Penjualan"}),N.jsx("button",{onClick:p,disabled:o,className:"px-3 py-2 rounded bg-neutral-900 text-white disabled:opacity-60 dark:bg-white dark:text-neutral-900",children:"Export CSV Pembelian"}),N.jsx("button",{onClick:y,disabled:o,className:"px-3 py-2 rounded bg-neutral-900 text-white disabled:opacity-60 dark:bg-white dark:text-neutral-900",children:"Export PDF Pembelian"}),N.jsx("button",{onClick:b,disabled:o,className:"px-3 py-2 rounded bg-blue-600 text-white disabled:opacity-60",children:"Backup JSON (Semua)"})]})]}),N.jsxs("div",{className:"text-xs opacity-70",children:["Rentang tanggal diterapkan pada kolom ",N.jsx("b",{children:"date"})," atau"," ",N.jsx("b",{children:"createdAt"})," jika ada."]})]}),N.jsxs("div",{className:"card p-4 grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Catatan"}),N.jsxs("ul",{className:"list-disc pl-5 text-sm opacity-80 space-y-1",children:[N.jsx("li",{children:"CSV untuk olah data di Excel/Spreadsheet."}),N.jsx("li",{children:"PDF untuk cetak/arsip cepat. Untuk laporan harian, set tanggal awal=akhir lalu export PDF."}),N.jsx("li",{children:"Backup JSON berisi snapshot semua koleksi utama."})]})]})]})}function gW(){var l,c;const{org:t,refresh:e}=Vr(),{role:n}=Ea(),[r,i]=le.useState({cashierCanEditSales:!1,cashierCanDeleteSales:!1,cashierCanApplyDiscount:!1}),[s]=le.useState([{id:"sunset",name:"Sunset Pop",locked:!0},{id:"forest",name:"Forest Zen",locked:!0},{id:"neon",name:"Neon Cyber",locked:!0}]),o=le.useMemo(()=>{var h;if(!((h=t==null?void 0:t.trialExpiresAt)!=null&&h.toMillis))return null;const u=t.trialExpiresAt.toMillis()-Date.now();return Math.ceil(u/(1e3*60*60*24))},[t==null?void 0:t.trialExpiresAt]);le.useEffect(()=>{(async()=>{var f;if(!t)return;const p=(await op(Ct(Ke,"orgs",t.id))).data();i(((f=p==null?void 0:p.settings)==null?void 0:f.permissions)||r)})()},[t==null?void 0:t.id]);const a=async()=>{if(t){if(n!=="admin")return Oe.error("Hanya admin");await br(Ct(Ke,"orgs",t.id),{settings:{...t.settings||{},permissions:r}},{merge:!0}),await e(),Oe.success("Setting tersimpan")}};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Setting"}),typeof o=="number"&&N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold",children:"Masa Trial"}),N.jsxs("div",{className:"text-sm opacity-80",children:["Berakhir:"," ",mt(((c=(l=t==null?void 0:t.trialExpiresAt)==null?void 0:l.toMillis)==null?void 0:c.call(l))||Date.now()).format("DD/MM/YYYY")," ","• Sisa ",o," hari"]})]}),n!=="admin"?N.jsx("div",{className:"card p-4",children:"Menu ini hanya untuk Admin."}):N.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Hak Kasir"}),N.jsxs("label",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"checkbox",checked:r.cashierCanEditSales,onChange:u=>i({...r,cashierCanEditSales:u.target.checked})}),N.jsx("span",{children:"Kasir boleh mengedit penjualan"})]}),N.jsxs("label",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"checkbox",checked:r.cashierCanDeleteSales,onChange:u=>i({...r,cashierCanDeleteSales:u.target.checked})}),N.jsx("span",{children:"Kasir boleh menghapus penjualan"})]}),N.jsxs("label",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"checkbox",checked:r.cashierCanApplyDiscount,onChange:u=>i({...r,cashierCanApplyDiscount:u.target.checked})}),N.jsx("span",{children:"Kasir boleh memberi diskon"})]}),N.jsx("button",{onClick:a,className:"mt-3 px-3 py-2 rounded bg-blue-600 text-white",children:"Simpan"})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Tema (Terkunci)"}),N.jsx("p",{className:"text-sm opacity-70 mb-2",children:"Nantikan update berikutnya!"}),N.jsx("div",{className:"grid sm:grid-cols-3 gap-2",children:s.map(u=>N.jsxs("div",{className:"p-3 rounded-xl border border-black/10 bg-black/5 text-center opacity-60",children:[u.name," 🔒"]},u.id))})]})]})]})}function mW(){const t=`https://wa.me/6281345614663?text=${encodeURIComponent("Halo, masa trial Zyngra POS saya sudah habis. Mohon info perpanjangan/aktivasi. Terima kasih!")}`;return N.jsx("div",{className:"min-h-[60vh] grid place-items-center",children:N.jsxs("div",{className:"p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-black/40 max-w-md text-center",children:[N.jsx("div",{className:"text-2xl font-bold mb-2",children:"Masa Trial Habis"}),N.jsx("p",{className:"opacity-80",children:"Masa trial 3 hari Anda telah berakhir. Silakan menghubungi kami untuk aktivasi."}),N.jsx("a",{href:t,target:"_blank",className:"inline-block mt-4 px-4 py-2 rounded-lg bg-green-600 text-white",children:"Hubungi via WhatsApp"})]})})}function yW(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hT={exports:{}};const vW={},bW=Object.freeze(Object.defineProperty({__proto__:null,default:vW},Symbol.toStringTag,{value:"Module"})),xW=F4(bW);(function(t){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(e,n){typeof yW=="function"&&t&&t.exports?t.exports=n():(e.dcodeIO=e.dcodeIO||{}).bcrypt=n()})(Zd,function(){var e={},n=null;function r(x){if(t&&t.exports)try{return xW.randomBytes(x)}catch{}try{var w;return(self.crypto||self.msCrypto).getRandomValues(w=new Uint32Array(x)),Array.prototype.slice.call(w)}catch{}if(!n)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return n(x)}var i=!1;try{r(1),i=!0}catch{}n=null,e.setRandomFallback=function(x){n=x},e.genSaltSync=function(x,w){if(x=x||b,typeof x!="number")throw Error("Illegal arguments: "+typeof x+", "+typeof w);x<4?x=4:x>31&&(x=31);var P=[];return P.push("$2a$"),x<10&&P.push("0"),P.push(x.toString()),P.push("$"),P.push(h(r(y),y)),P.join("")},e.genSalt=function(x,w,P){if(typeof w=="function"&&(P=w,w=void 0),typeof x=="function"&&(P=x,x=void 0),typeof x>"u")x=b;else if(typeof x!="number")throw Error("illegal arguments: "+typeof x);function j(q){o(function(){try{q(null,e.genSaltSync(x))}catch(U){q(U)}})}if(P){if(typeof P!="function")throw Error("Illegal callback: "+typeof P);j(P)}else return new Promise(function(q,U){j(function(W,O){if(W){U(W);return}q(O)})})},e.hashSync=function(x,w){if(typeof w>"u"&&(w=b),typeof w=="number"&&(w=e.genSaltSync(w)),typeof x!="string"||typeof w!="string")throw Error("Illegal arguments: "+typeof x+", "+typeof w);return D(x,w)},e.hash=function(x,w,P,j){function q(U){typeof x=="string"&&typeof w=="number"?e.genSalt(w,function(W,O){D(x,O,U,j)}):typeof x=="string"&&typeof w=="string"?D(x,w,U,j):o(U.bind(this,Error("Illegal arguments: "+typeof x+", "+typeof w)))}if(P){if(typeof P!="function")throw Error("Illegal callback: "+typeof P);q(P)}else return new Promise(function(U,W){q(function(O,H){if(O){W(O);return}U(H)})})};function s(x,w){for(var P=0,j=0,q=0,U=x.length;q<U;++q)x.charCodeAt(q)===w.charCodeAt(q)?++P:++j;return P<0?!1:j===0}e.compareSync=function(x,w){if(typeof x!="string"||typeof w!="string")throw Error("Illegal arguments: "+typeof x+", "+typeof w);return w.length!==60?!1:s(e.hashSync(x,w.substr(0,w.length-31)),w)},e.compare=function(x,w,P,j){function q(U){if(typeof x!="string"||typeof w!="string"){o(U.bind(this,Error("Illegal arguments: "+typeof x+", "+typeof w)));return}if(w.length!==60){o(U.bind(this,null,!1));return}e.hash(x,w.substr(0,29),function(W,O){W?U(W):U(null,s(O,w))},j)}if(P){if(typeof P!="function")throw Error("Illegal callback: "+typeof P);q(P)}else return new Promise(function(U,W){q(function(O,H){if(O){W(O);return}U(H)})})},e.getRounds=function(x){if(typeof x!="string")throw Error("Illegal arguments: "+typeof x);return parseInt(x.split("$")[2],10)},e.getSalt=function(x){if(typeof x!="string")throw Error("Illegal arguments: "+typeof x);if(x.length!==60)throw Error("Illegal hash length: "+x.length+" != 60");return x.substring(0,29)};var o=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function a(x){var w=[],P=0;return f.encodeUTF16toUTF8(function(){return P>=x.length?null:x.charCodeAt(P++)},function(j){w.push(j)}),w}var l="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function h(x,w){var P=0,j=[],q,U;if(w<=0||w>x.length)throw Error("Illegal len: "+w);for(;P<w;){if(q=x[P++]&255,j.push(l[q>>2&63]),q=(q&3)<<4,P>=w){j.push(l[q&63]);break}if(U=x[P++]&255,q|=U>>4&15,j.push(l[q&63]),q=(U&15)<<2,P>=w){j.push(l[q&63]);break}U=x[P++]&255,q|=U>>6&3,j.push(l[q&63]),j.push(l[U&63])}return j.join("")}function p(x,w){var P=0,j=x.length,q=0,U=[],W,O,H,ne,ae,F;if(w<=0)throw Error("Illegal len: "+w);for(;P<j-1&&q<w&&(F=x.charCodeAt(P++),W=F<c.length?c[F]:-1,F=x.charCodeAt(P++),O=F<c.length?c[F]:-1,!(W==-1||O==-1||(ae=W<<2>>>0,ae|=(O&48)>>4,U.push(u(ae)),++q>=w||P>=j)||(F=x.charCodeAt(P++),H=F<c.length?c[F]:-1,H==-1)||(ae=(O&15)<<4>>>0,ae|=(H&60)>>2,U.push(u(ae)),++q>=w||P>=j)));)F=x.charCodeAt(P++),ne=F<c.length?c[F]:-1,ae=(H&3)<<6>>>0,ae|=ne,U.push(u(ae)),++q;var Y=[];for(P=0;P<q;P++)Y.push(U[P].charCodeAt(0));return Y}var f=function(){var x={};return x.MAX_CODEPOINT=1114111,x.encodeUTF8=function(w,P){var j=null;for(typeof w=="number"&&(j=w,w=function(){return null});j!==null||(j=w())!==null;)j<128?P(j&127):j<2048?(P(j>>6&31|192),P(j&63|128)):j<65536?(P(j>>12&15|224),P(j>>6&63|128),P(j&63|128)):(P(j>>18&7|240),P(j>>12&63|128),P(j>>6&63|128),P(j&63|128)),j=null},x.decodeUTF8=function(w,P){for(var j,q,U,W,O=function(H){H=H.slice(0,H.indexOf(null));var ne=Error(H.toString());throw ne.name="TruncatedError",ne.bytes=H,ne};(j=w())!==null;)if(!(j&128))P(j);else if((j&224)===192)(q=w())===null&&O([j,q]),P((j&31)<<6|q&63);else if((j&240)===224)((q=w())===null||(U=w())===null)&&O([j,q,U]),P((j&15)<<12|(q&63)<<6|U&63);else if((j&248)===240)((q=w())===null||(U=w())===null||(W=w())===null)&&O([j,q,U,W]),P((j&7)<<18|(q&63)<<12|(U&63)<<6|W&63);else throw RangeError("Illegal starting byte: "+j)},x.UTF16toUTF8=function(w,P){for(var j,q=null;(j=q!==null?q:w())!==null;){if(j>=55296&&j<=57343&&(q=w())!==null&&q>=56320&&q<=57343){P((j-55296)*1024+q-56320+65536),q=null;continue}P(j)}q!==null&&P(q)},x.UTF8toUTF16=function(w,P){var j=null;for(typeof w=="number"&&(j=w,w=function(){return null});j!==null||(j=w())!==null;)j<=65535?P(j):(j-=65536,P((j>>10)+55296),P(j%1024+56320)),j=null},x.encodeUTF16toUTF8=function(w,P){x.UTF16toUTF8(w,function(j){x.encodeUTF8(j,P)})},x.decodeUTF8toUTF16=function(w,P){x.decodeUTF8(w,function(j){x.UTF8toUTF16(j,P)})},x.calculateCodePoint=function(w){return w<128?1:w<2048?2:w<65536?3:4},x.calculateUTF8=function(w){for(var P,j=0;(P=w())!==null;)j+=x.calculateCodePoint(P);return j},x.calculateUTF16asUTF8=function(w){var P=0,j=0;return x.UTF16toUTF8(w,function(q){++P,j+=x.calculateCodePoint(q)}),[P,j]},x}();Date.now=Date.now||function(){return+new Date};var y=16,b=10,A=16,v=100,_=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],R=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function M(x,w,P,j){var q,U=x[w],W=x[w+1];return U^=P[0],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[1],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[2],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[3],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[4],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[5],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[6],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[7],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[8],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[9],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[10],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[11],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[12],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[13],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[14],q=j[U>>>24],q+=j[256|U>>16&255],q^=j[512|U>>8&255],q+=j[768|U&255],W^=q^P[15],q=j[W>>>24],q+=j[256|W>>16&255],q^=j[512|W>>8&255],q+=j[768|W&255],U^=q^P[16],x[w]=W^P[A+1],x[w+1]=U,x}function z(x,w){for(var P=0,j=0;P<4;++P)j=j<<8|x[w]&255,w=(w+1)%x.length;return{key:j,offp:w}}function I(x,w,P){for(var j=0,q=[0,0],U=w.length,W=P.length,O,H=0;H<U;H++)O=z(x,j),j=O.offp,w[H]=w[H]^O.key;for(H=0;H<U;H+=2)q=M(q,0,w,P),w[H]=q[0],w[H+1]=q[1];for(H=0;H<W;H+=2)q=M(q,0,w,P),P[H]=q[0],P[H+1]=q[1]}function S(x,w,P,j){for(var q=0,U=[0,0],W=P.length,O=j.length,H,ne=0;ne<W;ne++)H=z(w,q),q=H.offp,P[ne]=P[ne]^H.key;for(q=0,ne=0;ne<W;ne+=2)H=z(x,q),q=H.offp,U[0]^=H.key,H=z(x,q),q=H.offp,U[1]^=H.key,U=M(U,0,P,j),P[ne]=U[0],P[ne+1]=U[1];for(ne=0;ne<O;ne+=2)H=z(x,q),q=H.offp,U[0]^=H.key,H=z(x,q),q=H.offp,U[1]^=H.key,U=M(U,0,P,j),j[ne]=U[0],j[ne+1]=U[1]}function L(x,w,P,j,q){var U=R.slice(),W=U.length,O;if(P<4||P>31)if(O=Error("Illegal number of rounds (4-31): "+P),j){o(j.bind(this,O));return}else throw O;if(w.length!==y)if(O=Error("Illegal salt length: "+w.length+" != "+y),j){o(j.bind(this,O));return}else throw O;P=1<<P>>>0;var H,ne,ae=0,F;Int32Array?(H=new Int32Array(_),ne=new Int32Array(k)):(H=_.slice(),ne=k.slice()),S(w,x,H,ne);function Y(){if(q&&q(ae/P),ae<P)for(var Q=Date.now();ae<P&&(ae=ae+1,I(x,H,ne),I(w,H,ne),!(Date.now()-Q>v)););else{for(ae=0;ae<64;ae++)for(F=0;F<W>>1;F++)M(U,F<<1,H,ne);var re=[];for(ae=0;ae<W;ae++)re.push((U[ae]>>24&255)>>>0),re.push((U[ae]>>16&255)>>>0),re.push((U[ae]>>8&255)>>>0),re.push((U[ae]&255)>>>0);if(j){j(null,re);return}else return re}j&&o(Y)}if(typeof j<"u")Y();else for(var Z;;)if(typeof(Z=Y())<"u")return Z||[]}function D(x,w,P,j){var q;if(typeof x!="string"||typeof w!="string")if(q=Error("Invalid string / salt: Not a string"),P){o(P.bind(this,q));return}else throw q;var U,W;if(w.charAt(0)!=="$"||w.charAt(1)!=="2")if(q=Error("Invalid salt version: "+w.substring(0,2)),P){o(P.bind(this,q));return}else throw q;if(w.charAt(2)==="$")U="\0",W=3;else{if(U=w.charAt(2),U!=="a"&&U!=="b"&&U!=="y"||w.charAt(3)!=="$")if(q=Error("Invalid salt revision: "+w.substring(2,4)),P){o(P.bind(this,q));return}else throw q;W=4}if(w.charAt(W+2)>"$")if(q=Error("Missing salt rounds"),P){o(P.bind(this,q));return}else throw q;var O=parseInt(w.substring(W,W+1),10)*10,H=parseInt(w.substring(W+1,W+2),10),ne=O+H,ae=w.substring(W+3,W+25);x+=U>="a"?"\0":"";var F=a(x),Y=p(ae,y);function Z(Q){var re=[];return re.push("$2"),U>="a"&&re.push(U),re.push("$"),ne<10&&re.push("0"),re.push(ne.toString()),re.push("$"),re.push(h(Y,Y.length)),re.push(h(Q,R.length*4-1)),re.join("")}if(typeof P>"u")return Z(L(F,Y,ne));L(F,Y,ne,function(Q,re){Q?P(Q,null):P(null,Z(re))},j)}return e.encodeBase64=h,e.decodeBase64=p,e})})(hT);var _W=hT.exports;const D4=bp(_W);function wW(){const{userDoc:t,org:e,refresh:n}=Vr(),{set:r}=Ea(),i=hu(),[s,o]=le.useState("kasir"),[a,l]=le.useState(""),[c,u]=le.useState(""),[h,p]=le.useState("");le.useEffect(()=>{e&&(e.adminPinHash?o("kasir"):o("admin"))},[e==null?void 0:e.id,e==null?void 0:e.adminPinHash]);const f=async y=>{if(y&&y.preventDefault(),!(!t||!e))try{const b=Ct(Ke,"orgs",e.id),v=(await op(b)).data()||{};if(s==="admin")if(v.adminPinHash){if(!await D4.compare(a,v.adminPinHash)){Oe.error("PIN admin salah");return}}else{if(!c||c.length<4||c!==h){Oe.error("PIN min 4 digit dan harus sama");return}const k={adminPinHash:await D4.hash(c,10)};v.ownerUid||(k.ownerUid=t.uid),await br(b,k,{merge:!0})}r(s),await br(Ct(Ke,"users",t.uid),{role:s,orgId:e.id},{merge:!0}),await n(),Oe.success("Peran diset"),i("/dashboard")}catch{Oe.error("Gagal menyimpan peran")}};return N.jsx("div",{className:"min-h-screen grid place-items-center",children:N.jsxs("form",{className:"w-full max-w-md card p-6",onSubmit:f,children:[N.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pilih Peran"}),N.jsxs("div",{className:"grid gap-3",children:[N.jsxs("label",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"radio",name:"role",checked:s==="kasir",onChange:()=>o("kasir")}),N.jsx("span",{children:"Kasir"})]}),N.jsxs("label",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"radio",name:"role",checked:s==="admin",onChange:()=>o("admin")}),N.jsx("span",{children:"Admin"})]}),s==="admin"&&(e!=null&&e.adminPinHash?N.jsx("input",{value:a,onChange:y=>l(y.target.value),placeholder:"Masukkan PIN Admin",type:"password",className:"px-3 py-2 rounded bg-white"}):N.jsxs("div",{className:"grid gap-2",children:[N.jsx("input",{value:c,onChange:y=>u(y.target.value),placeholder:"Buat PIN Admin (min 4 digit)",type:"password",className:"px-3 py-2 rounded bg-white"}),N.jsx("input",{value:h,onChange:y=>p(y.target.value),placeholder:"Ulangi PIN",type:"password",className:"px-3 py-2 rounded bg-white"})]})),N.jsx("button",{type:"submit",className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-2",children:"Lanjut"})]})]})})}const uv=["pcs","ml","l","g","kg"];function SW(){const{org:t,user:e,userDoc:n}=Vr(),{role:r}=Ea(),i=r==="admin",[s,o]=le.useState(""),[a,l]=le.useState(""),[c,u]=le.useState(""),[h,p]=le.useState(""),[f,y]=le.useState(""),[b,A]=le.useState(""),[v,_]=le.useState(!1),[k,R]=le.useState("ml"),[M,z]=le.useState(""),[I,S]=le.useState(""),[L,D]=le.useState(""),[x,w]=le.useState([]),[P,j]=le.useState([]),[q,U]=le.useState(""),W=le.useRef(null),O=async()=>{if(!t)return;const $=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),Pe=(await Tn($)).docs.map(be=>({id:be.id,...be.data()}));Pe.sort((be,Ee)=>String(be.name||"").localeCompare(String(Ee.name||""))),w(Pe)},H=async()=>{if(!t)return;const $=Pn(It(Ke,"categories"),Xt("orgId","==",t.id)),Pe=(await Tn($)).docs.map(be=>({id:be.id,...be.data()}));Pe.sort((be,Ee)=>String(be.name||"").localeCompare(String(Ee.name||""))),j(Pe)};le.useEffect(()=>{O(),H()},[t==null?void 0:t.id]),le.useEffect(()=>{if(!x.length)return;const $=x.filter(Te=>{if(!!Te.hasMeasure){const be=Number(Te.stockContent||0),Ee=Number(Te.minContent||0);return Ee>0&&be<=Ee}else{const be=Number(Te.stock||0),Ee=Number(Te.minStock||0);return Ee>0&&be<=Ee}});$.length&&Oe.info(`${$.length} produk mendekati habis`)},[x]);const ne=async()=>{if(!t||!n)return;if(!s||!a){Oe.error("Nama dan kategori wajib diisi");return}if(!c||c<=0){Oe.error("Harga tidak valid");return}if(v){if(!M||Number(M)<=0){Oe.error("Isi per item harus > 0");return}if(I===""||Number(I)<0){Oe.error("Stok isi tidak valid");return}}else if(!h||h<0){Oe.error("Stok item tidak valid");return}const $={orgId:t.id,createdByUid:n.uid,name:s,category:a,price:Number(c),barcode:f.trim()||null,minStock:Number(b||0),hasMeasure:v,measureUnit:v?k:null,contentPerItem:v?Number(M||0):0,stock:v?0:Number(h||0),stockContent:v?Number(I||0):0,minContent:v?Number(L||0):0,createdAt:fn()},Te=await yi(It(Ke,"products"),$);await an({orgId:t.id,user:e,entity:"product",action:"create",entityId:Te.id,after:$}),o(""),l(""),u(""),p(""),y(""),A(""),_(!1),R("ml"),z(""),S(""),D(""),await O(),Oe.success("Produk ditambahkan")},ae=async $=>{if(!i){Oe.error("Hanya admin");return}const Te=prompt("Ubah nama",String($.name??""))??$.name,Pe=prompt("Ubah kategori",String($.category??""))??$.category,be=prompt("Ubah barcode (opsional)",String($.barcode??""))??$.barcode,Ee=prompt("Ubah harga",String($.price??"0"));if(Ee===null)return;const Ve=Number(Ee);if(!Number.isFinite(Ve)||Ve<0){Oe.error("Harga tidak valid");return}const Be={name:$.name,category:$.category,barcode:$.barcode,price:$.price};await br(Ct(Ke,"products",$.id),{name:Te,category:Pe,barcode:(be==null?void 0:be.trim())||null,price:Ve},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,before:Be,after:{name:Te,category:Pe,barcode:(be==null?void 0:be.trim())||null,price:Ve}}),await O(),Oe.success("Produk diperbarui")},F=async $=>{if(!i){Oe.error("Hanya admin");return}if($.hasMeasure){const Te=prompt(`Ubah stok isi (${$.measureUnit||""})`,String($.stockContent??"0"));if(Te===null)return;const Pe=Number(Te);if(!Number.isFinite(Pe)||Pe<0){Oe.error("Nilai tidak valid");return}await br(Ct(Ke,"products",$.id),{stockContent:Pe},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,before:{stockContent:$.stockContent||0},after:{stockContent:Pe}}),await O(),Oe.success("Stok isi diperbarui")}else{const Te=prompt("Ubah stok item",String($.stock??"0"));if(Te===null)return;const Pe=Number(Te);if(!Number.isFinite(Pe)||Pe<0){Oe.error("Nilai tidak valid");return}await br(Ct(Ke,"products",$.id),{stock:Pe},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,before:{stock:$.stock||0},after:{stock:Pe}}),await O(),Oe.success("Stok item diperbarui")}},Y=async $=>{if(!i){Oe.error("Hanya admin");return}if($.hasMeasure){const Te=prompt(`Ubah min isi (${$.measureUnit||""})`,String($.minContent??"0"));if(Te===null)return;const Pe=Number(Te);if(!Number.isFinite(Pe)||Pe<0){Oe.error("Nilai tidak valid");return}await br(Ct(Ke,"products",$.id),{minContent:Pe},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,before:{minContent:$.minContent||0},after:{minContent:Pe}}),await O(),Oe.success("Min isi diperbarui")}else{const Te=prompt("Ubah min stok",String($.minStock??"0"));if(Te===null)return;const Pe=Number(Te);if(!Number.isFinite(Pe)||Pe<0){Oe.error("Nilai tidak valid");return}await br(Ct(Ke,"products",$.id),{minStock:Pe},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,before:{minStock:$.minStock||0},after:{minStock:Pe}}),await O(),Oe.success("Min stok diperbarui")}},Z=async $=>{if(!i){Oe.error("Hanya admin");return}if(!confirm("Aktifkan detail kemasan untuk produk ini?")){await br(Ct(Ke,"products",$.id),{hasMeasure:!1,measureUnit:null,contentPerItem:0,stockContent:0,minContent:0},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,after:{hasMeasure:!1}}),await O(),Oe.success("Detail kemasan dimatikan");return}const Pe=prompt(`Unit (pilihan: ${uv.join(", ")})`,String($.measureUnit||"ml"))||"ml",be=prompt("Isi per item (angka)",String($.contentPerItem??"0"))||"0",Ee=prompt("Min isi (angka)",String($.minContent??"0"))||"0",Ve=Number(be),Be=Number(Ee);if(!Number.isFinite(Ve)||Ve<=0){Oe.error("Isi per item tidak valid");return}if(!uv.includes(Pe)){Oe.error("Unit tidak valid");return}await br(Ct(Ke,"products",$.id),{hasMeasure:!0,measureUnit:Pe,contentPerItem:Ve,minContent:Number.isFinite(Be)?Be:0},{merge:!0}),await an({orgId:t.id,user:e,entity:"product",action:"update",entityId:$.id,after:{hasMeasure:!0,measureUnit:Pe,contentPerItem:Ve}}),await O(),Oe.success("Detail kemasan diperbarui")},Q=async $=>{if(!i){Oe.error("Hanya admin");return}await R2(Ct(Ke,"products",$.id)),await an({orgId:t.id,user:e,entity:"product",action:"delete",entityId:$.id,before:{name:$.name,category:$.category}}),await O(),Oe.success("Produk dihapus")},re=async()=>{if(!i){Oe.error("Hanya admin");return}if(!t)return;if(!q.trim()){Oe.error("Nama kategori kosong");return}if(P.find(Te=>String(Te.name).toLowerCase()===q.trim().toLowerCase())){Oe.error("Kategori sudah ada");return}await yi(It(Ke,"categories"),{orgId:t.id,name:q.trim(),createdAt:fn()}),U(""),await H(),Oe.success("Kategori ditambahkan")},ce=async $=>{if(!i){Oe.error("Hanya admin");return}await R2(Ct(Ke,"categories",$.id)),await H(),Oe.success("Kategori dihapus"),a===$.name&&l("")},pe=$=>{const Te=Ee=>{const Ve=Ee==null?"":String(Ee);return/[",\n]/.test(Ve)?`"${Ve.replace(/"/g,'""')}"`:Ve},be=[["name","category","price","stock","barcode","minStock","hasMeasure","measureUnit","contentPerItem","stockContent","minContent"].join(",")];for(const Ee of $)be.push([Te(Ee.name||""),Te(Ee.category||""),Te(Ee.price??""),Te(Ee.stock??""),Te(Ee.barcode||""),Te(Ee.minStock??""),Te(Ee.hasMeasure?"1":""),Te(Ee.measureUnit||""),Te(Ee.contentPerItem??""),Te(Ee.stockContent??""),Te(Ee.minContent??"")].join(","));return be.join(`
`)},he=($,Te)=>{const Pe=new Blob([Te],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(Pe),Ee=document.createElement("a");Ee.href=be,Ee.download=$,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(be)},_e=()=>{const $=x.map(Te=>({name:Te.name||"",category:Te.category||"",price:Number(Te.price||0),stock:Number(Te.stock||0),barcode:Te.barcode||"",minStock:Number(Te.minStock||0),hasMeasure:!!Te.hasMeasure,measureUnit:Te.measureUnit||"",contentPerItem:Number(Te.contentPerItem||0),stockContent:Number(Te.stockContent||0),minContent:Number(Te.minContent||0)}));he("produk.csv",pe($)),Oe.success("Export selesai")},xe=()=>{he("contoh-produk.csv",pe([{name:"Sirup Melon",category:"Bahan",price:0,stock:0,barcode:"",minStock:0,hasMeasure:!0,measureUnit:"ml",contentPerItem:1e3,stockContent:3e3,minContent:500},{name:"Gelas 12oz",category:"Kemas",price:0,stock:100,barcode:"",minStock:20,hasMeasure:!1}])),Oe.info("Contoh CSV diunduh")},De=$=>{const Te=[];let Pe=[],be="",Ee=!1;for(let _t=0;_t<$.length;_t++){const gt=$[_t];Ee?gt==='"'?$[_t+1]==='"'?(be+='"',_t++):Ee=!1:be+=gt:gt==='"'?Ee=!0:gt===","?(Pe.push(be),be=""):gt===`
`||gt==="\r"?(gt==="\r"&&$[_t+1]===`
`&&_t++,Pe.push(be),be="",(Pe.length>1||Pe.length===1&&Pe[0].trim()!=="")&&Te.push(Pe),Pe=[]):be+=gt}if(Pe.push(be),(Pe.length>1||Pe.length===1&&Pe[0].trim()!=="")&&Te.push(Pe),Te.length===0)return[];const Ve=Te[0].map(_t=>_t.trim().toLowerCase()),Be=_t=>Ve.findIndex(gt=>gt===_t),Ze=Be("name"),ot=Be("category"),$e=Be("price"),it=Be("stock"),lt=Be("barcode"),Nt=Be("minstock"),ct=Be("hasmeasure"),Pt=Be("measureunit"),Xe=Be("contentperitem"),An=Be("stockcontent"),Lt=Be("mincontent"),kr=[];for(let _t=1;_t<Te.length;_t++){const gt=Te[_t],ai=(gt[Ze]||"").trim();if(!ai)continue;const Mt=(gt[ot]||"").trim(),ts=Number((gt[$e]||"").trim()||0),ln=Number((gt[it]||"").trim()||0),cr=(gt[lt]||"").trim(),li=Number((gt[Nt]||"").trim()||0),Jt=!!(gt[ct]||"").trim(),ht=(gt[Pt]||"").trim()||(Jt?"ml":""),Bt=Number((gt[Xe]||"").trim()||0),_i=Number((gt[An]||"").trim()||0),Fn=Number((gt[Lt]||"").trim()||0);kr.push({name:ai,category:Mt,price:ts,stock:ln,barcode:cr,minStock:li,hasMeasure:Jt,measureUnit:ht,contentPerItem:Bt,stockContent:_i,minContent:Fn})}return kr},je=async $=>{if(!i){Oe.error("Hanya admin");return}if(!t||!n)return;const Te=await $.text(),Pe=De(Te);if(Pe.length===0){Oe.error("CSV kosong atau header tidak valid");return}const be=$e=>($e.name||"").toLowerCase().trim()+"|"+($e.category||"").toLowerCase().trim(),Ee=new Map,Ve=new Map;x.forEach($e=>{const it=String($e.name||"").toLowerCase().trim()+"|"+String($e.category||"").toLowerCase().trim();Ee.set(it,$e),$e.barcode&&Ve.set(String($e.barcode).trim(),$e)});const Be=new Set;let Ze=0,ot=0;for(const $e of Pe){$e.category&&!P.find(ct=>String(ct.name).toLowerCase()===$e.category.toLowerCase())&&Be.add($e.category);const it=$e.barcode?Ve.get($e.barcode):null,lt=Ee.get(be($e)),Nt={name:$e.name,category:$e.category||null,price:Number($e.price||0),stock:Number($e.stock||0),barcode:$e.barcode||null,minStock:Number($e.minStock||0),hasMeasure:!!$e.hasMeasure,measureUnit:$e.hasMeasure?$e.measureUnit||"ml":null,contentPerItem:$e.hasMeasure?Number($e.contentPerItem||0):0,stockContent:$e.hasMeasure?Number($e.stockContent||0):0,minContent:$e.hasMeasure?Number($e.minContent||0):0};it?(await br(Ct(Ke,"products",it.id),Nt,{merge:!0}),ot++):lt?(await br(Ct(Ke,"products",lt.id),Nt,{merge:!0}),ot++):(await yi(It(Ke,"products"),{orgId:t.id,createdByUid:n.uid,...Nt,createdAt:fn()}),Ze++)}for(const $e of Array.from(Be))await yi(It(Ke,"categories"),{orgId:t.id,name:$e,createdAt:fn()});await O(),await H(),Oe.success(`Import selesai: ${Ze} tambah, ${ot} update${Be.size?`, kategori baru: ${Be.size}`:""}`)},We=async $=>{var Pe;const Te=(Pe=$.target.files)==null?void 0:Pe[0];if(Te)try{await je(Te)}finally{$.target.value=""}},Ae=N.jsxs(N.Fragment,{children:[N.jsx("input",{ref:W,type:"file",accept:".csv,text/csv",className:"hidden",onChange:We}),N.jsx("button",{onClick:()=>{var $;return($=W.current)==null?void 0:$.click()},className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Import CSV"})]});return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Produk"}),N.jsx("div",{className:"card p-4 grid gap-3",children:N.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.jsx("button",{onClick:_e,className:"px-3 py-2 rounded bg-black/10",children:"Export CSV"}),N.jsx("button",{onClick:xe,className:"px-3 py-2 rounded bg-black/10",children:"Export Contoh CSV"}),Ae,N.jsx("div",{className:"text-sm opacity-70",children:"Kolom: name, category, price, stock, barcode, minStock, hasMeasure, measureUnit, contentPerItem, stockContent, minContent"})]})}),N.jsx("div",{className:"card p-4 grid gap-3",children:N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-2",children:[N.jsx("input",{value:s,onChange:$=>o($.target.value),placeholder:"Nama"}),N.jsxs("select",{value:a,onChange:$=>l($.target.value),children:[N.jsx("option",{value:"",children:"Pilih Kategori"}),P.map($=>N.jsx("option",{value:$.name,children:$.name},$.id))]}),N.jsx("input",{value:c,onChange:$=>u($.target.value?Number($.target.value):""),placeholder:"Harga",type:"number"}),v?N.jsxs(N.Fragment,{children:[N.jsx("select",{value:k,onChange:$=>R($.target.value),children:uv.map($=>N.jsx("option",{value:$,children:$.toUpperCase()},$))}),N.jsx("input",{value:M,onChange:$=>z($.target.value?Number($.target.value):""),placeholder:"Isi per item",type:"number"}),N.jsx("input",{value:I,onChange:$=>S($.target.value?Number($.target.value):""),placeholder:"Stok isi",type:"number"}),N.jsx("input",{value:L,onChange:$=>D($.target.value?Number($.target.value):""),placeholder:"Min isi",type:"number"})]}):N.jsxs(N.Fragment,{children:[N.jsx("input",{value:h,onChange:$=>p($.target.value?Number($.target.value):""),placeholder:"Stok item",type:"number"}),N.jsx("input",{value:b,onChange:$=>A($.target.value?Number($.target.value):""),placeholder:"Min stok item",type:"number"})]}),N.jsx("input",{value:f,onChange:$=>y($.target.value),placeholder:"Barcode (opsional)"}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("input",{id:"hasMeasure",type:"checkbox",checked:v,onChange:$=>_($.target.checked)}),N.jsx("label",{htmlFor:"hasMeasure",className:"text-sm",children:"Detail kemasan"})]}),N.jsx("button",{onClick:ne,className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Tambah"})]})}),i&&N.jsxs("div",{className:"card p-4 grid gap-3",children:[N.jsx("div",{className:"font-semibold",children:"Kelola Kategori"}),N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[N.jsx("input",{value:q,onChange:$=>U($.target.value),placeholder:"Nama kategori baru"}),N.jsx("button",{onClick:re,className:"px-3 py-2 rounded bg-green-600 text-white",children:"Tambah Kategori"})]}),N.jsxs("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[P.map($=>N.jsxs("div",{className:"p-2 rounded bg-black/5 flex items-center justify-between",children:[N.jsx("span",{children:$.name}),N.jsx("button",{onClick:()=>ce($),className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]},$.id)),P.length===0&&N.jsx("div",{className:"opacity-70",children:"Belum ada kategori"})]})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Riwayat Barang"}),N.jsxs("div",{className:"grid gap-2 max-h-[520px] overflow-auto",children:[x.map($=>{const Te=$.hasMeasure?Number($.stockContent||0)<=Number($.minContent||0):Number($.stock||0)<=Number($.minStock||0);return N.jsxs("div",{className:`p-2 rounded grid grid-cols-[1fr_auto_auto_auto_auto_auto_auto] gap-2 items-center ${Te?"bg-red-50":"bg-black/5"}`,children:[N.jsxs("div",{children:[N.jsxs("div",{className:"font-semibold",children:[$.name," ",$.category&&N.jsxs("span",{className:"opacity-60",children:["(",$.category,")"]})]}),N.jsxs("div",{className:"text-xs opacity-70",children:["Barcode: ",$.barcode||"-"]})]}),$.hasMeasure?N.jsxs(N.Fragment,{children:[N.jsxs("div",{children:["Isi/item: ",Number($.contentPerItem||0)," ",($.measureUnit||"").toUpperCase()]}),N.jsxs("div",{children:["Stok isi: ",Number($.stockContent||0)," ",($.measureUnit||"").toUpperCase()]}),N.jsxs("div",{children:["Min isi: ",Number($.minContent||0)," ",($.measureUnit||"").toUpperCase()]})]}):N.jsxs(N.Fragment,{children:[N.jsxs("div",{children:["Min: ",Number($.minStock||0)]}),N.jsxs("div",{children:["Stok: ",Number($.stock||0)]}),N.jsx("div",{})]}),N.jsxs("div",{children:["Rp ",Number($.price||0).toLocaleString("id-ID")]}),N.jsx("button",{onClick:()=>Y($),className:"px-2 py-1 rounded bg-black/10",children:$.hasMeasure?"Min Isi":"Min Stok"}),N.jsx("button",{onClick:()=>ae($),className:"px-2 py-1 rounded bg-black/10",children:"Edit"}),N.jsx("button",{onClick:()=>F($),className:"px-2 py-1 rounded bg-black/10",children:$.hasMeasure?"Ubah Stok Isi":"Ubah Stok"}),N.jsx("button",{onClick:()=>Z($),className:"px-2 py-1 rounded bg-black/10",children:"Detail Kemasan"}),N.jsx("button",{onClick:()=>Q($),className:"px-2 py-1 rounded bg-red-500/90 text-white",children:"Hapus"})]},$.id)}),x.length===0&&N.jsx("div",{className:"opacity-70",children:"Belum ada produk"})]})]})]})}function kW({size:t="md"}){const e=t==="lg"?36:t==="sm"?24:28,n=t==="lg"?"text-xl":t==="sm"?"text-base":"text-lg",r=t==="lg"?"px-2 py-[2px]":"px-1.5 py-[1px]",i=t==="lg"?"gap-3":"gap-2";return N.jsxs("div",{className:`flex items-center ${i}`,children:[N.jsxs("svg",{width:e,height:e,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[N.jsx("defs",{children:N.jsxs("linearGradient",{id:"zyngraGrad",x1:"0",y1:"0",x2:"1",y2:"1",children:[N.jsx("stop",{offset:"0%",stopColor:"#7C3AED"}),N.jsx("stop",{offset:"50%",stopColor:"#4F46E5"}),N.jsx("stop",{offset:"100%",stopColor:"#06B6D4"})]})}),N.jsx("rect",{x:"4",y:"4",width:"56",height:"56",rx:"14",fill:"url(#zyngraGrad)"}),N.jsxs("g",{fill:"white",opacity:"0.95",children:[N.jsx("path",{d:"M20 19h24a3 3 0 0 1 3 3v26l-4-3-4 3-4-3-4 3-4-3-4 3V22a3 3 0 0 1 3-3z",opacity:"0.25"}),N.jsx("path",{d:"M22 24h20",stroke:"white",strokeWidth:"3",strokeLinecap:"round",opacity:"0.65"}),N.jsx("path",{d:"M22 30h12",stroke:"white",strokeWidth:"3",strokeLinecap:"round",opacity:"0.65"}),N.jsx("path",{d:"M38 26l-9 12h7l-4 9 12-14h-8l2-7z",fill:"white"})]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsxs("div",{className:`${n} font-bold tracking-tight`,children:[N.jsx("span",{className:"text-zinc-900 dark:text-white",children:"Zyngra"})," ",N.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:"POS"})]}),N.jsx("span",{className:`rounded-full bg-zinc-900/10 dark:bg-white/10 text-[10px] ${r} leading-none`,children:"RDA"})]})]})}const M4=[{to:"/dashboard",label:"Dashboard",icon:"📊"},{to:"/sales",label:"Penjualan",icon:"🛒"},{to:"/purchases",label:"Pembelian",icon:"📥"},{to:"/products",label:"Produk",icon:"📦"},{to:"/inventory",label:"Inventori",icon:"🗂️"},{to:"/stock-adjustments",label:"Penyesuaian",icon:"⚖️"},{to:"/cash",label:"Kas",icon:"💰"},{to:"/audit",label:"Audit",icon:"🧾"},{to:"/reports",label:"Laporan",icon:"📑"},{to:"/settings",label:"Settings",icon:"⚙️"},{to:"/store",label:"Profil Toko",icon:"🏪"}];function AW(){const{signOut:t}=Vr(),[e,n]=le.useState(!1),r=hu();return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed top-0 inset-x-0 z-50 bg-white/80 dark:bg-neutral-900/80 backdrop-blur border-b border-neutral-200 dark:border-neutral-800",children:N.jsxs("div",{className:"max-w-6xl mx-auto h-14 px-3 flex items-center justify-between",children:[N.jsx(kW,{size:"md"}),N.jsx(pw,{to:"/dashboard",className:"flex items-center gap-2 text-lg font-bold","aria-label":"Beranda"}),N.jsx("nav",{className:"hidden md:flex items-center gap-2",children:M4.map(i=>N.jsxs(pw,{to:i.to,title:i.label,className:({isActive:s})=>`group relative flex items-center justify-center w-11 h-11 rounded-xl transition ${s?"bg-neutral-900 text-white dark:bg-white dark:text-neutral-900":"bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-200"}`,children:[N.jsx("span",{className:"text-base",children:i.icon}),N.jsx("span",{className:"pointer-events-none absolute left-1/2 -translate-x-1/2 top-[calc(100%+8px)] whitespace-nowrap rounded-lg px-2 py-1 text-xs bg-neutral-900 text-white opacity-0 translate-y-1 group-hover:opacity-100 group-hover:translate-y-0 transition",children:i.label})]},i.to))}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:()=>n(!0),className:"md:hidden inline-flex items-center justify-center w-11 h-11 rounded-xl bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-200","aria-label":"Menu",children:"☰"}),N.jsx("button",{onClick:t,className:"inline-flex items-center justify-center w-11 h-11 rounded-xl bg-neutral-900 text-white dark:bg-white dark:text-neutral-900","aria-label":"Keluar",title:"Keluar",children:"⎋"})]})]})}),e&&N.jsxs("div",{className:"fixed inset-0 z-[60] md:hidden",children:[N.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>n(!1)}),N.jsxs("div",{className:"absolute top-0 inset-x-0 bg-white dark:bg-neutral-900 rounded-b-2xl shadow-xl ring-1 ring-black/10 p-4 grid gap-3",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[N.jsx("span",{className:"inline-block w-8 h-8 rounded-xl bg-gradient-to-br from-indigo-500 via-fuchsia-500 to-rose-500"}),N.jsx("span",{children:"Zyngra POS"})]}),N.jsx("button",{onClick:()=>n(!1),className:"inline-flex items-center justify-center w-10 h-10 rounded-lg bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700","aria-label":"Tutup",children:"✕"})]}),N.jsx("div",{className:"grid grid-cols-2 gap-2",children:M4.map(i=>N.jsxs("button",{onClick:()=>{r(i.to),n(!1)},className:"flex items-center gap-3 p-3 rounded-xl bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 text-left",children:[N.jsx("span",{className:"text-base",children:i.icon}),N.jsx("span",{className:"text-sm",children:i.label})]},i.to))})]})]})]})}function EW({open:t,onClose:e}){const[n,r]=le.useState("guide");if(!t)return null;const i=({title:o,children:a})=>N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"text-lg font-semibold",children:o}),N.jsx("div",{className:"grid gap-1 text-sm leading-relaxed",children:a})]}),s=({k:o,v:a})=>N.jsxs("div",{className:"grid gap-1 p-2 rounded bg-black/5",children:[N.jsx("div",{className:"font-medium",children:o}),N.jsx("div",{className:"opacity-80",children:a})]});return N.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[N.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),N.jsxs("div",{className:"relative w-[95vw] max-w-4xl max-h-[85vh] overflow-hidden rounded-2xl bg-white text-black shadow-xl",children:[N.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:"w-8 h-8 rounded-full bg-black/10 flex items-center justify-center text-base",children:"?"}),N.jsx("div",{className:"font-semibold",children:"Panduan & Istilah"})]}),N.jsx("button",{onClick:e,className:"px-3 py-1 rounded bg-black/10 hover:bg-black/20",children:"Tutup"})]}),N.jsxs("div",{className:"flex gap-2 px-3 pt-3 pb-2 border-b overflow-x-auto",children:[N.jsx("button",{onClick:()=>r("guide"),className:`px-3 py-2 rounded ${n==="guide"?"bg-black text-white":"bg-black/5"}`,children:"Cara Pakai"}),N.jsx("button",{onClick:()=>r("features"),className:`px-3 py-2 rounded ${n==="features"?"bg-black text-white":"bg-black/5"}`,children:"Fitur Utama"}),N.jsx("button",{onClick:()=>r("glossary"),className:`px-3 py-2 rounded ${n==="glossary"?"bg-black text-white":"bg-black/5"}`,children:"Istilah"}),N.jsx("button",{onClick:()=>r("shortcuts"),className:`px-3 py-2 rounded ${n==="shortcuts"?"bg-black text-white":"bg-black/5"}`,children:"Shortcut"}),N.jsx("button",{onClick:()=>r("faq"),className:`px-3 py-2 rounded ${n==="faq"?"bg-black text-white":"bg-black/5"}`,children:"FAQ"})]}),N.jsxs("div",{className:"p-4 overflow-auto max-h-[65vh] grid gap-6",children:[n==="guide"&&N.jsxs(N.Fragment,{children:[N.jsx(i,{title:"Langkah Cepat",children:N.jsxs("ul",{className:"list-decimal pl-5 grid gap-1",children:[N.jsxs("li",{children:["Masuk dengan email & kata sandi, pilih peran ",N.jsx("b",{children:"Admin"})," ","atau ",N.jsx("b",{children:"Kasir"}),"."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Produk"}),": tambah produk dan kategori. Jika ingin detail kemasan, aktifkan toggle, pilih unit (ml, l, g, kg, pcs), isi per item, stok isi, dan batas minimum."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Pembelian"}),": untuk menambah stok bahan baku atau biaya lain. Stok bertambah, biaya modal dihitung otomatis."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Penjualan"}),": cari produk, masukkan ke keranjang, pilih metode bayar (QRIS/Tunai/Kartu/Grab), lalu Checkout."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Cetak Struk"})," setelah penjualan. Lihat ",N.jsx("b",{children:"Riwayat"})," ","untuk cetak ulang atau koreksi."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Laporan"}),": unduh CSV/PDF harian–bulanan, lihat grafik dan ringkasan."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Kas & Shift"}),": catat kas masuk/keluar, buka/tutup shift, pantau saldo kas."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Inventory"}),": pantau stok, peringatan stok menipis, dan penyesuaian stok."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Audit"}),": jejak semua aksi penting (buat/ubah/hapus)."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Settings"}),": profil toko, izin kasir, masa trial."]})]})}),N.jsx(i,{title:"Tips",children:N.jsxs("ul",{className:"list-disc pl-5 grid gap-1",children:[N.jsxs("li",{children:["Gunakan ",N.jsx("b",{children:"detail kemasan"})," untuk bahan cair/berat supaya peringatan stok lebih akurat."]}),N.jsxs("li",{children:["Masukkan ",N.jsx("b",{children:"pembelian"})," agar HPP/COGS dan grafik margin akurat."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Admin"})," bisa ubah harga saat jual, kasir dibatasi."]})]})})]}),n==="features"&&N.jsxs(N.Fragment,{children:[N.jsx(i,{title:"Modul",children:N.jsxs("ul",{className:"list-disc pl-5 grid gap-1",children:[N.jsxs("li",{children:[N.jsx("b",{children:"Dashboard"}),": ringkasan Revenue, COGS, Gross Profit, Margin, penjualan terlaris, grafik."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Produk"}),": kategori, import–export CSV, stok item & stok isi, ambang minimum."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Pembelian"}),": bahan baku dan biaya lain, average cost, void pembelian."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Penjualan"}),": keranjang, metode bayar, cetak struk, riwayat."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Kas"}),": kas masuk/keluar, shift register."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Inventory"}),": mutasi stok, penyesuaian stok."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Audit"}),": jejak aktivitas."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Laporan"}),": CSV dan PDF."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Settings"}),": profil toko, izin, trial."]})]})}),N.jsx(i,{title:"Hak Akses Singkat",children:N.jsxs("ul",{className:"list-disc pl-5 grid gap-1",children:[N.jsxs("li",{children:[N.jsx("b",{children:"Admin"}),": semua fitur termasuk ubah harga, hapus/void, impor."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Kasir"}),": penjualan harian, terbatas sesuai pengaturan."]})]})})]}),n==="glossary"&&N.jsx(N.Fragment,{children:N.jsx(i,{title:"Istilah Umum",children:N.jsxs("div",{className:"grid gap-2",children:[N.jsx(s,{k:"Revenue (Pendapatan)",v:"Total nilai penjualan periode tertentu. Di aplikasi ini sama dengan total transaksi penjualan yang tercatat."}),N.jsx(s,{k:"COGS / HPP",v:"Biaya modal barang yang terjual. Dihitung dari average cost × jumlah terjual."}),N.jsx(s,{k:"Gross Profit (Laba Kotor)",v:"Revenue dikurangi COGS. Belum termasuk biaya lain seperti sewa, gaji, listrik."}),N.jsx(s,{k:"Margin",v:"Persentase: Gross Profit ÷ Revenue × 100%. Mengukur seberapa besar keuntungan kotor dari penjualan."}),N.jsx(s,{k:"Void",v:"Membatalkan dokumen (penjualan/pembelian). Pada pembelian bahan baku, stok akan dikembalikan seperti sebelum pembelian."}),N.jsx(s,{k:"Average Cost",v:"Biaya modal rata-rata per item yang bergerak berdasarkan pembelian masuk."}),N.jsx(s,{k:"Detail Kemasan",v:"Mode stok berbasis isi (ml, l, g, kg). Misal 1 botol sirup = 1000 ml, stok isi berkurang sesuai pemakaian."}),N.jsx(s,{k:"Min Stok / Min Isi",v:"Ambang peringatan stok menipis. Jika di bawah angka ini, produk ditandai mendekati habis."}),N.jsx(s,{k:"Kas Masuk / Keluar",v:"Pencatatan uang tunai yang masuk/keluar di kasir."}),N.jsx(s,{k:"Shift Register",v:"Pembukaan dan penutupan aktivitas kasir per shift, termasuk saldo awal/akhir."}),N.jsx(s,{k:"QRIS / Grab / Kartu",v:"Metode pembayaran non-tunai yang bisa dipilih saat checkout."})]})})}),n==="shortcuts"&&N.jsx(N.Fragment,{children:N.jsx(i,{title:"Shortcut Keyboard",children:N.jsxs("div",{className:"grid gap-2",children:[N.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-black/5",children:[N.jsx("span",{className:"font-medium",children:"F2"}),N.jsx("span",{className:"opacity-80",children:"Fokus ke kotak pencarian produk (Penjualan)"})]}),N.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-black/5",children:[N.jsx("span",{className:"font-medium",children:"Alt + K"}),N.jsx("span",{className:"opacity-80",children:"Checkout (Penjualan)"})]})]})})}),n==="faq"&&N.jsx(N.Fragment,{children:N.jsx(i,{title:"Pertanyaan Umum",children:N.jsxs("ul",{className:"list-disc pl-5 grid gap-1",children:[N.jsxs("li",{children:[N.jsx("b",{children:"Kenapa margin saya kecil?"})," Pastikan pembelian bahan baku dicatat agar COGS akurat."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Apakah kasir bisa ubah harga?"})," Tidak, kecuali diizinkan admin."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Struk tidak rapi?"})," Gunakan menu Cetak Struk dari riwayat penjualan; pilih printer thermal dan ukuran kertas yang sesuai."]}),N.jsxs("li",{children:[N.jsx("b",{children:"Data hilang saat logout?"})," Tidak. Semua transaksi tersimpan di Firestore organisasi Anda."]})]})})})]})]})]})}function IW(){const[t,e]=le.useState(!1),n=le.useCallback(()=>{const r=new KeyboardEvent("keydown",{key:"/",code:"Slash",shiftKey:!0,bubbles:!0});window.dispatchEvent(r)},[]);return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"fixed bottom-4 left-4 z-[9997] flex items-center gap-2",children:[N.jsx("button",{onClick:n,className:"w-12 h-12 rounded-full bg-black text-white text-xl flex items-center justify-center shadow-lg hover:opacity-90","aria-label":"Shortcut Navigasi",title:"Shortcut Navigasi (Shift+/)",children:"⌨"}),N.jsx("button",{onClick:()=>e(!0),className:"w-12 h-12 rounded-full bg-black text-white text-xl flex items-center justify-center shadow-lg hover:opacity-90","aria-label":"Help",title:"Help",children:"?"})]}),N.jsx(EW,{open:t,onClose:()=>e(!1)})]})}function NW(){return N.jsxs("div",{className:"min-h-screen bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[N.jsx(AW,{}),N.jsx("main",{className:"max-w-6xl mx-auto pt-16 px-3 pb-12",children:N.jsx(yR,{})}),N.jsx(IW,{})]})}var dT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},O4=ps.createContext&&ps.createContext(dT),PW=["attr","size","title"];function TW(t,e){if(t==null)return{};var n=CW(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function D0(){return D0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D0.apply(this,arguments)}function j4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(n),!0).forEach(function(r){LW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LW(t,e,n){return e=RW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RW(t){var e=DW(t,"string");return typeof e=="symbol"?e:e+""}function DW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fT(t){return t&&t.map((e,n)=>ps.createElement(e.tag,M0({key:n},e.attr),fT(e.child)))}function Ax(t){return e=>ps.createElement(MW,D0({attr:M0({},t.attr)},e),fT(t.child))}function MW(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=TW(t,PW),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ps.createElement("svg",D0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:M0(M0({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ps.createElement("title",null,s),t.children)};return O4!==void 0?ps.createElement(O4.Consumer,null,n=>e(n)):e(dT)}function OW(t){return Ax({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(t)}function jW(t){return Ax({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(t)}function FW(t){return Ax({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"},child:[]}]})(t)}function VW(){const t=mf(i=>i.items),e=mf(i=>i.remove),[n,r]=le.useState(null);return le.useEffect(()=>{const i=s=>{s.key==="Escape"&&t.forEach(o=>e(o.id))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,e]),N.jsx("div",{className:"fixed top-3 right-3 z-[9999] grid gap-2",children:t.map(i=>N.jsxs("div",{className:`toast-enter ${n===i.id?"toast-leave":""} flex items-start gap-3 px-4 py-3 rounded-2xl backdrop-blur-xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-black/40 shadow-2xl`,onAnimationEnd:()=>{n===i.id&&e(i.id)},children:[N.jsxs("div",{className:"text-2xl",children:[i.type==="success"&&N.jsx(OW,{className:"text-green-500"}),i.type==="info"&&N.jsx(FW,{className:"text-blue-500"}),i.type==="error"&&N.jsx(jW,{className:"text-red-500"})]}),N.jsxs("div",{className:"min-w-[220px] max-w-[320px]",children:[i.title&&N.jsx("div",{className:"font-semibold mb-0.5",children:i.title}),N.jsx("div",{className:"text-sm opacity-90",children:i.message})]}),N.jsx("button",{onClick:()=>r(i.id),className:"ml-2 text-xs px-2 py-1 rounded bg-black/10 dark:bg-white/20",children:"Tutup"})]},i.id))})}function BW(){const[t,e]=le.useState(mt());return le.useEffect(()=>{const n=setInterval(()=>e(mt()),1e3);return()=>clearInterval(n)},[]),N.jsxs("div",{className:"fixed bottom-3 right-3 z-[70] px-3 py-2 rounded-xl border border-black/10 bg-white/90 backdrop-blur shadow",children:[N.jsx("div",{className:"text-xs opacity-70",children:t.format("dddd")}),N.jsx("div",{className:"font-semibold",children:t.format("HH:mm:ss")}),N.jsx("div",{className:"text-xs opacity-70",children:t.format("DD/MM/YYYY")})]})}function UW(){const{org:t,refresh:e}=Vr(),{role:n}=Ea(),r=n==="admin",[i,s]=le.useState(""),[o,a]=le.useState(""),[l,c]=le.useState("");le.useEffect(()=>{(async()=>{var y,b,A;if(!t)return;const f=(await op(Ct(Ke,"orgs",t.id))).data();s(((y=f==null?void 0:f.store)==null?void 0:y.name)||"Zyngra POS"),a(((b=f==null?void 0:f.store)==null?void 0:b.address)||""),c(((A=f==null?void 0:f.store)==null?void 0:A.phone)||"")})()},[t==null?void 0:t.id]);const u=async()=>{if(t){if(!r){Oe.error("Hanya admin");return}await br(Ct(Ke,"orgs",t.id),{store:{name:i,address:o,phone:l}},{merge:!0}),await e(),Oe.success("Profil toko disimpan")}};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Profil Toko"}),r?N.jsxs("div",{className:"card p-4 grid gap-3 max-w-xl",children:[N.jsx("input",{placeholder:"Nama Toko",value:i,onChange:h=>s(h.target.value)}),N.jsx("input",{placeholder:"Alamat",value:o,onChange:h=>a(h.target.value)}),N.jsx("input",{placeholder:"Nomor Telepon",value:l,onChange:h=>c(h.target.value)}),N.jsx("button",{onClick:u,className:"px-3 py-2 rounded bg-blue-600 text-white w-fit",children:"Simpan"})]}):N.jsx("div",{className:"card p-4",children:"Menu ini hanya untuk Admin."})]})}function zW(){const{org:t}=Vr(),{shift:e,loading:n,open:r,close:i,addCashIn:s,addCashOut:o,refresh:a}=_x(),[l,c]=le.useState(""),[u,h]=le.useState(""),[p,f]=le.useState(""),[y,b]=le.useState(""),[A,v]=le.useState(""),[_,k]=le.useState(""),[R,M]=le.useState([]),[z,I]=le.useState([]),[S,L]=le.useState(null),[D,x]=le.useState([]),w=le.useMemo(()=>e?Number(e.openingCash||0)+Number(e.cashSales||0)+Number(e.cashIn||0)-Number(e.cashOut||0):0,[e]);le.useEffect(()=>{(async()=>{if(!t||!e){M([]);return}const H=Pn(It(Ke,"cashMovements"),Xt("orgId","==",t.id),Xt("shiftId","==",e.id)),ae=(await Tn(H)).docs.map(F=>({id:F.id,...F.data()}));ae.sort((F,Y)=>{var Z,Q,re,ce;return(((Q=(Z=Y.createdAt)==null?void 0:Z.toMillis)==null?void 0:Q.call(Z))||0)-(((ce=(re=F.createdAt)==null?void 0:re.toMillis)==null?void 0:ce.call(re))||0)}),M(ae.slice(0,30))})()},[t==null?void 0:t.id,e==null?void 0:e.id]),le.useEffect(()=>{(async()=>{if(!t){I([]);return}const H=Pn(It(Ke,"shifts"),Xt("orgId","==",t.id),kN(60)),F=(await Tn(H)).docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>{var Z;return(Z=Y.closedAt)==null?void 0:Z.toMillis}).sort((Y,Z)=>(Z.closedAt.toMillis()||0)-(Y.closedAt.toMillis()||0));I(F.slice(0,30))})()},[t==null?void 0:t.id,e==null?void 0:e.id]);const P=async O=>{if(!t)return;const H=Pn(It(Ke,"cashMovements"),Xt("orgId","==",t.id),Xt("shiftId","==",O.id)),ae=(await Tn(H)).docs.map(F=>({id:F.id,...F.data()}));ae.sort((F,Y)=>{var Z,Q,re,ce;return(((Q=(Z=Y.createdAt)==null?void 0:Z.toMillis)==null?void 0:Q.call(Z))||0)-(((ce=(re=F.createdAt)==null?void 0:re.toMillis)==null?void 0:ce.call(re))||0)}),x(ae.slice(0,60))},j=async()=>{try{await r(Number(l||0)),c(""),Oe.success("Shift dibuka")}catch{Oe.error("Gagal membuka shift")}},q=async()=>{if(!u)return Oe.error("Jumlah kosong");await s(Number(u||0),p.trim()),h(""),f(""),Oe.success("Setoran kas ditambahkan")},U=async()=>{if(!y)return Oe.error("Jumlah kosong");await o(Number(y||0),A.trim()),b(""),v(""),Oe.success("Penarikan kas ditambahkan")},W=async()=>{await i(Number(_||0)),k(""),Oe.success("Shift ditutup"),await a()};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Kas & Shift"}),n?N.jsx("div",{className:"card p-4",children:"Memuat..."}):e?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[N.jsx(hv,{title:"Setoran Awal",value:e.openingCash}),N.jsx(hv,{title:"Penjualan Tunai",value:e.cashSales}),N.jsx(hv,{title:"Kas (IN - OUT)",value:Number(e.cashIn||0)-Number(e.cashOut||0)})]}),N.jsxs("div",{className:"card p-4 grid md:grid-cols-3 gap-4",children:[N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Kas Masuk"}),N.jsx("input",{type:"number",placeholder:"Jumlah",value:u,onChange:O=>h(O.target.value?Number(O.target.value):"")}),N.jsx("input",{placeholder:"Keterangan (opsional)",value:p,onChange:O=>f(O.target.value)}),N.jsx("button",{onClick:q,className:"px-3 py-2 rounded bg-blue-600 text-white w-fit",children:"Tambah IN"})]}),N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Kas Keluar"}),N.jsx("input",{type:"number",placeholder:"Jumlah",value:y,onChange:O=>b(O.target.value?Number(O.target.value):"")}),N.jsx("input",{placeholder:"Keterangan (opsional)",value:A,onChange:O=>v(O.target.value)}),N.jsx("button",{onClick:U,className:"px-3 py-2 rounded bg-red-600 text-white w-fit",children:"Tambah OUT"})]}),N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Tutup Shift"}),N.jsxs("div",{className:"text-sm opacity-70",children:["Perkiraan kas: Rp ",w.toLocaleString("id-ID")]}),N.jsx("input",{type:"number",placeholder:"Hitung kas fisik",value:_,onChange:O=>k(O.target.value?Number(O.target.value):"")}),N.jsx("button",{onClick:W,className:"px-3 py-2 rounded bg-black text-white w-fit",children:"Tutup Shift"})]})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Aktivitas Kas (Shift Aktif)"}),N.jsxs("div",{className:"grid gap-2 max-h-[420px] overflow-auto",children:[R.map(O=>{var H;return N.jsxs("div",{className:"p-2 rounded bg-black/5 flex items-center justify-between",children:[N.jsxs("div",{className:"text-sm",children:[N.jsx("span",{className:O.type==="cash_out"?"text-red-600":"text-green-600",children:O.type==="cash_in"?"IN":O.type==="cash_out"?"OUT":"SALE"})," ","• ",O.reason||"-"]}),N.jsxs("div",{className:"text-sm",children:["Rp ",Number(O.amount||0).toLocaleString("id-ID")," •"," ",(H=O.createdAt)!=null&&H.toDate?mt(O.createdAt.toDate()).format("DD/MM HH:mm"):"-"]})]},O.id)}),R.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada aktivitas"})]})]})]}):N.jsxs("div",{className:"card p-4 grid gap-3 max-w-md",children:[N.jsx("div",{className:"font-semibold",children:"Buka Shift"}),N.jsx("input",{type:"number",placeholder:"Setoran awal kas",value:l,onChange:O=>c(O.target.value?Number(O.target.value):"")}),N.jsx("button",{onClick:j,className:"px-3 py-2 rounded bg-green-600 text-white w-fit",children:"Buka Shift"})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Riwayat Shift (30 Terbaru)"}),N.jsxs("div",{className:"grid gap-2",children:[z.map(O=>{var Z,Q;const H=Number(O.openingCash||0)+Number(O.cashSales||0)+Number(O.cashIn||0)-Number(O.cashOut||0),ne=Number(O.closingCash||0)-H,ae=(Z=O.openedAt)!=null&&Z.toDate?mt(O.openedAt.toDate()).format("DD/MM HH:mm"):"-",F=(Q=O.closedAt)!=null&&Q.toDate?mt(O.closedAt.toDate()).format("DD/MM HH:mm"):"-",Y=O.openedByUid?`• by ${O.openedByUid.slice(0,6)}…`:"";return N.jsxs("div",{className:"p-3 rounded-xl bg-black/5",children:[N.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[N.jsxs("div",{className:"text-sm opacity-80",children:[ae," → ",F," ",Y]}),N.jsxs("div",{className:"text-sm",children:["Total Tunai:"," ",N.jsxs("b",{children:["Rp ",Number(O.cashSales||0).toLocaleString("id-ID")]})]})]}),N.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-5 gap-2 text-sm",children:[N.jsx(Od,{label:"Setoran Awal",value:O.openingCash}),N.jsx(Od,{label:"IN",value:O.cashIn}),N.jsx(Od,{label:"OUT",value:O.cashOut}),N.jsx(Od,{label:"Perkiraan",value:H}),N.jsx(Od,{label:"Closing",value:O.closingCash})]}),N.jsxs("div",{className:`mt-2 text-sm font-semibold ${ne===0?"text-green-700":ne>0?"text-blue-700":"text-red-700"}`,children:["Selisih:"," ",ne===0?"Seimbang":`Rp ${Math.abs(ne).toLocaleString("id-ID")} ${ne>0?"(lebih)":"(kurang)"}`]}),N.jsx("div",{className:"mt-2",children:N.jsx("button",{onClick:async()=>{L(O),await P(O)},className:"px-3 py-1.5 rounded bg-black/10",children:"Lihat Log"})}),(S==null?void 0:S.id)===O.id&&N.jsxs("div",{className:"mt-2 border-t border-black/10 pt-2 grid gap-1 max-h-[280px] overflow-auto",children:[D.map(re=>{var ce;return N.jsxs("div",{className:"p-2 rounded bg-white/70 flex items-center justify-between",children:[N.jsxs("div",{className:"text-sm",children:[N.jsx("span",{className:re.type==="cash_out"?"text-red-600":"text-green-600",children:re.type==="cash_in"?"IN":re.type==="cash_out"?"OUT":"SALE"})," ","• ",re.reason||"-"]}),N.jsxs("div",{className:"text-sm",children:["Rp ",Number(re.amount||0).toLocaleString("id-ID")," •"," ",(ce=re.createdAt)!=null&&ce.toDate?mt(re.createdAt.toDate()).format("DD/MM HH:mm"):"-"]})]},re.id)}),D.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Tidak ada log"})]})]},O.id)}),z.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada shift yang ditutup"})]})]})]})}function hv({title:t,value:e}){return N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"text-sm opacity-70 mb-1",children:t}),N.jsxs("div",{className:"text-2xl font-bold",children:["Rp ",Number(e||0).toLocaleString("id-ID")]})]})}function Od({label:t,value:e}){return N.jsxs("div",{className:"px-3 py-1.5 rounded-xl bg-white/70 border border-black/10",children:[N.jsx("div",{className:"text-xs opacity-70",children:t}),N.jsxs("div",{className:"font-semibold",children:["Rp ",Number(e||0).toLocaleString("id-ID")]})]})}function qW(){const{org:t,user:e,userDoc:n}=Vr(),{role:r}=Ea(),i=r==="admin",[s,o]=le.useState([]),[a,l]=le.useState(""),[c,u]=le.useState([]),[h,p]=le.useState(""),[f,y]=le.useState(""),[b,A]=le.useState("");le.useEffect(()=>{(async()=>{if(!t)return;const z=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),S=(await Tn(z)).docs.map(L=>({id:L.id,...L.data()}));S.sort((L,D)=>String(L.name||"").localeCompare(String(D.name||""))),o(S),!a&&S.length&&l(S[0].id)})()},[t==null?void 0:t.id]),le.useEffect(()=>{(async()=>{if(!t||!a){u([]);return}const z=Pn(It(Ke,"stockMoves"),Xt("orgId","==",t.id),Xt("productId","==",a)),S=(await Tn(z)).docs.map(L=>({id:L.id,...L.data()}));S.sort((L,D)=>{var x,w,P,j;return(((w=(x=D.createdAt)==null?void 0:x.toMillis)==null?void 0:w.call(x))||0)-(((j=(P=L.createdAt)==null?void 0:P.toMillis)==null?void 0:j.call(P))||0)}),u(S.slice(0,100))})()},[t==null?void 0:t.id,a]);const v=le.useMemo(()=>s.find(M=>M.id===a),[s,a]),_=async M=>{if(!t||!n||!v)return;if(!i){Oe.error("Hanya admin");return}const z=Number(h||0)*M;if(!Number.isFinite(z)||z===0){Oe.error("Jumlah tidak valid");return}try{await Vh(Ke,async D=>{const x=Ct(Ke,"products",v.id),P=(await D.get(x)).data(),j=Number((P==null?void 0:P.stock)||0),q=j+z;if(q<0)throw new Error("Stok tidak boleh negatif");D.update(x,{stock:q}),await yi(It(Ke,"stockMoves"),{orgId:t.id,productId:v.id,type:z>0?"adjust_in":"adjust_out",qty:Math.abs(z),stockBefore:j,stockAfter:q,reason:b||"",createdAt:fn(),byUid:n.uid})}),await an({orgId:t.id,user:e,entity:"stock",action:"adjust",entityId:v.id,after:{delta:z,reason:b}}),p(""),A(""),Oe.success("Mutasi stok tersimpan");const I=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),L=(await Tn(I)).docs.map(D=>({id:D.id,...D.data()}));L.sort((D,x)=>String(D.name||"").localeCompare(String(x.name||""))),o(L)}catch(I){Oe.error((I==null?void 0:I.message)||"Gagal mutasi")}},k=async()=>{if(!t||!n||!v)return;if(!i){Oe.error("Hanya admin");return}const M=Number(f||0);if(!Number.isFinite(M)||M<0){Oe.error("Jumlah tidak valid");return}try{await Vh(Ke,async L=>{const D=Ct(Ke,"products",v.id),w=(await L.get(D)).data(),P=Number((w==null?void 0:w.stock)||0),j=M;L.update(D,{stock:j}),await yi(It(Ke,"stockMoves"),{orgId:t.id,productId:v.id,type:"opname",qty:Math.abs(j-P),stockBefore:P,stockAfter:j,reason:b||"Opname",createdAt:fn(),byUid:n.uid})}),await an({orgId:t.id,user:e,entity:"stock",action:"opname",entityId:v.id,after:{to:M,reason:b}}),y(""),A(""),Oe.success("Opname tersimpan");const z=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),S=(await Tn(z)).docs.map(L=>({id:L.id,...L.data()}));S.sort((L,D)=>String(L.name||"").localeCompare(String(D.name||""))),o(S)}catch(z){Oe.error((z==null?void 0:z.message)||"Gagal opname")}},R=async()=>{if(!t||!v)return;if(!i){Oe.error("Hanya admin");return}const M=prompt("Set minimum stok",String(v.minStock??0));if(M===null)return;const z=Number(M);if(!Number.isFinite(z)||z<0){Oe.error("Nilai tidak valid");return}await br(Ct(Ke,"products",v.id),{minStock:z},{merge:!0});const I=s.map(S=>S.id===v.id?{...S,minStock:z}:S);o(I),Oe.success("Min stok disimpan")};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Stok"}),N.jsx("div",{className:"card p-4 grid gap-3",children:N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[N.jsx("select",{value:a,onChange:M=>l(M.target.value),children:s.map(M=>N.jsxs("option",{value:M.id,children:[M.name," ",M.category?`(${M.category})`:""," • Stok"," ",Number(M.stock||0)]},M.id))}),N.jsx("button",{onClick:R,className:"px-3 py-2 rounded bg-black/10",children:"Atur Min Stok"}),v&&N.jsxs("div",{className:"text-sm opacity-70",children:["Min: ",Number(v.minStock||0)," •",Number(v.stock||0)<=Number(v.minStock||0)?" Stok menipis":" Stok aman"]})]})}),N.jsxs("div",{className:"card p-4 grid md:grid-cols-3 gap-4",children:[N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Penyesuaian +"}),N.jsx("input",{type:"number",placeholder:"Jumlah",value:h,onChange:M=>p(M.target.value?Number(M.target.value):"")}),N.jsx("input",{placeholder:"Keterangan (opsional)",value:b,onChange:M=>A(M.target.value)}),N.jsx("button",{onClick:()=>_(1),className:"px-3 py-2 rounded bg-green-600 text-white w-fit",children:"Tambah Stok"})]}),N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Penyesuaian −"}),N.jsx("input",{type:"number",placeholder:"Jumlah",value:h,onChange:M=>p(M.target.value?Number(M.target.value):"")}),N.jsx("input",{placeholder:"Keterangan (opsional)",value:b,onChange:M=>A(M.target.value)}),N.jsx("button",{onClick:()=>_(-1),className:"px-3 py-2 rounded bg-red-600 text-white w-fit",children:"Kurangi Stok"})]}),N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"font-semibold",children:"Opname"}),N.jsx("input",{type:"number",placeholder:"Set ke jumlah",value:f,onChange:M=>y(M.target.value?Number(M.target.value):"")}),N.jsx("input",{placeholder:"Keterangan (opsional)",value:b,onChange:M=>A(M.target.value)}),N.jsx("button",{onClick:k,className:"px-3 py-2 rounded bg-black text-white w-fit",children:"Simpan Opname"})]})]}),N.jsxs("div",{className:"card p-4",children:[N.jsx("div",{className:"font-semibold mb-2",children:"Riwayat Mutasi"}),N.jsxs("div",{className:"grid gap-2 max-height-[520px] overflow-auto",children:[c.map(M=>{var z;return N.jsxs("div",{className:"p-2 rounded bg-black/5 flex items-center justify-between",children:[N.jsxs("div",{className:"text-sm",children:[M.type==="adjust_in"?"IN +":M.type==="adjust_out"?"OUT −":M.type==="opname"?"OPNAME":"SALE"," • "," ",M.reason||"-"]}),N.jsxs("div",{className:"text-sm",children:[M.stockBefore," → ",M.stockAfter," • "," ",(z=M.createdAt)!=null&&z.toDate?mt(M.createdAt.toDate()).format("DD/MM HH:mm"):"-"]})]},M.id)}),c.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Belum ada mutasi"})]})]})]})}const HW=["all","product","category","sale","cash","shift","stock","purchase"];function WW(){const{org:t}=Vr(),[e,n]=le.useState([]),[r,i]=le.useState("all"),[s,o]=le.useState(""),[a,l]=le.useState("");le.useEffect(()=>{(async()=>{if(!t){n([]);return}const p=Pn(It(Ke,"logs"),Xt("orgId","==",t.id)),y=(await Tn(p)).docs.map(b=>({id:b.id,...b.data()}));y.sort((b,A)=>{var v,_,k,R;return(((_=(v=A.createdAt)==null?void 0:v.toMillis)==null?void 0:_.call(v))||0)-(((R=(k=b.createdAt)==null?void 0:k.toMillis)==null?void 0:R.call(k))||0)}),n(y.slice(0,200))})()},[t==null?void 0:t.id]);const c=le.useMemo(()=>{const h=s.trim().toLowerCase(),p=a.trim().toLowerCase();return e.filter(f=>{const y=r==="all"?!0:f.entity===r,b=h?JSON.stringify([f.before,f.after,f.meta]).toLowerCase().includes(h)||String(f.entityId||"").toLowerCase().includes(h):!0,A=p?String(f.byEmail||"").toLowerCase().includes(p)||String(f.byUid||"").toLowerCase().includes(p):!0;return y&&b&&A})},[e,r,s,a]),u=()=>{var A;const p=[["time","entity","action","entityId","byEmail","byUid","before","after","meta"].join(",")];for(const v of c){const k=[(A=v.createdAt)!=null&&A.toDate?mt(v.createdAt.toDate()).format("YYYY-MM-DD HH:mm:ss"):"",v.entity,v.action,v.entityId||"",v.byEmail||"",v.byUid||"",JSON.stringify(v.before||{}),JSON.stringify(v.after||{}),JSON.stringify(v.meta||{})],R=M=>/[",\n]/.test(M)?`"${M.replace(/"/g,'""')}"`:M;p.push(k.map(M=>R(String(M))).join(","))}const f=new Blob([p.join(`
`)],{type:"text/csv;charset=utf-8;"}),y=URL.createObjectURL(f),b=document.createElement("a");b.href=y,b.download="audit-logs.csv",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y)};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Audit Trail"}),N.jsxs("div",{className:"card p-4 grid md:grid-cols-4 gap-3",children:[N.jsx("select",{value:r,onChange:h=>i(h.target.value),children:HW.map(h=>N.jsx("option",{value:h,children:h.toUpperCase()},h))}),N.jsx("input",{placeholder:"Cari teks (before/after/meta)",value:s,onChange:h=>o(h.target.value)}),N.jsx("input",{placeholder:"Filter user (email/uid)",value:a,onChange:h=>l(h.target.value)}),N.jsx("button",{onClick:u,className:"px-3 py-2 rounded bg-black/10",children:"Export CSV"})]}),N.jsx("div",{className:"card p-4",children:N.jsxs("div",{className:"grid gap-2 max-h-[560px] overflow-auto",children:[c.map(h=>{var p;return N.jsxs("div",{className:"p-2 rounded bg-black/5",children:[N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsxs("div",{className:"text-sm",children:[N.jsx("b",{children:h.entity.toUpperCase()})," • ",h.action.toUpperCase()," •"," ",h.entityId||"-"]}),N.jsxs("div",{className:"text-xs opacity-70",children:[(p=h.createdAt)!=null&&p.toDate?mt(h.createdAt.toDate()).format("DD/MM HH:mm:ss"):""," ","• ",h.byEmail||h.byUid||"-"]})]}),N.jsxs("div",{className:"mt-1 grid md:grid-cols-3 gap-2 text-xs",children:[N.jsx("pre",{className:"p-2 rounded bg-white/70 border border-black/10 overflow-auto",children:JSON.stringify(h.before||{},null,2)}),N.jsx("pre",{className:"p-2 rounded bg-white/70 border border-black/10 overflow-auto",children:JSON.stringify(h.after||{},null,2)}),N.jsx("pre",{className:"p-2 rounded bg-white/70 border border-black/10 overflow-auto",children:JSON.stringify(h.meta||{},null,2)})]})]},h.id)}),c.length===0&&N.jsx("div",{className:"opacity-70 text-sm",children:"Tidak ada log"})]})})]})}const $W={title:"Global",items:[{keys:"? / Ctrl+/",label:"Buka Shortcut"},{keys:"Esc",label:"Tutup"}]},KW={title:"Penjualan",items:[{keys:"F2",label:"Fokus Pencarian Produk"},{keys:"Alt+K",label:"Checkout"}]},GW={title:"Login & Peran",items:[{keys:"Enter",label:"Kirim Form"}]},YW={title:"Pembelian",items:[]};function QW(t){const e=[$W];return t.startsWith("/sales")&&e.push(KW),(t.startsWith("/login")||t.startsWith("/role"))&&e.push(GW),t.startsWith("/purchases")&&e.push(YW),e}function XW({children:t}){return N.jsx("span",{className:"px-2 py-1 rounded-md border border-black/10 bg-white text-xs leading-none shadow-sm",children:t})}function JW({data:t}){return N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"text-sm font-semibold opacity-70",children:t.title}),N.jsxs("div",{className:"grid gap-2",children:[t.items.map((e,n)=>N.jsxs("div",{className:"flex items-center justify-between gap-4",children:[N.jsx("div",{className:"text-sm",children:e.label}),N.jsx(XW,{children:e.keys})]},n)),t.items.length===0&&N.jsx("div",{className:"text-sm opacity-60",children:"Tidak ada shortcut khusus"})]})]})}function ZW(){const{isOpen:t,close:e}=n$(),{pathname:n}=uu(),r=hu(),i=le.useMemo(()=>QW(n),[n]);return le.useEffect(()=>{if(!t)return;const s=o=>{o.key==="Escape"&&(o.preventDefault(),e()),o.key.toLowerCase()==="g"&&(o.altKey||o.ctrlKey||o.metaKey)};return window.addEventListener("keydown",s,{capture:!0}),()=>window.removeEventListener("keydown",s,{capture:!0})},[t,e]),t?N.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[N.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:e}),N.jsx("div",{className:"absolute inset-0 flex items-start justify-center p-4 md:p-8",children:N.jsxs("div",{className:"w-full max-w-xl rounded-2xl bg-white text-black shadow-2xl ring-1 ring-black/10 overflow-hidden",children:[N.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-black/10",children:[N.jsx("div",{className:"font-semibold",children:"Shortcut & Navigasi Cepat"}),N.jsx("button",{onClick:e,className:"px-2 py-1 rounded-md bg-black/5 text-sm",children:"Tutup"})]}),N.jsxs("div",{className:"p-4 grid gap-6",children:[N.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((s,o)=>N.jsx(JW,{data:s},o))}),N.jsxs("div",{className:"grid gap-2",children:[N.jsx("div",{className:"text-sm font-semibold opacity-70",children:"Navigasi"}),N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[N.jsx("button",{onClick:()=>{r("/sales"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Penjualan"}),N.jsx("button",{onClick:()=>{r("/purchases"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Pembelian"}),N.jsx("button",{onClick:()=>{r("/products"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Produk"}),N.jsx("button",{onClick:()=>{r("/dashboard"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Dashboard"}),N.jsx("button",{onClick:()=>{r("/audit"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Audit"}),N.jsx("button",{onClick:()=>{r("/settings"),e()},className:"px-3 py-2 rounded-lg bg-black/5 text-sm",children:"Settings"})]})]}),N.jsxs("div",{className:"text-xs opacity-60",children:["Tekan ",N.jsx("span",{className:"font-semibold",children:"Esc"})," untuk menutup"]})]})]})})]}):null}const pT=le.createContext(null);function e$(t){var r;const e=t;if(!e)return!1;const n=(r=e.tagName)==null?void 0:r.toLowerCase();return!!(n==="input"||n==="textarea"||n==="select"||e.isContentEditable)}function t$({children:t}){const[e,n]=le.useState(!1),r=()=>n(!0),i=()=>n(!1),s=()=>n(a=>!a);le.useEffect(()=>{const a=l=>{if(e$(l.target))return;const c=l.key;if((l.ctrlKey||l.metaKey)&&c==="/"){l.preventDefault(),r();return}if(c==="?"||c==="/"&&l.shiftKey){l.preventDefault(),r();return}if(c==="Escape"&&e){l.preventDefault(),i();return}};return window.addEventListener("keydown",a,{capture:!0}),()=>window.removeEventListener("keydown",a,{capture:!0})},[e]);const o=le.useMemo(()=>({isOpen:e,open:r,close:i,toggle:s}),[e]);return N.jsxs(pT.Provider,{value:o,children:[t,N.jsx(ZW,{}),N.jsx("button",{onClick:s,className:"fixed bottom-4 right-4 z-[900] md:hidden rounded-full shadow-lg ring-1 ring-black/10 bg-white px-4 h-10 text-sm","aria-label":"Buka Shortcut",children:"?"})]})}const n$=()=>le.useContext(pT);function r$(){const{org:t,user:e}=Vr(),{role:n}=Ea(),r=n==="admin",[i,s]=le.useState([]),[o,a]=le.useState(""),[l,c]=le.useState(""),[u,h]=le.useState("Opname"),[p,f]=le.useState(""),[y,b]=le.useState(()=>mt().format("YYYY-MM-DD")),[A,v]=le.useState([]),[_,k]=le.useState(""),R=le.useRef(null);le.useEffect(()=>{const I=async()=>{if(!t)return;const L=Pn(It(Ke,"products"),Xt("orgId","==",t.id)),x=(await Tn(L)).docs.map(w=>({id:w.id,...w.data()}));x.sort((w,P)=>String(w.name||"").localeCompare(String(P.name||""))),s(x),!o&&x.length&&a(x[0].id)},S=async()=>{if(!t)return;const L=Pn(It(Ke,"stockMoves"),Xt("orgId","==",t.id),Xt("type","==","adjustment")),x=(await Tn(L)).docs.map(P=>({id:P.id,...P.data()})),w=new Map;i.forEach(P=>w.set(P.id,P.name)),x.forEach(P=>{P.productName=w.get(P.productId)||P.productId}),x.sort((P,j)=>{var q,U,W,O;return(((U=(q=j.createdAt)==null?void 0:q.toMillis)==null?void 0:U.call(q))||0)-(((O=(W=P.createdAt)==null?void 0:W.toMillis)==null?void 0:O.call(W))||0)}),v(x)};I().then(S)},[t==null?void 0:t.id]),le.useEffect(()=>{const I=new Map;i.forEach(S=>I.set(S.id,S.name)),v(S=>S.map(L=>({...L,productName:I.get(L.productId)||L.productId})))},[i]);const M=le.useMemo(()=>{const I=_.trim().toLowerCase();return I?A.filter(S=>{const L=String(S.productName||"").toLowerCase(),D=String(S.reason||"").toLowerCase(),x=String(S.note||"").toLowerCase();return L.includes(I)||D.includes(I)||x.includes(I)}):A},[A,_]),z=async()=>{if(!t)return Oe.error("Organisasi belum siap");if(!r)return Oe.error("Hanya admin");if(!o)return Oe.error("Pilih produk");const I=Number(l);if(!Number.isFinite(I)||I===0)return Oe.error("Masukkan angka selain 0. Gunakan minus untuk mengurangi");try{await Vh(Ke,async w=>{var O;const P=Ct(Ke,"products",o),j=await w.get(P);if(!j.exists())throw new Error("Produk tidak ditemukan");const q=Number(((O=j.data())==null?void 0:O.stock)||0),U=q+I;if(U<0)throw new Error("Stok tidak boleh negatif");w.update(P,{stock:U});const W=Ct(It(Ke,"stockMoves"));w.set(W,{orgId:t.id,productId:o,type:"adjustment",qty:Math.abs(I),delta:I,stockBefore:q,stockAfter:U,reason:u||"Koreksi",note:p.trim()||null,adjustmentDate:kn.fromDate(mt(y).toDate()),createdAt:fn(),byUid:(e==null?void 0:e.uid)||null})}),await an({orgId:t.id,user:e,entity:"stock",action:"adjustment",entityId:o,after:{delta:Number(l),reason:u,note:p.trim()||null}}),c(""),f(""),Oe.success("Stok diperbarui");const S=Pn(It(Ke,"stockMoves"),Xt("orgId","==",t.id),Xt("type","==","adjustment")),D=(await Tn(S)).docs.map(w=>({id:w.id,...w.data()})),x=new Map;i.forEach(w=>x.set(w.id,w.name)),D.forEach(w=>{w.productName=x.get(w.productId)||w.productId}),D.sort((w,P)=>{var j,q,U,W;return(((q=(j=P.createdAt)==null?void 0:j.toMillis)==null?void 0:q.call(j))||0)-(((W=(U=w.createdAt)==null?void 0:U.toMillis)==null?void 0:W.call(U))||0)}),v(D)}catch(S){Oe.error((S==null?void 0:S.message)||"Gagal penyesuaian stok")}};return N.jsxs("div",{className:"grid gap-6",children:[N.jsx("h1",{className:"text-2xl font-bold",children:"Penyesuaian Stok"}),N.jsx("div",{className:"card p-4 grid gap-3",children:N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2",children:[N.jsx("select",{ref:R,value:o,onChange:I=>a(I.target.value),children:i.map(I=>N.jsxs("option",{value:I.id,children:[I.name," ",I.category?`(${I.category})`:""," • Stok"," ",Number(I.stock||0)]},I.id))}),N.jsx("input",{type:"number",placeholder:"Delta (mis. 5 atau -3)",value:l,onChange:I=>c(I.target.value)}),N.jsxs("select",{value:u,onChange:I=>h(I.target.value),children:[N.jsx("option",{children:"Opname"}),N.jsx("option",{children:"Barang Rusak"}),N.jsx("option",{children:"Hilang"}),N.jsx("option",{children:"Koreksi"}),N.jsx("option",{children:"Gratis/Promo"}),N.jsx("option",{children:"Lainnya"})]}),N.jsx("input",{placeholder:"Catatan (opsional)",value:p,onChange:I=>f(I.target.value)}),N.jsx("input",{type:"date",value:y,onChange:I=>b(I.target.value)}),N.jsx("button",{onClick:z,className:"px-3 py-2 rounded bg-green-600 text-white",children:"Simpan"})]})}),N.jsxs("div",{className:"card p-4 grid gap-3",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("div",{className:"font-semibold",children:"Riwayat Penyesuaian"}),N.jsx("input",{value:_,onChange:I=>k(I.target.value),placeholder:"Cari nama/alasannya",className:"w-64 max-w-full"})]}),N.jsxs("div",{className:"grid gap-2 max-h-[520px] overflow-auto",children:[M.map(I=>{var S;return N.jsxs("div",{className:"p-2 rounded bg-black/5 grid grid-cols-[1fr_auto_auto] gap-2 items-center",children:[N.jsxs("div",{children:[N.jsxs("div",{className:"text-sm opacity-70",children:[(S=I.adjustmentDate)!=null&&S.toDate?mt(I.adjustmentDate.toDate()).format("DD/MM/YYYY"):"-"," ","• ",I.reason]}),N.jsx("div",{className:"font-semibold",children:I.productName}),N.jsxs("div",{className:"text-xs opacity-70",children:["Stok: ",I.stockBefore," → ",I.stockAfter]}),I.note?N.jsxs("div",{className:"text-xs opacity-70",children:["Catatan: ",I.note]}):null]}),N.jsx("div",{className:`px-2 py-1 rounded text-sm ${I.delta>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.delta>=0?`+${I.delta}`:`${I.delta}`}),N.jsx("div",{className:"text-sm opacity-70",children:"Rp 0"})]},I.id)}),M.length===0&&N.jsx("div",{className:"opacity-70",children:"Belum ada penyesuaian"})]})]})]})}function i$({children:t}){const{user:e,loading:n,org:r}=Vr(),{role:i}=Ea(),s=hu();return le.useEffect(()=>{!n&&e&&!i&&s("/role")},[n,e,i,s]),n?N.jsx("div",{className:"p-8",children:"Memuat..."}):e?i?r&&r.trialExpiresAt&&r.trialExpiresAt.toMillis()<Date.now()?N.jsx(mW,{}):t:null:N.jsx(a2,{to:"/login",replace:!0})}function s$(){const[t,e]=le.useState(!1);return le.useEffect(()=>{e(!0)},[]),t?N.jsxs(rF,{children:[N.jsx(VW,{}),N.jsx(BW,{}),N.jsx(t$,{children:N.jsxs(bR,{children:[N.jsx(Pr,{path:"/login",element:N.jsx(TF,{})}),N.jsx(Pr,{path:"/role",element:N.jsx(wW,{})}),N.jsxs(Pr,{element:N.jsx(i$,{children:N.jsx(NW,{})}),children:[N.jsx(Pr,{path:"/",element:N.jsx(a2,{to:"/dashboard",replace:!0})}),N.jsx(Pr,{path:"/dashboard",element:N.jsx(Kq,{})}),N.jsx(Pr,{path:"/sales",element:N.jsx(lH,{})}),N.jsx(Pr,{path:"/purchases",element:N.jsx(uH,{})}),N.jsx(Pr,{path:"/products",element:N.jsx(SW,{})}),N.jsx(Pr,{path:"/reports",element:N.jsx(pW,{})}),N.jsx(Pr,{path:"/settings",element:N.jsx(gW,{})}),N.jsx(Pr,{path:"/store",element:N.jsx(UW,{})}),N.jsx(Pr,{path:"/cash",element:N.jsx(zW,{})}),N.jsx(Pr,{path:"/inventory",element:N.jsx(qW,{})}),N.jsx(Pr,{path:"/audit",element:N.jsx(WW,{})}),N.jsx(Pr,{path:"/stock-adjustments",element:N.jsx(r$,{})})]}),N.jsx(Pr,{path:"*",element:N.jsx(a2,{to:"/",replace:!0})})]})})]}):null}dv.createRoot(document.getElementById("root")).render(N.jsx(ps.StrictMode,{children:N.jsx(IR,{children:N.jsx(s$,{})})}));export{rn as _,Zd as c,bp as g};
